!function(e){function t(t){for(var i,o,a=t[0],r=t[1],s=0,u=[];s<a.length;s++)o=a[s],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(l&&l(t);u.length;)u.shift()()}var i={},n={41:0,0:0,1:0,11:0,14:0,82:0,96:0,97:0,118:0,122:0};function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,o){i=n[e]=[t,o]}));t.push(i[2]=a);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+""+e+"."+{0:"56e6566d4b0c5666ea4b",1:"714bc90b0b5acaca7f2f",2:"0311286ac2d017d327bc",3:"92d74d25cfc5d1038fe6",4:"433a295581adc0bbe46b",5:"03a56739fba3983898ab",7:"ff2650029817079272fb",8:"a55238a0b7fd9ef1b8af",9:"2de2976a4bbf1271532a",10:"848d26bceb43a7fbd4bb",11:"a6602b3ced42c0635436",12:"c57fd3a3e061fe12043d",13:"941eb3c872931bdcabbc",14:"c2f03e69299d820478fd",16:"bb7c934aa570f8985eae",17:"6a81cfea9269b940732c",18:"8dda855e4fcf7e05b308",69:"693914c8721ee967a8b0",70:"944d2d733908f0dd4159",71:"f400431c7724b6ae304b",75:"efaac141065a0dfcd654",86:"59b2d1474906c58e766d",87:"f1c6c566f720de632d64",88:"5a8b638d45cf426ec7ee",89:"0209992b066c5febf49a",90:"372fa21389e3e3b267a0",91:"1845accd0663e1ffa10d",92:"5e476bed6db8fd694cf1",93:"a06004ecd3902581f3e7",94:"ae33b2b8f9113f66a0db",100:"87fcf4731154bd68603d",101:"38f2c021cc5035ded0ce",102:"dc8c9fe5c9452e4ab384",103:"a3bd6da2e206c8226338",104:"85a1bec73090ef0663f4",105:"f3098341b9bcc73f0089",106:"c1f03eab08775eff393c",107:"29460d60738ffc6ec973",109:"8845a77af589d624fd1f",110:"c4f814a0d130ab14bd8c",111:"c4b747660abe3734b814",112:"f4956e7195e30de82655",119:"21b10ac8963939e45610",120:"b85e5fe88634c50034f8",121:"79a7785b0568bcb126e0"}[e]+".js"}(e);var l=new Error;r=function(t){s.onerror=s.onload=null,clearTimeout(u);var i=n[e];if(0!==i){if(i){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,i[1](l)}n[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/themes/picdrop/js_built_prod/",o.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],r=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=r;o(o.s=325)}([function(e,t,i){var n;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(t,i){"use strict";"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var a=[],r=i.document,s=Object.getPrototypeOf,l=a.slice,u=a.concat,c=a.push,h=a.indexOf,d={},f=d.toString,p=d.hasOwnProperty,v=p.toString,g=v.call(Object),m={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},_={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,i){var n,o,a=(i=i||r).createElement("script");if(a.text=e,t)for(n in _)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&a.setAttribute(n,o);i.head.appendChild(a).parentNode.removeChild(a)}function E(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[f.call(e)]||"object":typeof e}var S=function(e,t){return new S.fn.init(e,t)},k=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function T(e){var t=!!e&&"length"in e&&e.length,i=E(e);return!y(e)&&!b(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:"3.4.1",constructor:S,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},S.extend=S.fn.extend=function(){var e,t,i,n,o,a,r=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[s]||{},s++),"object"==typeof r||y(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&r!==n&&(u&&n&&(S.isPlainObject(n)||(o=Array.isArray(n)))?(i=r[t],a=o&&!Array.isArray(i)?[]:o||S.isPlainObject(i)?i:{},o=!1,r[t]=S.extend(u,a,n)):void 0!==n&&(r[t]=n));return r},S.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==f.call(e))&&(!(t=s(e))||"function"==typeof(i=p.call(t,"constructor")&&t.constructor)&&v.call(i)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){w(e,{nonce:t&&t.nonce})},each:function(e,t){var i,n=0;if(T(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(k,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(T(Object(e))?S.merge(i,"string"==typeof e?[e]:e):c.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:h.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,a=e.length,r=!i;o<a;o++)!t(e[o],o)!==r&&n.push(e[o]);return n},map:function(e,t,i){var n,o,a=0,r=[];if(T(e))for(n=e.length;a<n;a++)null!=(o=t(e[a],a,i))&&r.push(o);else for(a in e)null!=(o=t(e[a],a,i))&&r.push(o);return u.apply([],r)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=a[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var C=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){var t,i,n,o,a,r,s,l,u,c,h,d,f,p,v,g,m,y,b,_="sizzle"+1*new Date,w=e.document,E=0,S=0,k=le(),T=le(),C=le(),x=le(),O=function(e,t){return e===t&&(h=!0),0},D={}.hasOwnProperty,A=[],I=A.pop,P=A.push,$=A.push,R=A.slice,L=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+F+"*("+N+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+F+"*\\]",U=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",j=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),H=new RegExp("^"+F+"*,"+F+"*"),z=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),V=new RegExp(F+"|>"),W=new RegExp(U),Y=new RegExp("^"+N+"$"),q={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){d()},re=_e((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{$.apply(A=R.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){$={apply:A.length?function(e,t){P.apply(e,R.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function se(e,t,n,o){var a,s,u,c,h,p,m,y=t&&t.ownerDocument,E=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==E&&9!==E&&11!==E)return n;if(!o&&((t?t.ownerDocument||t:w)!==f&&d(t),t=t||f,v)){if(11!==E&&(h=Q.exec(e)))if(a=h[1]){if(9===E){if(!(u=t.getElementById(a)))return n;if(u.id===a)return n.push(u),n}else if(y&&(u=y.getElementById(a))&&b(t,u)&&u.id===a)return n.push(u),n}else{if(h[2])return $.apply(n,t.getElementsByTagName(e)),n;if((a=h[3])&&i.getElementsByClassName&&t.getElementsByClassName)return $.apply(n,t.getElementsByClassName(a)),n}if(i.qsa&&!x[e+" "]&&(!g||!g.test(e))&&(1!==E||"object"!==t.nodeName.toLowerCase())){if(m=e,y=t,1===E&&V.test(e)){for((c=t.getAttribute("id"))?c=c.replace(ne,oe):t.setAttribute("id",c=_),s=(p=r(e)).length;s--;)p[s]="#"+c+" "+be(p[s]);m=p.join(","),y=ee.test(e)&&me(t.parentNode)||t}try{return $.apply(n,y.querySelectorAll(m)),n}catch(t){x(e,!0)}finally{c===_&&t.removeAttribute("id")}}}return l(e.replace(G,"$1"),t,n,o)}function le(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function ue(e){return e[_]=!0,e}function ce(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var i=e.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=t}function de(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue((function(t){return t=+t,ue((function(i,n){for(var o,a=e([],i.length,t),r=a.length;r--;)i[o=a[r]]&&(i[o]=!(n[o]=i[o]))}))}))}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,i=(e.ownerDocument||e).documentElement;return!X.test(t||i&&i.nodeName||"HTML")},d=se.setDocument=function(e){var t,o,r=e?e.ownerDocument||e:w;return r!==f&&9===r.nodeType&&r.documentElement?(p=(f=r).documentElement,v=!a(f),w!==f&&(o=f.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ae,!1):o.attachEvent&&o.attachEvent("onunload",ae)),i.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=ce((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=Z.test(f.getElementsByClassName),i.getById=ce((function(e){return p.appendChild(e).id=_,!f.getElementsByName||!f.getElementsByName(_).length})),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var i,n,o,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(o=t.getElementsByName(e),n=0;a=o[n++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;i=a[o++];)1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&v)return t.getElementsByClassName(e)},m=[],g=[],(i.qsa=Z.test(f.querySelectorAll))&&(ce((function(e){p.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+F+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+_+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||g.push(".#.+[+~]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+F+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(i.matchesSelector=Z.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ce((function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",U)})),g=g.length&&new RegExp(g.join("|")),m=m.length&&new RegExp(m.join("|")),t=Z.test(p.compareDocumentPosition),b=t||Z.test(p.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},O=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===f||e.ownerDocument===w&&b(w,e)?-1:t===f||t.ownerDocument===w&&b(w,t)?1:c?L(c,e)-L(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,o=e.parentNode,a=t.parentNode,r=[e],s=[t];if(!o||!a)return e===f?-1:t===f?1:o?-1:a?1:c?L(c,e)-L(c,t):0;if(o===a)return de(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;r[n]===s[n];)n++;return n?de(r[n],s[n]):r[n]===w?-1:s[n]===w?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&d(e),i.matchesSelector&&v&&!x[t+" "]&&(!m||!m.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){x(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==f&&d(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==f&&d(e);var o=n.attrHandle[t.toLowerCase()],a=o&&D.call(n.attrHandle,t.toLowerCase())?o(e,t,!v):void 0;return void 0!==a?a:i.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(ne,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],o=0,a=0;if(h=!i.detectDuplicates,c=!i.sortStable&&e.slice(0),e.sort(O),h){for(;t=e[a++];)t===e[a]&&(o=n.push(a));for(;o--;)e.splice(n[o],1)}return c=null,e},o=se.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(n=se.selectors={cacheLength:50,createPseudo:ue,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&W.test(i)&&(t=r(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&k(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var o=se.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(j," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var u,c,h,d,f,p,v=a!==r?"nextSibling":"previousSibling",g=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(a){for(;v;){for(d=t;d=d[v];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?g.firstChild:g.lastChild],r&&y){for(b=(f=(u=(c=(h=(d=g)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===E&&u[1])&&u[2],d=f&&g.childNodes[f];d=++f&&d&&d[v]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[E,f,b];break}}else if(y&&(b=f=(u=(c=(h=(d=t)[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===E&&u[1]),!1===b)for(;(d=++f&&d&&d[v]||(b=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++b||(y&&((c=(h=d[_]||(d[_]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[E,b]),d!==t)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[_]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,i){for(var n,a=o(e,t),r=a.length;r--;)e[n=L(e,a[r])]=!(i[n]=a[r])})):function(e){return o(e,0,i)}):o}},pseudos:{not:ue((function(e){var t=[],i=[],n=s(e.replace(G,"$1"));return n[_]?ue((function(e,t,i,o){for(var a,r=n(e,null,o,[]),s=e.length;s--;)(a=r[s])&&(e[s]=!(t[s]=a))})):function(e,o,a){return t[0]=e,n(t,null,a,i),t[0]=null,!i.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ie),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:ue((function(e){return Y.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,i){return[i<0?i+t:i]})),even:ge((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:ge((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:ge((function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e})),gt:ge((function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=pe(t);function ye(){}function be(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function _e(e,t,i){var n=t.dir,o=t.next,a=o||n,r=i&&"parentNode"===a,s=S++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,o);return!1}:function(t,i,l){var u,c,h,d=[E,s];if(l){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||r)if(c=(h=t[_]||(t[_]={}))[t.uniqueID]||(h[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=c[a])&&u[0]===E&&u[1]===s)return d[2]=u[2];if(c[a]=d,d[2]=e(t,i,l))return!0}return!1}}function we(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function Ee(e,t,i,n,o){for(var a,r=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(i&&!i(a,n,o)||(r.push(a),u&&t.push(s)));return r}function Se(e,t,i,n,o,a){return n&&!n[_]&&(n=Se(n)),o&&!o[_]&&(o=Se(o,a)),ue((function(a,r,s,l){var u,c,h,d=[],f=[],p=r.length,v=a||function(e,t,i){for(var n=0,o=t.length;n<o;n++)se(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),g=!e||!a&&t?v:Ee(v,d,e,s,l),m=i?o||(a?e:p||n)?[]:r:g;if(i&&i(g,m,s,l),n)for(u=Ee(m,f),n(u,[],s,l),c=u.length;c--;)(h=u[c])&&(m[f[c]]=!(g[f[c]]=h));if(a){if(o||e){if(o){for(u=[],c=m.length;c--;)(h=m[c])&&u.push(g[c]=h);o(null,m=[],u,l)}for(c=m.length;c--;)(h=m[c])&&(u=o?L(a,h):d[c])>-1&&(a[u]=!(r[u]=h))}}else m=Ee(m===r?m.splice(p,m.length):m),o?o(null,r,m,l):$.apply(r,m)}))}function ke(e){for(var t,i,o,a=e.length,r=n.relative[e[0].type],s=r||n.relative[" "],l=r?1:0,c=_e((function(e){return e===t}),s,!0),h=_e((function(e){return L(t,e)>-1}),s,!0),d=[function(e,i,n){var o=!r&&(n||i!==u)||((t=i).nodeType?c(e,i,n):h(e,i,n));return t=null,o}];l<a;l++)if(i=n.relative[e[l].type])d=[_e(we(d),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[_]){for(o=++l;o<a&&!n.relative[e[o].type];o++);return Se(l>1&&we(d),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),i,l<o&&ke(e.slice(l,o)),o<a&&ke(e=e.slice(o)),o<a&&be(e))}d.push(i)}return we(d)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,r=se.tokenize=function(e,t){var i,o,a,r,s,l,u,c=T[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=n.preFilter;s;){for(r in i&&!(o=H.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),i=!1,(o=z.exec(s))&&(i=o.shift(),a.push({value:i,type:o[0].replace(G," ")}),s=s.slice(i.length)),n.filter)!(o=q[r].exec(s))||u[r]&&!(o=u[r](o))||(i=o.shift(),a.push({value:i,type:r,matches:o}),s=s.slice(i.length));if(!i)break}return t?s.length:s?se.error(e):T(e,l).slice(0)},s=se.compile=function(e,t){var i,o=[],a=[],s=C[e+" "];if(!s){for(t||(t=r(e)),i=t.length;i--;)(s=ke(t[i]))[_]?o.push(s):a.push(s);(s=C(e,function(e,t){var i=t.length>0,o=e.length>0,a=function(a,r,s,l,c){var h,p,g,m=0,y="0",b=a&&[],_=[],w=u,S=a||o&&n.find.TAG("*",c),k=E+=null==w?1:Math.random()||.1,T=S.length;for(c&&(u=r===f||r||c);y!==T&&null!=(h=S[y]);y++){if(o&&h){for(p=0,r||h.ownerDocument===f||(d(h),s=!v);g=e[p++];)if(g(h,r||f,s)){l.push(h);break}c&&(E=k)}i&&((h=!g&&h)&&m--,a&&b.push(h))}if(m+=y,i&&y!==m){for(p=0;g=t[p++];)g(b,_,r,s);if(a){if(m>0)for(;y--;)b[y]||_[y]||(_[y]=I.call(l));_=Ee(_)}$.apply(l,_),c&&!a&&_.length>0&&m+t.length>1&&se.uniqueSort(l)}return c&&(E=k,u=w),b};return i?ue(a):a}(a,o))).selector=e}return s},l=se.select=function(e,t,i,o){var a,l,u,c,h,d="function"==typeof e&&e,f=!o&&r(e=d.selector||e);if(i=i||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&v&&n.relative[l[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(te,ie),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(a=q.needsContext.test(e)?0:l.length;a--&&(u=l[a],!n.relative[c=u.type]);)if((h=n.find[c])&&(o=h(u.matches[0].replace(te,ie),ee.test(l[0].type)&&me(t.parentNode)||t))){if(l.splice(a,1),!(e=o.length&&be(l)))return $.apply(i,o),i;break}}return(d||s(e,f))(o,t,!v,i,!t||ee.test(e)&&me(t.parentNode)||t),i},i.sortStable=_.split("").sort(O).join("")===_,i.detectDuplicates=!!h,d(),i.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||he(M,(function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),se}(i);S.find=C,S.expr=C.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=C.uniqueSort,S.text=C.getText,S.isXMLDoc=C.isXML,S.contains=C.contains,S.escapeSelector=C.escape;var x=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&S(e).is(i))break;n.push(e)}return n},O=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},D=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,i){return y(t)?S.grep(e,(function(e,n){return!!t.call(e,n,e)!==i})):t.nodeType?S.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?S.grep(e,(function(e){return h.call(t,e)>-1!==i})):S.filter(t,e,i)}S.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<n;t++)if(S.contains(o[t],this))return!0})));for(i=this.pushStack([]),t=0;t<n;t++)S.find(e,o[t],i);return n>1?S.uniqueSort(i):i},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&D.test(e)?S(e):e||[],!1).length}});var $,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||$,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),I.test(n[1])&&S.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=r.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,$=S(r);var L=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function F(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var i,n=0,o=this.length,a=[],r="string"!=typeof e&&S(e);if(!D.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&S.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?h.call(S(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,i){return x(e,"parentNode",i)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,i){return x(e,"nextSibling",i)},prevUntil:function(e,t,i){return x(e,"previousSibling",i)},siblings:function(e){return O((e.parentNode||{}).firstChild,e)},children:function(e){return O(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(i,n){var o=S.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=S.filter(n,o)),this.length>1&&(M[e]||S.uniqueSort(o),L.test(e)&&o.reverse()),this.pushStack(o)}}));var N=/[^\x20\t\r\n\f]+/g;function B(e){return e}function U(e){throw e}function j(e,t,i,n){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(i):e&&y(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match(N)||[],(function(e,i){t[i]=!0})),t}(e):S.extend({},e);var t,i,n,o,a=[],r=[],s=-1,l=function(){for(o=o||e.once,n=t=!0;r.length;s=-1)for(i=r.shift();++s<a.length;)!1===a[s].apply(i[0],i[1])&&e.stopOnFalse&&(s=a.length,i=!1);e.memory||(i=!1),t=!1,o&&(a=i?[]:"")},u={add:function(){return a&&(i&&!t&&(s=a.length-1,r.push(i)),function t(i){S.each(i,(function(i,n){y(n)?e.unique&&u.has(n)||a.push(n):n&&n.length&&"string"!==E(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var i;(i=S.inArray(t,a,i))>-1;)a.splice(i,1),i<=s&&s--})),this},has:function(e){return e?S.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=r=[],a=i="",this},disabled:function(){return!a},lock:function(){return o=r=[],i||t||(a=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],r.push(i),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(i){S.each(t,(function(t,n){var o=y(e[n[4]])&&e[n[4]];a[n[1]]((function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,o){var a=0;function r(e,t,n,o){return function(){var s=this,l=arguments,u=function(){var i,u;if(!(e<a)){if((i=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");u=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(u)?o?u.call(i,r(a,t,B,o),r(a,t,U,o)):(a++,u.call(i,r(a,t,B,o),r(a,t,U,o),r(a,t,B,t.notifyWith))):(n!==B&&(s=void 0,l=[i]),(o||t.resolveWith)(s,l))}},c=o?u:function(){try{u()}catch(i){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(i,c.stackTrace),e+1>=a&&(n!==U&&(s=void 0,l=[i]),t.rejectWith(s,l))}};e?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),i.setTimeout(c))}}return S.Deferred((function(i){t[0][3].add(r(0,i,y(o)?o:B,i.notifyWith)),t[1][3].add(r(0,i,y(e)?e:B)),t[2][3].add(r(0,i,y(n)?n:U))})).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},a={};return S.each(t,(function(e,i){var r=i[2],s=i[5];o[i[1]]=r.add,s&&r.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),r.add(i[3].fire),a[i[0]]=function(){return a[i[0]+"With"](this===a?void 0:this,arguments),this},a[i[0]+"With"]=r.fireWith})),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,i=t,n=Array(i),o=l.call(arguments),a=S.Deferred(),r=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?l.call(arguments):i,--t||a.resolveWith(n,o)}};if(t<=1&&(j(e,a.done(r(i)).resolve,a.reject,!t),"pending"===a.state()||y(o[i]&&o[i].then)))return a.then();for(;i--;)j(o[i],r(i),a.reject);return a.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&G.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){i.setTimeout((function(){throw e}))};var H=S.Deferred();function z(){r.removeEventListener("DOMContentLoaded",z),i.removeEventListener("load",z),S.ready()}S.fn.ready=function(e){return H.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||H.resolveWith(r,[S]))}}),S.ready.then=H.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?i.setTimeout(S.ready):(r.addEventListener("DOMContentLoaded",z),i.addEventListener("load",z));var V=function(e,t,i,n,o,a,r){var s=0,l=e.length,u=null==i;if("object"===E(i))for(s in o=!0,i)V(e,t,s,i[s],!0,a,r);else if(void 0!==n&&(o=!0,y(n)||(r=!0),u&&(r?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(S(e),i)})),t))for(;s<l;s++)t(e[s],i,r?n:n.call(e[s],s,t(e[s],i)));return o?e:u?t.call(e):l?t(e[0],i):a},W=/^-ms-/,Y=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function X(e){return e.replace(W,"ms-").replace(Y,q)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=S.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[X(t)]=i;else for(n in t)o[X(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(X):(t=X(t))in n?[t]:t.match(N)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||S.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Z=new K,Q=new K,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ie(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(i)}catch(e){}Q.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return Q.hasData(e)||Z.hasData(e)},data:function(e,t,i){return Q.access(e,t,i)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,i){return Z.access(e,t,i)},_removeData:function(e,t){Z.remove(e,t)}}),S.fn.extend({data:function(e,t){var i,n,o,a=this[0],r=a&&a.attributes;if(void 0===e){if(this.length&&(o=Q.get(a),1===a.nodeType&&!Z.get(a,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&0===(n=r[i].name).indexOf("data-")&&(n=X(n.slice(5)),ie(a,n,o[n]));Z.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each((function(){Q.set(this,e)})):V(this,(function(t){var i;if(a&&void 0===t)return void 0!==(i=Q.get(a,e))?i:void 0!==(i=ie(a,e))?i:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),S.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Z.get(e,t),i&&(!n||Array.isArray(i)?n=Z.access(e,t,S.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),n=i.length,o=i.shift(),a=S._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete a.stop,o.call(e,(function(){S.dequeue(e,t)}),a)),!n&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Z.get(e,i)||Z.access(e,i,{empty:S.Callbacks("once memory").add((function(){Z.remove(e,[t+"queue",i])}))})}}),S.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?S.queue(this[0],e):void 0===t?this:this.each((function(){var i=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=S.Deferred(),a=this,r=this.length,s=function(){--n||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(i=Z.get(a[r],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,oe=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],re=r.documentElement,se=function(e){return S.contains(e.ownerDocument,e)},le={composed:!0};re.getRootNode&&(se=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===S.css(e,"display")},ce=function(e,t,i,n){var o,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];for(a in o=i.apply(e,n||[]),t)e.style[a]=r[a];return o};function he(e,t,i,n){var o,a,r=20,s=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=s(),u=i&&i[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==u&&+l)&&oe.exec(S.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;r--;)S.style(e,t,c+u),(1-a)*(1-(a=s()/l||.5))<=0&&(r=0),c/=a;c*=2,S.style(e,t,c+u),i=i||[]}return i&&(c=+c||+l||0,o=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=u,n.start=c,n.end=o)),o}var de={};function fe(e){var t,i=e.ownerDocument,n=e.nodeName,o=de[n];return o||(t=i.body.appendChild(i.createElement(n)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),de[n]=o,o)}function pe(e,t){for(var i,n,o=[],a=0,r=e.length;a<r;a++)(n=e[a]).style&&(i=n.style.display,t?("none"===i&&(o[a]=Z.get(n,"display")||null,o[a]||(n.style.display="")),""===n.style.display&&ue(n)&&(o[a]=fe(n))):"none"!==i&&(o[a]="none",Z.set(n,"display",i)));for(a=0;a<r;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}S.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ue(this)?S(this).show():S(this).hide()}))}});var ve=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i,ye={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function be(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],i):i}function _e(e,t){for(var i=0,n=e.length;i<n;i++)Z.set(e[i],"globalEval",!t||Z.get(t[i],"globalEval"))}ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td;var we,Ee,Se=/<|&#?\w+;/;function ke(e,t,i,n,o){for(var a,r,s,l,u,c,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((a=e[f])||0===a)if("object"===E(a))S.merge(d,a.nodeType?[a]:a);else if(Se.test(a)){for(r=r||h.appendChild(t.createElement("div")),s=(ge.exec(a)||["",""])[1].toLowerCase(),l=ye[s]||ye._default,r.innerHTML=l[1]+S.htmlPrefilter(a)+l[2],c=l[0];c--;)r=r.lastChild;S.merge(d,r.childNodes),(r=h.firstChild).textContent=""}else d.push(t.createTextNode(a));for(h.textContent="",f=0;a=d[f++];)if(n&&S.inArray(a,n)>-1)o&&o.push(a);else if(u=se(a),r=be(h.appendChild(a),"script"),u&&_e(r),i)for(c=0;a=r[c++];)me.test(a.type||"")&&i.push(a);return h}we=r.createDocumentFragment().appendChild(r.createElement("div")),(Ee=r.createElement("input")).setAttribute("type","radio"),Ee.setAttribute("checked","checked"),Ee.setAttribute("name","t"),we.appendChild(Ee),m.checkClone=we.cloneNode(!0).cloneNode(!0).lastChild.checked,we.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!we.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function De(){return!1}function Ae(e,t){return e===function(){try{return r.activeElement}catch(e){}}()==("focus"===t)}function Ie(e,t,i,n,o,a){var r,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)Ie(e,s,i,n,t[s],a);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=De;else if(!o)return e;return 1===a&&(r=o,(o=function(e){return S().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=S.guid++)),e.each((function(){S.event.add(this,t,o,n,i)}))}function Pe(e,t,i){i?(Z.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,o,a=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=l.call(arguments),Z.set(this,t,a),n=i(this,t),this[t](),a!==(o=Z.get(this,t))||n?Z.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o.value}else a.length&&(Z.set(this,t,{value:S.event.trigger(S.extend(a[0],S.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&S.event.add(e,t,Oe)}S.event={global:{},add:function(e,t,i,n,o){var a,r,s,l,u,c,h,d,f,p,v,g=Z.get(e);if(g)for(i.handler&&(i=(a=i).handler,o=a.selector),o&&S.find.matchesSelector(re,o),i.guid||(i.guid=S.guid++),(l=g.events)||(l=g.events={}),(r=g.handle)||(r=g.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(N)||[""]).length;u--;)f=v=(s=xe.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=S.event.special[f]||{},f=(o?h.delegateType:h.bindType)||f,h=S.event.special[f]||{},c=S.extend({type:f,origType:v,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:p.join(".")},a),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,p,r)||e.addEventListener&&e.addEventListener(f,r)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),S.event.global[f]=!0)},remove:function(e,t,i,n,o){var a,r,s,l,u,c,h,d,f,p,v,g=Z.hasData(e)&&Z.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(N)||[""]).length;u--;)if(f=v=(s=xe.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=S.event.special[f]||{},d=l[f=(n?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=a=d.length;a--;)c=d[a],!o&&v!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));r&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||S.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)S.event.remove(e,f+t[u],i,n,!0);S.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,a,r,s=S.event.fix(e),l=new Array(arguments.length),u=(Z.get(this,"events")||{})[s.type]||[],c=S.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(r=S.event.handlers.call(this,s,u),t=0;(o=r[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,i=0;(a=o.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==a.namespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(n=((S.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,o,a,r,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],r={},i=0;i<l;i++)void 0===r[o=(n=t[i]).selector+" "]&&(r[o]=n.needsContext?S(o,this).index(u)>-1:S.find(o,this,null,[u]).length),r[o]&&a.push(n);a.length&&s.push({elem:u,handlers:a})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ve.test(t.type)&&t.click&&A(t,"input")&&Pe(t,"click",Oe),!1},trigger:function(e){var t=this||e;return ve.test(t.type)&&t.click&&A(t,"input")&&Pe(t,"click"),!0},_default:function(e){var t=e.target;return ve.test(t.type)&&t.click&&A(t,"input")&&Z.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:De,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Pe(this,e,Ae),!1},trigger:function(){return Pe(this,e),!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===n||S.contains(n,o))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}})),S.fn.extend({on:function(e,t,i,n){return Ie(this,e,t,i,n)},one:function(e,t,i,n){return Ie(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=De),this.each((function(){S.event.remove(this,e,i,t)}))}});var $e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Re=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Fe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Be(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var i,n,o,a,r,s,l,u;if(1===t.nodeType){if(Z.hasData(e)&&(a=Z.access(e),r=Z.set(t,a),u=a.events))for(o in delete r.handle,r.events={},u)for(i=0,n=u[o].length;i<n;i++)S.event.add(t,o,u[o][i]);Q.hasData(e)&&(s=Q.access(e),l=S.extend({},s),Q.set(t,l))}}function je(e,t){var i=t.nodeName.toLowerCase();"input"===i&&ve.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Ge(e,t,i,n){t=u.apply([],t);var o,a,r,s,l,c,h=0,d=e.length,f=d-1,p=t[0],v=y(p);if(v||d>1&&"string"==typeof p&&!m.checkClone&&Le.test(p))return e.each((function(o){var a=e.eq(o);v&&(t[0]=p.call(this,o,a.html())),Ge(a,t,i,n)}));if(d&&(a=(o=ke(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=a),a||n)){for(s=(r=S.map(be(o,"script"),Ne)).length;h<d;h++)l=o,h!==f&&(l=S.clone(l,!0,!0),s&&S.merge(r,be(l,"script"))),i.call(e[h],l,h);if(s)for(c=r[r.length-1].ownerDocument,S.map(r,Be),h=0;h<s;h++)l=r[h],me.test(l.type||"")&&!Z.access(l,"globalEval")&&S.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&!l.noModule&&S._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):w(l.textContent.replace(Me,""),l,c))}return e}function He(e,t,i){for(var n,o=t?S.filter(t,e):e,a=0;null!=(n=o[a]);a++)i||1!==n.nodeType||S.cleanData(be(n)),n.parentNode&&(i&&se(n)&&_e(be(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e.replace($e,"<$1></$2>")},clone:function(e,t,i){var n,o,a,r,s=e.cloneNode(!0),l=se(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(r=be(s),n=0,o=(a=be(e)).length;n<o;n++)je(a[n],r[n]);if(t)if(i)for(a=a||be(e),r=r||be(s),n=0,o=a.length;n<o;n++)Ue(a[n],r[n]);else Ue(e,s);return(r=be(s,"script")).length>0&&_e(r,!l&&be(e,"script")),s},cleanData:function(e){for(var t,i,n,o=S.event.special,a=0;void 0!==(i=e[a]);a++)if(J(i)){if(t=i[Z.expando]){if(t.events)for(n in t.events)o[n]?S.event.remove(i,n):S.removeEvent(i,n,t.handle);i[Z.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return V(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Fe(this,e).appendChild(e)}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Fe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(be(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Re.test(e)&&!ye[(ge.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(be(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var i=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(be(this)),i&&i.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var i,n=[],o=S(e),a=o.length-1,r=0;r<=a;r++)i=r===a?this:this.clone(!0),S(o[r])[t](i),c.apply(n,i.get());return this.pushStack(n)}}));var ze=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},We=new RegExp(ae.join("|"),"i");function Ye(e,t,i){var n,o,a,r,s=e.style;return(i=i||Ve(e))&&(""!==(r=i.getPropertyValue(t)||i[t])||se(e)||(r=S.style(e,t)),!m.pixelBoxStyles()&&ze.test(r)&&We.test(t)&&(n=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=r,r=i.width,s.width=n,s.minWidth=o,s.maxWidth=a)),void 0!==r?r+"":r}function qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(c);var e=i.getComputedStyle(c);n="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),o=36===t(e.width),c.style.position="absolute",a=12===t(c.offsetWidth/3),re.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var n,o,a,s,l,u=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var Xe=["Webkit","Moz","ms"],Je=r.createElement("div").style,Ke={};function Ze(e){var t=S.cssProps[e]||Ke[e];return t||(e in Je?e:Ke[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=Xe.length;i--;)if((e=Xe[i]+t)in Je)return e}(e)||e)}var Qe=/^(none|table(?!-c[ea]).+)/,et=/^--/,tt={position:"absolute",visibility:"hidden",display:"block"},it={letterSpacing:"0",fontWeight:"400"};function nt(e,t,i){var n=oe.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function ot(e,t,i,n,o,a){var r="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(l+=S.css(e,i+ae[r],!0,o)),n?("content"===i&&(l-=S.css(e,"padding"+ae[r],!0,o)),"margin"!==i&&(l-=S.css(e,"border"+ae[r]+"Width",!0,o))):(l+=S.css(e,"padding"+ae[r],!0,o),"padding"!==i?l+=S.css(e,"border"+ae[r]+"Width",!0,o):s+=S.css(e,"border"+ae[r]+"Width",!0,o));return!n&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))||0),l}function at(e,t,i){var n=Ve(e),o=(!m.boxSizingReliable()||i)&&"border-box"===S.css(e,"boxSizing",!1,n),a=o,r=Ye(e,t,n),s="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(r)){if(!i)return r;r="auto"}return(!m.boxSizingReliable()&&o||"auto"===r||!parseFloat(r)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===S.css(e,"boxSizing",!1,n),(a=s in e)&&(r=e[s])),(r=parseFloat(r)||0)+ot(e,t,i||(o?"border":"content"),a,n,r)+"px"}function rt(e,t,i,n,o){return new rt.prototype.init(e,t,i,n,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ye(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,r,s=X(t),l=et.test(t),u=e.style;if(l||(t=Ze(s)),r=S.cssHooks[t]||S.cssHooks[s],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(e,!1,n))?o:u[t];"string"===(a=typeof i)&&(o=oe.exec(i))&&o[1]&&(i=he(e,t,o),a="number"),null!=i&&i==i&&("number"!==a||l||(i+=o&&o[3]||(S.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(u[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,n))||(l?u.setProperty(t,i):u[t]=i))}},css:function(e,t,i,n){var o,a,r,s=X(t);return et.test(t)||(t=Ze(s)),(r=S.cssHooks[t]||S.cssHooks[s])&&"get"in r&&(o=r.get(e,!0,i)),void 0===o&&(o=Ye(e,t,n)),"normal"===o&&t in it&&(o=it[t]),""===i||i?(a=parseFloat(o),!0===i||isFinite(a)?a||0:o):o}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,i,n){if(i)return!Qe.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,t,n):ce(e,tt,(function(){return at(e,t,n)}))},set:function(e,i,n){var o,a=Ve(e),r=!m.scrollboxSize()&&"absolute"===a.position,s=(r||n)&&"border-box"===S.css(e,"boxSizing",!1,a),l=n?ot(e,t,n,s,a):0;return s&&r&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-ot(e,t,"border",!1,a)-.5)),l&&(o=oe.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=S.css(e,t)),nt(0,i,l)}}})),S.cssHooks.marginLeft=qe(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-ce(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(i){for(var n=0,o={},a="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ae[n]+t]=a[n]||a[n-2]||a[0];return o}},"margin"!==e&&(S.cssHooks[e+t].set=nt)})),S.fn.extend({css:function(e,t){return V(this,(function(e,t,i){var n,o,a={},r=0;if(Array.isArray(t)){for(n=Ve(e),o=t.length;r<o;r++)a[t[r]]=S.css(e,t[r],!1,n);return a}return void 0!==i?S.style(e,t,i):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=rt,rt.prototype={constructor:rt,init:function(e,t,i,n,o,a){this.elem=e,this.prop=i,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=a||(S.cssNumber[i]?"":"px")},cur:function(){var e=rt.propHooks[this.prop];return e&&e.get?e.get(this):rt.propHooks._default.get(this)},run:function(e){var t,i=rt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):rt.propHooks._default.set(this),this}},rt.prototype.init.prototype=rt.prototype,rt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},rt.propHooks.scrollTop=rt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=rt.prototype.init,S.fx.step={};var st,lt,ut=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function ht(){lt&&(!1===r.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(ht):i.setTimeout(ht,S.fx.interval),S.fx.tick())}function dt(){return i.setTimeout((function(){st=void 0})),st=Date.now()}function ft(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ae[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function pt(e,t,i){for(var n,o=(vt.tweeners[t]||[]).concat(vt.tweeners["*"]),a=0,r=o.length;a<r;a++)if(n=o[a].call(i,t,e))return n}function vt(e,t,i){var n,o,a=0,r=vt.prefilters.length,s=S.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var t=st||dt(),i=Math.max(0,u.startTime+u.duration-t),n=1-(i/u.duration||0),a=0,r=u.tweens.length;a<r;a++)u.tweens[a].run(n);return s.notifyWith(e,[u,n,i]),n<1&&r?i:(r||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},i),originalProperties:t,originalOptions:i,startTime:st||dt(),duration:i.duration,tweens:[],createTween:function(t,i){var n=S.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)u.tweens[i].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var i,n,o,a,r;for(i in e)if(o=t[n=X(i)],a=e[i],Array.isArray(a)&&(o=a[1],a=e[i]=a[0]),i!==n&&(e[n]=a,delete e[i]),(r=S.cssHooks[n])&&"expand"in r)for(i in a=r.expand(a),delete e[n],a)i in e||(e[i]=a[i],t[i]=o);else t[n]=o}(c,u.opts.specialEasing);a<r;a++)if(n=vt.prefilters[a].call(u,e,c,u.opts))return y(n.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,pt,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(vt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return he(i.elem,e,oe.exec(t),i),i}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(N);for(var i,n=0,o=e.length;n<o;n++)i=e[n],vt.tweeners[i]=vt.tweeners[i]||[],vt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,o,a,r,s,l,u,c,h="width"in t||"height"in t,d=this,f={},p=e.style,v=e.nodeType&&ue(e),g=Z.get(e,"fxshow");for(n in i.queue||(null==(r=S._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,s=r.empty.fire,r.empty.fire=function(){r.unqueued||s()}),r.unqueued++,d.always((function(){d.always((function(){r.unqueued--,S.queue(e,"fx").length||r.empty.fire()}))}))),t)if(o=t[n],ut.test(o)){if(delete t[n],a=a||"toggle"===o,o===(v?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;v=!0}f[n]=g&&g[n]||S.style(e,n)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(f))for(n in h&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=g&&g.display)&&(u=Z.get(e,"display")),"none"===(c=S.css(e,"display"))&&(u?c=u:(pe([e],!0),u=e.style.display||u,c=S.css(e,"display"),pe([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(e,"float")&&(l||(d.done((function(){p.display=u})),null==u&&(c=p.display,u="none"===c?"":c)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}))),l=!1,f)l||(g?"hidden"in g&&(v=g.hidden):g=Z.access(e,"fxshow",{display:u}),a&&(g.hidden=!v),v&&pe([e],!0),d.done((function(){for(n in v||pe([e]),Z.remove(e,"fxshow"),f)S.style(e,n,f[n])}))),l=pt(v?g[n]:0,n,d),n in g||(g[n]=l.start,v&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?vt.prefilters.unshift(e):vt.prefilters.push(e)}}),S.speed=function(e,t,i){var n=e&&"object"==typeof e?S.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=S.isEmptyObject(e),a=S.speed(t,i,n),r=function(){var t=vt(this,S.extend({},e),a);(o||Z.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===a.queue?this.each(r):this.queue(a.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",a=S.timers,r=Z.get(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ct.test(o)&&n(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(i),t=!1,a.splice(o,1));!t&&i||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=Z.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],a=S.timers,r=n?n.length:0;for(i.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<r;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var i=S.fn[t];S.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(t,!0),e,n,o)}})),S.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(st=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),st=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){lt||(lt=!0,ht())},S.fx.stop=function(){lt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var o=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(o)}}))},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var gt,mt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return V(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,i){var n,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?S.prop(e,t,i):(1===a&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?gt:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=S.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&A(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(N);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),gt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=mt[t]||S.find.attr;mt[t]=function(e,t,n){var o,a,r=t.toLowerCase();return n||(a=mt[r],mt[r]=o,o=null!=i(e,t,n)?r:null,mt[r]=a),o}}));var yt=/^(?:input|select|textarea|button)$/i,bt=/^(?:a|area)$/i;function _t(e){return(e.match(N)||[]).join(" ")}function wt(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(N)||[]}S.fn.extend({prop:function(e,t){return V(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,i){var n,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,i,n,o,a,r,s,l=0;if(y(e))return this.each((function(t){S(this).addClass(e.call(this,t,wt(this)))}));if((t=Et(e)).length)for(;i=this[l++];)if(o=wt(i),n=1===i.nodeType&&" "+_t(o)+" "){for(r=0;a=t[r++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");o!==(s=_t(n))&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,o,a,r,s,l=0;if(y(e))return this.each((function(t){S(this).removeClass(e.call(this,t,wt(this)))}));if(!arguments.length)return this.attr("class","");if((t=Et(e)).length)for(;i=this[l++];)if(o=wt(i),n=1===i.nodeType&&" "+_t(o)+" "){for(r=0;a=t[r++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");o!==(s=_t(n))&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(i){S(this).toggleClass(e.call(this,i,wt(this),t),t)})):this.each((function(){var t,o,a,r;if(n)for(o=0,a=S(this),r=Et(e);t=r[o++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==i||((t=wt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+_t(wt(i))+" ").indexOf(t)>-1)return!0;return!1}});var St=/\r/g;S.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=y(e),this.each((function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,S(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=S.map(o,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(St,""):null==i?"":i:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:_t(S.text(e))}},select:{get:function(e){var t,i,n,o=e.options,a=e.selectedIndex,r="select-one"===e.type,s=r?null:[],l=r?a+1:o.length;for(n=a<0?l:r?a:0;n<l;n++)if(((i=o[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!A(i.parentNode,"optgroup"))){if(t=S(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,a=S.makeArray(t),r=o.length;r--;)((n=o[r]).selected=S.inArray(S.valHooks.option.get(n),a)>-1)&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in i;var kt=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,o){var a,s,l,u,c,h,d,f,v=[n||r],g=p.call(e,"type")?e.type:e,m=p.call(e,"namespace")?e.namespace.split("."):[];if(s=f=l=n=n||r,3!==n.nodeType&&8!==n.nodeType&&!kt.test(g+S.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[S.expando]?e:new S.Event(g,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[g]||{},o||!d.trigger||!1!==d.trigger.apply(n,t))){if(!o&&!d.noBubble&&!b(n)){for(u=d.delegateType||g,kt.test(u+g)||(s=s.parentNode);s;s=s.parentNode)v.push(s),l=s;l===(n.ownerDocument||r)&&v.push(l.defaultView||l.parentWindow||i)}for(a=0;(s=v[a++])&&!e.isPropagationStopped();)f=s,e.type=a>1?u:d.bindType||g,(h=(Z.get(s,"events")||{})[e.type]&&Z.get(s,"handle"))&&h.apply(s,t),(h=c&&s[c])&&h.apply&&J(s)&&(e.result=h.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),t)||!J(n)||c&&y(n[g])&&!b(n)&&((l=n[c])&&(n[c]=null),S.event.triggered=g,e.isPropagationStopped()&&f.addEventListener(g,Tt),n[g](),e.isPropagationStopped()&&f.removeEventListener(g,Tt),S.event.triggered=void 0,l&&(n[c]=l)),e.result}},simulate:function(e,t,i){var n=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=Z.access(n,t);o||n.addEventListener(e,i,!0),Z.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=Z.access(n,t)-1;o?Z.access(n,t,o):(n.removeEventListener(e,i,!0),Z.remove(n,t))}}}));var Ct=i.location,xt=Date.now(),Ot=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var Dt=/\[\]$/,At=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function $t(e,t,i,n){var o;if(Array.isArray(t))S.each(t,(function(t,o){i||Dt.test(e)?n(e,o):$t(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)}));else if(i||"object"!==E(t))n(e,t);else for(o in t)$t(e+"["+o+"]",t[o],i,n)}S.param=function(e,t){var i,n=[],o=function(e,t){var i=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){o(this.name,this.value)}));else for(i in e)$t(i,e[i],t,o);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Pt.test(this.nodeName)&&!It.test(e)&&(this.checked||!ve.test(e))})).map((function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,(function(e){return{name:t.name,value:e.replace(At,"\r\n")}})):{name:t.name,value:i.replace(At,"\r\n")}})).get()}});var Rt=/%20/g,Lt=/#.*$/,Mt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,Bt=/^\/\//,Ut={},jt={},Gt="*/".concat("*"),Ht=r.createElement("a");function zt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,a=t.toLowerCase().match(N)||[];if(y(i))for(;n=a[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Vt(e,t,i,n){var o={},a=e===jt;function r(s){var l;return o[s]=!0,S.each(e[s]||[],(function(e,s){var u=s(t,i,n);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)})),l}return r(t.dataTypes[0])||!o["*"]&&r("*")}function Wt(e,t){var i,n,o=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&S.extend(!0,e,n),e}Ht.href=Ct.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,S.ajaxSettings),t):Wt(S.ajaxSettings,e)},ajaxPrefilter:zt(Ut),ajaxTransport:zt(jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o,a,s,l,u,c,h,d,f,p=S.ajaxSetup({},t),v=p.context||p,g=p.context&&(v.nodeType||v.jquery)?S(v):S.event,m=S.Deferred(),y=S.Callbacks("once memory"),b=p.statusCode||{},_={},w={},E="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ft.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)k.always(e[k.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return n&&n.abort(t),T(0,t),this}};if(m.promise(k),p.url=((e||p.url||Ct.href)+"").replace(Bt,Ct.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(N)||[""],null==p.crossDomain){u=r.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Ht.protocol+"//"+Ht.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=S.param(p.data,p.traditional)),Vt(Ut,p,t,k),c)return k;for(d in(h=S.event&&p.global)&&0==S.active++&&S.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Nt.test(p.type),o=p.url.replace(Lt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Rt,"+")):(f=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ot.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Mt,"$1"),f=(Ot.test(o)?"&":"?")+"_="+xt+++f),p.url=o+f),p.ifModified&&(S.lastModified[o]&&k.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&k.setRequestHeader("If-None-Match",S.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&k.setRequestHeader("Content-Type",p.contentType),k.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Gt+"; q=0.01":""):p.accepts["*"]),p.headers)k.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(v,k,p)||c))return k.abort();if(E="abort",y.add(p.complete),k.done(p.success),k.fail(p.error),n=Vt(jt,p,t,k)){if(k.readyState=1,h&&g.trigger("ajaxSend",[k,p]),c)return k;p.async&&p.timeout>0&&(l=i.setTimeout((function(){k.abort("timeout")}),p.timeout));try{c=!1,n.send(_,T)}catch(e){if(c)throw e;T(-1,e)}}else T(-1,"No Transport");function T(e,t,r,s){var u,d,f,_,w,E=t;c||(c=!0,l&&i.clearTimeout(l),n=void 0,a=s||"",k.readyState=e>0?4:0,u=e>=200&&e<300||304===e,r&&(_=function(e,t,i){for(var n,o,a,r,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}r||(r=o)}a=a||r}if(a)return a!==l[0]&&l.unshift(a),i[a]}(p,k,r)),_=function(e,t,i,n){var o,a,r,s,l,u={},c=e.dataTypes.slice();if(c[1])for(r in e.converters)u[r.toLowerCase()]=e.converters[r];for(a=c.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=u[l+" "+a]||u["* "+a]))for(o in u)if((s=o.split(" "))[1]===a&&(r=u[l+" "+s[0]]||u["* "+s[0]])){!0===r?r=u[o]:!0!==u[o]&&(a=s[0],c.unshift(s[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(p,_,k,u),u?(p.ifModified&&((w=k.getResponseHeader("Last-Modified"))&&(S.lastModified[o]=w),(w=k.getResponseHeader("etag"))&&(S.etag[o]=w)),204===e||"HEAD"===p.type?E="nocontent":304===e?E="notmodified":(E=_.state,d=_.data,u=!(f=_.error))):(f=E,!e&&E||(E="error",e<0&&(e=0))),k.status=e,k.statusText=(t||E)+"",u?m.resolveWith(v,[d,E,k]):m.rejectWith(v,[k,E,f]),k.statusCode(b),b=void 0,h&&g.trigger(u?"ajaxSuccess":"ajaxError",[k,p,u?d:f]),y.fireWith(v,[k,E]),h&&(g.trigger("ajaxComplete",[k,p]),--S.active||S.event.trigger("ajaxStop")))}return k},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,i,n,o){return y(i)&&(o=o||n,n=i,i=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:i,success:n},S.isPlainObject(e)&&e))}})),S._evalUrl=function(e,t){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(i){S(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},qt=S.ajaxSettings.xhr();m.cors=!!qt&&"withCredentials"in qt,m.ajax=qt=!!qt,S.ajaxTransport((function(e){var t,n;if(m.cors||qt&&!e.crossDomain)return{send:function(o,a){var r,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];for(r in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(r,o[r]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Yt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,o){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Xt,Jt=[],Kt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||S.expando+"_"+xt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,n){var o,a,r,s=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Kt,"$1"+o):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||S.error(o+" was not called"),r[0]},e.dataTypes[0]="json",a=i[o],i[o]=function(){r=arguments},n.always((function(){void 0===a?S(i).removeProp(o):i[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,Jt.push(o)),r&&y(a)&&a(r[0]),r=a=void 0})),"script"})),m.createHTMLDocument=((Xt=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xt.childNodes.length),S.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((n=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(n)):t=r),a=!i&&[],(o=I.exec(e))?[t.createElement(o[1])]:(o=ke([e],t,a),a&&a.length&&S(a).remove(),S.merge([],o.childNodes)));var n,o,a},S.fn.load=function(e,t,i){var n,o,a,r=this,s=e.indexOf(" ");return s>-1&&(n=_t(e.slice(s)),e=e.slice(0,s)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,r.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)})).always(i&&function(e,t){r.each((function(){i.apply(this,a||[e.responseText,t,e])}))}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,i){var n,o,a,r,s,l,u=S.css(e,"position"),c=S(e),h={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=S.css(e,"top"),l=S.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(r=(n=c.position()).top,o=n.left):(r=parseFloat(a)||0,o=parseFloat(l)||0),y(t)&&(t=t.call(e,i,S.extend({},s))),null!=t.top&&(h.top=t.top-s.top+r),null!=t.left&&(h.left=t.left-s.left+o),"using"in t?t.using.call(e,h):c.css(h)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(n,"marginTop",!0),left:t.left-o.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||re}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;S.fn[e]=function(n){return V(this,(function(e,n,o){var a;if(b(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[n];a?a.scrollTo(i?a.pageXOffset:o,i?o:a.pageYOffset):e[n]=o}),e,n,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=qe(m.pixelPosition,(function(e,i){if(i)return i=Ye(e,t),ze.test(i)?S(e).position()[t]+"px":i}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){S.fn[n]=function(o,a){var r=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===a?"margin":"border");return V(this,(function(t,i,o){var a;return b(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?S.css(t,i,s):S.style(t,i,o,s)}),t,r?o:void 0,r)}}))})),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),S.proxy=function(e,t){var i,n,o;if("string"==typeof t&&(i=e[t],t=e,e=i),y(e))return n=l.call(arguments,2),(o=function(){return e.apply(t||this,n.concat(l.call(arguments)))}).guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=y,S.isWindow=b,S.camelCase=X,S.type=E,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(n=function(){return S}.apply(t,[]))||(e.exports=n);var Zt=i.jQuery,Qt=i.$;return S.noConflict=function(e){return i.$===S&&(i.$=Qt),e&&i.jQuery===S&&(i.jQuery=Zt),S},o||(i.jQuery=i.$=S),S}))},function(e,t,i){"use strict";var n=i(2),o=i(20),a=i(4),r=i(5);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,i){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(this,t),(n=c(this,h(t).call(this))).method=e,n.url=i,n.params=o,n.data=null===n.params.data||void 0===n.params.data?{}:n.params.data,n.http=null,n.status=null,n.success=!1,n.aborted=!1,n.retryTimeout=3e3,n.initialize(),n}var i,a,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),i=t,f=[{key:"COMPLETED",get:function(){return"completed"}}],(a=[{key:"initialize",value:function(){this.initRequestObject(),this.prepareData(),this.http.send(this.data)}},{key:"initRequestObject",value:function(){if(window.XMLHttpRequest?this.http=new XMLHttpRequest:window.ActiveXObject&&(this.http=new ActiveXObject("Microsoft.XMLHTTP")),null===this.http)throw"XMLHttpRequest is not supported in this Browser.";this.http.open(this.method,this.url,!0===this.params.async),this.params.timeout&&(this.http.timeout=1e3*this.params.timeout),this.http.onreadystatechange=this.handleReadyStateChange.bind(this)}},{key:"prepareData",value:function(){if(n.a.has("xsrfkey")&&n.a.has("xsrfkeyname"))switch(this.params.dataType){case m.DATATYPE_FORM:case m.DATATYPE_JSON:"object"===s(this.data)&&null!==this.data&&(this.data[n.a.get("xsrfkeyname")]=n.a.get("xsrfkey"))}switch(this.params.dataType){case m.DATATYPE_FORM:this._prepareFormData();break;case m.DATATYPE_JSON:this._prepareJsonData();break;case m.DATATYPE_FILE:this._prepareFileData();break;default:this._preparePlainTextData()}}},{key:"_prepareFormData",value:function(){this.http.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.data=o.a.encodeURI(this.data)}},{key:"_prepareJsonData",value:function(){this.http.setRequestHeader("Content-Type","application/json"),window.JSON&&JSON.stringify&&(this.data=JSON.stringify(this.data))}},{key:"_prepareFileData",value:function(){this.data&&this.data.name&&this.http.setRequestHeader("X_FILENAME",encodeURIComponent(this.data.name)),"function"==typeof this.params.onUploadProgress&&this.http.upload.addEventListener("progress",this.handleUploadProgress.bind(this),!1),"onUploadError"in this.params&&"function"==typeof this.params.onUploadError&&this.http.upload.addEventListener("error",this.handleUploadError.bind(this),!1),"onUploadAbort"in this.params&&"function"==typeof this.params.onUploadAbort&&this.http.upload.addEventListener("abort",this.handleUploadAbort.bind(this),!1),"onUploadComplete"in this.params&&"function"==typeof this.params.onUploadComplete&&this.http.upload.addEventListener("load",this.handleUploadComplete.bind(this),!1)}},{key:"_preparePlainTextData",value:function(){this.http.setRequestHeader("Content-Type","text/plain")}},{key:"resend",value:function(){this.initRequestObject(),this.http.send(this.data)}},{key:"convertResponse",value:function(e){var t;if(this.params.responseType===m.RESPONSETYPE_JSON){if(null!==e&&e.length>0)try{window.JSON&&JSON.parse&&(t=JSON.parse(e))}catch(e){}void 0===t&&(t={})}return void 0===t?e:t}},{key:"abort",value:function(){this.http&&(this.aborted=!0,this.http.abort())}},{key:"handleReadyStateChange",value:function(){var e=this;if(4===this.http.readyState){if(this.status=this.http.status,this.success=this.status>=200&&this.status<300,!this.aborted&&!0===this.params.retryOnBadResponse&&(0===this.status||5===Math.floor(this.status/100)))return window.setTimeout((function(){e.resend()}),this.retryTimeout),void(this.retryTimeout<45e3&&(this.retryTimeout+=3e3));this.dispatchEvent(new r.a(t.COMPLETED)),"function"==typeof this.params.onComplete&&this.params.onComplete(this.convertResponse(this.http.responseText),this)}}},{key:"handleUploadProgress",value:function(e){"onUploadProgress"in this.params&&this.params.onUploadProgress(e,this)}},{key:"handleUploadError",value:function(e){"onUploadError"in this.params&&this.params.onUploadError(e,this)}},{key:"handleUploadAbort",value:function(e){"onUploadAbort"in this.params&&this.params.onUploadAbort(e,this)}},{key:"handleUploadComplete",value:function(e){"onUploadComplete"in this.params&&this.params.onUploadComplete(e,this)}}])&&u(i.prototype,a),f&&u(i,f),t}(a.a);function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v={},g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"get",value:function(t,i){return e.request(e.METHOD_GET,t,i)}},{key:"post",value:function(t,i){return e.request(e.METHOD_POST,t,i)}},{key:"patch",value:function(t,i){return e.request(e.METHOD_PATCH,t,i)}},{key:"put",value:function(t,i){return e.request(e.METHOD_PUT,t,i)}},{key:"delete",value:function(t,i){return e.request(e.METHOD_DELETE,t,i)}},{key:"request",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.isLocked(i))return null;n&&!0===n.lock&&e.lockURL(i);var o={};for(var a in e.defaultParams)o[a]=e.defaultParams[a];for(var r in n)o[r]=n[r];var s=new f(t,i,o);return s.addEventListener(f.COMPLETED,e._handleRequestCompleted),s}},{key:"lockURL",value:function(t){e.isLocked(t)||(v[t]=null)}},{key:"unlockURL",value:function(e){delete v[e]}},{key:"isLocked",value:function(e){return e in v}},{key:"_handleRequestCompleted",value:function(t){e.unlockURL(t.target.url)}},{key:"defaultParams",get:function(){return{async:!0,data:null,dataType:"form-urlencoded",responseType:"plain",retryOnBadResponse:!0}}},{key:"DATATYPE_FORM",get:function(){return"form-urlencoded"}},{key:"DATATYPE_JSON",get:function(){return"json"}},{key:"DATATYPE_FILE",get:function(){return"file"}},{key:"DATATYPE_PLAIN",get:function(){return"plain"}},{key:"RESPONSETYPE_JSON",get:function(){return"json"}},{key:"RESPONSETYPE_PLAIN",get:function(){return"plain"}},{key:"METHOD_POST",get:function(){return"POST"}},{key:"METHOD_GET",get:function(){return"GET"}},{key:"METHOD_PUT",get:function(){return"PUT"}},{key:"METHOD_PATCH",get:function(){return"PATCH"}},{key:"METHOD_DELETE",get:function(){return"DELETE"}}],(i=null)&&p(t.prototype,i),n&&p(t,n),e}(),m=t.a=g},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t}var t,i,o;return t=e,(i=[{key:"has",value:function(e){return e in this._data}},{key:"get",value:function(e){return e in this._data?this._data[e]:null}},{key:"list",value:function(){if(window.console&&console.log)for(var e in this._data)console.log(e)}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=new o(window.TobyVars)},function(e,t,i){"use strict";var n=i(28),o=i.n(n),a=(i(42),new o.a);window.i18n=a,t.a=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(t,i,o){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,e),this.type=t,this.callback=i,this.namespace=o,this.once=a};function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventListeners={}}var t,i,n;return t=e,(i=[{key:"addEventListener",value:function(e,t,i){if(e instanceof Array)for(var n=0,a=e.length;n<a;n++)this._addEventListener(new o(e[n],t,i,!1));else this._addEventListener(new o(e,t,i,!1));return this}},{key:"addEventListenerOnce",value:function(e,t,i){if(e instanceof Array)for(var n=0,a=e.length;n<a;n++)this._addEventListener(new o(e[n],t,i,!0));else this._addEventListener(new o(e,t,i,!0));return this}},{key:"_addEventListener",value:function(e){e.type in this._eventListeners||(this._eventListeners[e.type]=[]),this._eventListeners[e.type].push(e)}},{key:"removeEventListener",value:function(e,t){var i;e instanceof Array||(e=[e]);for(var n=0,o=e.length;n<o;n++)if((i=e[n])in this._eventListeners)for(var a=this._eventListeners[i],r=a.length-1;r>=0;r--)a[r].callback===t&&a.splice(r,1);return this}},{key:"removeEventListenersByNamespace",value:function(e){var t;for(var i in this._eventListeners)for(var n=(t=this._eventListeners[i]).length-1;n>=0;n--)t[n].namespace===e&&t.splice(n,1);return this}},{key:"dispatchEvent",value:function(e){if(!(e.type in this._eventListeners))return this;e.target||(e.target=this),e.currentTarget=this;for(var t,i=this._eventListeners[e.type].concat(),n=i.length-1;n>=0;n--)(t=i[n]).callback(e),!0===t.once&&this.removeEventListener(t.type,t.callback);return this}},{key:"finalize",value:function(){this._eventListeners=null}}])&&a(t.prototype,i),n&&a(t,n),e}();t.a=r},function(e,t,i){"use strict";t.a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.target=void 0,this.currentTarget=void 0}},function(e,t,i){"use strict";t.a={DELAYED:"delayed",OPENING:"opening",OPENED:"opened",CLOSING:"closing",CLOSED:"closed"}},function(e,t,i){"use strict";var n=i(4),o=i(25),a=i(26);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h={},d={},f={},p=null,v=0,g=function(e){if(e.isSerial()){if(f[e.getType()]!==e)throw"given notification is not opened";delete f[e.getType()]}},m=function(e,t){if(e.isSerial()){var i=e.getType();i in d||(d[i]=[]),!0===t?d[i].unshift(e):d[i].push(e)}},y=function(e){function t(){var e;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=l(this,u(t).call(this)),null!==p)throw"This class is a singleton and therefore can only be accessed through Notifier.getInstance().";return e}var i,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),i=t,r=[{key:"getInstance",value:function(){return null===p&&(p=new t),p}}],(n=[{key:"open",value:function(e){if(null===e.getContent())throw"no content set in notification definition";var t=e.getNotificationClass(),i=e.getId();if(null===i&&(i="notification_".concat(v)),this.hasNotification(i))throw"A notification with id '".concat(i,"' is already registered.");var n=new t(i,e);v++,function(e){h[e.getId()]=e}(n);var o,a=!1;if(n.isSerial()){var r=(o=n.getType(),f[o]||null);!0===e.getOpenImmediately()?null!==r&&(m(n,!0),a=!0,this.close(r)):!0===e.getSuspendCurrent()?null!==r&&(m(n,!0),a=!0,this._suspend(r)):null!==r&&(m(n,!1),a=!0)}return a||this._openNotification(n),n}},{key:"_openNextInLine",value:function(e){var t=function(e){return e in d?d[e]:[]}(e);if(0!==t.length){var i=t[0];!function(e){if(e.isSerial()){var t=e.getType();if(t in d)for(var i=d[t],n=0,o=i.length;n<o;n++)if(i[n]===e){i.splice(n,1);break}}}(i),this._openNotification(i)}}},{key:"_openNotification",value:function(e){!function(e){if(e.isSerial()){if(void 0!==f[e.getType()])throw"A notification for the type ".concat(e.getType()," is already opened.");f[e.getType()]=e}}(e),e.triggerOpen(),this.dispatchEvent(new o.a(o.a.NOTIFICATION_OPENED,this,e))}},{key:"close",value:function(e,t){var i=this,n=null;if("string"==typeof e)n=this.getNotification(e);else{if(!(e instanceof a.a))throw"given token is neither a notification nor a notification id";n=this.getNotification(e.getId())}return null!==n&&(n.triggerClose((function(){g(n),function(e){e.getId()in h&&delete h[e.getId()]}(n),"function"==typeof t&&t(),n.isSerial()&&i._openNextInLine(n.getType())})),this.dispatchEvent(new o.a(o.a.NOTIFICATION_CLOSED,this,n)),!0)}},{key:"_suspend",value:function(e,t){var i=this;if(!e.isSerial())throw"only serial notifications can be suspended";m(e,!1),e.triggerClose((function(){g(e),"function"==typeof t&&t(),i._openNextInLine(e.getType())}))}},{key:"hasNotification",value:function(e){return e in h}},{key:"getNotification",value:function(e){return"string"!=typeof e?null:e in h?h[e]:null}}])&&s(i.prototype,n),r&&s(i,r),t}(n.a);t.a=y.getInstance()},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return o(this,t),r(this,s(t).apply(this,arguments))}var i,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),i=t,u=[{key:"PRESETS_LOADED",get:function(){return"presetsLoaded"}},{key:"PRESET_ADDED",get:function(){return"presetAdded"}},{key:"PRESET_REMOVED",get:function(){return"presetRemoved"}},{key:"MOVED",get:function(){return"moved"}},{key:"RENAMED",get:function(){return"renamed"}},{key:"TRUNCATED",get:function(){return"truncated"}},{key:"REMOVED",get:function(){return"removed"}},{key:"FAVORIZED",get:function(){return"favorized"}},{key:"UNFAVORIZED",get:function(){return"unfavorized"}}],(n=null)&&a(i.prototype,n),u&&a(i,u),t}(i(11).a);t.a=u},function(e,t,i){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.0.5
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/i.r(t);var a,r,s,l,u,c,h,d,f,p,v,g,m,y,b,_,w,E,S,k,T,C,x,O,D,A={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},I={duration:.5,overwrite:!1,delay:0},P=2*Math.PI,$=P/4,R=0,L=Math.sqrt,M=Math.cos,F=Math.sin,N=function(e){return"string"==typeof e},B=function(e){return"function"==typeof e},U=function(e){return"number"==typeof e},j=function(e){return void 0===e},G=function(e){return"object"==typeof e},H=function(e){return!1!==e},z=function(){return"undefined"!=typeof window},V=function(e){return B(e)||N(e)},W=Array.isArray,Y=/(?:-?\.?\d|\.)+/gi,q=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,X=/[-+=\.]*\d+(?:\.|e-|e)*\d*/gi,J=/\(([^()]+)\)/i,K=/[\+-]=-?[\.\d]+/,Z=/[#\-+\.]*\b[a-z\d-=+%.]+/gi,Q={},ee={},te=function(e){return(ee=xe(e,Q))&&ei},ie=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ne=function(e,t){return!t&&console.warn(e)},oe=function(e,t){return e&&(Q[e]=t)&&ee&&(ee[e]=t)||Q},ae=function(){return 0},re={},se=[],le={},ue={},ce={},he=30,de=[],fe="onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",pe=function(e){var t,i,n=e[0];if(G(n)||B(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(i=de.length;i--&&!de[i].targetTest(n););t=de[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Tt(e[i],t)))||e.splice(i,1);return e},ve=function(e){return e._gsap||pe(qe(e))[0]._gsap},ge=function(e,t){var i=e[t];return B(i)?e[t]():j(i)&&e.getAttribute(t)||i},me=function(e,t){return(e=e.split(",")).forEach(t)||e},ye=function(e){return Math.round(1e4*e)/1e4},be=function(e,t){for(var i=t.length,n=0;e.indexOf(t[n])<0&&++n<i;);return n<i},_e=function(e,t,i){var n,o=U(e[1]),a=(o?2:1)+(t<2?0:1),r=e[a];return o&&(r.duration=e[1]),1===t?(r.runBackwards=1,r.immediateRender=H(r.immediateRender)):2===t&&(n=e[a-1],r.startAt=n,r.immediateRender=H(r.immediateRender)),r.parent=i,r},we=function(){var e,t,i=se.length,n=se.slice(0);for(le={},se.length=0,e=0;e<i;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Ee=function(e,t,i,n){se.length&&we(),e.render(t,i,n),se.length&&we()},Se=function(e){var t=parseFloat(e);return t||0===t?t:e},ke=function(e){return e},Te=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Ce=function(e,t){for(var i in t)i in e||"duration"===i||"ease"===i||(e[i]=t[i])},xe=function(e,t){for(var i in t)e[i]=t[i];return e},Oe=function e(t,i){for(var n in i)t[n]=G(i[n])?e(t[n]||(t[n]={}),i[n]):i[n];return t},De=function(e,t){var i,n={};for(i in e)i in t||(n[i]=e[i]);return n},Ae=function(e,t,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var o=t._prev,a=t._next;o?o._next=a:e[i]===t&&(e[i]=a),a?a._prev=o:e[n]===t&&(e[n]=o),t._dp=e,t._next=t._prev=t.parent=null},Ie=function(e,t){!e.parent||t&&!e.parent.autoRemoveChildren||e.parent.remove(e),e._act=0},Pe=function(e){for(var t=e;t;)t._dirty=1,t=t.parent;return e},$e=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Re=function(e){return e._repeat?Le(e._tTime,e=e.duration()+e._rDelay)*e:0},Le=function(e,t){return(e/=t)&&~~e===e?~~e-1:~~e},Me=function(e,t){return(e-t._start)*t._ts+(t._ts>0?0:t._dirty?t.totalDuration():t._tDur)},Fe=function(e,t,i){if(t.parent&&Ie(t),t._start=i+t._delay,t._end=t._start+(t.totalDuration()/t._ts||0),function(e,t,i,n,o){void 0===i&&(i="_first"),void 0===n&&(n="_last");var a,r=e[n];if(o)for(a=t[o];r&&r[o]>a;)r=r._prev;r?(t._next=r._next,r._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=r,t.parent=e}(e,t,"_first","_last",e._sort?"_start":0),e._recent=t,t._time||!t._dur&&t._initted){var n=(e.rawTime()-t._start)*t._ts;(!t._dur||He(0,t.totalDuration(),n)-t._tTime>1e-8)&&t.render(n,!0)}if(Pe(e),e._dp&&e._time>=e._dur&&e._ts&&e._dur<e.duration())for(var o=e;o._dp;)o.totalTime(o._tTime,!0),o=o._dp;return e},Ne=function(e,t,i,n){return Pt(e,t),e._initted?!i&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&c!==ft.frame?(se.push(e),e._lazy=[t,n],1):void 0:1},Be=function(e){if(e instanceof xt)return Pe(e);var t=e._repeat;return e._tDur=t?t<0?1e12:ye(e._dur*(t+1)+e._rDelay*t):e._dur,Pe(e.parent),e},Ue={_start:0,endTime:ae},je=function e(t,i,n){var o,a,r=t.labels,s=t._recent||Ue,l=t.duration()>=1e8?s.endTime(!1):t._dur;return N(i)&&(isNaN(i)||i in r)?"<"===(o=i.charAt(0))||">"===o?("<"===o?s._start:s.endTime(s._repeat>=0))+(parseFloat(i.substr(1))||0):(o=i.indexOf("="))<0?(i in r||(r[i]=l),r[i]):(a=+(i.charAt(o-1)+i.substr(o+1)),o>1?e(t,i.substr(0,o-1))+a:l+a):null==i?l:+i},Ge=function(e,t){return e||0===e?t(e):t},He=function(e,t,i){return i<e?e:i>t?t:i},ze=function(e){return(e+"").substr((parseFloat(e)+"").length)},Ve=[].slice,We=function(e){return e&&G(e)&&"length"in e&&(!e.length||e.length-1 in e&&G(e[0]))&&!e.nodeType&&e!==r},Ye=function(e,t,i){return void 0===i&&(i=[]),e.forEach((function(e){var n;return N(e)&&!t||We(e)?(n=i).push.apply(n,qe(e)):i.push(e)}))||i},qe=function(e,t){return!N(e)||t||!s&&pt()?W(e)?Ye(e,t):We(e)?Ve.call(e,0):e?[e]:[]:Ve.call(l.querySelectorAll(e),0)},Xe=function(e){if(B(e))return e;var t=G(e)?e:{each:e},i=_t(t.ease),n=t.from||0,o=parseFloat(t.base)||0,a={},r=n>0&&n<1,s=isNaN(n)||r,l=t.axis,u=n,c=n;return N(n)?u=c={center:.5,edges:.5,end:1}[n]||0:!r&&s&&(u=n[0],c=n[1]),function(e,r,h){var d,f,p,v,g,m,y,b,_,w=(h||t).length,E=a[w];if(!E){if(!(_="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(y=-1e8;y<(y=h[_++].getBoundingClientRect().left)&&_<w;);_--}for(E=a[w]=[],d=s?Math.min(_,w)*u-.5:n%_,f=s?w*c/_-.5:n/_|0,y=0,b=1e8,m=0;m<w;m++)p=m%_-d,v=f-(m/_|0),E[m]=g=l?Math.abs("y"===l?v:p):L(p*p+v*v),g>y&&(y=g),g<b&&(b=g);E.max=y-b,E.min=b,E.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(_>w?w-1:l?"y"===l?w/_:_:Math.max(_,w/_))||0)*("edges"===n?-1:1),E.b=w<0?o-w:o,E.u=ze(t.amount||t.each)||0,i=i&&w<0?bt(i):i}return w=(E[e]-E.min)/E.max||0,ye(E.b+(i?i(w):w)*E.v)+E.u}},Je=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(i){return~~(Math.round(parseFloat(i)/e)*e*t)/t+(U(i)?0:ze(i))}},Ke=function(e,t){var i,n,o=W(e);return!o&&G(e)&&(i=o=e.radius||1e8,e.values?(e=qe(e.values),(n=!U(e[0]))&&(i*=i)):e=Je(e.increment)),Ge(t,o?B(e)?function(t){return n=e(t),Math.abs(n-t)<=i?n:t}:function(t){for(var o,a,r=parseFloat(n?t.x:t),s=parseFloat(n?t.y:0),l=1e8,u=0,c=e.length;c--;)(o=n?(o=e[c].x-r)*o+(a=e[c].y-s)*a:Math.abs(e[c]-r))<l&&(l=o,u=c);return u=!i||l<=i?e[u]:t,n||u===t||U(t)?u:u+ze(t)}:Je(e))},Ze=function(e,t,i,n){return Ge(W(e)?!t:!0===i?!!(i=0):!n,(function(){return W(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&~~(Math.round((e+Math.random()*(t-e))/i)*i*n)/n}))},Qe=function(e,t,i){return Ge(i,(function(i){return e[~~t(i)]}))},et=function(e){for(var t,i,n,o,a=0,r="";~(t=e.indexOf("random(",a));)n=e.indexOf(")",t),o="["===e.charAt(t+7),i=e.substr(t+7,n-t-7).match(o?Z:Y),r+=e.substr(a,t-a)+Ze(o?i:+i[0],+i[1],+i[2]||1e-5),a=n+1;return r+e.substr(a,e.length-a)},tt=function(e,t,i,n,o){var a=t-e,r=n-i;return Ge(o,(function(t){return i+(t-e)/a*r}))},it=function(e,t,i){var n,o,a,r=e.labels,s=1e8;for(n in r)(o=r[n]-t)<0==!!i&&o&&s>(o=Math.abs(o))&&(a=n,s=o);return a},nt=function(e,t,i){var n,o,a=e.vars,r=a[t];if(r)return n=a[t+"Params"],o=a.callbackScope||e,i&&se.length&&we(),n?r.apply(o,n):r.call(o)},ot=function(e){return Ie(e),e.progress()<1&&nt(e,"onInterrupt"),e},at=function(e){var t=(e=!e.name&&e.default||e).name,i=B(e),n=t&&!i&&e.init?function(){this._props=[]}:e,o={init:ae,render:Vt,add:At,kill:Yt,modifier:Wt,rawVars:0},a={targetTest:0,get:0,getSetter:jt,aliases:{},register:0};if(pt(),e!==n){if(ue[t])return;Te(n,Te(De(e,o),a)),xe(n.prototype,xe(o,De(e,a))),ue[n.prop=t]=n,e.targetTest&&(de.push(n),re[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}oe(t,n),e.register&&e.register(ei,n,Jt)},rt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},st=function(e,t,i){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},lt=function(e,t){var i,n,o,a,r,s,l,u,c,h,d=e?U(e)?[e>>16,e>>8&255,255&e]:0:rt.black;if(!d){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),rt[e])d=rt[e];else if("#"===e.charAt(0))4===e.length&&(i=e.charAt(1),n=e.charAt(2),o=e.charAt(3),e="#"+i+i+n+n+o+o),d=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(d=h=e.match(Y),t){if(~e.indexOf("="))return e.match(q)}else a=+d[0]%360/360,r=+d[1]/100,i=2*(s=+d[2]/100)-(n=s<=.5?s*(r+1):s+r-s*r),d.length>3&&(d[3]*=1),d[0]=st(a+1/3,i,n),d[1]=st(a,i,n),d[2]=st(a-1/3,i,n);else d=e.match(Y)||rt.transparent;d=d.map(Number)}return t&&!h&&(i=d[0]/255,n=d[1]/255,o=d[2]/255,s=((l=Math.max(i,n,o))+(u=Math.min(i,n,o)))/2,l===u?a=r=0:(c=l-u,r=s>.5?c/(2-l-u):c/(l+u),a=l===i?(n-o)/c+(n<o?6:0):l===n?(o-i)/c+2:(i-n)/c+4,a*=60),d[0]=a+.5|0,d[1]=100*r+.5|0,d[2]=100*s+.5|0),d},ut=function(e,t){var i,n,o,a=(e+"").match(ct),r=0,s="";if(!a)return e;for(i=0;i<a.length;i++)n=a[i],r+=(o=e.substr(r,e.indexOf(n,r)-r)).length+n.length,3===(n=lt(n,t)).length&&n.push(1),s+=o+(t?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return s+e.substr(r)},ct=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in rt)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),ht=/hsl[a]?\(/,dt=function(e){var t,i=e.join(" ");ct.lastIndex=0,ct.test(i)&&(t=ht.test(i),e[0]=ut(e[0],t),e[1]=ut(e[1],t))},ft=(m=Date.now,y=500,b=33,_=m(),w=_,S=E=1/60,T=function e(t){var i,n,o=m()-w,a=!0===t;o>y&&(_+=o-b),w+=o,g.time=(w-_)/1e3,((i=g.time-S)>0||a)&&(g.frame++,S+=i+(i>=E?.004:E-i),n=1),a||(f=p(e)),n&&k.forEach((function(e){return e(g.time,o,g.frame,t)}))},g={time:0,frame:0,tick:function(){T(!0)},wake:function(){u&&(!s&&z()&&(r=s=window,l=r.document||{},Q.gsap=ei,(r.gsapVersions||(r.gsapVersions=[])).push(ei.version),te(ee||r.GreenSockGlobals||!r.gsap&&r||{}),v=r.requestAnimationFrame),f&&g.sleep(),p=v||function(e){return setTimeout(e,1e3*(S-g.time)+1|0)},d=1,T(2))},sleep:function(){(v?r.cancelAnimationFrame:clearTimeout)(f),d=0,p=ae},lagSmoothing:function(e,t){y=e||1e8,b=Math.min(t,y,0)},fps:function(e){E=1/(e||60),S=g.time+E},add:function(e){k.indexOf(e)<0&&k.push(e),pt()},remove:function(e){var t;~(t=k.indexOf(e))&&k.splice(t,1)},_listeners:k=[]}),pt=function(){return!d&&ft.wake()},vt={},gt=/^[\d.\-M][\d.\-,\s]/,mt=/["']/g,yt=function(e){for(var t,i,n,o={},a=e.substr(1,e.length-3).split(":"),r=a[0],s=1,l=a.length;s<l;s++)i=a[s],t=s!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,t),o[r]=isNaN(n)?n.replace(mt,"").trim():+n,r=i.substr(t+1).trim();return o},bt=function(e){return function(t){return 1-e(1-t)}},_t=function(e,t){return e&&(B(e)?e:vt[e]||function(e){var t=(e+"").split("("),i=vt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[yt(t[1])]:J.exec(e)[1].split(",").map(Se)):vt._CE&&gt.test(e)?vt._CE("",e):i}(e))||t},wt=function(e,t,i,n){void 0===i&&(i=function(e){return 1-t(1-e)}),void 0===n&&(n=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var o,a={easeIn:t,easeOut:i,easeInOut:n};return me(e,(function(e){for(var t in vt[e]=Q[e]=a,vt[o=e.toLowerCase()]=i,a)vt[o+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=vt[e+"."+t]=a[t]})),a},Et=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},St=function e(t,i,n){var o=i>=1?i:1,a=(n||(t?.3:.45))/(i<1?i:1),r=a/P*(Math.asin(1/o)||0),s=function(e){return 1===e?1:o*Math.pow(2,-10*e)*F((e-r)*a)+1},l="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Et(s);return a=P/a,l.config=function(i,n){return e(t,i,n)},l},kt=function e(t,i){void 0===i&&(i=1.70158);var n=function(e){return--e*e*((i+1)*e+i)+1},o="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:Et(n);return o.config=function(i){return e(t,i)},o};me("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var i=t<5?t+1:t;wt(e+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},(function(e){return 1-Math.pow(1-e,i)}),(function(e){return e<.5?Math.pow(2*e,i)/2:1-Math.pow(2*(1-e),i)/2}))})),vt.Linear.easeNone=vt.none=vt.Linear.easeIn,wt("Elastic",St("in"),St("out"),St()),C=7.5625,O=1/(x=2.75),wt("Bounce",(function(e){return 1-D(1-e)}),D=function(e){return e<O?C*e*e:e<.7272727272727273?C*Math.pow(e-1.5/x,2)+.75:e<.9090909090909092?C*(e-=2.25/x)*e+.9375:C*Math.pow(e-2.625/x,2)+.984375}),wt("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),wt("Circ",(function(e){return-(L(1-e*e)-1)})),wt("Sine",(function(e){return 1-M(e*$)})),wt("Back",kt("in"),kt("out"),kt()),vt.SteppedEase=vt.steps=Q.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,n=e+(t?0:1),o=t?1:0;return function(e){return((n*He(0,1-1e-8,e)|0)+o)*i}}},I.ease=vt["quad.out"];var Tt=function(e,t){this.id=R++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:ge,this.set=t?t.getSetter:jt},Ct=function(){function e(e,t){var i=e.parent||a;this.vars=e,this._dur=this._tDur=+e.duration||0,this._delay=+e.delay||0,(this._repeat=e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase,Be(this)),this._ts=1,this.data=e.data,d||ft.wake(),i&&Fe(i,this,t||0===t?t:i._time),e.reversed&&this.reversed(!0),e.paused&&this.paused(!0)}var t=e.prototype;return t.delay=function(e){return e||0===e?(this._delay=e,this):this._delay},t.duration=function(e){var t=arguments.length,i=this._repeat,n=i>0?i*((t?e:this._dur)+this._rDelay):0;return t?this.totalDuration(i<0?e:e+n):this.totalDuration()&&this._dur},t.totalDuration=function(e){if(!arguments.length)return this._tDur;var t=this._repeat,i=(e||this._rDelay)&&t<0;return this._tDur=i?1e12:e,this._dur=i?e:(e-t*this._rDelay)/(t+1),this._dirty=0,Pe(this.parent),this},t.totalTime=function(e,t){if(pt(),!arguments.length)return this._tTime;var i,n=this.parent||this._dp;if(n&&n.smoothChildTiming&&this._ts){for(i=this._start,this._start=n._time-(this._ts>0?e/this._ts:((this._dirty?this.totalDuration():this._tDur)-e)/-this._ts),this._end+=this._start-i,n._dirty||Pe(n);n.parent;)n.parent._time!==n._start+(n._ts>0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;this.parent||Fe(this._dp,this,this._start-this._delay)}return this._tTime===e&&(this._dur||t)||(this._ts||(this._pTime=e),Ee(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Re(this))%this._dur||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._tTime/this.totalDuration()},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Re(this),t):this.duration()?this._time/this._dur:this.ratio},t.iteration=function(e,t){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*i,t):this._repeat?Le(this._tTime,i)+1:1},t.timeScale=function(e){return arguments.length?null!==this._pauseTS?(this._pauseTS=e,this):(this._ts=e,$e(this.totalTime(this.parent?Me(this.parent._time,this):this._tTime,!0))):this._ts||this._pauseTS||0},t.paused=function(e){var t=!this._ts;return arguments.length?(t!==e&&(e?(this._pauseTS=this._ts,this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(this._ts=this._pauseTS||1,this._pauseTS=null,e=this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8),this.totalTime(e,!0))),this):t},t.startTime=function(e){return arguments.length?(this.parent&&this.parent._sort&&Fe(this.parent,this,e-this._delay),this):this._start},t.endTime=function(e){return this._start+(H(e)?this.totalDuration():this.duration())/Math.abs(this._ts)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Me(t.rawTime(e),this):this._tTime:this._tTime},t.repeat=function(e){return arguments.length?(this._repeat=e,Be(this)):this._repeat},t.repeatDelay=function(e){return arguments.length?(this._rDelay=e,Be(this)):this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(je(this,e),H(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,H(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){var t=this._ts||this._pauseTS||0;return arguments.length?(e!==this.reversed()&&(this[null===this._pauseTS?"_ts":"_pauseTS"]=Math.abs(t)*(e?-1:1),this.totalTime(this._tTime,!0)),this):t<0},t.invalidate=function(){return this._initted=0,this},t.isActive=function(e){var t,i=this.parent||this._dp,n=this._start;return!(i&&!(this._ts&&(this._initted||!e)&&i.isActive(e)&&(t=i.rawTime(!0))>=n&&t<this.endTime(!0)-1e-8))},t.eventCallback=function(e,t,i){var n=this.vars;return arguments.length>1?(t?(n[e]=t,i&&(n[e+"Params"]=i),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(e){var t=this;return new Promise((function(i){var n=e||ke,o=function(){var e=t.then;t.then=null,(n=n(t))&&(n.then||n===t)&&(t._prom=n,t.then=e),i(n),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?o():t._prom=o}))},t.kill=function(){ot(this)},e}();Te(Ct.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:0,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_pauseTS:null});var xt=function(e){function t(t,i){var n;return void 0===t&&(t={}),(n=e.call(this,t,i)||this).labels={},n.smoothChildTiming=H(t.smoothChildTiming),n.autoRemoveChildren=!!t.autoRemoveChildren,n._sort=H(t.sortChildren),n}o(t,e);var i=t.prototype;return i.to=function(e,t,i){return new Mt(e,_e(arguments,0,this),je(this,U(t)?arguments[3]:i)),this},i.from=function(e,t,i){return new Mt(e,_e(arguments,1,this),je(this,U(t)?arguments[3]:i)),this},i.fromTo=function(e,t,i,n){return new Mt(e,_e(arguments,2,this),je(this,U(t)?arguments[4]:n)),this},i.set=function(e,t,i){return t.duration=0,t.parent=this,t.repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Mt(e,t,je(this,i)),this},i.call=function(e,t,i){return Fe(this,Mt.delayedCall(0,e,t),je(this,i))},i.staggerTo=function(e,t,i,n,o,a,r){return i.duration=t,i.stagger=i.stagger||n,i.onComplete=a,i.onCompleteParams=r,i.parent=this,new Mt(e,i,je(this,o)),this},i.staggerFrom=function(e,t,i,n,o,a,r){return i.runBackwards=1,i.immediateRender=H(i.immediateRender),this.staggerTo(e,t,i,n,o,a,r)},i.staggerFromTo=function(e,t,i,n,o,a,r,s){return n.startAt=i,n.immediateRender=H(n.immediateRender),this.staggerTo(e,t,n,o,a,r,s)},i.render=function(e,t,i){var n,o,r,s,l,u,c,h,d,f,p,v=this._time,g=this._dirty?this.totalDuration():this._tDur,m=this._dur,y=e>g-1e-8&&e>=0&&this!==a?g:e<1e-8?0:e,b=this._zTime<0!=e<0&&(this._initted||!m);if(y!==this._tTime||i||b){if(b&&(m||(v=this._zTime),!e&&t||(this._zTime=e)),n=y,d=this._start,u=0===(h=this._ts),v!==this._time&&m&&(n+=this._time-v),this._repeat&&(p=this._yoyo,l=m+this._rDelay,((n=ye(y%l))>m||g===y)&&(n=m),(s=~~(y/l))&&s===y/l&&(n=m,s--),p&&1&s&&(n=m-n,1),s!==(f=Le(this._tTime,l))&&!this._lock)){var _=p&&1&f,w=_===(p&&1&s);if(s<f&&(_=!_),v=_?0:m,this._lock=1,this.render(v,t,!m)._lock=0,!t&&this.parent&&nt(this,"onRepeat"),v!==this._time||u!==!this._ts)return this;if(w&&(this._lock=2,v=_?m+1e-4:-1e-4,this.render(v,!0)),this._lock=0,!this._ts&&!u)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if(!n._dur&&"isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if(!n._dur&&"isPause"===n.data&&n._start<t)return n;n=n._prev}}(this,ye(v),ye(n)))&&(y-=n-(n=c._start)),this._tTime=y,this._time=n,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1),v||!n||t||nt(this,"onStart"),n>=v&&e>=0)for(o=this._first;o;){if(r=o._next,(o._act||n>=o._start)&&o._ts&&c!==o){if(o.parent!==this)return this.render(e,t,i);if(o.render(o._ts>0?(n-o._start)*o._ts:(o._dirty?o.totalDuration():o._tDur)+(n-o._start)*o._ts,t,i),n!==this._time||!this._ts&&!u){c=0;break}}o=r}else{o=this._last;for(var E=e<0?e:n;o;){if(r=o._prev,(o._act||E<=o._end)&&o._ts&&c!==o){if(o.parent!==this)return this.render(e,t,i);if(o.render(o._ts>0?(E-o._start)*o._ts:(o._dirty?o.totalDuration():o._tDur)+(E-o._start)*o._ts,t,i),n!==this._time||!this._ts&&!u){c=0;break}}o=r}}if(c&&!t&&(this.pause(),c.render(n>=v?0:-1e-8)._zTime=n>=v?1:-1,this._ts))return this._start=d,this.render(e,t,i);this._onUpdate&&!t&&nt(this,"onUpdate",!0),(y===g||!y&&this._ts<0)&&(d!==this._start&&Math.abs(h)===Math.abs(this._ts)||(!n||g>=this.totalDuration())&&((e||!m)&&(y&&this._ts>0||!y&&this._ts<0)&&Ie(this,1),t||e<0&&!v||(nt(this,y===g?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},i.add=function(e,t){var i=this;if(U(t)||(t=je(this,t)),!(e instanceof Ct)){if(W(e))return e.forEach((function(e){return i.add(e,t)})),Pe(this);if(N(e))return this.addLabel(e,t);if(!B(e))return this;e=Mt.delayedCall(0,e)}return this!==e?Fe(this,e,t):this},i.getChildren=function(e,t,i,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=-1e8);for(var o=[],a=this._first;a;)a._start>=n&&(a instanceof Mt?t&&o.push(a):(i&&o.push(a),e&&o.push.apply(o,a.getChildren(!0,t,i)))),a=a._next;return o},i.getById=function(e){for(var t=this.getChildren(1,1,1),i=t.length;i--;)if(t[i].vars.id===e)return t[i]},i.remove=function(e){return N(e)?this.removeLabel(e):B(e)?this.killTweensOf(e):(Ae(this,e),e===this._recent&&(this._recent=this._last),Pe(this))},i.totalTime=function(t,i){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=ft.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts)),e.prototype.totalTime.call(this,t,i),this._forcing=0,this):this._tTime},i.addLabel=function(e,t){return this.labels[e]=je(this,t),this},i.removeLabel=function(e){return delete this.labels[e],this},i.addPause=function(e,t,i){var n=Mt.delayedCall(0,t||ae,i);return n.data="isPause",this._hasPause=1,Fe(this,n,je(this,e))},i.removePause=function(e){var t=this._first;for(e=je(this,e);t;)t._start===e&&"isPause"===t.data&&Ie(t),t=t._next},i.killTweensOf=function(e,t,i){for(var n=this.getTweensOf(e,i),o=n.length;o--;)Ot!==n[o]&&n[o].kill(e,t);return this},i.getTweensOf=function(e,t){for(var i,n=[],o=qe(e),a=this._first;a;)a instanceof Mt?!be(a._targets,o)||t&&!a.isActive("started"===t)||n.push(a):(i=a.getTweensOf(o,t)).length&&n.push.apply(n,i),a=a._next;return n},i.tweenTo=function(e,t){var i=this,n=je(i,e),o=t&&t.startAt,a=Mt.to(i,Te({ease:"none",lazy:!1,time:n,duration:Math.abs(n-(o&&"time"in o?o.time:i._time))/i.timeScale()||1e-8,onStart:function(){i.pause();var e=Math.abs(n-i._time)/i.timeScale();a._dur!==e&&(a._dur=e,a.render(a._time,!0,!0)),t&&t.onStart&&t.onStart.apply(a,t.onStartParams||[])}},t));return a},i.tweenFromTo=function(e,t,i){return this.tweenTo(t,Te({startAt:{time:je(this,e)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(e){return void 0===e&&(e=this._time),it(this,je(this,e))},i.previousLabel=function(e){return void 0===e&&(e=this._time),it(this,je(this,e),1)},i.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},i.shiftChildren=function(e,t,i){void 0===i&&(i=0);for(var n,o=this._first,a=this.labels;o;)o._start>=i&&(o._start+=e),o=o._next;if(t)for(n in a)a[n]>=i&&(a[n]+=e);return Pe(this)},i.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},i.clear=function(e){void 0===e&&(e=!0);for(var t,i=this._first;i;)t=i._next,this.remove(i),i=t;return this._time=this._tTime=0,e&&(this.labels={}),Pe(this)},i.totalDuration=function(e){var t,i,n=0,o=this,r=o._last,s=1e8,l=o._repeat,u=l*o._rDelay||0,c=l<0;if(!arguments.length){if(o._dirty){for(;r;)t=r._prev,r._dirty&&r.totalDuration(),r._start>s&&o._sort&&r._ts&&!o._lock?(o._lock=1,Fe(o,r,r._start-r._delay),o._lock=0):s=r._start,r._start<0&&r._ts&&(n-=r._start,(!o.parent&&!o._dp||o.parent&&o.parent.smoothChildTiming)&&(o._start+=r._start/o._ts,o._time-=r._start,o._tTime-=r._start),o.shiftChildren(-r._start,!1,-1e20),s=0),(i=r._end=r._start+r._tDur/Math.abs(r._ts||r._pauseTS||1e-8))>n&&r._ts&&(n=ye(i)),r=t;o._dur=o===a&&o._time>n?o._time:Math.min(1e8,n),o._tDur=c&&(o._dur||u)?1e12:Math.min(1e8,n*(l+1)+u),o._end=o._start+(o._tDur/Math.abs(o._ts||o._pauseTS||1e-8)||0),o._dirty=0}return o._tDur}return c?o:o.timeScale(o.totalDuration()/e)},t.updateRoot=function(e){if(a._ts&&(Ee(a,Me(e,a)),c=ft.frame),ft.frame>=he){he+=A.autoSleep||120;var t=a._first;if((!t||!t._ts)&&A.autoSleep&&ft._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||ft.sleep()}}},t}(Ct);Te(xt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ot,Dt=function(e,t,i,n,o,a,r){var s,l,u,c,h,d,f,p,v=new Jt(this._pt,e,t,0,1,zt,null,o),g=0,m=0;for(v.b=i,v.e=n,i+="",(f=~(n+="").indexOf("random("))&&(n=et(n)),a&&(a(p=[i,n],e,t),i=p[0],n=p[1]),l=i.match(X)||[];s=X.exec(n);)c=s[0],h=n.substring(g,s.index),u?u=(u+1)%5:"rgba("===h.substr(-5)&&(u=1),c!==l[m++]&&(d=parseFloat(l[m-1])||0,v._pt={_next:v._pt,p:h||1===m?h:",",s:d,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-d,m:u&&u<4?Math.round:0},g=X.lastIndex);return v.c=g<n.length?n.substring(g,n.length):"",v.fp=r,(K.test(n)||f)&&(v.e=0),this._pt=v,v},At=function(e,t,i,n,o,a,r,s,l){B(n)&&(n=n(o||0,e,a));var u,c=e[t],h="get"!==i?i:B(c)?l?e[t.indexOf("set")||!B(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():c,d=B(c)?l?Bt:Nt:Ft;if(N(n)&&(~n.indexOf("random(")&&(n=et(n)),"="===n.charAt(1)&&(n=parseFloat(h)+parseFloat(n.substr(2))*("-"===n.charAt(0)?-1:1)+(ze(h)||0))),h!==n)return isNaN(h+n)?(!c&&!(t in e)&&ie(t,n),Dt.call(this,e,t,h,n,d,s||A.stringFilter,l)):(u=new Jt(this._pt,e,t,+h||0,n-(h||0),"boolean"==typeof c?Ht:Gt,0,d),l&&(u.fp=l),r&&u.modifier(r,this,e),this._pt=u)},It=function(e,t,i,n,o,a){var r,s,l,u;if(ue[e]&&!1!==(r=new ue[e]).init(o,r.rawVars?t[e]:function(e,t,i,n,o){if(B(e)&&(e=$t(e,o,t,i,n)),!G(e)||e.style&&e.nodeType||W(e))return N(e)?$t(e,o,t,i,n):e;var a,r={};for(a in e)r[a]=$t(e[a],o,t,i,n);return r}(t[e],n,o,a,i),i,n,a)&&(i._pt=s=new Jt(i._pt,o,e,0,1,r.render,r,0,r.priority),i!==h))for(l=i._ptLookup[i._targets.indexOf(o)],u=r._props.length;u--;)l[r._props[u]]=s;return r},Pt=function e(t,i){var n,o,r,s,l,u,c,h,d,f,p,v,g=t.vars,m=g.ease,y=g.startAt,b=g.immediateRender,_=g.lazy,w=g.onUpdate,E=g.onUpdateParams,S=g.callbackScope,k=g.runBackwards,T=g.yoyoEase,C=g.keyframes,x=g.autoRevert,O=t._dur,D=t._startAt,A=t._targets,P=t.parent,$=P&&"nested"===P.data?P.parent._targets:A,R="auto"===t._overwrite,L=t.timeline;if(!L||C&&m||(m="none"),t._ease=_t(m,I.ease),t._yEase=T?bt(_t(!0===T?m:T,I.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),!L){if(D&&D.render(-1,!0).kill(),y){if(Ie(t._startAt=Mt.set(A,Te({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:H(_),startAt:null,delay:0,onUpdate:w,onUpdateParams:E,callbackScope:S,stagger:0},y))),b)if(i>0)!x&&(t._startAt=0);else if(O)return}else if(k&&O)if(D)!x&&(t._startAt=0);else if(i&&(b=!1),Ie(t._startAt=Mt.set(A,xe(De(g,re),{overwrite:!1,data:"isFromStart",lazy:b&&H(_),immediateRender:b,stagger:0,parent:P}))),b){if(!i)return}else e(t._startAt,1e-8);for(n=De(g,re),t._pt=0,v=(h=A[0]?ve(A[0]).harness:0)&&g[h.prop],_=O&&H(_)||_&&!O,o=0;o<A.length;o++){if(c=(l=A[o])._gsap||pe(A)[o]._gsap,t._ptLookup[o]=f={},le[c.id]&&we(),p=$===A?o:$.indexOf(l),h&&!1!==(d=new h).init(l,v||n,t,p,$)&&(t._pt=s=new Jt(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach((function(e){f[e]=s})),d.priority&&(u=1)),!h||v)for(r in n)ue[r]&&(d=It(r,n,t,p,l,$))?d.priority&&(u=1):f[r]=s=At.call(t,l,r,"get",n[r],p,$,0,g.stringFilter);t._op&&t._op[o]&&t.kill(l,t._op[o]),R&&t._pt&&(Ot=t,a.killTweensOf(l,f,"started"),Ot=0),t._pt&&_&&(le[c.id]=1)}u&&Xt(t),t._onInit&&t._onInit(t)}t._from=!L&&!!g.runBackwards,t._onUpdate=w,t._initted=1},$t=function(e,t,i,n,o){return B(e)?e.call(t,i,n,o):N(e)&&~e.indexOf("random(")?et(e):e},Rt=fe+",repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Lt=(Rt+",id,stagger,delay,duration,paused").split(","),Mt=function(e){function t(t,i,o){var r;"number"==typeof i&&(o.duration=i,i=o,o=null);var s,l,u,c,h,d,f,p,v=(r=e.call(this,function(e){var t=e.parent||a,i=e.keyframes?Ce:Te;if(H(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent;return e}(i),o)||this).vars,g=v.duration,m=v.delay,y=v.immediateRender,b=v.stagger,_=v.overwrite,w=v.keyframes,E=v.defaults,S=W(t)&&U(t[0])?[t]:qe(t);if(r._targets=S.length?pe(S):ne("GSAP target "+t+" not found. https://greensock.com",!A.nullTargetWarn)||[],r._ptLookup=[],r._overwrite=_,w||b||V(g)||V(m)){if(i=r.vars,(s=r.timeline=new xt({data:"nested",defaults:E||{}})).kill(),s.parent=n(r),w)Te(s.vars.defaults,{ease:"none"}),w.forEach((function(e){return s.to(S,e,">")}));else{if(c=S.length,f=b?Xe(b):ae,G(b))for(h in b)~Rt.indexOf(h)&&(p||(p={}),p[h]=b[h]);for(l=0;l<c;l++){for(h in u={},i)Lt.indexOf(h)<0&&(u[h]=i[h]);u.stagger=0,p&&xe(u,p),i.yoyoEase&&!i.repeat&&(u.yoyoEase=i.yoyoEase),d=S[l],u.duration=+$t(g,n(r),l,d,S),u.delay=(+$t(m,n(r),l,d,S)||0)-r._delay,!b&&1===c&&u.delay&&(r._delay=m=u.delay,r._start+=m,u.delay=0),s.to(d,u,f(l,d,S))}g=m=0}g||r.duration(g=s.duration())}else r.timeline=0;return!0===_&&(Ot=n(r),a.killTweensOf(S),Ot=0),(y||!g&&!w&&r._start===r.parent._time&&H(y)&&function e(t){return!t||t._ts&&e(t.parent)}(n(r))&&"nested"!==r.parent.data)&&(r._tTime=-1e-8,r.render(Math.max(0,-m))),r}o(t,e);var i=t.prototype;return i.render=function(e,t,i){var n,o,a,r,s,l,u,c,h,d=this._time,f=this._tDur,p=this._dur,v=e>f-1e-8&&e>=0?f:e<1e-8?0:e;if(p){if(v!==this._tTime||!e||i||this._startAt&&this._zTime<0!=e<0){if(n=v,c=this.timeline,this._repeat){if(r=p+this._rDelay,(n=ye(v%r))>p&&(n=p),(a=~~(v/r))&&a===v/r&&(n=p,a--),(l=this._yoyo&&1&a)&&(h=this._yEase,n=p-n),s=Le(this._tTime,r),n===d&&!i&&this._initted)return this;a!==s&&this.vars.repeatRefresh&&!this._lock&&(this._lock=i=1,this.render(r*a,!0).invalidate()._lock=0)}if(!this._initted&&Ne(this,n,i,t))return this._tTime=0,this;for(this._tTime=v,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(h||this._ease)(n/p),this._from&&(this.ratio=u=1-u),d||!n||t||nt(this,"onStart"),o=this._pt;o;)o.r(u,o.d),o=o._next;c&&c.render(e<0?e:!n&&l?-1e-8:c._dur*u,t,i)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,i),nt(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!t&&this.parent&&nt(this,"onRepeat"),v!==f&&v||this._tTime!==v||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,i),(e||!p)&&(v&&this._ts>0||!v&&this._ts<0)&&Ie(this,1),t||e<0&&!d||(nt(this,v===f?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else!function(e,t,i,n){var o,a=e._zTime<0?0:1,r=t<0?0:1,s=e._rDelay,l=0;if(s&&e._repeat&&(l=He(0,e._tDur,t),Le(l,s)!==Le(e._tTime,s)&&(a=1-r,e.vars.repeatRefresh&&e._initted&&e.invalidate())),(e._initted||!Ne(e,t,n,i))&&(r!==a||n||1e-8===e._zTime||!t&&e._zTime)){for(e._zTime=t||(i?1e-8:0),e.ratio=r,e._from&&(r=1-r),e._time=0,e._tTime=l,i||nt(e,"onStart"),o=e._pt;o;)o.r(r,o.d),o=o._next;!r&&e._startAt&&!e._onUpdate&&e._start&&e._startAt.render(t,!0,n),e._onUpdate&&!i&&nt(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&nt(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===r&&(e.ratio&&Ie(e,1),i||(nt(e,e.ratio?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}}(this,e,t,i);return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),e.prototype.invalidate.call(this)},i.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t)&&(this._lazy=0,this.parent))return ot(this);if(this.timeline)return this.timeline.killTweensOf(e,t,Ot&&!0!==Ot.vars.overwrite),this;var i,n,o,a,r,s,l,u=this._targets,c=e?qe(e):u,h=this._ptLookup,d=this._pt;if((!t||"all"===t)&&function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0}(u,c))return ot(this);for(i=this._op=this._op||[],"all"!==t&&(N(t)&&(r={},me(t,(function(e){return r[e]=1})),t=r),t=function(e,t){var i,n,o,a,r=e[0]?ve(e[0]).harness:0,s=r&&r.aliases;if(!s)return t;for(n in i=xe({},t),s)if(n in i)for(o=(a=s[n].split(",")).length;o--;)i[a[o]]=i[n];return i}(u,t)),l=u.length;l--;)if(~c.indexOf(u[l]))for(r in n=h[l],"all"===t?(i[l]=t,a=n,o={}):(o=i[l]=i[l]||{},a=t),a)(s=n&&n[r])&&("kill"in s.d&&!0!==s.d.kill(r)||Ae(this,s,"_pt"),delete n[r]),"all"!==o&&(o[r]=1);return this._initted&&!this._pt&&d&&ot(this),this},t.to=function(e,i){return new t(e,i,arguments[2])},t.from=function(e,i){return new t(e,_e(arguments,1))},t.delayedCall=function(e,i,n,o){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:i,onReverseComplete:i,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:o})},t.fromTo=function(e,i,n){return new t(e,_e(arguments,2))},t.set=function(e,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(e,i)},t.killTweensOf=function(e,t,i){return a.killTweensOf(e,t,i)},t}(Ct);Te(Mt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),me("staggerTo,staggerFrom,staggerFromTo",(function(e){Mt[e]=function(){var t=new xt,i=qe(arguments);return i.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,i)}}));var Ft=function(e,t,i){return e[t]=i},Nt=function(e,t,i){return e[t](i)},Bt=function(e,t,i,n){return e[t](n.fp,i)},Ut=function(e,t,i){return e.setAttribute(t,i)},jt=function(e,t){return B(e[t])?Nt:j(e[t])&&e.setAttribute?Ut:Ft},Gt=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4,t)},Ht=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},zt=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},Vt=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Wt=function(e,t,i,n){for(var o,a=this._pt;a;)o=a._next,a.p===n&&a.modifier(e,t,i),a=o},Yt=function(e){for(var t,i,n=this._pt;n;)i=n._next,n.p===e&&!n.op||n.op===e?Ae(this,n,"_pt"):n.dep||(t=1),n=i;return!t},qt=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},Xt=function(e){for(var t,i,n,o,a=e._pt;a;){for(t=a._next,i=n;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:o)?a._prev._next=a:n=a,(a._next=i)?i._prev=a:o=a,a=t}e._pt=n},Jt=function(){function e(e,t,i,n,o,a,r,s,l){this.t=t,this.s=n,this.c=o,this.p=i,this.r=a||Gt,this.d=r||this,this.set=s||Ft,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,i){this.mSet=this.mSet||this.set,this.set=qt,this.m=e,this.mt=i,this.tween=t},e}();me(fe+",parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",(function(e){re[e]=1,"on"===e.substr(0,2)&&(re[e+"Params"]=1)})),Q.TweenMax=Q.TweenLite=Mt,Q.TimelineLite=Q.TimelineMax=xt,a=new xt({sortChildren:!1,defaults:I,autoRemoveChildren:!0,id:"root"}),A.stringFilter=dt;var Kt={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((function(e){return at(e)}))},timeline:function(e){return new xt(e)},getTweensOf:function(e,t){return a.getTweensOf(e,t)},getProperty:function(e,t,i,n){N(e)&&(e=qe(e)[0]);var o=ve(e||{}).get,a=i?ke:Se;return"native"===i&&(i=""),e?t?a((ue[t]&&ue[t].get||o)(e,t,i,n)):function(t,i,n){return a((ue[t]&&ue[t].get||o)(e,t,i,n))}:e},quickSetter:function(e,t,i){if((e=qe(e)).length>1){var n=e.map((function(e){return ei.quickSetter(e,t,i)})),o=n.length;return function(e){for(var t=o;t--;)n[t](e)}}e=e[0]||{};var a=ue[t],r=ve(e),s=a?function(t){var n=new a;h._pt=0,n.init(e,i?t+i:t,h,0,[e]),n.render(1,n),h._pt&&Vt(1,h)}:r.set(e,t);return a?s:function(n){return s(e,t,i?n+i:n,r,1)}},isTweening:function(e){return a.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=_t(e.ease,I.ease)),Oe(I,e||{})},config:function(e){return Oe(A,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,o=e.defaults,a=e.extendTimeline;(n||"").split(",").forEach((function(e){return e&&!ue[e]&&!Q[e]&&ne(t+" effect requires "+e+" plugin.")})),ce[t]=function(e,t){return i(qe(e),Te(t||{},o))},a&&(xt.prototype[t]=function(e,i,n){return this.add(ce[t](e,G(i)?i:(n=i)&&{}),n)})},registerEase:function(e,t){vt[e]=_t(t)},parseEase:function(e,t){return arguments.length?_t(e,t):vt},getById:function(e){return a.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var i,n,o=new xt(e);for(o.smoothChildTiming=H(e.smoothChildTiming),a.remove(o),o._dp=0,o._time=o._tTime=a._time,i=a._first;i;)n=i._next,!t&&!i._dur&&i instanceof Mt&&i.vars.onComplete===i._targets[0]||Fe(o,i,i._start-i._delay),i=n;return Fe(a,o,0),o},utils:{wrap:function e(t,i,n){var o=i-t;return W(t)?Qe(t,e(0,t.length),i):Ge(n,(function(e){return(o+(e-t)%o)%o+t}))},wrapYoyo:function e(t,i,n){var o=i-t,a=2*o;return W(t)?Qe(t,e(0,t.length-1),i):Ge(n,(function(e){return t+((e=(a+(e-t)%a)%a)>o?a-e:e)}))},distribute:Xe,random:Ze,snap:Ke,normalize:function(e,t,i){return tt(e,t,0,1,i)},getUnit:ze,clamp:function(e,t,i){return Ge(i,(function(i){return He(e,t,i)}))},splitColor:lt,toArray:qe,mapRange:tt,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||ze(i))}},interpolate:function e(t,i,n,o){var a=isNaN(t+i)?0:function(e){return(1-e)*t+e*i};if(!a){var r,s,l,u,c,h=N(t),d={};if(!0===n&&(o=1)&&(n=null),h)t={p:t},i={p:i};else if(W(t)&&!W(i)){for(l=[],u=t.length,c=u-2,s=1;s<u;s++)l.push(e(t[s-1],t[s]));u--,a=function(e){e*=u;var t=Math.min(c,~~e);return l[t](e-t)},n=i}else o||(t=xe(W(t)?[]:{},t));if(!l){for(r in i)At.call(d,t,r,"get",i[r]);a=function(e){return Vt(e,d)||(h?t.p:t)}}}return Ge(n,a)}},install:te,effects:ce,ticker:ft,updateRoot:xt.updateRoot,plugins:ue,globalTimeline:a,core:{PropTween:Jt,globals:oe,Tween:Mt,Timeline:xt,Animation:Ct,getCache:ve}};me("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return Kt[e]=Mt[e]})),ft.add(xt.updateRoot),h=Kt.to({},{duration:0});var Zt=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Qt=function(e,t){return{name:e,rawVars:1,init:function(e,i,n){n._onInit=function(e){var n,o;if(N(i)&&(n={},me(i,(function(e){return n[e]=1})),i=n),t){for(o in n={},i)n[o]=t(i[o]);i=n}!function(e,t){var i,n,o,a=e._targets;for(i in t)for(n=a.length;n--;)(o=e._ptLookup[n][i])&&(o=o.d)&&(o._pt&&(o=Zt(o,i)),o&&o.modifier&&o.modifier(t[i],e,a[n],i))}(e,i)}}}},ei=Kt.registerPlugin({name:"attr",init:function(e,t,i,n,o){for(var a in t)this.add(e,"setAttribute",(e.getAttribute(a)||0)+"",t[a],n,o,0,0,a),this._props.push(a)}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i])}},Qt("roundProps",Je),Qt("modifiers"),Qt("snap",Ke))||Kt;Mt.version=xt.version=ei.version="3.0.5",u=1,z()&&pt();var ti,ii,ni,oi,ai,ri,si,li,ui,ci,hi=vt.Power0,di=vt.Power1,fi=vt.Power2,pi=vt.Power3,vi=vt.Power4,gi=vt.Linear,mi=vt.Quad,yi=vt.Cubic,bi=vt.Quart,_i=vt.Quint,wi=vt.Strong,Ei=vt.Elastic,Si=vt.Back,ki=vt.SteppedEase,Ti=vt.Bounce,Ci=vt.Sine,xi=vt.Expo,Oi=vt.Circ,Di={},Ai=180/Math.PI,Ii=Math.PI/180,Pi=Math.atan2,$i=/([A-Z])/g,Ri=/[-+=\.]*\d+[\.e-]*\d*[a-z%]*/g,Li=/(?:left|right|width|margin|padding|x)/i,Mi=/[\s,\(]\S/,Fi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ni=function(e,t){return t.set(t.t,t.p,~~(1e3*(t.s+t.c*e))/1e3+t.u,t)},Bi=function(e,t){return t.set(t.t,t.p,1===e?t.e:~~(1e3*(t.s+t.c*e))/1e3+t.u,t)},Ui=function(e,t){return t.set(t.t,t.p,e?~~(1e3*(t.s+t.c*e))/1e3+t.u:t.b,t)},ji=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Gi=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Hi=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},zi=function(e,t,i){return e.style[t]=i},Vi=function(e,t,i){return e.style.setProperty(t,i)},Wi=function(e,t,i){return e._gsap[t]=i},Yi=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},qi=function(e,t,i,n,o){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(o,a)},Xi=function(e,t,i,n,o){var a=e._gsap;a[t]=i,a.renderTransform(o,a)},Ji="transform",Ki=Ji+"Origin",Zi=function(e,t){var i=ii.createElementNS?ii.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ii.createElement(e);return i.style?i:ii.createElement(e)},Qi=function e(t,i,n){var o=getComputedStyle(t);return o[i]||o.getPropertyValue(i.replace($i,"-$1").toLowerCase())||o.getPropertyValue(i)||!n&&e(t,tn(i)||i,1)||""},en="O,Moz,ms,Ms,Webkit".split(","),tn=function(e,t){var i=(t||ai).style,n=5;if(e in i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);n--&&!(en[n]+e in i););return n<0?null:(3===n?"ms":n>=0?en[n]:"")+e},nn=function(){"undefined"!=typeof window&&(ti=window,ii=ti.document,ni=ii.documentElement,ai=Zi("div")||{style:{}},ri=Zi("div"),Ji=tn(Ji),Ki=tn(Ki),ai.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",li=!!tn("perspective"),oi=1)},on=function e(t){var i,n=Zi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),o=this.parentNode,a=this.nextSibling,r=this.style.cssText;if(ni.appendChild(n),n.appendChild(this),this.style.display="block",t)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(i=this._gsapBBox());return a?o.insertBefore(this,a):o.appendChild(this),ni.removeChild(n),this.style.cssText=r,i},an=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},rn=function(e){var t;try{t=e.getBBox()}catch(i){t=on.call(e,!0)}return!t||t.width||t.x||t.y?t:{x:+an(e,["x","cx","x1"])||0,y:+an(e,["y","cy","y1"])||0,width:0,height:0}},sn=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!rn(e))},ln=function(e,t){if(t){var i=e.style;t in Di&&(t=Ji),i.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),i.removeProperty(t.replace($i,"-$1").toLowerCase())):i.removeAttribute(t)}},un=function(e,t,i,n,o,a){var r=new Jt(e._pt,t,i,0,1,a?Hi:Gi);return e._pt=r,r.b=n,r.e=o,e._props.push(i),r},cn={deg:1,rad:1,turn:1},hn=function(e,t,i,n){var o,a,r,s,l=parseFloat(i)||0,u=(i+"").trim().substr((l+"").length)||"px",c=ai.style,h=Li.test(t),d="svg"===e.tagName.toLowerCase(),f=(d?"client":"offset")+(h?"Width":"Height"),p="px"===n;return n===u||!l||cn[n]||cn[u]?l:(s=e.getCTM&&sn(e),"%"===n&&Di[t]?ye(l/(s?e.getBBox()[h?"width":"height"]:e[f])*100):(c[h?"width":"height"]=100+(p?u:n),a="em"===n&&e.appendChild&&!d?e:e.parentNode,s&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==ii&&a.appendChild||(a=ii.body),(r=a._gsap)&&"%"===n&&r.width&&h&&r.time===ft.time?ye(l/r.width*100):(a.appendChild(ai),o=ai[f],a.removeChild(ai),h&&"%"===n&&((r=ve(a)).time=ft.time,r.width=a[f]),ye(p?o*l/100:100/o*l))))},dn=function(e,t,i,n){var o;return oi||nn(),t in Fi&&"transform"!==t&&~(t=Fi[t]).indexOf(",")&&(t=t.split(",")[0]),Di[t]&&"transform"!==t?(o=Sn(e,n),o="transformOrigin"!==t?o[t]:kn(Qi(e,Ki))+o.zOrigin+"px"):(!(o=e.style[t])||"auto"===o||n||~(o+"").indexOf("calc("))&&(o=Qi(e,t)||ge(e,t)||("opacity"===t?1:0)),i?hn(e,t,o,i)+i:o},fn=function(e,t,i,n){var o,a,r,s,l,u,c,h,d,f,p,v,g=new Jt(this._pt,e.style,t,0,1,zt),m=0,y=0;if(g.b=i,g.e=n,i+="","auto"===(n+="")&&(e.style[t]=n,n=Qi(e,t)||n,e.style[t]=i),dt(o=[i,n]),n=o[1],!!(u=(i=o[0]).indexOf("rgba("))!=!!(c=n.indexOf("rgba("))&&(u?i=i.substr(u)+" "+i.substr(0,u-1):n=n.substr(c)+" "+n.substr(0,c-1)),r=i.match(Ri)||[],(n.match(Ri)||[]).length){for(;a=Ri.exec(n);)c=a[0],d=n.substring(m,a.index),l?l=(l+1)%5:"rgba("===d.substr(-5)&&(l=1),c!==(u=r[y++]||"")&&(s=parseFloat(u)||0,p=u.substr((s+"").length),(v="="===c.charAt(1)?+(c.charAt(0)+"1"):0)&&(c=c.substr(2)),h=parseFloat(c),f=c.substr((h+"").length),m=Ri.lastIndex-f.length,f||(f=f||A.units[t]||p,m===n.length&&(n+=f,g.e+=f)),p!==f&&(s=hn(e,t,u,f)||0),g._pt={_next:g._pt,p:d||1===y?d:",",s:s,c:v?v*h:h-s,m:l&&l<4?Math.round:0});g.c=m<n.length?n.substring(m,n.length):""}else g.r="display"===t&&"none"===n?Hi:Gi;return K.test(n)&&(g.e=0),this._pt=g,g},pn={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},vn=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i,n,o,a=t.t,r=a.style,s=t.u;if("all"===s||!0===s)r.cssText="",n=1;else for(o=(s=s.split(",")).length;--o>-1;)i=s[o],Di[i]&&(n=1,i="transformOrigin"===i?Ki:Ji),ln(a,i);n&&(ln(a,Ji),(n=a._gsap)&&(n.svg&&a.removeAttribute("transform"),Sn(a,1)))}},gn={clearProps:function(e,t,i,n,o){if("isFromStart"!==o.data){var a=e._pt=new Jt(e._pt,t,i,0,0,vn);return a.u=n,a.pr=-10,a.tween=o,e._props.push(i),1}}},mn=[1,0,0,1,0,0],yn={},bn=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},_n=function(e){var t=Qi(e,Ji);return bn(t)?mn:t.substr(7).match(q).map(ye)},wn=function(e,t){var i,n,o,a,r=e._gsap,s=e.style,l=_n(e);return r.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(o=e.transform.baseVal.consolidate().matrix).a,o.b,o.c,o.d,o.e,o.f]).join(",")?mn:l:(l!==mn||e.offsetParent||e===ni||r.svg||(o=s.display,s.display="block",(i=e.parentNode)&&e.offsetParent||(a=1,n=e.nextSibling,ni.appendChild(e)),l=_n(e),o?s.display=o:ln(e,"display"),a&&(n?i.insertBefore(e,n):i?i.appendChild(e):ni.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},En=function(e,t,i,n,o,a){var r,s,l,u=e._gsap,c=o||wn(e,!0),h=u.xOrigin||0,d=u.yOrigin||0,f=u.xOffset||0,p=u.yOffset||0,v=c[0],g=c[1],m=c[2],y=c[3],b=c[4],_=c[5],w=t.split(" "),E=parseFloat(w[0])||0,S=parseFloat(w[1])||0;i?c!==mn&&(s=v*y-g*m)&&(l=E*(-g/s)+S*(v/s)-(v*_-g*b)/s,E=E*(y/s)+S*(-m/s)+(m*_-y*b)/s,S=l):(E=(r=rn(e)).x+(~w[0].indexOf("%")?E/100*r.width:E),S=r.y+(~(w[1]||w[0]).indexOf("%")?S/100*r.height:S)),n||!1!==n&&u.smooth?(b=E-h,_=S-d,u.xOffset=f+(b*v+_*m)-b,u.yOffset=p+(b*g+_*y)-_):u.xOffset=u.yOffset=0,u.xOrigin=E,u.yOrigin=S,u.smooth=!!n,u.origin=t,u.originIsAbsolute=!!i,e.style[Ki]="0px 0px",a&&(un(a,u,"xOrigin",h,E),un(a,u,"yOrigin",d,S),un(a,u,"xOffset",f,u.xOffset),un(a,u,"yOffset",p,u.yOffset))},Sn=function(e,t){var i=e._gsap||new Tt(e);if("x"in i&&!t&&!i.uncache)return i;var n,o,a,r,s,l,u,c,h,d,f,p,v,g,m,y,b,_,w,E,S,k,T,C,x,O,D,I,P,$,R=e.style,L=i.scaleX<0,M=i.xOrigin||0,F=i.yOrigin||0,N=Qi(e,Ki)||"0";return n=o=a=l=u=c=h=d=f=0,r=s=1,i.svg=!(!e.getCTM||!sn(e)),p=wn(e,i.svg),i.svg&&En(e,N,i.originIsAbsolute,!1!==i.smooth,p),p!==mn&&(y=p[0],b=p[1],_=p[2],w=p[3],n=E=p[4],o=S=p[5],6===p.length?(r=Math.sqrt(y*y+b*b),s=Math.sqrt(w*w+_*_),l=y||b?Pi(b,y)*Ai:0,h=_||w?Pi(_,w)*Ai+l:0,i.svg&&(n-=M-(M*y+F*_),o-=F-(M*b+F*w))):($=p[6],I=p[7],x=p[8],O=p[9],D=p[10],P=p[11],n=p[12],o=p[13],a=p[14],u=(v=Pi($,D))*Ai,v&&(k=E*(g=Math.cos(-v))+x*(m=Math.sin(-v)),T=S*g+O*m,C=$*g+D*m,x=E*-m+x*g,O=S*-m+O*g,D=$*-m+D*g,P=I*-m+P*g,E=k,S=T,$=C),c=(v=Pi(-_,D))*Ai,v&&(g=Math.cos(-v),P=w*(m=Math.sin(-v))+P*g,y=k=y*g-x*m,b=T=b*g-O*m,_=C=_*g-D*m),l=(v=Pi(b,y))*Ai,v&&(k=y*(g=Math.cos(v))+b*(m=Math.sin(v)),T=E*g+S*m,b=b*g-y*m,S=S*g-E*m,y=k,E=T),u&&Math.abs(u)+Math.abs(l)>359.9&&(u=l=0,c=180-c),r=ye(Math.sqrt(y*y+b*b+_*_)),s=ye(Math.sqrt(S*S+$*$)),v=Pi(E,S),h=Math.abs(v)>2e-4?v*Ai:0,f=P?1/(P<0?-P:P):0),i.svg&&(p=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!bn(Qi(e,Ji)),p&&e.setAttribute("transform",p))),Math.abs(h)>90&&Math.abs(h)<270&&(L?(r*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,h+=h<=0?180:-180)),i.x=((i.xPercent=n&&Math.round(e.offsetWidth/2)===Math.round(-n)?-50:0)?0:n)+"px",i.y=((i.yPercent=o&&Math.round(e.offsetHeight/2)===Math.round(-o)?-50:0)?0:o)+"px",i.z=a+"px",i.scaleX=ye(r),i.scaleY=ye(s),i.rotation=ye(l)+"deg",i.rotationX=ye(u)+"deg",i.rotationY=ye(c)+"deg",i.skewX=h+"deg",i.skewY=d+"deg",i.transformPerspective=f+"px",(i.zOrigin=parseFloat(N.split(" ")[2])||0)&&(R[Ki]=kn(N)),i.xOffset=i.yOffset=0,i.force3D=A.force3D,i.renderTransform=i.svg?On:li?xn:Cn,i.uncache=0,i},kn=function(e){return(e=e.split(" "))[0]+" "+e[1]},Tn=function(e,t,i){var n=ze(t);return ye(parseFloat(t)+parseFloat(hn(e,"x",i+"px",n)))+n},Cn=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,xn(e,t)},xn=function(e,t){var i=t||this,n=i.xPercent,o=i.yPercent,a=i.x,r=i.y,s=i.z,l=i.rotation,u=i.rotationY,c=i.rotationX,h=i.skewX,d=i.skewY,f=i.scaleX,p=i.scaleY,v=i.transformPerspective,g=i.force3D,m=i.target,y=i.zOrigin,b="",_="auto"===g&&e&&1!==e||!0===g;if(y&&("0deg"!==c||"0deg"!==u)){var w,E=parseFloat(u)*Ii,S=Math.sin(E),k=Math.cos(E);E=parseFloat(c)*Ii,w=Math.cos(E),a=Tn(m,a,S*w*-y),r=Tn(m,r,-Math.sin(E)*-y),s=Tn(m,s,k*w*-y+y)}(n||o)&&(b="translate("+n+"%, "+o+"%) "),(_||"0px"!==a||"0px"!==r||"0px"!==s)&&(b+="0px"!==s||_?"translate3d("+a+", "+r+", "+s+") ":"translate("+a+", "+r+") "),"0px"!==v&&(b+="perspective("+v+") "),"0deg"!==l&&(b+="rotate("+l+") "),"0deg"!==u&&(b+="rotateY("+u+") "),"0deg"!==c&&(b+="rotateX("+c+") "),"0deg"===h&&"0deg"===d||(b+="skew("+h+", "+d+") "),1===f&&1===p||(b+="scale("+f+", "+p+") "),m.style[Ji]=b||"translate(0, 0)"},On=function(e,t){var i,n,o,a,r,s=t||this,l=s.xPercent,u=s.yPercent,c=s.x,h=s.y,d=s.rotation,f=s.skewX,p=s.skewY,v=s.scaleX,g=s.scaleY,m=s.target,y=s.xOrigin,b=s.yOrigin,_=s.xOffset,w=s.yOffset,E=s.forceCSS,S=parseFloat(c),k=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),d+=p),d||f?(d*=Ii,f*=Ii,i=Math.cos(d)*v,n=Math.sin(d)*v,o=Math.sin(d-f)*-g,a=Math.cos(d-f)*g,f&&(p*=Ii,r=Math.tan(f-p),o*=r=Math.sqrt(1+r*r),a*=r,p&&(r=Math.tan(p),i*=r=Math.sqrt(1+r*r),n*=r)),i=ye(i),n=ye(n),o=ye(o),a=ye(a)):(i=v,a=g,n=o=0),(S&&!~(c+"").indexOf("px")||k&&!~(h+"").indexOf("px"))&&(S=hn(m,"x",c,"px"),k=hn(m,"y",h,"px")),(y||b||_||w)&&(S=ye(S+y-(y*i+b*o)+_),k=ye(k+b-(y*n+b*a)+w)),(l||u)&&(r=m.getBBox(),S=ye(S+l/100*r.width),k=ye(k+u/100*r.height)),r="matrix("+i+","+n+","+o+","+a+","+S+","+k+")",m.setAttribute("transform",r),E&&(m.style[Ji]=r)},Dn=function(e,t,i,n,o,a){var r,s,l=N(o),u=parseFloat(o)*(l&&~o.indexOf("rad")?Ai:1),c=a?u*a:u-n,h=n+c+"deg";return l&&("short"===(r=o.split("_")[1])&&(c%=360)!==c%180&&(c+=c<0?360:-360),"cw"===r&&c<0?c=(c+36e9)%360-360*~~(c/360):"ccw"===r&&c>0&&(c=(c-36e9)%360-360*~~(c/360))),e._pt=s=new Jt(e._pt,t,i,n,c,Bi),s.e=h,s.u="deg",e._props.push(i),s},An=function(e,t,i){var n,o,a,r,s,l,u,c=ri.style,h=i._gsap;for(o in c.cssText=getComputedStyle(i).cssText+";position:absolute;display:block;",c[Ji]=t,ii.body.appendChild(ri),n=Sn(ri,1),Di)(a=h[o])!==(r=n[o])&&"perspective"!==o&&(s=ze(a)!==(u=ze(r))?hn(i,o,a,u):parseFloat(a),l=parseFloat(r),e._pt=new Jt(e._pt,h,o,s,l-s,Ni),e._pt.u=u,e._props.push(o));ii.body.removeChild(ri)},In={name:"css",register:nn,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,o){var a,r,s,l,u,c,h,d,f,p,v,g,m,y,b,_,w,E,S,k=this._props,T=e.style;for(h in oi||nn(),t)if("autoRound"!==h&&(r=t[h],!ue[h]||!It(h,t,i,n,e,o)))if(c=gn[h],"function"===(u=typeof r)&&(u=typeof(r=r.call(i,n,e,o))),"string"===u&&~r.indexOf("random(")&&(r=et(r)),c)c(this,e,h,r,i)&&(b=1);else if("--"===h.substr(0,2))this.add(T,"setProperty",getComputedStyle(e).getPropertyValue(h)+"",r+"",n,o,0,0,h);else{if(a=dn(e,h),l=parseFloat(a),(p="string"===u&&"="===r.charAt(1)?+(r.charAt(0)+"1"):0)&&(r=r.substr(2)),s=parseFloat(r),h in Fi&&("autoAlpha"===h&&(1===l&&"hidden"===dn(e,"visibility")&&s&&(l=0),un(this,T,"visibility",l?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=Fi[h]).indexOf(",")&&(h=h.split(",")[0])),v=h in Di)if(g||(m=e._gsap,y=!1!==t.smoothOrigin&&m.smooth,(g=this._pt=new Jt(this._pt,T,Ji,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===h)this._pt=new Jt(this._pt,m,"scaleY",m.scaleY,p?p*s:s-m.scaleY),k.push("scaleY",h),h+="X";else{if("transformOrigin"===h){w=void 0,E=void 0,S=void 0,w=(_=r).split(" "),E=w[0],S=w[1]||"50%","top"!==E&&"bottom"!==E&&"left"!==S&&"right"!==S||(_=E,E=S,S=_),w[0]=pn[E]||E,w[1]=pn[S]||S,r=w.join(" "),m.svg?En(e,r,0,y,0,this):((f=parseFloat(r.split(" ")[2]))!==m.zOrigin&&un(this,m,"zOrigin",m.zOrigin,f),un(this,T,h,kn(a),kn(r)));continue}if("svgOrigin"===h){En(e,r,1,y,0,this);continue}if(h in yn){Dn(this,m,h,l,r,p);continue}if("smoothOrigin"===h){un(this,m,"smooth",m.smooth,r);continue}if("force3D"===h){m[h]=r;continue}if("transform"===h){An(this,r,e);continue}}else h in T||(h=tn(h)||h);if(v||(s||0===s)&&(l||0===l)&&!Mi.test(r)&&h in T)(d=(a+"").substr((l+"").length))!==(f=(r+"").substr((s+"").length)||(h in A.units?A.units[h]:d))&&(l=hn(e,h,a,f)),this._pt=new Jt(this._pt,v?m:T,h,l,p?p*s:s-l,"px"!==f||!1===t.autoRound||v?Ni:ji),this._pt.u=f||0,d!==f&&(this._pt.b=a,this._pt.r=Ui);else if(h in T)fn.call(this,e,h,a,r);else{if(!(h in e)){ie(h,r);continue}this.add(e,h,e[h],r,n,o)}k.push(h)}b&&Xt(this)},get:dn,aliases:Fi,getSetter:function(e,t,i){return t in Di&&t!==Ki&&(e._gsap.x||dn(e,"x"))?i&&si===i?"scale"===t?Yi:Wi:(si=i||{})&&("scale"===t?qi:Xi):e.style&&!j(e.style[t])?zi:~t.indexOf("-")?Vi:jt(e,t)}};
/*!
 * CSSPlugin 3.0.5
 * https://greensock.com
 *
 * Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ei.utils.checkPrefix=tn,ci=me("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(ui="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Di[e]=1})),me(ui,(function(e){A.units[e]="deg",yn[e]=1})),Fi[ci[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+ui,me("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Fi[t[1]]=ci[t[0]]})),me("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){A.units[e]="px"})),ei.registerPlugin(In),i.d(t,"gsap",(function(){return Pn})),i.d(t,"default",(function(){return Pn})),i.d(t,"CSSPlugin",(function(){return In})),i.d(t,"TweenMax",(function(){return Mt})),i.d(t,"TweenLite",(function(){return Mt})),i.d(t,"TimelineMax",(function(){return xt})),i.d(t,"TimelineLite",(function(){return xt})),i.d(t,"Power0",(function(){return hi})),i.d(t,"Power1",(function(){return di})),i.d(t,"Power2",(function(){return fi})),i.d(t,"Power3",(function(){return pi})),i.d(t,"Power4",(function(){return vi})),i.d(t,"Linear",(function(){return gi})),i.d(t,"Quad",(function(){return mi})),i.d(t,"Cubic",(function(){return yi})),i.d(t,"Quart",(function(){return bi})),i.d(t,"Quint",(function(){return _i})),i.d(t,"Strong",(function(){return wi})),i.d(t,"Elastic",(function(){return Ei})),i.d(t,"Back",(function(){return Si})),i.d(t,"SteppedEase",(function(){return ki})),i.d(t,"Bounce",(function(){return Ti})),i.d(t,"Sine",(function(){return Ci})),i.d(t,"Expo",(function(){return xi})),i.d(t,"Circ",(function(){return Oi}));var Pn=ei.registerPlugin(In)||ei},function(e,t,i){"use strict";t.a={ENABLE_PASSWORD:"enablePassword",ENABLE_WELCOME_MESSAGE:"enableWelcomeMessage",ENABLE_FILE_INFORMATION:"enableFileInformation",ENABLE_EXIF:"enableEXIF",ENABLE_IPTC:"enableIPTC",ENABLE_SELECTION:"enableSelection",ENABLE_DOWNLOAD:"enableDownload",ENABLE_VIEW_SUBGALLERIES:"enableViewSubGalleries",ENABLE_COMMENTS:"enableComments",ENABLE_GUEST_UPLOAD:"enableGuestUpload",ENABLE_FLAGS:"enableSetFlag",ENABLE_CONTACT_SHEET:"enableContactSheet",SECURITY_LEVEL:"securityLevel",PASSWORD:"password",WELCOME_MESSAGE:"welcomeMessage",MAX_SELECTIONS:"maxSelections",LAYOUT:"layout",WATERMARK_CODE:"watermarkCode",LANGUAGE:"language_gallery",ENABLE_PRESENTATION_MODE:"enablePresentationMode",ENABLE_PM_EXIT:"enablePMExit",PM_EXIT_PIN:"PMExitPin",ENABLE_PM_HIDE_RED_FLAGGED:"enablePMHideRedFlagged",SORT_ORDER:"sortOrder",SORT_REVERSE:"sortReverse",SUB_GALLERY_SORT_ORDER:"subGallerySortOrder"}},function(e,t,i){"use strict";var n=i(5),o=i(16);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,l(t).call(this,e)))._data=void 0,n._initData(i),n}var i,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),i=t,(n=[{key:"_initData",value:function(e){if(void 0!==e)for(var t in this._data=new o.a,e)this._data.set(t,e[t])}},{key:"set",value:function(e,t){return void 0===this._data&&(this._data=new o.a),this._data.set(e,t),this}},{key:"get",value:function(e){if(void 0===this._data)throw"no data set";return this._data.get(e)}},{key:"has",value:function(e){return void 0!==this._data&&this._data.has(e)}}])&&r(i.prototype,n),a&&r(i,a),t}(n.a);t.a=c},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"log",value:function(){window.console&&console.log.apply(void 0,arguments)}},{key:"cloneObject",value:function(e){if("object"!==r(e)||null===e)return null;var t={};for(var i in e)t[i]=e[i];return t}},{key:"randomChars",value:function(e,t){void 0===t&&(t="abcdefghjkmnpqrstuvwxyzABCDEFGHJKMNPQRSTUVWXYZ0123456789");for(var i=t.length,n="",o=0;o<e;)n+=t.charAt(Math.floor(Math.random()*i)),o++;return n}},{key:"postToURL",value:function(e,t,i){i=i||"POST",a.a.has("xsrfkey")&&a.a.has("xsrfkeyname")&&("object"!==r(t)&&(t={}),t[a.a.get("xsrfkeyname")]=a.a.get("xsrfkey"));var n,s=o()('<form action="'.concat(e,'" method="').concat(i,'"></form>'));for(var l in t)(n=o()('<input type="hidden" />')).attr("name",l),n.val(t[l]),s.append(n);o()("body").append(s),s.submit()}},{key:"invokeURL",value:function(e){o()("body").append('<iframe src="'.concat(e,'" style="display:none;"></iframe>'))}},{key:"hasSubProperty",value:function(e,t){for(var i,n=t.split("."),o=e;0!==n.length;){if(!((i=n.shift())in o))return!1;o=o[i]}return!0}},{key:"domIsChildOf",value:function(e,t){for(;null!==e;){if(e===t)return!0;e=e.parentNode}return!1}},{key:"domIsChildOfClass",value:function(e,t){for(;null!==e;){if(e===document)return!1;if("string"==typeof e.className&&-1!==e.className.indexOf(t))return!0;e=e.parentNode}return!1}},{key:"domIsUnderPoint",value:function(t,i,n){var o=document.elementFromPoint(i,n);return o===t||e.domIsChildOf(o,t)}},{key:"preventDoubleClick",value:function(e){"string"==typeof e&&(e=o()(e)),e.on("click",(function(){var e=o()(this);e.css("pointer-events","none"),window.setTimeout((function(){e.css("pointer-events","auto")}),1e3)}))}},{key:"isInternetExplorer",value:function(){if("Microsoft Internet Explorer"===window.navigator.appName)return!0;var e=window.navigator.userAgent;return!!e&&new RegExp("^.*Trident/.*$").test(e)}}],(i=null)&&s(t.prototype,i),n&&s(t,n),e}();t.a=l},function(e,t,i){"use strict";var n,o,a,r=i(0),s=i.n(r),l=i(31),u=s()(window),c=[],h=null,d=function(){null!==h&&void 0!==n&&(h.style.width="".concat(n,"px"))},f=new l.a(333,(function(){return function(){d();for(var e=0,t=c.length;e<t;e++)c[e].call(void 0,n,a)}()}),void 0,void 0,!0),p=function(){var e=n,t=a;n=o||u.width(),a=u.height(),window.innerHeight&&window.innerHeight>a&&(a=window.innerHeight),n===e&&a===t||f.trigger()};window.addEventListener("resize",(function(){return p()}));p(),t.a={getWidth:function(){return n},setForcedWidth:function(e){o=e,p()},getHeight:function(){return a},update:function(){p()},addResizeCallback:function(e){"function"==typeof e&&c.push(e)},removeResizeCallback:function(e){if("function"==typeof e)for(var t=0,i=c.length;t<i;t++)if(c[t]===e){c.splice(t,1);break}},setContainerElement:function(e){h=e,d()}}},function(e,t,i){"use strict";i.r(t);var n=i(2),o=i(12),a=i(1);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,l,u;return t=e,u=[{key:"showAppMessages",value:function(){a.a.get(e.URL_APPMESSAGE_GETNEW,{responseType:a.a.RESPONSETYPE_JSON,onComplete:function(e){e.success&&Promise.all([i.e(0),i.e(69)]).then((function(){var t=[i(106),i(107)];(function(t,i){var n=t.default,o=i.default;e.messages&&0!==e.messages.length&&new o(n.createFromExport(e.messages[0])).open()}).apply(null,t)})).catch(i.oe)},lock:!0})}},{key:"cookieCheck",value:function(t){0===document.cookie.length?(document.cookie="check=1; path=/",a.a.get(e.URL_COOKIECHECK,{responseType:a.a.RESPONSETYPE_JSON,onComplete:function(e){"function"==typeof t&&t(!0===e.success)}})):"function"==typeof t&&t(!0)}},{key:"submitMetric",value:function(t,i){var o=!1;n.a.has("gallery")?o="gallery:".concat(n.a.get("gallery").uuid):n.a.has("visitor")&&"user"===n.a.get("visitor").type&&(o="user:".concat(n.a.get("visitor").user.uuid));var r=e.URL_METRICS_SEND+t;!1!==o&&(r+="/".concat(o)),void 0!==i&&(r+="/".concat(i)),a.a.post(r)}},{key:"encodePathForAjax",value:function(e){return e.replace(new RegExp("^/+"),"").replace(new RegExp(" ","g"),"+").replace(new RegExp("/","g"),":")}},{key:"triggerDownload",value:function(t){e.isIOS()?".zip"===t.substr(-4)?window.location.href=t:window.open(t,"_blank"):o.a.invokeURL(t)}},{key:"isIOS",value:function(){var e=navigator&&navigator.userAgent?navigator.userAgent:null;return e&&null!==e.match(/iPad|iPhone|iPod/i)}},{key:"reportError",value:function(t,i){if(null!==i&&"object"===r(i)||(i={}),n.a.has("gallery")){var o=n.a.get("gallery");i.gallery_name=o.name,i.gallery_url=o.url}if(n.a.has("domain")){var s=n.a.get("domain");i.domain_name=s.name,i.domain_url=s.url}if(n.a.has("visitor")){var l=n.a.get("visitor");i.visitor_type=l.type,l.user&&(i.visitor_user_name=l.user.fullname,i.visitor_user_uuid=l.user.uuid),l.client&&(i.visitor_client_name=l.client.name,i.visitor_client_uuid=l.client.uuid)}a.a.post(e.URL_ERROR_REPORT,{dataType:a.a.DATATYPE_JSON,data:{message:t,meta:i}})}},{key:"_handleError",value:function(t,i,n,o){return e.reportError(t,{url:i,line_number:n,column_number:o}),!1}},{key:"URL_ERROR_REPORT",get:function(){return"/ajax/system/reportjserror"}},{key:"URL_METRICS_SEND",get:function(){return"/ajax/metrics/"}},{key:"URL_APPMESSAGE_MARKREAD",get:function(){return"/ajax/appmessages/markread/"}},{key:"URL_APPMESSAGE_GETNEW",get:function(){return"/ajax/appmessages/new"}},{key:"URL_COOKIECHECK",get:function(){return"/ajax/system/cookiecheck"}}],(l=null)&&s(t.prototype,l),u&&s(t,u),e}();window.onerror=l._handleError,t.default=l},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"extractErrorFromApiResponse",value:function(e){var t={};return e.error?(t.message=e.error.message,t.code=e.error.code):e.code&&e.message&&(t.code=e.code,t.message=e.message),t}}],(i=null)&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this._map=t}var t,i,a;return t=e,(i=[{key:"set",value:function(e,t){this._map[e]=t}},{key:"remove",value:function(e){delete this._map[e]}},{key:"has",value:function(e){return e in this._map}},{key:"get",value:function(e){if(!this.has(e))throw"Key '".concat(e,"' not set to KeyValueBag.");return this._map[e]}},{key:"each",value:function(e,t){for(var i in this._map)if(!1===e.call(t,this._map[i]))break}},{key:"clear",value:function(){this._map={}}},{key:"export",value:function(){return this._map}},{key:"finalize",value:function(){this._map=void 0}}])&&o(t.prototype,i),a&&o(t,a),e}();t.a=a},function(e,t,i){var n;
/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */void 0===(n=function(){"use strict";var e,t,i,n="undefined"!=typeof window&&window.document,o=!n,a=n?document:null,r=[];function s(){var e=r;o&&e.length&&(r=[],function(e){var t;for(t=0;t<e.length;t+=1)e[t](a)}(e))}function l(){o||(o=!0,i&&clearInterval(i),s())}if(n){if(document.addEventListener)document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1);else if(window.attachEvent){window.attachEvent("onload",l),t=document.createElement("div");try{e=null===window.frameElement}catch(e){}t.doScroll&&e&&window.external&&(i=setInterval((function(){try{t.doScroll(),l()}catch(e){}}),30))}"interactive"===document.readyState?window.navigator.userAgent&&-1!==window.navigator.userAgent.indexOf("MSIE 9")||l():"complete"===document.readyState&&l()}function u(e){return o?e(a):r.push(e),u}return u.version="2.0.1",u.load=function(e,t,i,n){n.isBuild?i(null):u(i)},u}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){"use strict";var n=i(1),o=i(21),a=i(29);function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uuid=t.uuid,this.domainUuid=t.domainUuid,this.firstname=t.firstname,this.lastname=t.lastname,this.fullname=t.fullname,this.officialName=t.officialName,this.type=t.type,this.role=t.role,this.email=t.email||null,this.lastSeen=t.lastSeen||null,this.timeRegistered=t.timeRegistered||null,this.status=t.status||null,this.suspended=t.suspended||null,this.disabled=t.disabled||null,this.owner=t.owner||!1,this.domain=t.domain?o.a.instantiate(t.domain):null,this.currentPlan=t.currentPlan?new a.a(t.currentPlan):null}var t,i,s;return t=e,(i=[{key:"favorizeGallery",value:function(e,t){n.a.post("/ajax/user/uuid:".concat(this.uuid,"/favorizegallery"),{dataType:n.a.DATATYPE_JSON,data:{galleryUuid:e.uuid},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(i){i.success&&e.setFavoriteApply(!0),"function"==typeof t&&t(i.success)},lock:!0})}},{key:"unfavorizeGallery",value:function(e,t){n.a.post("/ajax/user/uuid:".concat(this.uuid,"/unfavorizegallery"),{dataType:n.a.DATATYPE_JSON,data:{galleryUuid:e.uuid},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(i){i.success&&e.setFavoriteApply(!1),"function"==typeof t&&t(i.success)},lock:!0})}},{key:"saveSettings",value:function(e,t){n.a.post("/ajax/user/uuid:".concat(this.uuid,"/savesettings"),{dataType:n.a.DATATYPE_JSON,data:{settings:e.export()},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e){"function"==typeof t&&t(e.success)},locked:!0})}}])&&r(t.prototype,i),s&&r(t,s),e}();t.a=s},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thumbnails=t instanceof Array?t:[]}var t,i,o;return t=e,(i=[{key:"isEmpty",value:function(){return 0===this.thumbnails.length}},{key:"getNth",value:function(e){return void 0===this.thumbnails[e]?null:this.thumbnails[e]}},{key:"getThumbOfWidth",value:function(e){for(var t,i,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=null,a=null,r=null,s=null,l=0,u=this.thumbnails.length;l<u;l++)(i=(t=this.thumbnails[l]).width/e)>=1&&(null===a||i<a)&&(a=i,o=t),null===o&&(null===s||i>s)&&(s=i,r=t);return o||(n?r:null)}},{key:"getThumbOfHeight",value:function(e){for(var t,i,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=null,a=null,r=null,s=null,l=0,u=this.thumbnails.length;l<u;l++)(i=(t=this.thumbnails[l]).height/e)>=1&&(null===a||i<a)&&(a=i,o=t),null===o&&(null===s||i>s)&&(s=i,r=t);return o||(n?r:null)}},{key:"getThumbFitting",value:function(e,t){for(var i,n,o,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=e/t,l=null,u=null,c=null,h=null,d=0,f=this.thumbnails.length;d<f;d++)(o=(n=(i=this.thumbnails[d]).width/i.height)>=s&&!a||n<s&&a?i.width/e:i.height/t)>=1&&(null===u||o<u)&&(u=o,l=i),null===l&&(null===h||o>h)&&(h=o,c=i);return l||(r?c:null)}},{key:"getSmallestThumb",value:function(){for(var e,t,i=null,n=Number.MAX_VALUE,o=0,a=this.thumbnails.length;o<a;o++)(t=(e=this.thumbnails[o]).width+e.height)<n&&(i=e,n=t);return i}},{key:"getBiggestThumb",value:function(){for(var e,t,i=null,n=0,o=0,a=this.thumbnails.length;o<a;o++)(t=(e=this.thumbnails[o]).width+e.height)>n&&(i=e,n=t);return i}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,a=[{key:"get",value:function(e,t){"string"!=typeof t&&(t=window.location.search);var i=new RegExp("(&|\\?)".concat(e,"(=([^&]*))?")),n=t.match(i);return null===n?null:void 0===n[3]?"":n[3]}},{key:"parseQuery",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t||(t=window.location.search),!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var n,o,a,r={},s=t.split("&"),l=s.length,u=0;u<l;u++)n=s[u].split("="),o=e.decodeQuery(n.shift(),i),a=n.length?e.decodeQuery(n.join("="),i):null,Object.prototype.hasOwnProperty.call(r,o)?("string"!=typeof r[o]&&null!==r[o]||(r[o]=[r[o]]),r[o].push(a)):r[o]=a;return r}},{key:"buildQuery",value:function(t){var i,n,o,a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l="";for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&n)if(t[n]instanceof Array)for(i={},o=0,a=t[n].length;o<a;o++)void 0!==t[n][o]&&void 0===i[String(t[n][o])]&&(l+="&".concat(e.buildQueryParameter(n,t[n][o],s)),!0!==r&&(i[String(t[n][o])]=!0));else void 0!==t[n]&&(l+="&".concat(e.buildQueryParameter(n,t[n],s)));return l.substring(1)}},{key:"buildQueryParameter",value:function(t,i,n){return e.encodeQuery(t,n)+(null!==i?"=".concat(e.encodeQuery(i,n)):"")}},{key:"encodeQuery",value:function(t,i){var n=e.strictEncodeURIComponent(String(t));return void 0===i&&(i=!0),i?n.replace(/%20/g,"+"):n}},{key:"decodeQuery",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=String(e);try{return decodeURIComponent(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}}},{key:"strictEncodeURIComponent",value:function(e){return encodeURIComponent(e).replace(/\*/g,"%2A")}},{key:"encodeURI",value:function(t,i){"string"!=typeof i&&(i="");var o,a=[];for(var r in t)o=""===i?r:"".concat(i,"[").concat(r,"]"),"object"===n(t[r])?a.push(e.encodeURI(t[r],o)):a.push("".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(t[r])));return a.join("&")}}],(i=null)&&o(t.prototype,i),a&&o(t,a),e}();t.a=a},function(e,t,i){"use strict";var n=i(16),o=i(19);var a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thumbnails=new o.a("thumbnails"in t?t.thumbnails:null),this.useForGalleryLogin=t.useForGalleryLogin},r=i(18);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l={},u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uuid=void 0,this.name=void 0,this.company=void 0,this.url=void 0,this.urlRel=void 0,this.status=void 0,this.settings=void 0,this.logo=void 0,this.wallpaper=void 0,this.galleries=[],this.domainOwner=void 0}var t,i,o;return t=e,o=[{key:"instantiate",value:function(t){if(!t.uuid)throw"uuid not set";var i=e.getByUuid(t.uuid);return null===i&&(i=new e),l[t.uuid]=i,i.createFromExport(t),i}},{key:"getByUuid",value:function(e){return l[e]||null}}],(i=[{key:"hasLogo",value:function(){return null!==this.logo}},{key:"createFromExport",value:function(t){if(!t.uuid)throw"domain uuid not set";if(!e.getByUuid(t.uuid))throw"Domain with uuid ".concat(t.uuid," is not yet instantiated. Use Domain.instantiate(data) to ensure model singularity.");return this.uuid=t.uuid,this.name=t.name,this.company=t.company||null,this.url=t.url,this.urlRel=t.urlRel,this.status=t.status||null,this.settings=t.settings?new n.a(t.settings):null,this.logo=t.logo||null,this.wallpaper=t.wallpaper?new a(t.wallpaper):null,this.domainOwner=t.domainOwner?new r.a(t.domainOwner):void 0,this}}])&&s(t.prototype,i),o&&s(t,o),e}();t.a=u},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return o(this,t),r(this,s(t).apply(this,arguments))}var i,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),i=t,u=[{key:"UPDATED",get:function(){return"updated"}},{key:"SELECTED",get:function(){return"selected"}},{key:"DESELECTED",get:function(){return"deselected"}},{key:"FLAG_CHANGED",get:function(){return"flagChanged"}},{key:"VISIBILITY_CHANGED",get:function(){return"visibilityChanged"}},{key:"DRAGGINGSTATE_CHANGED",get:function(){return"draggingStateChanged"}},{key:"REMOVED",get:function(){return"removed"}},{key:"FILENAME_OVERRIDE",get:function(){return"filename_override"}}],(n=null)&&a(i.prototype,n),u&&a(i,u),t}(i(11).a);t.a=u},function(e,t,i){"use strict";var n=i(39),o=i(0),a=i.n(o),r=i(12),s=i(7),l=i(68),u=i(26),c=i(9),h=i(73),d=i.n(h);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,g(t).call(this,e,i))).container=l.a.getInstance(),n.$dom=void 0,n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),i=t,(n=[{key:"open",value:function(){var e=this;this.$dom=a()(d()({id:this.getId()}));var t=this.$dom.find(".notification-title"),i=this.$dom.find(".content"),n=this.$dom.find(".btn-close"),o=this._definition.getTitle();null===o?t.remove():t.append(o),i.append(this._definition.getContent()),this._definition.isRawContent()&&i.addClass("raw");var l=this._definition.getMaxWidth();null!==l?this.$dom.css({width:"auto","max-width":l}):this.$dom.css({width:"","max-width":""}),this._definition.isCloseable()?n.on("click",(function(t){t.preventDefault(),s.a.close(e)})):n.remove(),this._definition.getCloseOnBackgroundClick()&&a()(document).on("mousedown.not_".concat(this.getId()),(function(t){r.a.domIsChildOf(t.target,e.$dom[0])||s.a.close(e)}));var u=this._definition.getLevel();"string"==typeof u&&this.$dom.attr("data-level",u),this.container.addNotification(this)}},{key:"animateIn",value:function(){var e=this;c.gsap.to(this.$dom,{x:"0%",duration:.5,ease:"power2.out",onComplete:function(){return e.setOpened()}})}},{key:"animateOut",value:function(){var e=this;return new Promise((function(t){c.gsap.to(e.$dom,{x:"100%",duration:.3,ease:"power2.in"}),c.gsap.fromTo(e.$dom,{height:"".concat(e.$dom.height(),"px")},{height:"0",marginTop:"0",duration:.3,ease:"power2.out",delay:.3,onComplete:function(){e.setClosed(),t(),e.$dom.css({height:"",marginTop:""})}})}))}},{key:"close",value:function(){a()(document).off(".not_".concat(this.getId())),this.container.removeNotification(this)}}])&&p(i.prototype,n),o&&p(i,o),t}(u.a);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=w(this,E(t).call(this,y)))._title=null,e._isRawContent=!1,e._level=null,e._maxWidth=null,e._isCloseable=!0,e._closeOnBackgroundClick=!1,e.setTimeout(5),e}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),i=t,o=[{key:"LEVEL_ERROR",get:function(){return"error"}},{key:"LEVEL_WARNING",get:function(){return"warning"}},{key:"LEVEL_SUCCESS",get:function(){return"success"}}],(n=[{key:"setTitle",value:function(e){return this._title=e,this}},{key:"getTitle",value:function(){return this._title}},{key:"setIsRawContent",value:function(e){return this._isRawContent=e,this}},{key:"isRawContent",value:function(){return this._isRawContent}},{key:"setLevel",value:function(e){return this._level=e,this}},{key:"getLevel",value:function(){return this._level}},{key:"setMaxWidth",value:function(e){return this._maxWidth=e,this}},{key:"getMaxWidth",value:function(){return this._maxWidth}},{key:"setIsCloseable",value:function(e){return this._isCloseable=e,this}},{key:"isCloseable",value:function(){return this._isCloseable}},{key:"setCloseOnBackgroundClick",value:function(e){return this._closeOnBackgroundClick=e,this}},{key:"getCloseOnBackgroundClick",value:function(){return this._closeOnBackgroundClick}}])&&_(i.prototype,n),o&&_(i,o),t}(n.a);t.a=k},function(e,t,i){"use strict";var n=i(64),o=i(8),a=i(4),r=i(44);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,c(t).call(this)))._cache={},e}var i,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),i=t,(a=[{key:"getByUuid",value:function(e){return e in this._cache?this._cache[e]:null}},{key:"findCachedSubGalleries",value:function(e){for(var t=[],i=0,n=this._cache.length;i<n;i++)this._cache[i].parentGalleryUuid===e&&t.push(this._cache[i]);return t}},{key:"instantiateFromExport",value:function(e,t){if("string"!=typeof t.uuid)throw"Dataset has not property 'uuid'.";var i,a=!0;return t.uuid in this._cache?((i=this._cache[t.uuid]).setData(t),a=!1):(i=new n.a(e,t),this._cache[i.uuid]=i,i.addEventListener(o.a.RENAMED,this._handleInstanceRenamed.bind(this)),i.addEventListener(o.a.MOVED,this._handleInstanceMoved.bind(this))),this.dispatchEvent(new r.a(a?r.a.NEW_GALLERY_INITIALIZED:r.a.EXISTING_GALLERY_REINITIALIZED,i)),"parentGallery"in t&&(i.parentGallery=this.instantiateFromExport(e,t.parentGallery)),i}},{key:"_updateChildPaths",value:function(e){var t;for(var i in this._cache)(t=this._cache[i]).parentGalleryUuid===e.uuid&&(t.path="".concat(e.path,"/").concat(t.name),t.url="".concat(e.url,"/").concat(t.name),t.urlRel="".concat(e.urlRel,"/").concat(t.name),t.dispatchEvent(new o.a(o.a.MOVED)))}},{key:"_handleInstanceRenamed",value:function(e){this._updateChildPaths(e.target)}},{key:"_handleInstanceMoved",value:function(e){this._updateChildPaths(e.target)}}])&&l(i.prototype,a),s&&l(i,s),t}(a.a);t.a=new d},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,i,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=a(this,r(t).call(this,e))).notifier=i,o.notification=n,o}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),i=t,l=[{key:"NOTIFICATION_OPENED",get:function(){return"notification_opened"}},{key:"NOTIFICATION_CLOSED",get:function(){return"notification_closed"}}],(n=null)&&o(i.prototype,n),l&&o(i,l),t}(i(5).a);t.a=l},function(e,t,i){"use strict";var n=i(4),o=i(40),a=i(6),r=i(7);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,c(t).call(this)))._id=e,n._definition=i,n._isSerial=!1,n._status=a.a.CLOSED,n._closedCallback=null,n._timerDelay=null,n._timerTimeout=null,n}var i,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),i=t,(n=[{key:"getId",value:function(){return this._id}},{key:"getType",value:function(){return this._definition.getType()}},{key:"_setStatus",value:function(e){this._status=e,this.dispatchEvent(new o.a(o.a.STATUS_CHANGED,this))}},{key:"getStatus",value:function(){return this._status}},{key:"_setSerial",value:function(){this._isSerial=!0}},{key:"isSerial",value:function(){return this._isSerial}},{key:"triggerOpen",value:function(){if(-1===[a.a.CLOSED,a.a.DELAYED].indexOf(this._status))return!1;if(this._status===a.a.DELAYED){if(null!==this._timerDelay)return!1}else if(this._initDelay())return this._setStatus(a.a.DELAYED),!1;this._setStatus(a.a.OPENING),this.open();var e=this._definition.getOpenHandler();return"function"==typeof e&&e(this),this._initTimeout(),!0}},{key:"triggerClose",value:function(e){if(-1===[a.a.DELAYED,a.a.OPENING,a.a.OPENED].indexOf(this._status))return!1;var t=!1;this._timerDelay&&(window.clearTimeout(this._timerDelay),this._timerDelay=null,t=!0),null!==this._timerTimeout&&window.clearTimeout(this._timerTimeout),"function"==typeof e&&(this._closedCallback=e),this._setStatus(a.a.CLOSING);var i=this._definition.getCloseHandler();return"function"==typeof i&&i(),t?this.setClosed():this.close(),!0}},{key:"_initDelay",value:function(){var e=this,t=this._definition.getDelay();return!("number"!=typeof t||t<=0||(this._timerDelay=window.setTimeout((function(){e._timerDelay=null,e.triggerOpen()}),1e3*t),0))}},{key:"_initTimeout",value:function(){var e=this,t=this._definition.getTimeout();"number"!=typeof t||t<=0||(this._timerTimeout=window.setTimeout((function(){e._timerTimeout=null,r.a.close(e)}),1e3*t))}},{key:"open",value:function(){}},{key:"setOpened",value:function(){if(this._status===a.a.OPENING){var e=this._definition.getOpenCompleteHandler();"function"==typeof e&&e(),this._setStatus(a.a.OPENED)}}},{key:"isVisible",value:function(){return-1!==[a.a.OPENING,a.a.OPENED,a.a.CLOSING].indexOf(this._status)}},{key:"close",value:function(){}},{key:"setClosed",value:function(){this._setStatus(a.a.CLOSED),null!==this._closedCallback&&(this._closedCallback.call(void 0),this._closedCallback=null);var e=this._definition.getCloseCompleteHandler();"function"==typeof e&&e()}}])&&l(i.prototype,n),s&&l(i,s),t}(n.a);t.a=d},function(e,t,i){"use strict";var n=i(2),o=i(3),a=i(1);t.a={initialize:function(e){if(n.a.has("locale")){var t="/themes/picdrop/i18n/".concat(n.a.get("locale"),".json");n.a.has("cb")&&(t+="?v=".concat(n.a.get("cb"))),a.a.get(t,{dataType:a.a.DATATYPE_JSON,responseType:a.a.RESPONSETYPE_JSON,onComplete:function(t){o.a.loadTranslations(t),"function"==typeof e&&e(o.a)}})}else"function"==typeof e&&e(o.a)}}},function(e,t,i){var n,o;n=[i(41)],void 0===(o=function(e){return function(e){function t(e){this.dictionary={},this.plurals={},this.domain=null,e&&this.loadTranslations(e)}function i(e,t,i,n){return i=i||"",!!(e[t]&&e[t][i]&&e[t][i][n])&&e[t][i][n]}function n(t,i){return i.length?i[0]instanceof Array?e(t,i[0]):e(t,i):t}return t.prototype={loadTranslations:function(e){var t=e.domain||"";if(null===this.domain&&(this.domain=t),this.dictionary[t])return function(e,t){for(var i in t)if(e[i])for(var n in t[i])e[i][n]=t[i][n];else e[i]=t[i]}(this.dictionary[t],e.messages),this;if(e["plural-forms"]){var i=e["plural-forms"].split(";",2);this.plurals[t]={count:parseInt(i[0].replace("nplurals=","")),code:i[1].replace("plural=","return ")+";"}}return this.dictionary[t]=e.messages,this},defaultDomain:function(e){return this.domain=e,this},gettext:function(e){return this.dpgettext(this.domain,null,e)},ngettext:function(e,t,i){return this.dnpgettext(this.domain,null,e,t,i)},dngettext:function(e,t,i,n){return this.dnpgettext(e,null,t,i,n)},npgettext:function(e,t,i,n){return this.dnpgettext(this.domain,e,t,i,n)},pgettext:function(e,t){return this.dpgettext(this.domain,e,t)},dgettext:function(e,t){return this.dpgettext(e,null,t)},dpgettext:function(e,t,n){var o=i(this.dictionary,e,t,n);return!1!==o&&""!==o[0]?o[0]:n},dnpgettext:function(e,t,n,o,a){var r=function(e,t,i){return e[t]?(e[t].fn||(e[t].fn=new Function("n",e[t].code)),0|e[t].fn.call(this,i)):1==i?0:1}(this.plurals,e,a),s=i(this.dictionary,e,t,n);return s[r]&&""!==s[r]?s[r]:0===r?n:o},__:function(e){return n(this.gettext(e),Array.prototype.slice.call(arguments,1))},n__:function(e,t,i){return n(this.ngettext(e,t,i),Array.prototype.slice.call(arguments,3))},p__:function(e,t){return n(this.pgettext(e,t),Array.prototype.slice.call(arguments,2))},d__:function(e,t){return n(this.dgettext(e,t),Array.prototype.slice.call(arguments,2))},dp__:function(e,t,i){return n(this.dgettext(e,t,i),Array.prototype.slice.call(arguments,3))},np__:function(e,t,i,o){return n(this.npgettext(e,t,i,o),Array.prototype.slice.call(arguments,4))},dnp__:function(e,t,i,o,a){return n(this.dnpgettext(e,t,i,o,a),Array.prototype.slice.call(arguments,5))}},t}(e.vsprintf)}.apply(t,n))||(e.exports=o)},function(e,t,i){"use strict";var n=i(1);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.type=t.type,this.title=t.title,this.cost=t.cost,this.taxIncluded=t.taxIncluded,this.interval=t.interval,this.timeStart=t.timeStart,this.timeEnd=t.timeEnd,this.timeInvoiceBase=t.timeInvoiceBase,this.timeNextInvoice=t.timeNextInvoice,this.status=t.status,this.maxGalleries=t.maxGalleries,this.maxStorageGB=t.maxStorageGB,this.maxSubUser=t.maxSubUser,this.timeCreated=t.timeCreated,this.timeUpdated=t.timeUpdated,this.active=t.active}var t,i,a;return t=e,(i=[{key:"reactivate",value:function(e){n.a.post("/ajax/plans/id:".concat(this.id,"/reactivate"),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(t){t.success?"function"==typeof e&&e(!0):"function"==typeof e&&e(!1,t.message,t.code)},lock:!0})}}])&&o(t.prototype,i),a&&o(t,a),e}();t.a=a},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i(12),s=i(13),l=i(32),u=i(53),c=i.n(u),h=i(54),d=i.n(h),f=i(55),p=i.n(f),v=i(56),g=i.n(v);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l.a;m(this,e),this._barLeftWidth=void 0,this._barRightWidth=void 0,this._btnsMinified=!1,this._config=t,this.$dom=void 0,this.$ui={},this._initialize()}var t,n,u;return t=e,u=[{key:"LOCATION_LEFT",get:function(){return"left"}},{key:"LOCATION_RIGHT",get:function(){return"right"}}],(n=[{key:"_initialize",value:function(){this._createDOM(),s.a.addResizeCallback(this._handleResize.bind(this)),this._handleResize()}},{key:"_createDOM",value:function(){this.$dom=o()(c()({optHome:this._config.getShowHomeButton(),optTitle:this._config.getTitle(),optFloating:this._config.getFloating()})),this.$ui.document=o()(document),this.$ui.body=o()("body"),this.$ui.contentLeft=this.$dom.find(".content-left"),this.$ui.contentRight=this.$dom.find(".content-right"),this.$ui.entriesLeft=this.$dom.find(".entries.left"),this.$ui.entriesLeftDefault=this.$dom.find(".entries.left-default"),this.$ui.entriesRight=this.$dom.find(".entries.right"),this.$ui.entriesRightDefault=this.$dom.find(".entries.right-default")}},{key:"placeSpacer",value:function(e){return e=e?o()(e):o()("body"),this.$ui.spacer=o()('<div id="header-bar-spacer"></div>'),e.prepend(this.$ui.spacer),this}},{key:"initUserMenu",value:function(e,t){var n=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.$ui.userMenu=o()(p()({toggleBtnLabel:e.firstname,showUpgradeButton:!0===a.a.get("showUpgradeHints"),domainURL:t.urlRel,logoutRedirect:a.a.get("logoutRedirect")||window.location.pathname,toDashboard:s})),this.$ui.userMenuBtnToggle=this.$ui.userMenu.find(".btn--toggle"),this.$ui.userMenuDropdown=this.$ui.userMenu.find(".dropdown"),this.$ui.userMenuBtnSupport=this.$ui.userMenu.find(".btn--support"),this.$ui.userMenuBtnTip=this.$ui.userMenu.find(".btn--tip"),this.$ui.userMenuBtnToggle.on("click",(function(e){e.preventDefault(),e.stopPropagation(),n.$ui.userMenuDropdown.is(":visible")?n.$ui.userMenuDropdown.slideUp(200):n.$ui.userMenuDropdown.slideDown(200)})),o()(document).on("mousedown",(function(e){r.a.domIsChildOf(e.target,n.$ui.userMenuDropdown[0])||n.$ui.userMenuDropdown.is(":visible")&&n.$ui.userMenuDropdown.slideUp(200)})),this.$ui.userMenuBtnSupport.on("click",(function(t){t.preventDefault(),Promise.all([i.e(0),i.e(70)]).then((function(){var t=[i(105)];(function(t){new(0,t.default)(e).open()}).apply(null,t)})).catch(i.oe)})),this.$ui.userMenuBtnTip.on("click",(function(e){e.preventDefault(),Promise.all([i.e(0),i.e(71)]).then((function(){var e=[i(108)];(function(e){(new(0,e.default)).open()}).apply(null,e)})).catch(i.oe)})),window.addEventListener("popstate",(function(){"plan"===window.location.hash.replace("#","")&&window.location.reload()})),this.addDivider("right_default"),this.addPlainContent(this.$ui.userMenu,"right_default"),this}},{key:"initClientMenu",value:function(e){var t=this,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.$ui.clientMenu=o()(g()({toggleBtnLabel:e.name,clientDomainUrl:e.domain.urlRel,toDashboard:i})),this.$ui.clientMenuBtnToggle=this.$ui.clientMenu.find(".btn--toggle"),this.$ui.clientMenuDropdown=this.$ui.clientMenu.find(".dropdown"),this.$ui.clientMenuBtnToggle.on("click",(function(e){e.preventDefault(),e.stopPropagation(),t.$ui.clientMenuDropdown.is(":visible")?t.$ui.clientMenuDropdown.slideUp(200):t.$ui.clientMenuDropdown.slideDown(200)})),o()(document).on("mousedown",(function(e){r.a.domIsChildOf(e.target,t.$ui.clientMenuDropdown[0])||t.$ui.clientMenuDropdown.is(":visible")&&t.$ui.clientMenuDropdown.slideUp(200)})),this.addDivider("right_default"),this.addPlainContent(this.$ui.clientMenu,"right_default"),this}},{key:"addPlainContent",value:function(e,t){return this._insertEntry(e,t),this}},{key:"addButton",value:function(e){var t=o()(d()({title:e.getTitle(),id:e.getId(),class:e.getClass(),href:e.getHref(),icon:e.getIcon()}));return e.hasCallback()&&t.on("click",(function(t){t.preventDefault(),e.getCallback()()})),this._insertEntry(t,e.getLocation()),this}},{key:"addDivider",value:function(e){return this._insertEntry(null,e,{divider:!0}),this}},{key:"_insertEntry",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null;switch(i){case e.LOCATION_LEFT:a=this.$ui.entriesLeft;break;case"left_default":a=this.$ui.entriesLeftDefault;break;case e.LOCATION_RIGHT:a=this.$ui.entriesRight;break;case"right_default":a=this.$ui.entriesRightDefault}if(!a)throw"invalid target";var r=o()("<li></li>");!0===n.divider&&r.addClass("divider"),t&&r.html(t),a.append(r)}},{key:"_fetchBarMeasures",value:function(){null===this.$dom[0].parentNode||this.$dom[0].parentNode instanceof DocumentFragment||(this._barLeftWidth=this.$ui.contentLeft.outerWidth(),this._btnsMinified||(this._barRightWidth=this.$ui.contentRight.outerWidth()))}},{key:"updateBarMinification",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!==this._barLeftWidth&&!0!==e||this._fetchBarMeasures(),null===this._barLeftWidth?this:(this.$dom.width()-(this._barLeftWidth+this._barRightWidth)<20?this._btnsMinified||(this.$ui.contentRight.find(".header-bar-btn").addClass("min"),this._btnsMinified=!0):this._btnsMinified&&(this.$ui.contentRight.find(".header-bar-btn").removeClass("min"),this._btnsMinified=!1),this)}},{key:"_handleResize",value:function(){this.updateBarMinification()}}])&&y(t.prototype,n),u&&y(t,u),e}();t.a=b},function(e,t,i){"use strict";i(45);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,i,o,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];n(this,e),this._delay=t,this._callback=i,this._cbThisArg=o,this._cbArgs=a instanceof Array?a:void 0,this._callInitially=r,this._timeLastCall=0,this._timeout=null}var t,i,a;return t=e,(i=[{key:"trigger",value:function(){if(null===this._timeout){if(this._delay>0){var e=Date.now()-this._timeLastCall;if(e<this._delay)return void this._setTimeout(this._delay-e);if(!1===this._callInitially&&(0===arguments.length||"timer"!==arguments[0]))return void this._setTimeout(this._delay)}this._callback.apply(this._cbThisArg,this._cbArgs),this._timeLastCall=Date.now()}}},{key:"_setTimeout",value:function(e){null===this._timeout&&(this._timeout=window.setTimeout(this._handleTimerComplete.bind(this),e))}},{key:"setDelay",value:function(e){this._delay=e}},{key:"setCallback",value:function(e){this._callback=e}},{key:"setCallbackThisArgument",value:function(e){this._cbThisArg=e}},{key:"setCallbackArguments",value:function(){this._cbArgs=arguments}},{key:"setCallInitially",value:function(e){this._callInitially=e}},{key:"cancel",value:function(){null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)}},{key:"_handleTimerComplete",value:function(){this._timeout=null,this.trigger("timer")}}])&&o(t.prototype,i),a&&o(t,a),e}();t.a=a},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._showHomeButton=!1,this._title=void 0,this._floating=!1}var t,i,o;return t=e,(i=[{key:"getShowHomeButton",value:function(){return this._showHomeButton}},{key:"setShowHomeButton",value:function(e){return this._showHomeButton=Boolean(e),this}},{key:"getTitle",value:function(){return this._title}},{key:"setTitle",value:function(e){return this._title=e,this}},{key:"getFloating",value:function(){return this._floating}},{key:"setFloating",value:function(e){return this._floating=Boolean(e),this}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"dec2hex",value:function(e){return"number"==typeof e&&e.toString(16)}},{key:"hex2dec",value:function(e){return"string"==typeof e&&parseInt(e,16)}},{key:"formatFileSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e<0&&(e=0);var i=["B","KB","MB","GB","TB"],n=Math.min(Math.floor((e?Math.log(e):0)/Math.log(1024)),i.length-1),o=Math.pow(10,t);return e/=1<<10*n,"".concat(Math.round(e*o)/o," ").concat(i[n])}},{key:"constrain",value:function(e,t,i){return e<t?t:e>i?i:e}},{key:"fitDimensions",value:function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=e/t,s=i/n,l=null;return l=r>=s&&!o||r<s&&o?i/e:n/t,!a&&l>1&&(l=1),{width:e*l,height:t*l,scale:l}}},{key:"numDecimals",value:function(e,t){var i=Math.pow(10,t);return Math.floor(e*i)/i}}],(i=null)&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";t.a={FILENAME:"filename",FILESIZE:"filesize",FLAG:"flag",TIME_CAPTURED:"time_captured",TIME_UPLOADED:"time_uploaded",EXTENSION:"extension",IMAGE_SIZE:"image_size",MANUALLY:"manually"}},function(e,t,i){"use strict";var n=i(4),o=i(11),a=i(19),r=i(43);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e,i){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,c(t).call(this))).width=e.width,n.height=e.height,n.captureDate=e.captureDate?new Date(e.captureDate):null,n.thumbnails=void 0,n.comments=void 0,n.numComments="numComments"in e?e.numComments:0,n.metaData=void 0,e.thumbnails&&n.setThumbnails(e.thumbnails),e.comments)for(var o in e.comments)n.addCommentApply(new r.a(e.comments[o]));return n.file=i||null,n}var i,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),i=t,s=[{key:"UPDATED",get:function(){return"updated"}},{key:"THUMBNAILS_UPDATED",get:function(){return"thumbnails_updated"}},{key:"COMMENTS_LOADED",get:function(){return"commentsLoaded"}},{key:"COMMENT_ADDED",get:function(){return"commentAdded"}},{key:"COMMENT_REMOVED",get:function(){return"commentRemoved"}}],(n=[{key:"update",value:function(e){this.width=e.width,this.height=e.height,this.captureDate=e.captureDate?new Date(e.captureDate):null,e.thumbnails&&this.setThumbnails(e.thumbnails),this.comments=e.comments,this.numComments=e.numComments,this.dispatchEvent(new o.a(t.UPDATED))}},{key:"setThumbnails",value:function(e){if(e)if(e instanceof Array)this.thumbnails=new a.a(e);else{if(!(e instanceof a.a))throw"Invalid data type for thumbnails given.";this.thumbnails=e}else this.thumbnails=void 0;this.dispatchEvent(new o.a(t.THUMBNAILS_UPDATED,{thumbnails:this.thumbnails}))}},{key:"hasThumbnails",value:function(){return this.thumbnails instanceof a.a&&!this.thumbnails.isEmpty()}},{key:"setComments",value:function(e){this.clearComments(),this.comments=e,this.numComments=e.length;for(var i=0;i<e.length;i++)this.registerCommentListeners(e[i]);this.dispatchEvent(new o.a(t.COMMENTS_LOADED,{comments:this.comments}))}},{key:"clearComments",value:function(){if(void 0!==this.comments)for(var e=0;e<this.comments.length;e++)this.unregisterCommentListeners(this.comments[e]);this.comments=void 0,this.numComments=0}},{key:"addCommentApply",value:function(e){if(!this.file)throw"file missing";null===this.getCommentById(e.id)&&(void 0===this.comments&&(this.comments=[]),this.comments.push(e),this.numComments++,this.registerCommentListeners(e),this.dispatchEvent(new o.a(t.COMMENT_ADDED,{comment:e})))}},{key:"registerCommentListeners",value:function(e){e.addEventListener(r.a.REMOVED,this.handleCommentRemoved.bind(this),"image_".concat(this.file.uuid))}},{key:"unregisterCommentListeners",value:function(e){e.removeEventListenersByNamespace("image_".concat(this.file.uuid))}},{key:"getCommentById",value:function(e){if(void 0!==this.comments)for(var t in this.comments)if(this.comments[t].id===e)return this.comments[t];return null}},{key:"handleCommentRemoved",value:function(e){if(this.file){var i=e.target;i.removeEventListenersByNamespace("image_".concat(this.file.uuid));for(var n=0,a=this.comments.length;n<a;n++)if(this.comments[n]===i){this.comments.splice(n,1),this.numComments--;break}this.dispatchEvent(new o.a(t.COMMENT_REMOVED,{comment:i}))}}}])&&l(i.prototype,n),s&&l(i,s),t}(n.a);t.a=d},function(e,t,i){"use strict";var n=i(2);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}var t,i,n;return t=e,(i=[{key:"addDefinition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._data[e]=!t||"trial"}},{key:"isAllowed",value:function(e){return e in this._data}},{key:"isAllowedForTrial",value:function(e){return!!this.isAllowed(e)&&"trial"===this._data[e]}}])&&o(t.prototype,i),n&&o(t,n),e}(),r=n.a.get("features"),s=new a;if(null!==r){if("features"in r)for(var l=0,u=r.features.length;l<u;l++)s.addDefinition(r.features[l],!1);if("trial"in r)for(var c=0,h=r.trial.length;c<h;c++)s.addDefinition(r.trial[c],!0)}t.a=s},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"DOMAIN_BRANDING_LOGO",get:function(){return"domain.branding.logo"}},{key:"DOMAIN_BRANDING_WALLPAPER",get:function(){return"domain.branding.wallpaper"}},{key:"DOMAIN_BRANDING_WHITELABEL",get:function(){return"domain.branding.whitelabel"}},{key:"DOMAIN_BRANDING_SOCIAL_LINKS",get:function(){return"domain.branding.socialLinks"}},{key:"DOMAIN_WATERMARK",get:function(){return"domain.watermark"}},{key:"DOMAIN_SHARE_TEMPLATES",get:function(){return"domain.shareTemplates"}},{key:"DOMAIN_TAGGING",get:function(){return"domain.tagging"}},{key:"DOMAIN_ADDITIONAL_USERS",get:function(){return"domain.additionalUsers"}},{key:"GALLERY_CUSTOM_LAYOUTS",get:function(){return"gallery.customLayouts"}},{key:"GALLERY_HEADER_IMAGE",get:function(){return"gallery.headerImage"}},{key:"GALLERY_PRESENTATION_VIEW",get:function(){return"gallery.presentationView"}},{key:"GALLERY_IMAGE_MARKINGS",get:function(){return"gallery.imageMarkings"}},{key:"COPY_FILES",get:function(){return"copy_files"}},{key:"COPY_GALLERIES",get:function(){return"copy_galleries"}}],(i=null)&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,a=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==o)throw"ViewportAgent is a singleton and therefor can only be accesses through ViewportAgent.getInstance().";this.enabled=!0,this._elements=[],this._windowHeight=0,this._threshold=0,this._timeRecentCheck=0,this._checkDelay=200,this._checkTimeout=null,this._scrollTarget=null,this._currentScrollHandler=null,this._currentResizeHandler=null,this._initialize()}var t,i,a;return t=e,a=[{key:"getInstance",value:function(){return void 0===o&&(o=new e),o}},{key:"_arrayReduce",value:function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}},{key:"_triggerInView",value:function(e){for(var t,i=0;i<e.length;i++)"function"==typeof(t=e[i]).va_cb&&t.va_cb.call(void 0,t)}}],(i=[{key:"_initialize",value:function(){this._determineWindowProps(),this._currentResizeHandler=this._handleResize.bind(this),window.addEventListener("resize",this._currentResizeHandler,!0),this.setScrollTarget(window)}},{key:"addElements",value:function(e,t){for(var i,n=0;n<e.length;n++)(i=e[n]).va_cb=t,this._elements.push(i);this.enabled=!0}},{key:"check",value:function(){if(this.enabled)if(0!==this._elements.length){if(0!==this._checkDelay){if(null!==this._checkTimeout)return;var t=this,i=Date.now()-this._timeRecentCheck;if(i<this._checkDelay)return void(this._checkTimeout=window.setTimeout((function(){t._checkTimeout=null,t.check()}),this._checkDelay-i))}for(var n,o,a=[],r=0-this._threshold,s=this._windowHeight+this._threshold,l=0;l<this._elements.length;l++)null!==(n=this._elements[l]).offsetParent&&(o=n.getBoundingClientRect()).top<s&&o.bottom>r&&a.push(n);e._triggerInView(a),this._elements=e._arrayReduce(this._elements,a),this._timeRecentCheck=Date.now()}else this.enabled=!1}},{key:"_determineWindowProps",value:function(){this._windowHeight=window.innerHeight}},{key:"setScrollTarget",value:function(e){this._scrollTarget&&this._currentScrollHandler&&(this._scrollTarget.removeEventListener("scroll",this._currentScrollHandler),this._scrollTarget=null,this._currentScrollHandler=null),e===document&&(e=window),this._currentScrollHandler=this._handleScroll.bind(this),e.addEventListener("scroll",this._currentScrollHandler,!0),this._scrollTarget=e}},{key:"setCheckDelay",value:function(e){this._checkDelay=e}},{key:"getCheckDelay",value:function(){return this._checkDelay}},{key:"setThreshold",value:function(e){this._threshold=e}},{key:"getThreshold",value:function(){return this._threshold}},{key:"_handleScroll",value:function(){this.check()}},{key:"_handleResize",value:function(){this._determineWindowProps(),this.check()}}])&&n(t.prototype,i),a&&n(t,a),e}();t.a=a},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._notificationClass=t,this._id=null,this._content=null,this._timeout=null,this._delay=null,this._openImmediately=!1,this._suspendCurrent=!1,this._onOpen=null,this._onOpenComplete=null,this._onClose=null,this._onCloseComplete=null}var t,i,o;return t=e,(i=[{key:"getNotificationClass",value:function(){return this._notificationClass}},{key:"getType",value:function(){return this._notificationClass.name}},{key:"setId",value:function(e){return this._id=e,this}},{key:"getId",value:function(){return this._id}},{key:"setContent",value:function(e){return this._content=e,this}},{key:"getContent",value:function(){return this._content}},{key:"setTimeout",value:function(e){return this._timeout=e,this}},{key:"getTimeout",value:function(){return this._timeout}},{key:"setDelay",value:function(e){return this._delay=e,this}},{key:"getDelay",value:function(){return this._delay}},{key:"setOpenImmediately",value:function(e){return this._openImmediately=e,this}},{key:"getOpenImmediately",value:function(){return this._openImmediately}},{key:"setSuspendCurrent",value:function(e){return this._suspendCurrent=e,this}},{key:"getSuspendCurrent",value:function(){return this._suspendCurrent}},{key:"onOpen",value:function(e){return this._onOpen=e,this}},{key:"getOpenHandler",value:function(){return this._onOpen}},{key:"onOpenComplete",value:function(e){return this._onOpenComplete=e,this}},{key:"getOpenCompleteHandler",value:function(){return this._onOpenComplete}},{key:"onClose",value:function(e){return this._onClose=e,this}},{key:"getCloseHandler",value:function(){return this._onClose}},{key:"onCloseComplete",value:function(e){return this._onCloseComplete=e,this}},{key:"getCloseCompleteHandler",value:function(){return this._onCloseComplete}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,r(t).call(this,e))).notification=i,n}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),i=t,l=[{key:"STATUS_CHANGED",get:function(){return"status_changed"}}],(n=null)&&o(i.prototype,n),l&&o(i,l),t}(i(5).a);t.a=l},function(e,t,i){var n;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function a(e){return s(u(e),arguments)}function r(e,t){return a.apply(null,[e].concat(t||[]))}function s(e,t){var i,n,r,s,l,u,c,h,d,f=1,p=e.length,v="";for(n=0;n<p;n++)if("string"==typeof e[n])v+=e[n];else if(Array.isArray(e[n])){if((s=e[n])[2])for(i=t[f],r=0;r<s[2].length;r++){if(!i.hasOwnProperty(s[2][r]))throw new Error(a('[sprintf] property "%s" does not exist',s[2][r]));i=i[s[2][r]]}else i=s[1]?t[s[1]]:t[f++];if(o.not_type.test(s[8])&&o.not_primitive.test(s[8])&&i instanceof Function&&(i=i()),o.numeric_arg.test(s[8])&&"number"!=typeof i&&isNaN(i))throw new TypeError(a("[sprintf] expecting number but found %T",i));switch(o.number.test(s[8])&&(h=i>=0),s[8]){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s[6]?parseInt(s[6]):0);break;case"e":i=s[7]?parseFloat(i).toExponential(s[7]):parseFloat(i).toExponential();break;case"f":i=s[7]?parseFloat(i).toFixed(s[7]):parseFloat(i);break;case"g":i=s[7]?String(Number(i.toPrecision(s[7]))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s[7]?i.substring(0,s[7]):i;break;case"t":i=String(!!i),i=s[7]?i.substring(0,s[7]):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s[7]?i.substring(0,s[7]):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s[7]?i.substring(0,s[7]):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}o.json.test(s[8])?v+=i:(!o.number.test(s[8])||h&&!s[3]?d="":(d=h?"+":"-",i=i.toString().replace(o.sign,"")),u=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(d+i).length,l=s[6]&&c>0?u.repeat(c):"",v+=s[5]?d+i+l:"0"===u?d+l+i:l+d+i)}return v}var l=Object.create(null);function u(e){if(l[e])return l[e];for(var t,i=e,n=[],a=0;i;){if(null!==(t=o.text.exec(i)))n.push(t[0]);else if(null!==(t=o.modulo.exec(i)))n.push("%");else{if(null===(t=o.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var r=[],s=t[2],u=[];if(null===(u=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r.push(u[1]);""!==(s=s.substring(u[0].length));)if(null!==(u=o.key_access.exec(s)))r.push(u[1]);else{if(null===(u=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(u[1])}t[2]=r}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push(t)}i=i.substring(t[0].length)}return l[e]=n}t.sprintf=a,t.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=r,void 0===(n=function(){return{sprintf:a,vsprintf:r}}.call(t,i,t,e))||(e.exports=n))}()},function(e,t){String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(null===this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0===t.length||0===e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var i="",n=0;n<e;n++)i+=t;return i})},function(e,t,i){"use strict";var n=i(4),o=i(5),a=i(1);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=l(this,u(t).call(this)),null===e||"object"!==r(e)?l(i):(i.id=e.id,i.imageId=e.imageId,i.time=e.time,i.authorName=e.authorName,i.authorUuid=e.authorUuid,i.text=e.text,i)}var i,n,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),i=t,h=[{key:"createInstance",value:function(e,i,n,o){if(!e.image)throw"file has no image";a.a.post("/ajax/comments/create",{data:{fileUuid:e.uuid,authorName:i,text:n},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(i){if(!0===i.success){var n=new t(i.comment);e.image.addCommentApply(n),"function"==typeof o&&o(!0,n)}else"function"==typeof o&&o(!1,null,i.message,i.code)},lock:!0})}},{key:"REMOVED",get:function(){return"removed"}}],(n=[{key:"remove",value:function(e){var t=this;a.a.post("/ajax/comments/id:".concat(this.id,"/remove"),{responseType:a.a.RESPONSETYPE_JSON,onComplete:function(i){i.success&&i.removed&&t.removeApply(),"function"==typeof e&&e(i.success&&i.removed)},lock:!0})}},{key:"removeApply",value:function(){this.dispatchEvent(new o.a(t.REMOVED))}}])&&s(i.prototype,n),h&&s(i,h),t}(n.a);t.a=h},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,t),(i=r(this,s(t).call(this,e)))._gallery=n,i}var i,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),i=t,u=[{key:"NEW_GALLERY_INITIALIZED",get:function(){return"new_gallery_initilalized"}},{key:"EXISTING_GALLERY_REINITIALIZED",get:function(){return"existing_gallery_reinitilalized"}}],(n=[{key:"getGallery",value:function(){return this._gallery}}])&&a(i.prototype,n),u&&a(i,u),t}(i(5).a);t.a=u},function(e,t){Date.now||(Date.now=function(){return(new Date).getTime()})},function(e,t,i){"use strict";t.a={GRID:"grid",MASONRY:"masonry",LIST:"list"}},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,r(t).call(this,e)))._flag=void 0,i}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),i=t,l=[{key:"REQUEST_DETAIL_VIEW",get:function(){return"request_detail_view"}},{key:"REQUEST_HEADER_IMAGE",get:function(){return"request_header_image"}},{key:"REQUEST_TEASER_IMAGE",get:function(){return"request_teaser_image"}},{key:"REQUEST_META_INFORMATION_VIEW",get:function(){return"request_meta_information_view"}},{key:"REQUEST_SELECTION",get:function(){return"request_selection"}},{key:"REQUEST_COLOR_FLAG",get:function(){return"request_color_flag"}},{key:"DRAG_START",get:function(){return"dragstart"}},{key:"DRAG_END",get:function(){return"dragend"}},{key:"REMOVED",get:function(){return"removed"}}],(n=[{key:"setFlag",value:function(e){return this._flag=e,this}},{key:"getFlag",value:function(){return this._flag}}])&&o(i.prototype,n),l&&o(i,l),t}(i(5).a);t.a=l},function(e,t,i){"use strict";var n,o=i(69),a=i.n(o),r=i(13);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==n)throw new Error("Cannot instantiate more than one WebintegrationManager, use WebintegrationManager.getInstance()");this.iOSFix={$scrollContainer:null,viewportWidth:null,viewportHeight:null,active:!1,onActivate:null},this.supportPostMessage=!1,this.initialize()}var t,i,o;return t=e,o=[{key:"getInstance",value:function(){return void 0===n&&(n=new e),n}}],(i=[{key:"initialize",value:function(){this.supportPostMessage=a.a.postmessage&&window.top!==window,this.supportPostMessage&&(window.addEventListener("message",this._handleWebIntPostMessage.bind(this)),window.top.postMessage("listening","*"))}},{key:"initIOSFix",value:function(e,t){this.iOSFix.$scrollContainer=e,this.iOSFix.onActivate="function"==typeof t?t:null,this._applyIOSFixResize()}},{key:"_handleIOSFixResizeEvent",value:function(e,t){this.iOSFix.viewportHeight=t,this.iOSFix.viewportWidth=e,this.iOSFix.active=!0,this._applyIOSFixResize()}},{key:"_applyIOSFixResize",value:function(){this.iOSFix.active&&(this.iOSFix.$scrollContainer&&this.iOSFix.$scrollContainer.css({overflow:"auto","overflow-y":"scroll","-webkit-overflow-scrolling":"touch",height:this.iOSFix.viewportHeight}),r.a.setForcedWidth(this.iOSFix.viewportWidth),null!==this.iOSFix.onActivate&&(this.iOSFix.onActivate.call(),this.iOSFix.onActivate=null))}},{key:"broadcastPath",value:function(e){this.supportPostMessage&&(e=e.replace(/^\//,""),window.top.postMessage("path:".concat(e),"*"))}},{key:"broadcastTitle",value:function(e){this.supportPostMessage&&window.top.postMessage("title:".concat(e),"*")}},{key:"_handleWebIntPostMessage",value:function(e){if("string"==typeof e.data){var t=e.data;if(0===t.indexOf("size:")){var i=t.substr(5).split("|");this._handleIOSFixResizeEvent(parseInt(i[0],10),parseInt(i[1],10))}}}}])&&s(t.prototype,i),o&&s(t,o),e}();t.a=l.getInstance()},function(e,t,i){"use strict";var n=i(17),o=i.n(n);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._navInputType=void 0,this._cache={},this._initialize()}var t,i,n;return t=e,n=[{key:"NAV_INPUT_TYPE_MOUSE",get:function(){return"mouse"}},{key:"NAV_INPUT_TYPE_KEYBOARD",get:function(){return"keyboard"}}],(i=[{key:"_initialize",value:function(){var t=this;this._cache.handleKeyDownBound=function(e){return t._handleKeyDown(e)},this._cache.handleMouseMoveBound=function(e){return t._handleMouseMove(e)},this._setNavInputType(e.NAV_INPUT_TYPE_MOUSE)}},{key:"_setNavInputType",value:function(t){if(this._navInputType!==t)switch(document.body.setAttribute("data-nav-input-type",t),this._navInputType=t,document.removeEventListener("keydown",this._cache.handleKeyDownBound),document.removeEventListener("mousemove",this._cache.handleMouseMoveBound),t){case e.NAV_INPUT_TYPE_MOUSE:document.addEventListener("keydown",this._cache.handleKeyDownBound);break;case e.NAV_INPUT_TYPE_KEYBOARD:document.addEventListener("mousemove",this._cache.handleMouseMoveBound);break;default:document.addEventListener("keydown",this._cache.handleKeyDownBound),document.addEventListener("mousemove",this._cache.handleMouseMoveBound)}}},{key:"_handleKeyDown",value:function(t){9===t.which&&this._setNavInputType(e.NAV_INPUT_TYPE_KEYBOARD)}},{key:"_handleMouseMove",value:function(){this._setNavInputType(e.NAV_INPUT_TYPE_MOUSE)}}])&&a(t.prototype,i),n&&a(t,n),e}();o()((function(){return new r}))},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function t(){return o(this,t),r(this,s(t).apply(this,arguments))}var i,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),i=t,u=[{key:"FILE_UPLOAD_START",get:function(){return"evt_fileUploadStart"}},{key:"FILE_UPLOAD_END",get:function(){return"evt_fileUploadEnd"}},{key:"REQUEST_OVERWRITE_RULE",get:function(){return"evt_request_overwrite_rule"}},{key:"UPLOAD_SESSION_START",get:function(){return"evt_upload_session_start"}},{key:"UPLOAD_SESSION_END",get:function(){return"evt_upload_session_end"}},{key:"STATUS_CHANGED",get:function(){return"evt_statusChanged"}}],(n=null)&&a(i.prototype,n),u&&a(i,u),t}(i(11).a);t.a=u},function(e,t,i){"use strict";var n=i(0),o={x:0,y:0},a={x:0,y:0};i.n(n)()(document).on("mousemove",(function(e){o.x=e.clientX,o.y=e.clientY,a.x=e.pageX,a.y=e.pageY})),t.a={getClientPosition:function(){return o},getPagePosition:function(){return a}}},function(e,t,i){"use strict";var n=i(0),o=i.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=0,l=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=s++,this.elm=void 0,this.$elm=void 0,this.load=i,this.dragging=!1,this.dataTransfer=void 0,this.onDragStart=void 0,this.onDragEnd=void 0,this.$dragGhostContent=void 0,this.$eventDispatcher=void 0,this.parseOptions(n),this.initialize(t)}var t,i,n;return t=e,n=[{key:"INSTANCE_COUNT",get:function(){return s}},{key:"DRAG_START",get:function(){return"evt_drag_start"}},{key:"DRAG_END",get:function(){return"evt_drag_end"}},{key:"EVENT_CLASS",get:function(){return".dnd_drgbl"}}],(i=[{key:"parseOptions",value:function(e){null!==e&&"object"===a(e)&&("onDragStart"in e&&"function"==typeof e.onDragStart&&(this.onDragStart=e.onDragStart),"onDragEnd"in e&&"function"==typeof e.onDragEnd&&(this.onDragEnd=e.onDragEnd))}},{key:"initialize",value:function(t){"jquery"in t?(this.elm=t[0],this.$elm=t):(this.elm=t,this.$elm=o()(t)),this.$eventDispatcher=o()(this),this.$elm.attr("draggable","true"),this.$elm.on("dragstart".concat(e.EVENT_CLASS),this.handleDragStart.bind(this)),this.$elm.on("dragend".concat(e.EVENT_CLASS),this.handleDragEnd.bind(this))}},{key:"setLoad",value:function(e){this.load=e}},{key:"setDragGhost",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.dragging&&void 0!==this.dataTransfer&&(this.clearDragGhost(),this.$dragGhostContent="jquery"in e?e:o()(e),this.dataTransfer.effectAllowed="move",this.dataTransfer.setDragImage&&this.dataTransfer.setDragImage(this.$dragGhostContent[0],t,i),o()("body").append(this.$dragGhostContent))}},{key:"clearDragGhost",value:function(){void 0!==this.$dragGhostContent&&(this.$dragGhostContent.remove(),this.$dragGhostContent=void 0)}},{key:"handleDragStart",value:function(t){this.dragging=!0,this.dataTransfer=t.originalEvent.dataTransfer,this.dataTransfer.setData("text","ghostload"),this.dataTransfer.dropEffect="move",this.$elm.addClass("dnd-draggable-dragging"),void 0!==this.onDragStart&&this.onDragStart.call(void 0,this),this.$eventDispatcher.trigger(e.DRAG_START)}},{key:"handleDragEnd",value:function(){this.dragging=!1,this.dataTransfer=void 0,this.$elm.removeClass("dnd-draggable-dragging"),this.clearDragGhost(),void 0!==this.onDragEnd&&this.onDragEnd.call(void 0,this),this.$eventDispatcher.trigger(e.DRAG_END)}},{key:"finalize",value:function(){this.$elm.attr("draggable",""),this.$elm.off(e.EVENT_CLASS)}}])&&r(t.prototype,i),n&&r(t,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=0,d=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=h++,this.elm=null,this.$elm=null,this.onValidateLoad=null,this.onDragEnter=null,this.onDragOver=null,this.onDragLeave=null,this.onDrop=null,this.$eventDispatcher=null,this.depth=0,this.active=!1,this.dataTransfer=null,this.validationResult=0,this.parseOptions(i),this.initialize(t)}var t,i,n;return t=e,n=[{key:"DRAG_ENTER",get:function(){return"evt_drag_enter"}},{key:"DRAG_LEAVE",get:function(){return"evt_drag_leave"}},{key:"DROP",get:function(){return"evt_drop"}}],(i=[{key:"parseOptions",value:function(e){null!==e&&"object"===u(e)&&("onDragEnter"in e&&"function"==typeof e.onDragEnter&&(this.onDragEnter=e.onDragEnter),"onValidateLoad"in e&&"function"==typeof e.onValidateLoad&&(this.onValidateLoad=e.onValidateLoad),"onDragOver"in e&&"function"==typeof e.onDragOver&&(this.onDragOver=e.onDragOver),"onDragLeave"in e&&"function"==typeof e.onDragLeave&&(this.onDragLeave=e.onDragLeave),"onDrop"in e&&"function"==typeof e.onDrop&&(this.onDrop=e.onDrop))}},{key:"initialize",value:function(e){"jquery"in e?(this.elm=e[0],this.$elm=e):(this.elm=e,this.$elm=o()(e)),this.$eventDispatcher=o()(this),this.$elm.on("dragenter",this.handleDragEnter.bind(this)),this.$elm.on("dragover",this.handleDragOver.bind(this)),this.$elm.on("dragleave",this.handleDragLeave.bind(this)),this.$elm.on("drop",this.handleDrop.bind(this))}},{key:"setActive",value:function(){this.active||0===this.validationResult||(this.validationResult>0?this.$elm.addClass("dnd-target-valid"):this.validationResult<0&&this.$elm.addClass("dnd-target-invalid"),this.active=!0,null!==this.onDragEnter&&this.onDragEnter.call(void 0))}},{key:"setInactive",value:function(){this.active&&(this.$elm.removeClass("dnd-target-valid dnd-target-invalid"),this.active=!1,null!==this.onDragLeave&&this.onDragLeave.call())}},{key:"validateLoad",value:function(e){if(null===this.onValidateLoad)this.validationResult=1;else{var t=this.onValidateLoad.call(null,e,this.dataTransfer);if("number"!=typeof t)throw"return value of onValidateLoad() is not of type number";this.validationResult=t}}},{key:"executeDrop",value:function(e){this.validationResult<=0||null!==this.onDrop&&this.onDrop.call(null,e,this.dataTransfer)}},{key:"reset",value:function(){this.setInactive(),this.depth=0,this.dataTransfer=null,this.validationResult=0}},{key:"handleDragEnter",value:function(t){t.preventDefault(),this.depth++,1===this.depth&&(this.dataTransfer=t.originalEvent.dataTransfer,this.$eventDispatcher.trigger(e.DRAG_ENTER))}},{key:"handleDragOver",value:function(e){e.preventDefault(),this.active&&null!==this.onDragOver&&this.onDragOver.call()}},{key:"handleDragLeave",value:function(t){t.preventDefault(),this.depth--,0===this.depth&&(this.dataTransfer=null,this.$eventDispatcher.trigger(e.DRAG_LEAVE))}},{key:"handleDrop",value:function(t){t.preventDefault(),this.dataTransfer=t.originalEvent.dataTransfer,this.depth=0,this.$eventDispatcher.trigger(e.DROP)}}])&&c(t.prototype,i),n&&c(t,n),e}();function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._draggables=[],this._targets=[],this._backgroundTarget=void 0,this._activeDraggable=void 0,this._activeTargets=[]}var t,i,n;return t=e,(i=[{key:"registerDraggable",value:function(e,t,i){var n=new l(e,t,i);o()(n).on(l.DRAG_START,this._handleDraggableDragStart.bind(this)),o()(n).on(l.DRAG_END,this._handleDraggableDragEnd.bind(this)),this._draggables.push(n)}},{key:"registerTarget",value:function(e,t){var i=new d(e,t),n=o()(i);return n.on(d.DROP,this._handleTargetDrop.bind(this)),n.on(d.DRAG_ENTER,this._handleTargetDragEnter.bind(this)),n.on(d.DRAG_LEAVE,this._handleTargetDragLeave.bind(this)),this._targets.push(i),i}},{key:"setBackgroundTarget",value:function(e){this._backgroundTarget=this.registerTarget(o()("body")[0],e)}},{key:"_isValidDropTarget",value:function(e){return e===this._backgroundTarget?1===this._activeTargets.length:e===this._activeTargets[this._activeTargets.length-1]}},{key:"_updateTargetActivation",value:function(){for(var e=0,t=this._activeTargets.length-1;e<=t;e++)e===t?this._activeTargets[e].setActive():this._activeTargets[e].setInactive()}},{key:"_resetActiveStates",value:function(){for(var e=0;e<this._activeTargets.length;e++)this._activeTargets[e].reset();this._activeDraggable=void 0,this._activeTargets=[]}},{key:"_handleDraggableDragStart",value:function(e){this._activeDraggable=e.target}},{key:"_handleDraggableDragEnd",value:function(e){this._activeDraggable===e.target&&(this._activeDraggable=void 0)}},{key:"_handleTargetDragEnter",value:function(e){e.target===this._backgroundTarget?this._activeTargets.unshift(e.target):this._activeTargets.push(e.target),e.target.validateLoad(this._activeDraggable),this._updateTargetActivation()}},{key:"_handleTargetDragLeave",value:function(e){for(var t=0;t<this._activeTargets.length;t++)if(this._activeTargets[t]===e.target){e.target.reset(),this._activeTargets.splice(t,1);break}this._updateTargetActivation()}},{key:"_handleTargetDrop",value:function(e){this._isValidDropTarget(e.target)&&(e.target.executeDrop(this._activeDraggable),this._resetActiveStates())}}])&&f(t.prototype,i),n&&f(t,n),e}();t.a=new p},function(e,t){e.exports=function(e){var t="",i=[];return e.optFloating&&i.push("floating"),t+='<div id="header-bar" class="'+i.join(" ")+'"> \x3c!-- content left --\x3e <div class="content-left"> ',(e.optHome||e.optTitle)&&(t+=' <ul class="entries left-default layout-list"> \x3c!-- home button --\x3e ',e.optHome&&(t+=' <li class="no-margin"> <a href="/web" target="_self" id="btn-home" class="header-bar-btn"> <div class="inner"> <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><polygon points="80 0 18.48 54.74 40.83 0 80 0" fill="#6bb9d6"/><polygon points="40.83 0 18.48 54.74 0 71.18 0 0 40.83 0" fill="#196784"/><polygon points="18.48 54.74 0 100 0 71.18 18.48 54.74" fill="#4290ad"/><polygon points="20 100 81.52 45.26 59.17 100 20 100" fill="#d98006"/><polygon points="59.17 100 81.52 45.26 100 28.82 100 100 59.17 100" fill="#a24902"/><polygon points="81.52 45.26 100 0 100 28.82 81.52 45.26" fill="#c86f06"/></svg> </div> </a> </li> <li class="divider"></li> '),t+=" \x3c!-- title --\x3e ",e.optTitle&&(t+=' <li> <span class="header-bar-title">'+e.optTitle+"</span> </li> "),t+="  </ul> "),t+=' <ul class="entries left layout-list"></ul> </div>  \x3c!-- content right --\x3e <div class="content-right"> <ul class="entries right layout-list"></ul> <ul class="entries right-default layout-list"></ul> </div></div>'}},function(e,t){e.exports=function(e){var t='<a href="'+(e.href||"")+'" title="'+e.title+'" class="header-bar-btn'+(e.class?" "+e.class:"")+'"';return e.id&&(t+=' id="'+e.id+'"'),t+="> "+(e.icon||"")+" <span>"+e.title+"</span></a>"}},function(e,t){e.exports=function(e){var t='<div id="user-menu"> <a href="" class="header-bar-btn btn--toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><circle cx="11" cy="9" r="4" fill="#fff"/><path d="M11,0A11,11,0,1,0,22,11,11,11,0,0,0,11,0Zm4.893,18.543a7.15,7.15,0,0,0-2.162-4.207,5.947,5.947,0,0,1-5.463,0,7.15,7.15,0,0,0-2.162,4.207,9,9,0,1,1,9.787,0Z" fill="#fff"/></svg> <span>'+e.toggleBtnLabel+'</span> </a> <ul class="dropdown" style="display:none;">  ';return e.showUpgradeButton&&(t+=' <li><a href="'+e.domainURL+':settings#plan" class="btn-go-premium">'+i18n.p__("headermenu.visitormenu","go premium")+"</a></li> "),t+=" ",e.toDashboard&&(t+=' <li><a href="'+e.domainURL+'">'+i18n.p__("headermenu.visitormenu","dashboard")+"</a></li> "),t+=' <li><a href="'+e.domainURL+':settings" class="btn-account-settings">'+i18n.p__("headermenu.visitormenu","account settings")+'</a></li>  <li class="divider"></li>  <li><a class="btn--support" href="">'+i18n.p__("headermenu.visitormenu","support")+'</a></li> \x3c!--li><a class="btn--tip" href="">'+i18n.p__("headermenu.tip","Did you know?")+'</a></li--\x3e <li class="divider"></li>  <li><a href="/user/logout?redirect='+encodeURIComponent(e.logoutRedirect)+'">'+i18n.p__("headermenu.visitormenu","logout")+"</a></li> </ul></div>"}},function(e,t){e.exports=function(e){var t='<div id="client-menu"> <a href="" class="header-bar-btn btn--toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><circle cx="11" cy="9" r="4" fill="#fff"/><path d="M11,0A11,11,0,1,0,22,11,11,11,0,0,0,11,0Zm4.893,18.543a7.15,7.15,0,0,0-2.162-4.207,5.947,5.947,0,0,1-5.463,0,7.15,7.15,0,0,0-2.162,4.207,9,9,0,1,1,9.787,0Z" fill="#fff"/></svg> <span>'+e.toggleBtnLabel+'</span> </a> <ul class="dropdown" style="display:none;"> ';return e.toDashboard&&(t+=' <li><a href="'+e.clientDomainUrl+'">'+i18n.p__("headermenu.visitormenu","dashboard")+"</a></li> "),t+=' <li><a href="/client/logout">'+i18n.p__("headermenu.visitormenu","logout")+"</a></li> </ul></div>"}},function(e,t,i){"use strict";var n=i(39),o=i(0),a=i.n(o),r=i(7),s=i(9),l=i(83),u=i.n(l),c=i(84),h=i.n(c);function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=null,p=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!==f)throw"This class is a singleton and therefore can only be accessed through OverlayNotificationContainer.getInstance().";this.notification=null,this.visible=!1,this.maxWidth=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"getInstance",value:function(){return null===f&&(f=new e),f}},{key:"FIT_PADDING",get:function(){return 10}},{key:"ANIMATION_OFFSET",get:function(){return 80}}],(i=[{key:"createDOM",value:function(){this.$ui.window=a()(window),this.$ui.body=a()("body"),this.$ui.background=a()(u()()),this.$ui.wrapper=a()(h()())}},{key:"initialize",value:function(){this.$ui.background.css("opacity","0").hide(),this.$ui.wrapper.css({opacity:"0",transform:"translateY(".concat(e.ANIMATION_OFFSET,"px)")}).hide(),this.$ui.background.on("wheel",(function(e){e.stopPropagation()})),this.$ui.wrapper.on("wheel",(function(e){e.stopPropagation()})),this.$ui.body.append(this.$ui.background).append(this.$ui.wrapper)}},{key:"show",value:function(e){this.visible||(this.$ui.body.addClass("noscroll"),this.$ui.background.show(),s.default.to(this.$ui.background,{opacity:1,duration:.3}),this.$ui.wrapper.show(),s.default.to(this.$ui.wrapper,{opacity:1,y:0,duration:.5,ease:"expo.out",onComplete:function(){"function"==typeof e&&e.call()}}),this.$ui.window.on("resize.overlay-notification",this.handleWindowResize.bind(this)),this.handleWindowResize(),this.visible=!0)}},{key:"hide",value:function(t){if(this.visible){var i=this.$ui.background,n=this.$ui.wrapper;this.$ui.window.off("resize.overlay-notification"),s.default.to(n,{opacity:0,y:e.ANIMATION_OFFSET,duration:.3,ease:"expo.in",onComplete:function(){n.hide()}}),s.default.to(i,{opacity:0,duration:.3,delay:.2,onComplete:function(){i.hide(),n.css({"max-width":""}),"function"==typeof t&&t.call()}}),this.$ui.body.removeClass("noscroll"),this.visible=!1}}},{key:"setNotification",value:function(e){if(null!==this.notification)throw"A notification is already set to overlay container.";this.notification=e,this.$ui.wrapper.html(e.$dom)}},{key:"clearNotification",value:function(){null!==this.notification&&(this.notification.$dom.detach(),this.notification=null)}},{key:"center",value:function(){var e=this.$ui.window.height()-this.$ui.wrapper.outerHeight();this.$ui.wrapper.css("top",Math.max(Math.round(.333*e),10))}},{key:"setMaxWidth",value:function(e){this.maxWidth=e||null,e?this.$ui.wrapper.css({"max-width":e}):this.$ui.wrapper.css({"max-width":""})}},{key:"handleWindowResize",value:function(){if(this.center(),this.notification){var t=this.notification._definition.getResizeHandler();"function"==typeof t&&t(this.$ui.window.height()-2*e.FIT_PADDING)}}}])&&d(t.prototype,i),n&&d(t,n),e}(),v=i(26),g=i(85),m=i.n(g);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_(this,w(t).call(this,e,i))).container=p.getInstance(),n.$dom=void 0,n._setSerial(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),i=t,(n=[{key:"open",value:function(){var e=this;this.$dom=a()(m()({id:this.getId()}));var t=this.$dom.find(".entry-title"),i=this.$dom.find(".entry-content"),n=this.$dom.find(".btn-close"),o=this._definition.getTitle();null!==o?t.text(o):t.remove();var s=this._definition.getContent();null!==s&&i.html(s),this._definition.isRawContent()&&i.removeClass("entry-inner"),this._definition.isCloseable()?(n.on("click",(function(t){t.preventDefault(),r.a.close(e)})),this.container.$ui.background.on("click.on_bgclose",(function(){r.a.close(e)})),a()(document).on("keydown.on_bgclose",(function(t){27===t.keyCode&&(t.preventDefault(),r.a.close(e))}))):n.remove();var l=this._definition.getLevel();null!==l&&this.$dom.attr("data-level",l),this.container.setNotification(this),this.container.setMaxWidth(this._definition.getMaxWidth()),this.container.show((function(){e.setOpened()}))}},{key:"close",value:function(){var e=this;this.container.$ui.background.off(".on_bgclose"),a()(document).off(".on_bgclose"),this.container.hide((function(){e.container.clearNotification(),e.setClosed()}))}}])&&b(i.prototype,n),o&&b(i,o),t}(v.a);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=C(this,x(t).call(this,S)))._title=null,e._isRawContent=!1,e._isCloseable=!0,e._level=null,e._maxWidth=null,e._onResize=null,e}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),i=t,o=[{key:"LEVEL_ERROR",get:function(){return"error"}},{key:"LEVEL_WARNING",get:function(){return"warning"}},{key:"LEVEL_SUCCESS",get:function(){return"success"}}],(n=[{key:"setTitle",value:function(e){return this._title=e,this}},{key:"getTitle",value:function(){return this._title}},{key:"setIsRawContent",value:function(e){return this._isRawContent=e,this}},{key:"isRawContent",value:function(){return this._isRawContent}},{key:"setIsCloseable",value:function(e){return this._isCloseable=e,this}},{key:"isCloseable",value:function(){return this._isCloseable}},{key:"setLevel",value:function(e){return this._level=e,this}},{key:"getLevel",value:function(){return this._level}},{key:"setMaxWidth",value:function(e){return this._maxWidth=e,this}},{key:"getMaxWidth",value:function(){return this._maxWidth}},{key:"onResize",value:function(e){return this._onResize=e,this}},{key:"getResizeHandler",value:function(){return this._onResize}}])&&T(i.prototype,n),o&&T(i,o),t}(n.a);t.a=D},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=t,this._location=i,this._id=void 0,this._class=void 0,this._href=void 0,this._icon=void 0,this._callback=void 0}var t,i,o;return t=e,(i=[{key:"getTitle",value:function(){return this._title}},{key:"getLocation",value:function(){return this._location}},{key:"setId",value:function(e){return this._id=e,this}},{key:"getId",value:function(){return this._id}},{key:"setClass",value:function(e){return this._class=e,this}},{key:"getClass",value:function(){return this._class}},{key:"setHref",value:function(e){return this._href=e,this}},{key:"getHref",value:function(){return this._href}},{key:"setIcon",value:function(e){return this._icon=e,this}},{key:"getIcon",value:function(){return this._icon}},{key:"setCallback",value:function(e){return this._callback=e,this}},{key:"hasCallback",value:function(){return"function"==typeof this._callback}},{key:"getCallback",value:function(){return this._callback}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";i.r(t);var n=i(4),o=i(11),a=i(1),r=i(14),s=i(19);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,h(t).call(this))).gallery=i,n.focusX=e.focusX,n.focusY=e.focusY,n.thumbnails=new s.a("thumbnails"in e?e.thumbnails:null),n.aspectRatio=0,n.initialize(),n}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),i=t,l=[{key:"FOCUS_UPDATED",get:function(){return"focus_updated"}}],(n=[{key:"initialize",value:function(){if(!this.thumbnails.isEmpty()){var e=this.thumbnails.getNth(0);this.aspectRatio=e.width/e.height}}},{key:"setFocusPoint",value:function(e,i,n){this.focusX=e,this.focusY=i,this.dispatchEvent(new o.a(t.FOCUS_UPDATED,{focusX:this.focusX,focusY:this.focusY})),!0===n&&a.a.post("/ajax/galleries/path:".concat(r.default.encodePathForAjax(this.gallery.urlRel),"/updateheaderimage"),{data:{id:this.id,focusX:this.focusX,focusY:this.focusY},lock:!0})}}])&&u(i.prototype,n),l&&u(i,l),t}(n.a);t.default=f},function(e,t,i){"use strict";var n={calculateNumCols:function(e,t,i){return Math.max(1,Math.floor((e+i)/(t+i)))},calculateDynamicColWidth:function(e,t,i){return(e+i)/n.calculateNumCols(e,t,i)-i},calculateContainerWidth:function(e,t,i){return e*(t+i)-i}};t.a=n},function(e,t,i){"use strict";var n=i(4),o=i(11),a=i(1),r=i(67),s=i(22);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,t),(i=h(this,d(t).call(this))).gallery=e,i.id=n.id||null,i.uuid=n.uuid||null,i.name=n.name||null,i.authorName=n.authorName||null,i.authorEMail=n.authorEMail||null,i.authorMessage=n.authorMessage||null,i.lastModified=n.lastModified||null,i.fileMap={},i.numFiles=0,i.status=i.id?t.STATUS_READY:t.STATUS_RAW,i.initialized=!1,i.modified=!1,i.lastModified=n.lastModified,i._initialFileUuids=n.fileUuids||null,i._initialFiles=[],i}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),i=t,l=[{key:"STATUS_RAW",get:function(){return"STATUS_RAW"}},{key:"STATUS_READY",get:function(){return"STATUS_READY"}},{key:"FILES_ADDED",get:function(){return"FILES_ADDED"}},{key:"FILES_REMOVED",get:function(){return"FILES_REMOVED"}},{key:"MODIFIED",get:function(){return"MODIFIED"}},{key:"REVERTED",get:function(){return"REVERTED"}},{key:"CLONED",get:function(){return"CLONED"}},{key:"SAVED",get:function(){return"SAVED"}},{key:"UPDATED",get:function(){return"UPDATED"}},{key:"REMOVED",get:function(){return"REMOVED"}}],(n=[{key:"initialize",value:function(){if(!this.initialized){if(this._initialFileUuids instanceof Array){for(var e,t=[],i=0;i<this._initialFileUuids.length;i++)null!==(e=r.a.getByUuid(this._initialFileUuids[i]))&&t.push(e);0!==t.length&&this.addFiles(t,!1),this._initialFiles=t}this.initialized=!0}}},{key:"addFiles",value:function(e){for(var i,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],r=0;r<e.length;r++)i=e[r],this.hasFile(i)||(this.fileMap[i.uuid]=i,this.numFiles++,a.push(i));0!==a.length&&(this.addFileListeners(a),n&&this._setModified(),this.dispatchEvent(new o.a(t.FILES_ADDED,{files:a})))}},{key:"removeFiles",value:function(e){for(var i,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],r=0;r<e.length;r++)i=e[r],this.hasFile(i)&&(delete this.fileMap[i.uuid],this.numFiles--,a.push(i));0!==a.length&&(this.removeFileListeners(a),n&&this._setModified(),this.dispatchEvent(new o.a(t.FILES_REMOVED,{files:a})))}},{key:"addFileListeners",value:function(e){for(var t=this,i="preset_".concat(this.id),n=0;n<e.length;n++)e[n].addEventListenerOnce(s.a.REMOVED,(function(e){return t.removeFiles([e.target],!1)}),i)}},{key:"removeFileListeners",value:function(e){for(var t="preset_".concat(this.id),i=0;i<e.length;i++)e[i].removeEventListenersByNamespace(t)}},{key:"_setModified",value:function(){this.modified||(this.modified=!0,this.dispatchEvent(new o.a(t.MODIFIED)))}},{key:"revert",value:function(){var e;this.removeFileListeners(this.getFiles()),this.fileMap={};for(var i=0;i<this._initialFiles.length;i++)e=this._initialFiles[i],this.fileMap[e.uuid]=e;this.modified=!1,this.dispatchEvent(new o.a(t.REVERTED))}},{key:"save",value:function(e){var t=this,i=function(t,i){"function"==typeof e&&e(!1,{message:t,code:i})};if(this.name){var n={galleryUuid:this.gallery.uuid,presetName:this.name,fileUuids:this.getFileUuids(),authorName:this.authorName,authorEMail:this.authorEMail,authorMessage:this.authorMessage};a.a.post("/ajax/galleryselections/create",{dataType:a.a.DATATYPE_JSON,data:n,responseType:a.a.RESPONSETYPE_JSON,onComplete:function(n){n.success?(t.id=n.preset.id,t.uuid=n.preset.uuid,t.name=n.preset.name,t.lastModified=n.preset.lastModified,t.saveApply(),"function"==typeof e&&e(!0,null)):i(n.message,n.code)},lock:!0})}else i("name not set","name_missing")}},{key:"saveApply",value:function(){this.status=t.STATUS_READY,this._initialFiles=this.getFiles(),this.modified=!1,this.dispatchEvent(new o.a(t.SAVED))}},{key:"update",value:function(e){var t=this;a.a.post("/ajax/galleryselections/uuid:".concat(this.uuid,"/update"),{dataType:a.a.DATATYPE_JSON,data:{fileUuids:this.getFileUuids()},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(i){i.success?(t._initialFiles=t.getFiles(),t.modified=!1,t.updateApply(),"function"==typeof e&&e(!0,null)):"function"==typeof e&&e(!1,{message:i.message,code:i.code})},lock:!0})}},{key:"updateApply",value:function(){this.dispatchEvent(new o.a(t.UPDATED))}},{key:"remove",value:function(e){var t=this;a.a.post("/ajax/galleryselections/uuid:".concat(this.uuid,"/remove"),{responseType:a.a.RESPONSETYPE_JSON,onComplete:function(i){i.success?(t.removeApply(),"function"==typeof e&&e(!0,null)):"function"==typeof e&&e(!1,{message:i.message,code:i.code})},lock:!0})}},{key:"removeApply",value:function(){this.dispatchEvent(new o.a(t.REMOVED))}},{key:"clone",value:function(){var e=new t(this.gallery);return this.initialized&&e.initialize(),e.addFiles(this.getFiles()),this.dispatchEvent(new o.a(t.CLONED,{clone:e})),e}},{key:"getFiles",value:function(){var e=[];for(var t in this.fileMap)null!==this.fileMap[t]&&e.push(this.fileMap[t]);return e}},{key:"getFileUuids",value:function(){var e=[];for(var t in this.fileMap)e.push(t);return e}},{key:"getNumFiles",value:function(){return this.numFiles}},{key:"hasFile",value:function(e){return e.uuid in this.fileMap}}])&&c(i.prototype,n),l&&c(i,l),t}(n.a);t.a=p},function(e,t,i){"use strict";var n=i(1),o=i(14),a=i(148),r=i(43);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,l;return t=e,l=[{key:"generateDownloadURL",value:function(t,i,a,r){n.a.get("/ajax/galleries/path:".concat(o.default.encodePathForAjax(i),"/accesstoken"),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(i){if(i.success&&i.token){var n=e._assembleFileDownloadUrl(t,i.token);"function"==typeof a&&a(n)}else"function"==typeof r&&r()}})}},{key:"generateDownloadURLSync",value:function(t,i){var a=null;return n.a.get("/ajax/galleries/path:".concat(o.default.encodePathForAjax(i),"/accesstoken"),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(i){if(!i.success||!i.token)throw"error requesting download URL";a=e._assembleFileDownloadUrl(t,i.token)},async:!1}),a}},{key:"setFileFlag",value:function(e,t,i,n,o){if(e.flag!==i){var r=e.flag;e.setFlag(i),a.a.setColorFlag(t,[e],i).then((function(){"function"==typeof n&&n()})).catch((function(t){e.setFlag(r),"function"==typeof o&&o(t)}))}else"function"==typeof n&&n()}},{key:"removeFile",value:function(e,t,i){n.a.post("/ajax/files/uuid:".concat(e.uuid,"/remove"),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(n){n.success?(e.removeApply(),"function"==typeof t&&t()):"function"==typeof i&&i(n.error)},lock:!0})}},{key:"loadImageThumbnails",value:function(e,t,i){if(!e.image)throw"file has no image subclass";n.a.post("/ajax/files/uuid:".concat(e.uuid),{data:{credentials:"file-image,image-thumbnails"},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(n){n.file?(e.image.setThumbnails(n.file.image.thumbnails),"function"==typeof t&&t()):"function"==typeof i&&i()}})}},{key:"loadImageMetaData",value:function(e,t,i){if(!e.image)throw"file has no image subclass";var o=e.image;n.a.get("/ajax/files/uuid:".concat(e.uuid,"/image/metadata"),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e){e.success?(o.metaData={},e.exif&&(o.metaData.exif=e.exif),e.iptc&&(o.metaData.iptc=e.iptc),"function"==typeof t&&t()):"function"==typeof i&&i()}})}},{key:"loadFileComments",value:function(e,t,i){if(!e.image)throw"file has no image subclass";var o=e.image;n.a.get("/ajax/files/uuid:".concat(e.uuid,"/image/comments"),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e){if(e.success){var n=[];for(var a in e.comments)n.push(new r.a(e.comments[a]));o.setComments(n),"function"==typeof t&&t(n)}else"function"==typeof i&&i()},lock:!0})}},{key:"_assembleFileDownloadUrl",value:function(e,t){var i="/gallery/downloadfile/".concat(e),n=[];return o.default.isIOS()&&n.push("ndl"),n.push("token=".concat(t)),i+="?".concat(n.join("&"))}}],(i=null)&&s(t.prototype,i),l&&s(t,l),e}();t.a=l},function(e,t,i){var n;void 0===(n=function(){"use strict";var e={},t=function(e){for(var t,i,n,o=[],a=0,r=-1,s=0;t=(i=e.charAt(a++)).charCodeAt(0);)(n=t>=48&&t<=57)!==s&&(o[++r]="",s=n),o[r]+=i;return o};return e.alphanum=function(e,i){for(var n,o,a=t(e),r=t(i),s=0;a[s]&&r[s];s++)if(a[s]!==r[s])return n=Number(a[s]),o=Number(r[s]),n==a[s]&&o==r[s]?n-o:a[s]>r[s]?1:-1;return a.length-r.length},e.alphanumCase=function(e,i){for(var n,o,a=t(e.toLowerCase()),r=t(i.toLowerCase()),s=0;a[s]&&r[s];s++)if(a[s]!==r[s])return n=Number(a[s]),o=Number(r[s]),n==a[s]&&o==r[s]?n-o:a[s].localeCompare(r[s]);return a.length-r.length},e}.apply(t,[]))||(e.exports=n)},function(e,t,i){"use strict";var n=i(4),o=i(8),a=i(16),r=i(18),s=i(35),l=i(59);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e,i){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=h(this,d(t).call(this)),!i.uuid)throw"gallery uuid not set";return n.domain=e,n.uuid=i.uuid,n.name=void 0,n.path=void 0,n.url=void 0,n.urlRel=void 0,n.urlRelDom=void 0,n.parentGalleryUuid=void 0,n.parentGallery=null,n.timeCreated=i.timeCreated,n.timeLastModified=null,n.status=i.status,n.isFavorite=i.isFavorite||!1,n.isPrivate=i.isPrivate||!1,n.headerImage=!1,n.teaserImage=!1,n.settings=null,n.secureLinkName=null,n.numFiles=!1,n.hasSiblings=null,n.numSubGalleries=!1,n.photographer=!1,n.securityInfo=null,n.branchIndex=null,n.setData(i),n.data={},n}var i,n,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),i=t,(n=[{key:"setData",value:function(e){"name"in e&&(this.name=e.name),"path"in e&&(this.path=e.path),"url"in e&&(this.url="".concat(this.domain.url,"/").concat(e.url),this.urlRel="".concat(this.domain.urlRel,"/").concat(e.url),this.urlRelDom=e.url),"branchIndex"in e&&(this.branchIndex=e.branchIndex),"timeLastModified"in e&&(this.timeLastModified=e.timeLastModified),"parentGalleryUuid"in e&&(this.parentGalleryUuid=e.parentGalleryUuid),"headerImage"in e&&(this.headerImage=new l.default(e.headerImage,this)),"teaserImage"in e&&(this.teaserImage=new s.a(e.teaserImage)),"settings"in e&&(this.settings=new a.a(e.settings)),"secureLinkName"in e&&(this.secureLinkName=e.secureLinkName),"numFiles"in e&&(this.numFiles=e.numFiles),"numSubGalleries"in e&&(this.numSubGalleries=e.numSubGalleries),"hasSiblings"in e&&(this.hasSiblings=e.hasSiblings),"photographer"in e&&(this.photographer=new r.a(e.photographer))}},{key:"moveApply",value:function(e){this.setData(e),e.parentGallery||(this.parentGallery=null),this.dispatchEvent(new o.a(o.a.MOVED))}},{key:"renameApply",value:function(e){this.setData(e),this.dispatchEvent(new o.a(o.a.RENAMED,{newName:e.name}))}},{key:"truncateApply",value:function(){this.dispatchEvent(new o.a(o.a.TRUNCATED))}},{key:"removeApply",value:function(){this.status="stored",this.dispatchEvent(new o.a(o.a.REMOVED))}},{key:"setFavoriteApply",value:function(e){this.isFavorite!==e&&(this.isFavorite=Boolean(e),this.dispatchEvent(new o.a(this.isFavorite?o.a.FAVORIZED:o.a.UNFAVORIZED)))}}])&&c(i.prototype,n),u&&c(i,u),t}(n.a);t.a=p},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"randomChars",value:function(t,i){for(var n=(i=i||e.CHARSET_BASE62).length-1,o="",a=0;a<t;a++)o+=i.charAt(Math.round(Math.random()*n));return o}},{key:"extractFileExtension",value:function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1)}},{key:"CHARSET_BASE58",get:function(){return"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}},{key:"CHARSET_BASE62",get:function(){return"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"}},{key:"CHARSET_PASSWD",get:function(){return"23456789abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}},{key:"CHARSET_PASSLC",get:function(){return"23456789abcdefghjkmnpqrstuvwxyz"}}],(i=null)&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";t.a={RAW:"raw",UPLOADING:"uploading",PROCESSING:"processing",BROKEN:"broken",READY:"ready",LIMIT_LOCKED:"limit_locked",INVISIBLE:"invisible",STORED:"stored"}},function(e,t,i){"use strict";var n=i(4),o=i(22),a=i(35);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}(this,l(t).call(this))).uuid=e.uuid,i.filetype=e.filetype,i.filename=e.filename,i.filesize=e.filesize,i.order=e.order,i.status=e.status,i.category=e.category,i.flag=e.flag,i.timeUploaded=e.timeUploaded,i.image=e.image?new a.a(e.image,u(i)):null,i.selected=!1,i.visible=!0,i.dragging=!1,i.filenameOverride=void 0,i}var i,n,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),i=t,(n=[{key:"hasPreview",value:function(){return Boolean(this.image&&this.image.hasThumbnails())}},{key:"update",value:function(e){if(e.uuid!==this.uuid)throw"given file uuid does not match";this.filetype=e.filetype,this.filename=e.filename,this.filesize=e.filesize,this.order=e.order,this.status=e.status,this.flag=e.flag,this.timeUploaded=e.timeUploaded,e.image?this.image?this.image.update(e.image):(this.image=e.image,this.image.file=this):this.image&&(this.image=null),this.dispatchEvent(new o.a(o.a.UPDATED))}},{key:"select",value:function(e){this.selected||(this.selected=!0,this.dispatchEvent(new o.a(o.a.SELECTED,e?{origin:e}:void 0)))}},{key:"deselect",value:function(e){this.selected&&(this.selected=!1,this.dispatchEvent(new o.a(o.a.DESELECTED,e?{origin:e}:void 0)))}},{key:"toggleSelection",value:function(e){this.selected?this.deselect(e):this.select(e)}},{key:"setFlag",value:function(e){this.flag!==e&&(this.flag=e,this.dispatchEvent(new o.a(o.a.FLAG_CHANGED,{flag:e})))}},{key:"setVisibility",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.visible!==e&&(this.visible=e,this.dispatchEvent(new o.a(o.a.VISIBILITY_CHANGED)))}},{key:"setFilenameOverride",value:function(e){this.filenameOverride!==e&&(this.filenameOverride=e,this.dispatchEvent(new o.a(o.a.FILENAME_OVERRIDE,{newName:this.filenameOverride})))}},{key:"removeApply",value:function(){this.dispatchEvent(new o.a(o.a.REMOVED))}}])&&s(i.prototype,n),h&&s(i,h),t}(n.a);function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cache={}}var t,i,n;return t=e,(i=[{key:"getByUuid",value:function(e){return e in this._cache?this._cache[e]:null}},{key:"findSelectedFiles",value:function(){var e=[];for(var t in this._cache)this._cache[t].selected&&e.push(this._cache[t]);return e}},{key:"instantiateFromExport",value:function(e){if("string"!=typeof e.uuid)throw"Dataset has not property 'uuid'.";var t=new h(e);if(e.uuid in this._cache){var i=this._cache[e.uuid];return i.update(t),i}return this._cache[t.uuid]=t,t}}])&&d(t.prototype,i),n&&d(t,n),e}();t.a=new f},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(9),r=i(72),s=i.n(r);function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=null,c=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!==u)throw"This class is a singleton and therefore can only be accessed through LowerRightNotificationContainer.getInstance().";this.entryMap={},this.numEntries=0,this.visible=!1,this.$dom=void 0,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"getInstance",value:function(){return null===u&&(u=new e),u}}],(i=[{key:"createDOM",value:function(){this.$dom=o()(s()()),this.$ui.clearfix=this.$dom.find("> .clearfix")}},{key:"initialize",value:function(){this.$dom.hide(),o()("body").append(this.$dom)}},{key:"show",value:function(){this.visible||(this.$dom.show(),this.visible=!0)}},{key:"hide",value:function(){this.visible&&(this.$dom.hide(),this.visible=!1)}},{key:"addNotification",value:function(e){if(e.getId()in this.entryMap)throw"A notification with the id ".concat(e.getId()," is already added to this container.");this.entryMap[e.getId()]=e,this.numEntries++,this.$dom.prepend(e.$dom),this.show(),e.animateIn()}},{key:"removeNotification",value:function(e){var t=this;e.getId()in this.entryMap&&(delete this.entryMap[e.getId()],e.animateOut().then((function(){t.numEntries--,e.$dom.detach(),0===t.numEntries&&t.hide()})))}},{key:"setBottomOffset",value:function(e){this.visible?a.gsap.to(this.$dom[0],{duration:.2,marginBottom:e,ease:"power2.out"}):this.$dom.css("margin-bottom",e)}}])&&l(t.prototype,i),n&&l(t,n),e}();t.a=c},function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * modernizr v3.6.0
 * Build https://modernizr.com/download?-postmessage-dontmin
 *
 * Copyright (c)
 *  Faruk Ates
 *  Paul Irish
 *  Alex Sexton
 *  Ryan Seddon
 *  Patrick Kettner
 *  Stu Cox
 *  Richard Herrera

 * MIT License
 */!function(t,n,o){var a=[],r={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var i=this;setTimeout((function(){t(i[e])}),0)},addTest:function(e,t,i){a.push({name:e,fn:t,options:i})},addAsyncTest:function(e){a.push({name:null,fn:e})}},s=function(){};s.prototype=r,
/*!
  {
    "name": "postMessage",
    "property": "postmessage",
    "caniuse": "x-doc-messaging",
    "notes": [{
      "name": "W3C Spec",
      "href": "http://www.w3.org/TR/html5/comms.html#posting-messages"
    }],
    "polyfills": ["easyxdm", "postmessage-jquery"]
  }
  !*/
(s=new s).addTest("postmessage","postMessage"in t);var l=[];!function(){var e,t,n,o,r,u,c,h;for(var d in a)if(a.hasOwnProperty(d)){if(e=[],(t=a[d]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(c=t.fn,h="function",o=i(c)===h?t.fn():t.fn,r=0;r<e.length;r++)1===(u=e[r].split(".")).length?s[u[0]]=o:(!s[u[0]]||s[u[0]]instanceof Boolean||(s[u[0]]=new Boolean(s[u[0]])),s[u[0]][u[1]]=o),l.push((o?"":"no-")+u.join("-"))}}(),delete r.addTest,delete r.addAsyncTest;for(var u=0;u<s._q.length;u++)s._q[u]();e.exports=s}(window,document)},function(e,t,i){var n;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===(n=function(){"use strict";var e,t,i,n,a,r,s={};return e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],a={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/,s.format=function(){function s(t){return e[parseInt(t,10)]||t}function l(e){return t[parseInt(e,10)]||e}function u(e){var t=parseInt(e,10)-1;return i[t]||e}function c(e){var t=parseInt(e,10)-1;return n[t]||e}function h(e){return a[e]||e}function d(e){var t,i,n,o,a,r=e,s="";return-1!==r.indexOf(".")&&(o=r.split("."),r=o[0],s=o[o.length-1]),3===(a=r.split(":")).length?(t=a[0],i=a[1],n=a[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:r=r.replace(/\s.+/,"").replace(/[a-z]/gi,""),hour:t,minute:i,second:n,millis:s}):{time:"",hour:"",minute:"",second:"",millis:""}}function f(e,t){for(var i=t-String(e).length,n=0;n<i;n++)e="0"+e;return e}return{parseDate:function(e){var t,i,n={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==typeof e)return this.parseDate(new Date(e));if("function"==typeof e.getFullYear)n.year=String(e.getFullYear()),n.month=String(e.getMonth()+1),n.dayOfMonth=String(e.getDate()),n.time=d(e.toTimeString()+"."+e.getMilliseconds());else if(-1!=e.search(r))t=e.split(/[T\+-]/),n.year=t[0],n.month=t[1],n.dayOfMonth=t[2],n.time=d(t[3].split(".")[0]);else switch(6===(t=e.split(" ")).length&&isNaN(t[5])&&(t[t.length]="()"),t.length){case 6:n.year=t[5],n.month=h(t[1]),n.dayOfMonth=t[2],n.time=d(t[3]);break;case 2:i=t[0].split("-"),n.year=i[0],n.month=i[1],n.dayOfMonth=i[2],n.time=d(t[1]);break;case 7:case 9:case 10:n.year=t[3],n.month=h(t[1]),n.dayOfMonth=t[2],n.time=d(t[4]);break;case 1:i=t[0].split(""),n.year=i[0]+i[1]+i[2]+i[3],n.month=i[5]+i[6],n.dayOfMonth=i[8]+i[9],n.time=d(i[13]+i[14]+i[15]+i[16]+i[17]+i[18]+i[19]+i[20]);break;default:return null}return n.time?n.date=new Date(n.year,n.month-1,n.dayOfMonth,n.time.hour,n.time.minute,n.time.second,n.time.millis):n.date=new Date(n.year,n.month-1,n.dayOfMonth),n.dayOfWeek=String(n.date.getDay()),n},date:function(e,t){try{var i=this.parseDate(e);if(null===i)return e;for(var n,o=i.year,a=i.month,r=i.dayOfMonth,h=i.dayOfWeek,d=i.time,p="",v="",g="",m=!1,y=0;y<t.length;y++){var b=t.charAt(y),_=t.charAt(y+1);if(m)"'"==b?(v+=""===p?"'":p,p="",m=!1):p+=b;else switch(g="",p+=b){case"ddd":v+=s(h),p="";break;case"dd":if("d"===_)break;v+=f(r,2),p="";break;case"d":if("d"===_)break;v+=parseInt(r,10),p="";break;case"D":v+=r=1==r||21==r||31==r?parseInt(r,10)+"st":2==r||22==r?parseInt(r,10)+"nd":3==r||23==r?parseInt(r,10)+"rd":parseInt(r,10)+"th",p="";break;case"MMMM":v+=c(a),p="";break;case"MMM":if("M"===_)break;v+=u(a),p="";break;case"MM":if("M"===_)break;v+=f(a,2),p="";break;case"M":if("M"===_)break;v+=parseInt(a,10),p="";break;case"y":case"yyy":if("y"===_)break;v+=p,p="";break;case"yy":if("y"===_)break;v+=String(o).slice(-2),p="";break;case"yyyy":v+=o,p="";break;case"HH":v+=f(d.hour,2),p="";break;case"H":if("H"===_)break;v+=parseInt(d.hour,10),p="";break;case"hh":v+=f(n=0===parseInt(d.hour,10)?12:d.hour<13?d.hour:d.hour-12,2),p="";break;case"h":if("h"===_)break;n=0===parseInt(d.hour,10)?12:d.hour<13?d.hour:d.hour-12,v+=parseInt(n,10),p="";break;case"mm":v+=f(d.minute,2),p="";break;case"m":if("m"===_)break;v+=d.minute,p="";break;case"ss":v+=f(d.second.substring(0,2),2),p="";break;case"s":if("s"===_)break;v+=d.second,p="";break;case"S":case"SS":if("S"===_)break;v+=p,p="";break;case"SSS":var w="000"+d.millis.substring(0,3);v+=w.substring(w.length-3),p="";break;case"a":v+=d.hour>=12?"PM":"AM",p="";break;case"p":v+=d.hour>=12?"p.m.":"a.m.",p="";break;case"E":v+=l(h),p="";break;case"'":p="",m=!0;break;default:v+=b,p=""}}return v+=g}catch(t){return console&&console.log&&console.log(t),e}},prettyDate:function(e){var t,i,n;if("string"!=typeof e&&"number"!=typeof e||(t=new Date(e)),"object"===o(e)&&(t=new Date(e.toString())),i=((new Date).getTime()-t.getTime())/1e3,n=Math.floor(i/86400),!(isNaN(n)||n<0))return i<60?"just now":i<120?"1 minute ago":i<3600?Math.floor(i/60)+" minutes ago":i<7200?"1 hour ago":i<86400?Math.floor(i/3600)+" hours ago":1===n?"Yesterday":n<7?n+" days ago":n<31?Math.ceil(n/7)+" weeks ago":n>=31?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(e,t){return this.date(new Date(e),t||"MM/dd/yyyy HH:mm:ss")}}}(),s}.call(t,i,t,e))||(e.exports=n)},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._domain=t,this._path=i,this._depth=0,this._filterString=void 0,this._sortingOverride=void 0,this._roleOverride=void 0,this._clientPreviewUuid=void 0,this._includeTeaserImage=void 0}var t,i,o;return t=e,o=[{key:"SORTING_OVERRIDE_NAME",get:function(){return"alpha"}},{key:"SORTING_OVERRIDE_MANUAL",get:function(){return"manual"}},{key:"ROLE_OVERRIDE_GUEST",get:function(){return"guest"}}],(i=[{key:"getDomain",value:function(){return this._domain}},{key:"getPath",value:function(){return this._path}},{key:"setPath",value:function(e){return this._path=e,this}},{key:"getDepth",value:function(){return this._depth}},{key:"setDepth",value:function(e){return this._depth=e,this}},{key:"getFilterString",value:function(){return this._filterString}},{key:"setFilterString",value:function(e){return this._filterString=e,this}},{key:"getSortingOverride",value:function(){return this._sortingOverride}},{key:"setSortingOverride",value:function(e){return this._sortingOverride=e,this}},{key:"getRoleOverride",value:function(){return this._roleOverride}},{key:"setRoleOverride",value:function(e){return this._roleOverride=e,this}},{key:"getClientPreviewUuid",value:function(){return this._clientPreviewUuid}},{key:"setClientPreviewUuid",value:function(e){return this._clientPreviewUuid=e,this}},{key:"getIncludeTeaserImage",value:function(){return this._includeTeaserImage}},{key:"setIncludeTeaserImage",value:function(e){return this._includeTeaserImage=e,this}},{key:"clone",value:function(){return new e(this._domain,this._path).setDepth(this._depth).setFilterString(this._filterString).setSortingOverride(this._sortingOverride).setRoleOverride(this._roleOverride).setClientPreviewUuid(this._clientPreviewUuid).setIncludeTeaserImage(this._includeTeaserImage)}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t){e.exports=function(e){return'<div id="side-notification-panel"> <div class="clearfix"></div></div>'}},function(e,t){e.exports=function(e){return'<div class="entry" data-id="'+e.id+'"> <div class="notification-title"></div> <div class="content"></div> <a class="btn-close" href=""> <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path d="M6.707,6l4.646-4.646a.5.5,0,1,0-.707-.707L6,5.293,1.354.646a.5.5,0,0,0-.707.707L5.293,6,.646,10.646a.5.5,0,1,0,.707.707L6,6.707l4.646,4.646a.5.5,0,0,0,.707-.707Z"/></svg> </a></div>'}},function(e,t,i){"use strict";var n=i(1),o=i(14),a=i(15),r=i(24),s=i(67);function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,u;return t=e,u=[{key:"createGallery",value:function(e,t,i){return new Promise((function(o,s){n.a.post("/api/galleries/create",{dataType:n.a.DATATYPE_JSON,data:{domain_uuid:e.uuid,gallery_name:t,parent_gallery_uuid:i},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(t,i){i.success?o(r.a.instantiateFromExport(e,t.gallery)):s(a.a.extractErrorFromApiResponse(t))},lock:!0})}))}},{key:"createGalleryFromPath",value:function(e,t){return new Promise((function(i,o){n.a.post("/api/galleries/createfrompath",{dataType:n.a.DATATYPE_JSON,data:{domain_uuid:e.uuid,gallery_path:t},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(t,n){n.success?i(r.a.instantiateFromExport(e,t.gallery)):o(a.a.extractErrorFromApiResponse(t))},lock:!0})}))}},{key:"moveGallery",value:function(e,t){return new Promise((function(i,r){n.a.post("/api/galleries/".concat(o.default.encodePathForAjax(e.urlRel),"/move"),{dataType:n.a.DATATYPE_JSON,data:{parent_gallery_uuid:t},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,t){t.success?i(e.gallery):r(a.a.extractErrorFromApiResponse(e))},retryOnBadResponse:!1,lock:!0})}))}},{key:"copyGallery",value:function(e,t){return new Promise((function(i,s){n.a.post("/api/galleries/".concat(o.default.encodePathForAjax(e.urlRel),"/copy"),{dataType:n.a.DATATYPE_JSON,data:{parent_gallery_uuid:t},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(t,n){n.success?i(r.a.instantiateFromExport(e.domain,t.gallery)):s(a.a.extractErrorFromApiResponse(t))},retryOnBadResponse:!1,lock:!0})}))}},{key:"filenameCheck",value:function(e,t){return new Promise((function(i,r){n.a.post("/api/galleries/".concat(o.default.encodePathForAjax(e.urlRel),"/filenamecheck"),{dataType:n.a.DATATYPE_JSON,data:{filenames:t},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,t){t.success?i({duplicates:e.duplicates_found}):r(a.a.extractErrorFromApiResponse(e))},lock:!0})}))}},{key:"filesByUuid",value:function(e,t,i){return new Promise((function(r,l){n.a.post("/api/galleries/".concat(o.default.encodePathForAjax(e.urlRel),"/filesbyuuid"),{dataType:n.a.DATATYPE_JSON,data:{uuids:t,credentials:i},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,t){if(t.success){for(var i=[],n=0,o=e.files.length;n<o;n++)i.push(s.a.instantiateFromExport(e.files[n]));r(i)}else l(a.a.extractErrorFromApiResponse(e))}})}))}},{key:"instantiateGalleries",value:function(e,t){for(var i=[],n=0,o=t.length;n<o;n++)i.push(r.a.instantiateFromExport(e,t[n]));return i}}],(i=null)&&l(t.prototype,i),u&&l(t,u),e}();t.a=u},,function(e,t,i){"use strict";var n=i(1),o=i(14),a=i(15),r=i(24);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,i,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=t,this.uuid=i.uuid,this.parentUuid=null,this.name=i.name,this.url="/".concat(i.url),this.path=i.path,this.pathSpec=i.pathSpec,this.numFiles=i.files,this.isLocked=i.locked,this.branchIndex=n,this.teaserImage=i.teaserImage,this.hasChildren=Boolean(i.hasChildren),this.children=[],this._gallery=void 0,0!==i.children.length){for(var o=[],a=0,r=i.children.length;a<r;a++)o.push(new e(t,i.children[a],a));this.addChildElements(o)}}var t,i,n;return t=e,n=[{key:"convertToGalleryInstance",value:function(e,t){var i={uuid:t.uuid,parentGalleryUuid:t.parentUuid,name:t.name,url:t.url.replace(/^\//,""),path:t.path,numFiles:t.numFiles,isLocked:t.isLocked,hasSubGalleries:t.hasChildren,branchIndex:t.branchIndex};return t.teaserImage&&(i.teaserImage={width:t.teaserImage.dimensions.width,height:t.teaserImage.dimensions.height,thumbnails:t.teaserImage.thumbnails}),r.a.instantiateFromExport(e,i)}}],(i=[{key:"addChildElements",value:function(e){for(var t,i=0;i<e.length;i++)(t=e[i]).parentUuid=this.uuid,this.children.push(t)}},{key:"getGallery",value:function(){return void 0===this._gallery&&(this._gallery=e.convertToGalleryInstance(this.domain,this)),this._gallery}}])&&s(t.prototype,i),n&&s(t,n),e}(),u=i(78);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,r=[{key:"getNavigation",value:function(e,t){var i=[],r=e.getDepth();"number"==typeof r&&i.push("depth=".concat(r));var s=e.getRoleOverride();"string"==typeof s&&i.push("overrideRole=".concat(s));var h=e.getClientPreviewUuid();"string"==typeof h&&i.push("clientPreview=".concat(h));var d=e.getSortingOverride();"string"==typeof d&&i.push("overrideSorting=".concat(d));var f=e.getIncludeTeaserImage();"boolean"==typeof f&&i.push("teaserImage=".concat(f?"1":"0"));var p=o.default.encodePathForAjax(e.getDomain().name+(e.getPath()||"")),v=0===i.length?"":"?".concat(i.join("&")),g=e.getFilterString();return new Promise((function(i,o){var r,s=function(t,n){if(n.success){var r=[];if(t.nodes)for(var s=0,c=t.nodes.length;s<c;s++)r.push(new l(e.getDomain(),t.nodes[s],s));i(new u.a(e).setNavigationElements(r))}else o(a.a.extractErrorFromApiResponse(t))};if("string"==typeof g){if(""===g)return void i([]);r=n.a.post("/api/navigation/".concat(p,"/query").concat(v),{dataType:n.a.DATATYPE_PLAIN,data:g,responseType:n.a.RESPONSETYPE_JSON,onComplete:s,lock:!0})}else r=n.a.get("/api/navigation/".concat(p).concat(v),{responseType:n.a.RESPONSETYPE_JSON,onComplete:s,lock:!0});null!==t&&"object"===c(t)&&(t.abort=function(){return r.abort()})}))}}],(i=null)&&h(t.prototype,i),r&&h(t,r),e}();t.a=d},,function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._request=t,this._navigationElements=void 0}var t,i,o;return t=e,(i=[{key:"getRequest",value:function(){return this._request}},{key:"setNavigationElements",value:function(e){return this._navigationElements=e,this}},{key:"getNavigationElements",value:function(){return this._navigationElements}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,r(t).call(this,e)))._files=void 0,i}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),i=t,l=[{key:"FILES_ADDED",get:function(){return"files_added"}},{key:"FILES_REMOVED",get:function(){return"files_removed"}}],(n=[{key:"setFiles",value:function(e){return this._files=e,this}},{key:"getFiles",value:function(){return this._files}}])&&o(i.prototype,n),l&&o(i,l),t}(i(5).a);t.a=l},function(e,t,i){"use strict";var n=i(4),o=i(11),a=i(102);i(45);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e,i,n,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=l(this,u(t).call(this))).file=e,a.fileUuid=null,a.galleryUuid=i,a.sessionUuid=n,a.overwriteRule="string"==typeof o?o:null,a.chunkSize=4194304,a.numChunks=Math.ceil(a.file.size/a.chunkSize),a.chunkCursor=0,a.status=t.STATUS_READY,a.progress=0,a.stats=null,a.notificationPassed=!1,a.cancellationPending=!1,a.chunkUploadController=null,a.errorCode=null,a.errorMessage=null,a}var i,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),i=t,r=[{key:"STATUS_READY",get:function(){return"st_ready"}},{key:"STATUS_NOTIFYING",get:function(){return"st_notifying"}},{key:"STATUS_UPLOADING",get:function(){return"st_uploading"}},{key:"STATUS_PAUSED",get:function(){return"st_paused"}},{key:"STATUS_STALLING",get:function(){return"st_stalling"}},{key:"STATUS_CANCELLING",get:function(){return"st_cancelling"}},{key:"STATUS_CANCELLED",get:function(){return"st_cancelled"}},{key:"STATUS_COMPLETE",get:function(){return"st_complete"}},{key:"PROGRESS",get:function(){return"evt_progress"}},{key:"CHUNK_SENT",get:function(){return"evt_chunk_sent"}},{key:"ERROR",get:function(){return"evt_error"}},{key:"STATUS_CHANGED",get:function(){return"evt_status_changed"}}],(n=[{key:"notify",value:function(){var e=this;if(this.status!==t.STATUS_READY)return!1;this._setStatus(t.STATUS_NOTIFYING);var i=this.file.name||this.file.fileName,n=this.file.size||this.file.fileSize;return i&&n?(a.a.initFileUpload(i,this.galleryUuid,this.sessionUuid,n,this.overwriteRule).then((function(t){return e.handleNotifyResponseSuccess(t)})).catch((function(t){return e.handleNotifyResponseError(t)})),!0):(this.cancelInError("file information incomplete",0),!1)}},{key:"pause",value:function(){return!(!this._checkStatus([t.STATUS_NOTIFYING,t.STATUS_UPLOADING])||1===this.progress||(this._setStatus(t.STATUS_PAUSED),null!==this.chunkUploadController&&(this.chunkUploadController.abort(),this.chunkUploadController=null),this.progress=this.chunkCursor*(1/this.numChunks),0))}},{key:"stall",value:function(){return!!this._checkStatus([t.STATUS_NOTIFYING,t.STATUS_UPLOADING])&&(this._setStatus(t.STATUS_STALLING),null!==this.chunkUploadController&&(this.chunkUploadController.abort(),this.chunkUploadController=null),this.progress=this.chunkCursor*(1/this.numChunks),!0)}},{key:"stallAndRetry",value:function(e){var t=this;this.stall(),window.setTimeout((function(){t.resume()}),e)}},{key:"resume",value:function(){return!!this._checkStatus([t.STATUS_PAUSED,t.STATUS_STALLING])&&(this._uploadCurrentChunk(),!0)}},{key:"cancel",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._checkStatus([t.STATUS_NOTIFYING,t.STATUS_UPLOADING,t.STATUS_PAUSED])&&(this.status!==t.STATUS_NOTIFYING||!0===i?null===this.fileUuid?this._setStatus(t.STATUS_CANCELLED):(this.cancelFileFromUpload((function(){e.finalize()})),this._setStatus(t.STATUS_CANCELLING)):this.cancellationPending=!0)}},{key:"cancelInError",value:function(e,i){this.errorMessage=e,this.errorCode=i,this.dispatchEvent(new o.a(t.ERROR)),this.finalize()}},{key:"cancelFileFromUpload",value:function(e){if(null===this.fileUuid)throw"file uuid not set";var t=function(t){"function"==typeof e&&e(!t)};a.a.cancelFileUpload(this.sessionUuid,this.fileUuid).then(t).catch(t)}},{key:"_resetStats",value:function(){this.stats={timeStart:0,bytesLoaded:0}}},{key:"getUploadSpeed",value:function(){if(this.status!==t.STATUS_UPLOADING)return null;if(this.stats&&0!==this.stats.bytesLoaded){var e=Date.now()-this.stats.timeStart;return this.stats.bytesLoaded/1024/(e/1e3)}return null}},{key:"getBytesLeft",value:function(){return this.file.size*(1-this.progress)}},{key:"_uploadCurrentChunk",value:function(){var e=this;if(this.notificationPassed&&!this._checkStatus([t.STATUS_CANCELLING,t.STATUS_CANCELLED,t.STATUS_COMPLETE])){var i=this.file;if(1!==this.numChunks){var n=i.slice?"slice":i.webkitSlice?"webkitSlice":i.mozSlice?"mozSlice":null;n?i=i[n](this.chunkSize*this.chunkCursor,this.chunkSize*(this.chunkCursor+1)):(this.chunkCursor=0,this.numChunks=1)}var o=navigator&&navigator.userAgent?navigator.userAgent:null;if(o&&o.match(/Firefox/)&&!1!==window.firefoxHackEnabled&&window.FileReader){var a=new FileReader;return a.addEventListener("load",(function(){var t=new Blob([a.result]);e._uploadCurrentChunk2(t)}),!1),void a.readAsArrayBuffer(i)}this._uploadCurrentChunk2(i)}}},{key:"_uploadCurrentChunk2",value:function(e){var i=this;this._resetStats(),this.stats.timeStart=Date.now(),this.chunkUploadController={},a.a.sendFilePart(this.sessionUuid,this.fileUuid,this.chunkCursor,this.numChunks,e,(function(e,t){return i._handlePartProgress(e,t)}),this.chunkUploadController).then((function(){return i._handlePartSuccess()})).catch((function(e){return i._handlePartError(e)})),this._setStatus(t.STATUS_UPLOADING)}},{key:"_complete",value:function(){this._checkStatus([t.STATUS_NOTIFYING,t.STATUS_UPLOADING])&&this._setStatus(t.STATUS_COMPLETE)}},{key:"_setStatus",value:function(e){return this.status===e||(this.status=e,this.dispatchEvent(new o.a(t.STATUS_CHANGED,{status:e})),!0)}},{key:"_checkStatus",value:function(e){for(var t in e instanceof Array||(e=[e]),e)if(e[t]===this.status)return!0;return!1}},{key:"handleNotifyResponseSuccess",value:function(e){this.fileUuid=e,this.notificationPassed=!0,!0!==this.cancellationPending?this.status===t.STATUS_NOTIFYING&&this._uploadCurrentChunk():this.cancel(!0)}},{key:"handleNotifyResponseError",value:function(e){this.notificationPassed=!1,2902!==e.code||"skip"!==this.overwriteRule?this.cancelInError(e.message,e.code):this._complete()}},{key:"_handlePartProgress",value:function(e,i){this.status===t.STATUS_UPLOADING&&(1===this.numChunks?this.progress=e/i:this.progress=(this.chunkCursor+e/i)*(1/this.numChunks),this.stats.bytesLoaded=e,this.dispatchEvent(new o.a(t.PROGRESS,{progress:this.progress})))}},{key:"_handlePartSuccess",value:function(){this.status===t.STATUS_UPLOADING&&(this.chunkUploadController=null,this._resetStats(),this.dispatchEvent(new o.a(t.CHUNK_SENT)),this.chunkCursor===this.numChunks-1?this._complete():(this.chunkCursor++,this._uploadCurrentChunk()))}},{key:"_handlePartError",value:function(e){this.status===t.STATUS_UPLOADING&&(2906!==e.code?this.stallAndRetry(5e3):this.cancelInError(e.message,e.code))}},{key:"finalize",value:function(){null!==this.chunkUploadController&&(this.chunkUploadController.abort(),this.chunkUploadController=null),this._setStatus(t.STATUS_CANCELLED)}}])&&s(i.prototype,n),r&&s(i,r),t}(n.a);t.a=h},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.content=t,this.type=i}var t,i,o;return t=e,o=[{key:"TYPE_DATA_TRANSFER",get:function(){return"datatransfer"}}],(i=null)&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t){e.exports=function(e){var t='<div class="dragghost"> ';return e.galleries?(t+=' <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="14" viewBox="0 0 20 14"><path style="fill:#FFFFFF" d="M19 3h-6.93c-.67 0-1.293-.334-1.664-.89L9.594.89C9.224.335 8.6 0 7.93 0H1C.448 0 0 .448 0 1v12c0 .552.448 1 1 1h18c.552 0 1-.448 1-1V4c0-.552-.448-1-1-1zM6.5 3h-4c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h4c.276 0 .5.224.5.5s-.224.5-.5.5z"/></svg></div> ',1===e.galleries.length?t+=" <span>"+e.galleries[0].name+"</span> ":t+=" <span>"+e.galleries.length+" Galerien</span> ",t+=" "):e.files&&(t+=' <div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="14" viewBox="0 0 20 14"><g id="Layer_1"><path style="fill:#FFFFFF" d="M18 5.238C17.475 5.088 16.89 5 16.236 5c-5.228 0-6.416 4.688-8.8 4.688s-1.896-1.56-4.93-1.56c-.164 0-.334.027-.506.068V12h16V5.238z"/><circle style="fill:#FFFFFF" cx="5.5" cy="4.5" r="1.5"/><path style="fill:#FFFFFF" d="M18.5 1c.276 0 .5.224.5.5v11c0 .276-.224.5-.5.5h-17c-.276 0-.5-.224-.5-.5v-11c0-.276.224-.5.5-.5h17m0-1h-17C.673 0 0 .673 0 1.5v11c0 .827.673 1.5 1.5 1.5h17c.827 0 1.5-.673 1.5-1.5v-11c0-.827-.673-1.5-1.5-1.5z"/></g></svg></div> ',1===e.files.length?t+=" <span>"+e.files[0].filename+"</span> ":t+=" <span>"+e.files.length+" Bilder</span> ",t+=" "),t+="</div>"}},function(e,t){e.exports=function(e){return'<div id="overlay-notification-background"></div>'}},function(e,t){e.exports=function(e){return'<div id="overlay-notification-wrapper"></div>'}},function(e,t){e.exports=function(e){return'<div class="entry" data-id="'+e.id+'" role="dialog" aria-labelledby="dialog-title"> <div class="content-wrapper"> <div id="dialog-title" class="entry-title entry-inner"></div> <div class="entry-content entry-inner"></div> </div> <button class="btn-close" aria-label="'+i18n.p__("notification.close","close dialog")+'"> <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><path d="M5.707,5,9.354,1.354A.5.5,0,0,0,8.646.646L5,4.293,1.354.646a.5.5,0,0,0-.707.707L4.293,5,.646,8.646a.5.5,0,1,0,.707.707L5,5.707,8.646,9.354a.5.5,0,0,0,.707-.707Z"/></svg> </button></div>'}},function(e,t,i){"use strict";var n=i(3),o=i(63),a=i.n(o),r=i(1),s=i(14),l=i(36),u=i(37),c=i(10),h=i(34),d=i(24),f=i(74),p=i(46);function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clients=void 0,this.password=void 0,this.passwordProtectingGallery=void 0,this.plainLink=void 0,this.presentationEnabledGallery=void 0,this.presentationExitPIN=void 0,this.secureLinks=void 0}var t,i,n;return t=e,n=[{key:"createFromExport",value:function(t){var i=new e;return i.clients=t.clients,i.password=t.password,i.passwordProtectingGallery=t.passwordProtectingGallery,i.plainLink=t.plainLink,i.presentationEnabledGallery=t.presentationEnabledGallery,i.presentationExitPIN=t.presentationExitPIN,i.secureLinks=t.secureLinks,i}}],(i=null)&&v(t.prototype,i),n&&v(t,n),e}(),m=i(15);function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"saveSettings",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=function(t){t.success?(e.setData(t.gallery),"function"==typeof n&&n()):"function"==typeof o&&o({message:t.message,code:t.code})};r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/savesettings"),{dataType:r.a.DATATYPE_JSON,data:{settings:t.export(),applyToSubGalleries:!0===i},responseType:r.a.RESPONSETYPE_JSON,onComplete:a,locked:!0})}},{key:"moveGallery",value:function(e,t,i,n){f.a.moveGallery(e,t).then((function(t){t.parentGallery&&(e.parentGallery=d.a.instantiateFromExport(e.domain,t.parentGallery)),e.moveApply(t),"function"==typeof i&&i(e)})).catch(n)}},{key:"copyGallery",value:function(e,t,i,n){f.a.copyGallery(e,t).then(i).catch(n)}},{key:"renameGallery",value:function(e,t,i,n){r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/rename"),{dataType:r.a.DATATYPE_FORM,data:{newName:t},responseType:r.a.RESPONSETYPE_JSON,onComplete:function(t){t.success?(e.renameApply(t.gallery),"function"==typeof i&&i()):"function"==typeof n&&n({message:t.message,code:t.code})},lock:!0})}},{key:"truncateGallery",value:function(e,t,i){r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/truncate"),{dataType:r.a.DATATYPE_FORM,data:{store:!0},responseType:r.a.RESPONSETYPE_JSON,onComplete:function(n){n.success?(e.truncateApply(),"function"==typeof t&&t()):"function"==typeof i&&i()},lock:!0})}},{key:"removeGallery",value:function(e,t,i){var n=this;r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/remove"),{data:{store:!0,showMessage:!1},responseType:r.a.RESPONSETYPE_JSON,onComplete:function(o){o.success?(n._recursiveRemoveApply(e),"function"==typeof t&&t()):"function"==typeof i&&i()},lock:!0})}},{key:"determineLayout",value:function(e){return(l.a.isAllowed(u.a.GALLERY_CUSTOM_LAYOUTS)?e.get(c.a.LAYOUT):null)||p.a.GRID}},{key:"parseGroupName",value:function(e,t){switch(t){case h.a.FILENAME:return"main"===e?null:e.toUpperCase();case h.a.FLAG:switch(e){case"none":return n.a.p__("gallery.view.desktop.js","sortdivider_flag_none");case"red":return n.a.p__("gallery.view.desktop.js","sortdivider_flag_red");case"orange":return n.a.p__("gallery.view.desktop.js","sortdivider_flag_orange");case"green":return n.a.p__("gallery.view.desktop.js","sortdivider_flag_green");case"final":return n.a.p__("gallery.view.desktop.js","sortdivider_flag_final")}return null;case h.a.TIME_CAPTURED:return"main"===e?null:n.a.p__("gallery.view.desktop.js","sortdivider_capturetime_none");case h.a.IMAGE_SIZE:return"main"===e?null:n.a.p__("gallery.view.desktop.js","sortdivider_image_size_none");case h.a.EXTENSION:return e.toUpperCase();default:return null}}},{key:"updateSubGallerySorting",value:function(e,t,i,n){var o={sort_order:t};"manually"===t&&(o.sorted_gallery_uuids=i),r.a.post("/ajax/galleries/uuid:".concat(e,"/sortsubgalleries"),{dataType:r.a.DATATYPE_JSON,data:o,responseType:r.a.RESPONSETYPE_JSON,onComplete:function(e){"function"==typeof n&&n(e.success,e.success?null:{message:e.message,code:e.code})}})}},{key:"sortSubGalleryEntries",value:function(e,t){if("manually"===t)for(var i=0;i<e.length;i++)if(null===e[i].branchIndex){t="name";break}"manually"===t?e.sort((function(e,t){return e.branchIndex-t.branchIndex})):e.sort((function(e,t){return a.a.alphanumCase(e.name,t.name)}))}},{key:"loadSecurityInfo",value:function(e){return new Promise((function(t,i){r.a.get("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/securityinfo"),{responseType:r.a.RESPONSETYPE_JSON,onComplete:function(n,o){if(o.success&&n.info){var a=g.createFromExport(n.info);e.securityInfo=a,t(a)}else i(m.a.extractErrorFromApiResponse(n))},lock:!0})}))}},{key:"updateSecureLink",value:function(e,t){r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/updatesecurelink"),{responseType:r.a.RESPONSETYPE_JSON,onComplete:function(i){i.success&&(e.secureLinkName=i.linkName,e.setData(i.gallery),"function"==typeof t&&t())},lock:!0})}},{key:"exitPresentationMode",value:function(e,t,i,n){r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/exitpresentation"),{data:{exit_pin:t||null},dataType:r.a.DATATYPE_JSON,responseType:r.a.RESPONSETYPE_JSON,onComplete:function(e){e.success?"function"==typeof i&&i():"function"==typeof n&&n({message:e.message,code:e.code})},lock:!0})}},{key:"reenterPresentationMode",value:function(e,t,i){r.a.post("/ajax/galleries/path:".concat(s.default.encodePathForAjax(e.urlRel),"/reenterpresentation"),{responseType:r.a.RESPONSETYPE_JSON,onComplete:function(e){e.success?"function"==typeof t&&t():"function"==typeof i&&i({message:e.message,code:e.code})},lock:!0})}},{key:"_recursiveRemoveApply",value:function(e){e.removeApply();for(var t=d.a.findCachedSubGalleries(e.uuid),i=0,n=t.length;i<n;i++)this._recursiveRemoveApply(t[i])}}],(i=null)&&y(t.prototype,i),o&&y(t,o),e}();t.a=b},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(1),r=i(13),s=i(12),l=i(88),u=i.n(l),c=i(89),h=i.n(c);function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f={de_de:"Deutsch",en_us:"English"},p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._currentLocale=null,this._menuVisible=!1,this.$dom=void 0,this.$ui={},this.initialize(t)}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){var e=[];for(var t in f)e.push({locale:t,name:f[t]});this.$dom=o()(u()()),this.$ui.dropdown=o()(h()({langs:e})),this.$ui.body=o()("body"),this.$ui.document=o()(document),this.$ui.dropdownToggle=this.$dom.find("a.dropdown-toggle")}},{key:"initialize",value:function(e){var t=this;this.createDOM(),this.setLocale(e),this.$ui.dropdownToggle.on("click",(function(e){e.preventDefault(),t._menuVisible?t.hideMenu():t.showMenu()})),this.$ui.dropdown.on("click","a",(function(e){e.preventDefault(),a.a.post("/ajax/i18n/setlocale",{data:{locale:o()(e.currentTarget).attr("data-locale")},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(e){e.success&&window.location.reload()},lock:!0})})),this.$ui.document.on("click",(function(e){s.a.domIsChildOf(e.target,t.$dom[0])||s.a.domIsChildOf(e.target,t.$ui.dropdown[0])||t.hideMenu()}))}},{key:"showMenu",value:function(){if(!this._menuVisible){this.$ui.body.append(this.$ui.dropdown);var e=this.$dom[0].getBoundingClientRect();this.$ui.dropdown.css({top:e.bottom+10,left:Math.min(e.right,r.a.getWidth()-10)-this.$ui.dropdown.width()}),this.$ui.dropdown.stop().fadeIn(200),this._menuVisible=!0}}},{key:"hideMenu",value:function(){var e=this;this._menuVisible&&(this.$ui.dropdown.stop().fadeOut(300,(function(){e.$ui.dropdown.detach()})),this._menuVisible=!1)}},{key:"setLocale",value:function(e){this._currentLocale=e,this.$ui.dropdown.find("a").removeClass("disabled").filter('[data-locale="'.concat(e,'"]')).addClass("disabled")}}])&&d(t.prototype,i),n&&d(t,n),e}();t.a=p},function(e,t){e.exports=function(e){return'<div id="header-bar-lang-switch"> <a href="" class="header-bar-btn dropdown-toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"> <path d="M8,0a8,8,0,1,0,8,8A8,8,0,0,0,8,0ZM1.148,6.605A6.955,6.955,0,0,1,2.381,3.843c.069.09-.037.162-.055.234s.145.436.127.563-.49.418-.581.472a.737.737,0,0,0-.182.254s.218-.091.236-.036a3.462,3.462,0,0,1-.363.581C1.472,6.057,1.184,6.532,1.148,6.605ZM7.429,3.16a.975.975,0,0,1-.136.127,3.538,3.538,0,0,1-.354.109,1.748,1.748,0,0,1-.263.036V2.679l.236-.145Zm5.539,5.848a3.884,3.884,0,0,1-.3.436,5.513,5.513,0,0,1-.427.49c-.054.055-.118.236-.172.309a1.27,1.27,0,0,0-.173.327c-.009.064.091.627.073.745s-.318.418-.454.563a2.33,2.33,0,0,0-.263.4,2.524,2.524,0,0,0,0,.372c-.009.055-.154.136-.218.191a2.138,2.138,0,0,0-.336.372c-.027.073-.354.236-.445.291a2.091,2.091,0,0,1-.509.109c-.127.018-.372.1-.4.064s-.018-.472-.045-.608a1.459,1.459,0,0,0-.145-.327,1.268,1.268,0,0,0-.145-.354,1.151,1.151,0,0,1-.236-.454,4.128,4.128,0,0,1,.181-.645.559.559,0,0,0-.063-.381,3.8,3.8,0,0,1-.073-.445c-.018-.073-.263-.236-.309-.291a1.675,1.675,0,0,1-.045-.445A1.583,1.583,0,0,0,8.4,9.28c-.045-.045-.363.109-.463.118s-.145-.163-.163-.236-.1-.091-.2-.064-.418.209-.527.236a4.754,4.754,0,0,1-.49.109c-.109.009-.272-.163-.4-.236a3.689,3.689,0,0,1-.509-.481,3.508,3.508,0,0,1-.372-.645A4.6,4.6,0,0,1,5.3,7.155a1.353,1.353,0,0,1,.245-.5,5.506,5.506,0,0,1,.563-.409c.091-.073.091-.218.118-.272s.145-.182.173-.236a.667.667,0,0,1,.218-.2c.073-.036.472-.045.608-.082s.572-.209.663-.209c.073,0,.209.1.3.1a3.234,3.234,0,0,0,.318-.064c.036,0,.054.127.073.209a.767.767,0,0,0,.236.445,1.9,1.9,0,0,0,.745.118,3.1,3.1,0,0,0,.381-.127c.054-.009.291.127.409.136a3.73,3.73,0,0,1,.781.281,2.22,2.22,0,0,1,.5.763c.054.154.2.608.245.708a6.74,6.74,0,0,0,.4.563c.1.136.281.409.309.427s.427-.082.454-.073S13,8.926,12.968,9.008Zm-.109,2.57a4.629,4.629,0,0,1-.163.563,1.546,1.546,0,0,1-.49.454c-.055.018-.055-.145-.091-.254s.109-.381.164-.49-.008-.19.073-.291.272-.163.309-.236a1.308,1.308,0,0,1,.254-.345C12.968,10.96,12.914,11.433,12.859,11.578ZM6.639,3.169c.018.045-.218.263-.218.263s-.091-.127-.109-.154.1-.218.1-.218S6.621,3.124,6.639,3.169ZM5.377,1.553c-.018.054-.182.127-.291.182a3.961,3.961,0,0,0-.4.363c-.073.054-.345.4-.472.508A1.874,1.874,0,0,0,3.96,2.9a2.109,2.109,0,0,1-.291.145c-.073.018-.2-.073-.254-.091s-.151.015-.237-.013A7.011,7.011,0,0,1,5.412,1.5.174.174,0,0,0,5.377,1.553ZM15,8c0,.108-.011.212-.016.319a6.446,6.446,0,0,1-.245-.7c-.036-.127-.309-.336-.381-.391s-.336-.254-.436-.318a1.978,1.978,0,0,0-.436-.118,1.942,1.942,0,0,1-.318-.263c-.073-.064-.236-.073-.236-.045s.145.218.173.281.127.227.191.245a2.4,2.4,0,0,0,.327.018,5.137,5.137,0,0,1,.272.472c.009.054-.391.272-.518.381a2.334,2.334,0,0,1-.536.3.5.5,0,0,1-.345-.009c-.109-.055-.082-.182-.1-.3a2.587,2.587,0,0,0-.309-.5c-.109-.182-.454-.69-.545-.817s-.291-.381-.3-.418.191,0,.191,0L11.415,5.5s-.345.209-.372.218a3.924,3.924,0,0,1-.363-.472.687.687,0,0,1-.091-.272c0-.055.209-.173.254-.218a1.134,1.134,0,0,1,.345-.082,4.068,4.068,0,0,1,.581.064.179.179,0,0,0,.182-.082c.027-.055-.045-.163-.109-.209a1.547,1.547,0,0,0-.263-.145,1.526,1.526,0,0,0-.182-.036l.209-.218S11.37,4,11.334,4a1.044,1.044,0,0,0-.282.145c-.054.036-.309.127-.354.163a.458.458,0,0,0-.1.2c0,.027.036.136.036.182s-.118.091-.2.145a.84.84,0,0,1-.4.018.184.184,0,0,0-.173.073c-.036.036.027.154.027.154a1.725,1.725,0,0,1-.155-.2,1.394,1.394,0,0,1-.118-.291c-.027-.073-.191-.145-.336-.227s-.445-.245-.445-.245a1.427,1.427,0,0,0,.027.209c.018.064.091.136.227.245a1.285,1.285,0,0,1,.254.327l-.354.018a.726.726,0,0,0,0-.2,1.433,1.433,0,0,0-.245-.172c-.054-.036-.2-.182-.254-.209s-.145,0-.218.009a1.135,1.135,0,0,0-.318.145c-.045.036-.209.1-.327.173a3.6,3.6,0,0,0-.445.554c-.073.091-.39.055-.518.045a1.273,1.273,0,0,1-.327-.1l.036-.8s.563-.091.636-.118a.835.835,0,0,0,.227-.254c.018-.036-.036-.073-.064-.118s.009-.173.055-.245.272-.109.318-.127.245-.118.327-.154a4.777,4.777,0,0,0,.381-.354.914.914,0,0,1,.263-.136c.045,0,.509.409.545.409a2.16,2.16,0,0,0,.327-.145c.091-.045.082-.163.109-.3a.463.463,0,0,0-.154-.372c-.045,0-.209.3-.263.354s-.045.073-.182.064a.4.4,0,0,1-.272-.136c-.018-.036-.063-.2-.082-.254s-.245-.064-.291-.055-.118.073-.154.045.018-.173.036-.245.209-.227.236-.236a1.222,1.222,0,0,0,.163-.027,2.537,2.537,0,0,1,.309-.118c.145-.045.49-.154.572-.173a.635.635,0,0,1,.272.045,3.3,3.3,0,0,0,.454.027c.1,0,.527-.045.654-.055s.281.154.318.182-.009.073,0,.109.109.073.145.1a1.244,1.244,0,0,0,.182.118c.035.014.159-.073.24-.13A7,7,0,0,1,15,8ZM1.2,9.625a8.8,8.8,0,0,1,.764.445,1.47,1.47,0,0,1,.508.563.9.9,0,0,0,.272.472,3.38,3.38,0,0,0,.345.2.727.727,0,0,1,.327.127,2.026,2.026,0,0,0,.291.182.427.427,0,0,1,.073.472,2.306,2.306,0,0,0-.163.6c0,.109.127.254.091.309a.989.989,0,0,1-.42.165A6.994,6.994,0,0,1,1.2,9.625Z"/> </svg> </a></div>'}},function(e,t){e.exports=function(e){var t='<ul id="header-bar-lang-switch-menu" class="layout-list"> ',i=e.langs;if(i)for(var n,o=-1,a=i.length-1;o<a;)t+=' <li> <a href="" class="btn" data-locale="'+(n=i[o+=1]).locale+'"> <div class="flag"></div> <span>'+n.name+"</span> </a> </li> ";return t+="</ul>"}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(14),r=i(52),s=i(81),l=i(67),u=i(62),c=i(9),h=i(4),d=i(47),f=i(82),p=i.n(f),v=i(99);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v.a;return m(this,t),(i=b(this,_(t).call(this))).file=e,i.image=e.image||null,i.context=n,i.$dom=void 0,i.$ui={},i}var i,n,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),i=t,(n=[{key:"initDownload",value:function(){if(!this.context.getGallery())throw"File view context has no gallery set.";var e=u.a.generateDownloadURLSync(this.file.uuid,this.context.getGallery().urlRel);a.default.triggerDownload(e)}},{key:"initDragAndDrop",value:function(e){var t=this;r.a.registerDraggable(e[0],null,{onDragStart:function(e){var i;i=t.file.selected?l.a.findSelectedFiles():[t.file],e.setLoad(new s.a(i,"files")),e.setDragGhost(o()(p()({files:i})),-20,-10)}})}},{key:"requestMetaInformationView",value:function(){this.dispatchEvent(new d.a(d.a.REQUEST_META_INFORMATION_VIEW))}},{key:"requestDetailView",value:function(){this.dispatchEvent(new d.a(d.a.REQUEST_DETAIL_VIEW))}},{key:"requestAsHeaderImage",value:function(){"image"===this.file.filetype&&this.dispatchEvent(new d.a(d.a.REQUEST_HEADER_IMAGE))}},{key:"requestAsTeaserImage",value:function(){"image"===this.file.filetype&&this.dispatchEvent(new d.a(d.a.REQUEST_TEASER_IMAGE))}},{key:"requestColorFlag",value:function(e){this.dispatchEvent(new d.a(d.a.REQUEST_COLOR_FLAG).setFlag(e))}},{key:"requestSelection",value:function(){this.dispatchEvent(new d.a(d.a.REQUEST_SELECTION))}},{key:"hint",value:function(){var e=this;this.$dom&&(this.$dom.css("z-index","100"),c.default.to(this.$dom,.2,{y:-30,ease:"power2.out",onComplete:function(){c.default.to(e.$dom,.3,{y:0,ease:"bounce.out",onComplete:function(){e.$dom.css({"z-index":"",transform:""})}})}}))}},{key:"removeFromDOMTree",value:function(){this.$dom&&this.$dom.remove(),this.dispatchEvent(new d.a(d.a.REMOVED))}},{key:"finalize",value:function(){this.removeFromDOMTree()}}])&&y(i.prototype,n),h&&y(i,h),t}(h.a);t.a=E},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"onDOMConnection",value:function(e,t){var i=window.setInterval((function(){null!==e.parentNode&&(t.call(),window.clearInterval(i))}),100)}},{key:"onBoundingInformation",value:function(e,t){var i,n=window.setInterval((function(){0===(i=e.getBoundingClientRect()).top&&0===i.bottom||(t.call(),window.clearInterval(n))}),100)}},{key:"toLocalPosition",value:function(e,t,i){var n=i.getBoundingClientRect();return{x:e-n.x,y:t-n.y}}}],(i=null)&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},,function(e,t,i){"use strict";var n=i(4),o=i(11),a=i(1),r=i(24);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e,i){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=u(this,c(t).call(this)),"object"!==s(i))return u(n);if(n.domain=e,n.id=i.id,n.uuid=i.uuid,n.name=i.name,n.email=i.email||null,n.notice=i.notice||null,n.timeCreated=i.timeCreated,n.timeLastSeen=i.timeLastSeen||null,n.password=i.password||null,n.galleries=[],i.galleries)for(var o in i.galleries)n.galleries.push(r.a.instantiateFromExport(n.domain,i.galleries[o]));return n}var i,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),i=t,d=[{key:"requestUnusedPassword",value:function(e,t){a.a.post("/ajax/clients/getunusedpassword",{data:{domainUuid:e},responseType:a.a.RESPONSETYPE_JSON,lock:!0,onComplete:function(e){e.success&&e.password?"function"==typeof t&&t(e.password):"function"==typeof t&&t(null,e.message)}})}},{key:"createInstance",value:function(e,i,n,o,r,s){a.a.post("/ajax/clients/create",{data:{domainUuid:e.uuid,name:i,password:n,email:o,notice:r},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(i){i.success&&i.client?"function"==typeof s&&s(new t(e,i.client)):"function"==typeof s&&s(!1,i.message)},lock:!0})}},{key:"GALLERY_ADDED",get:function(){return"evt_gallery_added"}},{key:"GALLERY_REMOVED",get:function(){return"evt_gallery_removed"}},{key:"GALLERIES_CLEARED",get:function(){return"evt_galleries_cleared"}},{key:"GALLERIES_SET",get:function(){return"evt_galleries_set"}},{key:"REMOVED",get:function(){return"evt_removed"}}],(n=[{key:"update",value:function(e,t,i,n,o){var r=this;a.a.post("/ajax/clients/uuid:".concat(this.uuid,"/update"),{data:{name:e,email:i,password:t,notice:n},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(e){e.success&&e.client?(r.name=e.client.name,r.password=e.client.password,r.email=e.client.email,r.notice=e.client.notice,"function"==typeof o&&o(!0)):"function"==typeof o&&o(!1,e.message)},lock:!0})}},{key:"addGallery",value:function(e,t){var i=this;a.a.post("/ajax/clients/uuid:".concat(this.uuid,"/addgallery"),{data:{galleryUuid:e},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(e){if(e.success&&e.gallery){var n=r.a.instantiateFromExport(i.domain,e.gallery);i.addGalleryApply(n),"function"==typeof t&&t(!0)}else"function"==typeof t&&t(!1)},lock:!0})}},{key:"setGalleries",value:function(e,i){var n=this;a.a.post("/ajax/clients/uuid:".concat(this.uuid,"/setgalleries"),{dataType:a.a.DATATYPE_JSON,data:{galleryUuids:e},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(e){if(e.success&&e.galleries){n.clearGalleriesApply();var a,s=[];for(var l in e.galleries)a=r.a.instantiateFromExport(n.domain,e.galleries[l]),s.push(a),n.addGalleryApply(a,!1);n.dispatchEvent(new o.a(t.GALLERIES_SET,{galleries:s})),"function"==typeof i&&i(!0)}else"function"==typeof i&&i(!1,e.message)},lock:!0})}},{key:"addGalleryApply",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.galleries.push(e),!0===i&&this.dispatchEvent(new o.a(t.GALLERY_ADDED,{gallery:e}))}},{key:"removeGallery",value:function(e,t){var i=this;a.a.post("/ajax/clients/uuid:".concat(this.uuid,"/removegallery"),{data:{galleryUuid:e},responseType:a.a.RESPONSETYPE_JSON,onComplete:function(n){n.success&&n.gallery?(i.removeGalleryApply(e),"function"==typeof t&&t(!0)):"function"==typeof t&&t(!1)},lock:!0})}},{key:"removeGalleryApply",value:function(e){for(var i,n=0,a=this.galleries.length;n<a;n++)if(this.galleries[n].uuid===e){i=this.galleries[n],this.galleries.splice(n,1);break}this.dispatchEvent(new o.a(t.GALLERY_REMOVED,{gallery:i}))}},{key:"clearGalleriesApply",value:function(){this.galleries=[],this.dispatchEvent(new o.a(t.GALLERIES_CLEARED))}},{key:"remove",value:function(e){var t=this;a.a.post("/ajax/clients/uuid:".concat(this.uuid,"/remove"),{responseType:a.a.RESPONSETYPE_JSON,onComplete:function(i){i.success?(t.removeApply(),"function"==typeof e&&e(!0)):"function"==typeof e&&e(!1)},lock:!0})}},{key:"removeApply",value:function(){this.dispatchEvent(new o.a(t.REMOVED))}}])&&l(i.prototype,n),d&&l(i,d),t}(n.a);t.a=d},function(e,t,i){"use strict";t.a={ENABLE_GALLERY_SETTING_INHERITANCE:"enableGallerySettingInheritance",ENABLE_PICDROP_BRANDING:"enablePicDropBranding",ENABLE_HIGHRES_THUMBNAILS:"enableHighresThumbnails",ENABLE_CROP_GALLERY_WELCOME_MESSAGES:"enableCropGalleryWelcomeMessages",ENABLE_SHORTEN_FILENAMES:"enableShortenFilenames",ENABLE_UPLOAD_COMPLETE_SOUND:"enableUploadCompleteSound",DAILY_SHARE_RECIPIENT_LIMIT:"dailyShareRecipientLimit",SKIP_SHORTTERM_SHARE_LIMITS:"skipShorttermShareLimits",SOCIAL_LINK_PHONE:"socialLinkPhone",SOCIAL_LINK_EMAIL:"socialLinkEMail",SOCIAL_LINK_BLOG:"socialLinkBlog",SOCIAL_LINK_FACEBOOK:"socialLinkFacebook",SOCIAL_LINK_TWITTER:"socialLinkTwitter",SOCIAL_LINK_YOUTUBE:"socialLinkYouTube",SOCIAL_LINK_INSTAGRAM:"socialLinkInstagram",SOCIAL_LINK_TUMBLR:"socialLinkTumblr",SOCIAL_LINK_SNAPCHAT:"socialLinkSnapchat",SOCIAL_LINK_CAETCH:"socialLinkCaetch",SOCIAL_LINK_BEHANCE:"socialLinkBehance",SOCIAL_LINK_XING:"socialLinkXing",SOCIAL_LINK_LINKEDIN:"socialLinkLinkedIn",SOCIAL_LINK_SKYPE:"socialLinkSkype",SOCIAL_LINK_PINTEREST:"socialLinkPinterest",SOCIAL_LINK_500PX:"socialLink500px"}},,function(e,t,i){"use strict";var n=i(4),o=i(50),a=i(74),r=i(5),s=i(102);var l=function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeStart=t,this.timeEnd=i,this.kbSecAvg=n};i(45);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=h(this,d(t).call(this))).uploader=e,i.uuid=null,i.timeStart=null,i.timeUpdated=null,i.numFilesTotal=0,i.numFilesUploaded=0,i.uploadedFileUuids=[],i.overwriteRule=null,i.intervalPingCheck=null,i.status=t.STATUS_NOT_INIALIZED,i}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),i=t,o=[{key:"STATUS_NOT_INIALIZED",get:function(){return"st_not_initialized"}},{key:"STATUS_INITIALIZING",get:function(){return"st_initializing"}},{key:"STATUS_READY",get:function(){return"st_ready"}},{key:"STATUS_CLOSED",get:function(){return"st_closed"}},{key:"INITIALIZED",get:function(){return"evt_initialized"}},{key:"PING_CHECK_INTERVAL",get:function(){return 5e3}},{key:"PING_THRESHOLD",get:function(){return 45e3}}],(n=[{key:"initialize",value:function(){var e=this;this.status===t.STATUS_NOT_INIALIZED&&(this.status=t.STATUS_INITIALIZING,this.timeStart=Date.now(),s.a.initSession(this.uploader.gallery.uuid).then((function(t){return e.handleInitResponseSuccess(t)})))}},{key:"increaseNumFilesTotal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.numFilesTotal+=Math.floor(e)}},{key:"increaseNumFilesUploaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.numFilesUploaded+=Math.floor(e)}},{key:"addUploadedFileUuid",value:function(e){this.uploadedFileUuids.push(e)}},{key:"startPinging",value:function(){var e=this;null===this.intervalPingCheck&&(this.intervalPingCheck=window.setInterval((function(){return e.handlePingCheck()}),t.PING_CHECK_INTERVAL))}},{key:"stopPinging",value:function(){null!==this.intervalPingCheck&&(window.clearInterval(this.intervalPingCheck),this.intervalPingCheck=null)}},{key:"touch",value:function(){this.status===t.STATUS_READY&&(this.timeUpdated=Date.now())}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.status===t.STATUS_READY){var i,n=this.uploader.getOverallUploadSpeed();if(null!==n&&this.numFilesTotal>0){var o=Date.now();o-this.timeStart>3e3&&(i=new l(Math.floor(this.timeStart),Math.floor(o),Math.floor(n)))}s.a.endSession(this.uuid,e,i),this.status=t.STATUS_CLOSED,this.finalize()}}},{key:"finalize",value:function(){this.stopPinging()}},{key:"handleInitResponseSuccess",value:function(e){this.uuid=e,this.status=t.STATUS_READY,this.startPinging(),this.dispatchEvent(new r.a(t.INITIALIZED))}},{key:"handlePingCheck",value:function(){this.status===t.STATUS_READY&&(Date.now()-this.timeUpdated<t.PING_THRESHOLD||(s.a.pingSession(this.uuid),this.touch()))}}])&&c(i.prototype,n),o&&c(i,o),t}(n.a),v=i(80);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m(this,t),(i=b(this,_(t).call(this))).gallery=e,i.maxSimultaneousUploads=3,i.filesQueued=[],i.filesOverwriting=[],i.uploadProcesses=[],i.session=null,i.status=t.STATUS_IDLE,i.optCompleteSound=!("completeSound"in n)||Boolean(n.completeSound),i.stats={},i.statCheckInterval=null,i}var i,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),i=t,r=[{key:"STATUS_IDLE",get:function(){return"st_idle"}},{key:"STATUS_LOADING",get:function(){return"st_loading"}},{key:"STATUS_PAUSED",get:function(){return"st_paused"}},{key:"STATUS_CANCELLING",get:function(){return"st_cancelling"}},{key:"OVERWRITE_REPLACE",get:function(){return"replace"}},{key:"OVERWRITE_SKIP",get:function(){return"skip"}}],(n=[{key:"upload",value:function(e){this._createSession();var i=[];if(e)if(e instanceof File)this.filesQueued.push(e),i.push(e),this.session.increaseNumFilesTotal();else if(e instanceof FileList){for(var n=e.length,o=0;o<n;)this.filesQueued.push(e[o]),i.push(e[o]),o++;this.session.increaseNumFilesTotal(n)}else if(e instanceof Array){for(var a=e.length,r=0;r<a;)e[r]instanceof File&&(this.filesQueued.push(e[r]),i.push(e[r])),r++;this.session.increaseNumFilesTotal(a)}if(null===this.session.overwriteRule&&this._filenameCheck(i),this.session.status===p.STATUS_READY)switch(this.status){case t.STATUS_IDLE:this._setStatus(t.STATUS_LOADING),this._uploadNext();break;case t.STATUS_LOADING:this._uploadNext();break;case t.STATUS_PAUSED:this.resume()}else this.session.initialize()}},{key:"pause",value:function(){if(this.status!==t.STATUS_LOADING)return!1;for(var e in this.uploadProcesses)this.uploadProcesses[e].pause();return this._setStatus(t.STATUS_PAUSED),this.stopSpeedChecking(),!0}},{key:"resume",value:function(){if(this.status!==t.STATUS_PAUSED)return!1;for(var e in this.uploadProcesses)this.uploadProcesses[e].resume();return this._setStatus(t.STATUS_LOADING),this._uploadNext(),this.startSpeedChecking(),!0}},{key:"cancel",value:function(){if(this.status!==t.STATUS_LOADING&&this.status!==t.STATUS_PAUSED)return!1;var e;this._setStatus(t.STATUS_CANCELLING),this.filesQueued=[];for(var i=this.uploadProcesses.length-1;i>=0;i--)(e=this.uploadProcesses[i]).cancel(),this.processRemove(e);return this.uploadProcesses=[],this._uploadEnd(!0),!0}},{key:"_createSession",value:function(){var e=this;null===this.session&&(this.session=new p(this),this.session.addEventListener(p.INITIALIZED,(function(){e.resetStats(),e.startSpeedChecking(),e.upload()}),"fu"),this.dispatchEvent(new o.a(o.a.UPLOAD_SESSION_START)))}},{key:"_endSession",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.session;this.session.close(e),this.session=null,this.dispatchEvent(new o.a(o.a.UPLOAD_SESSION_END,{session:t}))}},{key:"_renewSessionAndContinue",value:function(){var e,i=this;if(null===this.session)throw"no running session available for renewal";for(var n=0;n<this.uploadProcesses.length;n++)(e=this.uploadProcesses[n])._checkStatus([v.a.STATUS_COMPLETE,v.a.STATUS_CANCELLED])||(e.cancel(!0),this.filesQueued.unshift(e.file));this.uploadProcesses=[];var o=this.session.overwriteRule;this.session.removeEventListenersByNamespace("fu"),this.session.finalize(),this.session=null,window.setTimeout((function(){i._createSession(),i.session.increaseNumFilesTotal(i.filesQueued.length),i.session.overwriteRule=o||t.OVERWRITE_REPLACE,i.session.initialize()}),3e3)}},{key:"_uploadNext",value:function(){if(this.status===t.STATUS_LOADING&&this.session&&this.session.status===p.STATUS_READY&&!(this.uploadProcesses.length>=this.maxSimultaneousUploads))if(0!==this.filesQueued.length){this.session.touch();var e=this.filesQueued.shift(),i=new v.a(e,this.gallery.uuid,this.session.uuid,this.session.overwriteRule);this.processAdd(i),this.processStart(i),this.uploadProcesses.length<this.maxSimultaneousUploads&&0!==this.filesQueued.length&&this._uploadNext()}else 0===this.uploadProcesses.length&&0===this.filesOverwriting.length&&this._uploadEnd()}},{key:"_uploadEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!e&&null!==this.session.timeStart&&Date.now()-this.session.timeStart>6e4;if(this._setStatus(t.STATUS_IDLE),this._endSession(e),this.stopSpeedChecking(),this.optCompleteSound&&i&&window.Audio){var n=new Audio("/themes/picdrop/audio/uc_2.mp3");n.play()}}},{key:"_filenameCheck",value:function(e){var t=this;if(0!==e.length){var i=[];for(var n in e)i.push(e[n].name||e[n].fileName);a.a.filenameCheck(this.gallery,i).then((function(e){return e.duplicates&&t.requestOverwriteRule()}))}}},{key:"requestOverwriteRule",value:function(){null===this.session.overwriteRule&&this.dispatchEvent(new o.a(o.a.REQUEST_OVERWRITE_RULE))}},{key:"setOverwriteRule",value:function(e){if(this.session){switch(e){case t.OVERWRITE_REPLACE:for(var i in this.session.overwriteRule=t.OVERWRITE_REPLACE,this.filesOverwriting)this.filesQueued.push(this.filesOverwriting[i]);this.filesOverwriting=[];break;case t.OVERWRITE_SKIP:this.session.overwriteRule=t.OVERWRITE_SKIP,this.session.increaseNumFilesTotal(-this.filesOverwriting.length),this.filesOverwriting=[];break;default:throw"overwrite rule ".concat(e," is not valid")}this._uploadNext()}}},{key:"getOverwriteRule",value:function(){return this.session?this.session.overwriteRule:null}},{key:"processAdd",value:function(e){this.uploadProcesses.push(e)}},{key:"processRemove",value:function(e){for(var t=0,i=this.uploadProcesses.length;t<i;t++)if(this.uploadProcesses[t]===e){this.uploadProcesses.splice(t,1);break}}},{key:"processStart",value:function(e){e.addEventListener(v.a.CHUNK_SENT,this.handleUploadProcessChunkSent.bind(this)),e.addEventListener(v.a.STATUS_CHANGED,this.handleUploadProcessStatusChanged.bind(this)),e.addEventListener(v.a.ERROR,this.handleUploadProcessError.bind(this)),e.notify(),this.dispatchEvent(new o.a(o.a.FILE_UPLOAD_START,{process:e}))}},{key:"resetStats",value:function(){this.stats.cache=[],this.stats.currentSpeed=0}},{key:"startSpeedChecking",value:function(){this.statCheckInterval||(this.statCheckInterval=window.setInterval(this.handleStatCheckInterval.bind(this),500))}},{key:"stopSpeedChecking",value:function(){this.statCheckInterval&&(window.clearInterval(this.statCheckInterval),this.statCheckInterval=null)}},{key:"getCurrentUploadSpeed",value:function(e){if(0===this.stats.cache.length)return null;for(var t=Date.now()-e,i=this.stats.cache.length,n=0,o=0;--i>=0&&!(this.stats.cache[i][0]<t);)n+=this.stats.cache[i][1],o++;return 0===o?null:n/o}},{key:"getOverallUploadSpeed",value:function(){if(0===this.stats.cache.length)return null;for(var e=this.stats.cache.length,t=0;--e>=0;)t+=this.stats.cache[e][1];return t/this.stats.cache.length}},{key:"getBytesLeft",value:function(){for(var e=0,t=0;t<this.filesQueued.length;t++)e+=this.filesQueued[t].size;for(var i=0;i<this.uploadProcesses.length;i++)e+=this.uploadProcesses[i].getBytesLeft();return e}},{key:"getProgress",value:function(){return this.status===t.STATUS_IDLE?0:(this.getNumFilesTotal()-this.getNumFilesWaiting()-this.getNumFilesUploading())/this.getNumFilesTotal()}},{key:"getNumFilesWaiting",value:function(){return this.filesQueued.length+this.filesOverwriting.length}},{key:"getNumFilesUploading",value:function(){return this.uploadProcesses.length}},{key:"getNumFilesTotal",value:function(){return this.session?this.session.numFilesTotal:0}},{key:"_setStatus",value:function(e){if("string"!=typeof e)throw"argument status is not of type string";this.status!==e&&(this.status=e,this.dispatchEvent(new o.a(o.a.STATUS_CHANGED,{status:e})))}},{key:"handleUploadProcessChunkSent",value:function(){this.session&&this.session.touch()}},{key:"handleUploadProcessStatusChanged",value:function(e){var t=e.target;switch(e.get("status")){case v.a.STATUS_COMPLETE:this.processRemove(t),this.session.increaseNumFilesUploaded(),this.session.addUploadedFileUuid(t.fileUuid),this.dispatchEvent(new o.a(o.a.FILE_UPLOAD_END,{process:t})),this._uploadNext();break;case v.a.STATUS_CANCELLED:this.processRemove(t),this.dispatchEvent(new o.a(o.a.FILE_UPLOAD_END,{process:t})),this._uploadNext()}}},{key:"handleUploadProcessError",value:function(e){var i=e.target;switch(i.errorCode){case 2902:switch(this.session.overwriteRule){case null:this.filesOverwriting.push(i.file),this.requestOverwriteRule();break;case t.OVERWRITE_REPLACE:this.filesQueued.push(i.file)}break;case 2906:this._renewSessionAndContinue()}}},{key:"handleStatCheckInterval",value:function(){if(0!==this.uploadProcesses.length){for(var e,t=0,i=0,n=0;n<this.uploadProcesses.length;n++)null!==(e=this.uploadProcesses[n].getUploadSpeed())&&(i+=e,t++);0!==t&&this.stats.cache.push([Date.now(),i])}}}])&&y(i.prototype,n),r&&y(i,r),t}(n.a);t.a=E},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=i||{},this.started=!1,this.loaded=!1,this.callbacks=[]}var t,i,o;return t=e,o=[{key:"awaitReadyness",value:function(e){var t=e.length,i=0;return new Promise((function(n){for(var o=function(){++i===t&&n()},a=0,r=e.length;a<r;a++)e[a].start(o)}))}}],(i=[{key:"start",value:function(e){var t=this;if("function"==typeof e&&this.callbacks.push(e),this.loaded)this._callBack();else if(!this.started){var i=document.createElement("img");"crossOrigin"in this.options&&(i.crossOrigin=this.options.crossOrigin),i.style.display="none",i.src=this.url,i.onload=function(){t.loaded=!0,t._callBack()},document.body.appendChild(i),this.loading=!0}}},{key:"_callBack",value:function(){for(var e=0,t=this.callbacks.length;e<t;e++)this.callbacks[e]();this.callbacks=[]}}])&&n(t.prototype,i),o&&n(t,o),e}();function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r={},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"preloadImages",value:function(e,t){for(var i,n,a=[],s=0,l=e.length;s<l;s++)(i=e[s])in r?a.push(r[i]):(n=new o(i,t||{}),r[i]=n,a.push(n));return new Promise((function(e){o.awaitReadyness(a).then((function(){e()}))}))}},{key:"getImageBrightness",value:function(e,t){var i=document.createElement("img");i.crossOrigin="anonymous",i.style.display="none",i.src=e,document.body.appendChild(i);var n=0;i.onload=function(){var e=document.createElement("canvas");if(e.width=i.width,e.height=i.height,e.getContext&&e.getContext("2d")){var o=e.getContext("2d");o.drawImage(i,0,0);for(var a,r,s,l=o.getImageData(0,0,e.width,e.height).data,u=0,c=0,h=l.length;u<h;)a=l[u++],r=l[u++],s=l[u++],0!==l[u++]&&(n+=Math.floor((a+r+s)/3),c++);"function"==typeof t&&t(Math.floor(n/c))}}}}],(i=null)&&a(t.prototype,i),n&&a(t,n),e}();t.a=s},function(e,t,i){"use strict";var n=i(39),o=i(0),a=i.n(o),r=i(13),s=i(51),l=i(112),u=i.n(l);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,f(t).call(this,e,i))).width=0,n.height=0,n.$dom=void 0,n.$document=a()(document),n._setSerial(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),i=t,(n=[{key:"open",value:function(){var e=this;this.$dom=a()(u()({title:this._definition.getTitle()})),this.$dom.find(".content").replaceWith(this._definition.getContent());var t=this._definition.getMessageType();null!==t&&this.$dom.attr("data-message-type",t),this.$dom.hide().appendTo("body").stop().fadeIn(200,(function(){e.setOpened()})),this.width=this.$dom.outerWidth(),this.height=this.$dom.outerHeight();var i=s.a.getClientPosition();this.setTooltipPosition(i.x,i.y),this.$document.on("mousemove.mouse_not_".concat(this.getId()),this.handleMouseMove.bind(this))}},{key:"close",value:function(){var e=this;this.$dom.stop().fadeOut(100,(function(){e.$dom.detach(),e.$document.off("mousemove.mouse_not_".concat(e.getId())),e.setClosed()}))}},{key:"setTooltipPosition",value:function(e,t){var i=this._definition.getOffset(),n=this._definition.getWindowPadding(),o=i,a=i;e+o+this.width>r.a.getWidth()-n&&(o=-(i+this.width)),t+a+this.height>r.a.getHeight()-n&&(a=-(i+this.height)),this.$dom[0].style.transform="translate(".concat(e+o,"px, ").concat(t+a,"px)")}},{key:"handleMouseMove",value:function(e){this.setTooltipPosition(e.clientX||0,e.clientY||0)}}])&&h(i.prototype,n),o&&h(i,o),t}(i(26).a);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=y(this,b(t).call(this,v)))._title=null,e._offset=15,e._windowPadding=0,e._messageType=null,e.setTimeout(5),e}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),i=t,o=[{key:"TYPE_TOOLTIP",get:function(){return"tooltip"}}],(n=[{key:"setTitle",value:function(e){return this._title=e,this}},{key:"getTitle",value:function(){return this._title}},{key:"setOffset",value:function(e){return this._offset=e,this}},{key:"getOffset",value:function(){return this._offset}},{key:"setWindowPadding",value:function(e){return this._windowPadding=e,this}},{key:"getWindowPadding",value:function(){return this._windowPadding}},{key:"setMessageType",value:function(e){return this._messageType=e,this}},{key:"getMessageType",value:function(){return this._messageType}}])&&m(i.prototype,n),o&&m(i,o),t}(n.a);t.a=w},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._gallery=null,this._fileInformationEnabled=!1,this._selectionEnabled=!1,this._downloadEnabled=!1,this._flagsEnabled=!1,this._commentsEnabled=!1,this._adminModeEnabled=!1}var t,i,o;return t=e,(i=[{key:"setGallery",value:function(e){return this._gallery=e,this}},{key:"getGallery",value:function(){return this._gallery}},{key:"setFileInformationEnabled",value:function(e){return this._fileInformationEnabled=e,this}},{key:"isFileInformationEnabled",value:function(){return this._fileInformationEnabled}},{key:"setSelectionEnabled",value:function(e){return this._selectionEnabled=e,this}},{key:"isSelectionEnabled",value:function(){return this._selectionEnabled}},{key:"setDownloadEnabled",value:function(e){return this._downloadEnabled=e,this}},{key:"isDownloadEnabled",value:function(){return this._downloadEnabled}},{key:"setFlagsEnabled",value:function(e){return this._flagsEnabled=e,this}},{key:"isFlagsEnabled",value:function(){return this._flagsEnabled}},{key:"setCommentsEnabled",value:function(e){return this._commentsEnabled=e,this}},{key:"isCommentsEnabled",value:function(){return this._commentsEnabled}},{key:"setAdminModeEnabled",value:function(e){return this._adminModeEnabled=e,this}},{key:"isAdminModeEnabled",value:function(){return this._adminModeEnabled}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},,,function(e,t,i){"use strict";var n=i(1),o=i(20),a=i(15);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,l;return t=e,l=[{key:"initSession",value:function(e){return new Promise((function(t,i){n.a.post("/api/uploads/initsession",{dataType:n.a.DATATYPE_JSON,data:{gallery_uuid:e},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,n){n.success?t(e.upload_uuid):i(a.a.extractErrorFromApiResponse(e))},lock:!0})}))}},{key:"pingSession",value:function(e){return new Promise((function(t,i){n.a.post("/api/uploads/pingsession/".concat(e),{responseType:n.a.RESPONSETYPE_JSON,lock:!0,onComplete:function(e,n){n.success?t():i(a.a.extractErrorFromApiResponse(e))}})}))}},{key:"endSession",value:function(e,t,i){var o={aborted:t};return i&&(o.stats={time_start:i.timeStart/1e3,time_end:i.timeEnd/1e3,kb_sec_avg:i.kbSecAvg}),new Promise((function(t,i){n.a.post("/api/uploads/endsession/".concat(e),{dataType:n.a.DATATYPE_JSON,data:o,lock:!0,onComplete:function(e,n){n.success?t():i(a.a.extractErrorFromApiResponse(e))}})}))}},{key:"initFileUpload",value:function(e,t,i,o,r){return new Promise((function(s,l){n.a.post("/api/uploads/initfileupload",{dataType:n.a.DATATYPE_JSON,data:{upload_uuid:i,gallery_uuid:t,file_name:e,file_size:o,overwrite:"replace"===r},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,t){t.success?s(e.file_uuid):l(a.a.extractErrorFromApiResponse(e))}})}))}},{key:"sendFilePart",value:function(e,t,i,s,l,u,c){var h;return"function"==typeof u&&(h=function(e){return u(e.loaded,e.total)}),new Promise((function(u,d){var f={u:e,f:t,n:i+1,d:s},p=n.a.post("/api/uploads/sendfilepart?".concat(o.a.encodeURI(f)),{data:l,dataType:n.a.DATATYPE_FILE,responseType:n.a.RESPONSETYPE_JSON,onUploadProgress:h,onComplete:function(e,t){t.success?u():d(a.a.extractErrorFromApiResponse(e))}});null!==c&&"object"===r(c)&&(c.abort=function(){return p.abort()})}))}},{key:"cancelFileUpload",value:function(e,t){return new Promise((function(i,o){n.a.post("/api/uploads/cancelfileupload",{dataType:n.a.DATATYPE_JSON,data:{upload_uuid:e,file_uuid:t},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,t){t.success?i():o(a.a.extractErrorFromApiResponse(e))}})}))}}],(i=null)&&s(t.prototype,i),l&&s(t,l),e}();t.a=l},,,,,,,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(7),r=i(129),s=i.n(r),l=i(57),u=i(98);function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=0,d=function(){function e(t,i,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=h++,this.$target=o()(t),this.title=i||null,this.content=n,this.openable=Boolean(a),this.evt_ns=".uihint_".concat(this.id),this.not_id="uihint_".concat(this.id),this.$ui={},this.initialize()}var t,i,n;return t=e,(i=[{key:"initialize",value:function(){var e=this;this.$target.on("mouseenter".concat(this.evt_ns),(function(){e.showNotification()})),this.$target.on("mouseleave".concat(this.evt_ns),(function(){e.hideNotification()})),this.openable&&this.$target.on("click".concat(this.evt_ns),(function(){e.hideNotification();var t=o()('<div class="ui-hint-opened"></div>').append(e.content);a.a.open((new l.a).setTitle(e.title).setContent(t).setSuspendCurrent(!0).setMaxWidth(550))})),this.$target.css("cursor","help")}},{key:"showNotification",value:function(){a.a.hasNotification(this.not_id)||(this.$ui.tooltip||(this.$ui.tooltip=o()(s()({openable:this.openable})),this.$ui.tooltip.find(".content-placeholder").replaceWith(this.content)),a.a.open((new u.a).setId(this.not_id).setTitle(this.title).setContent(this.$ui.tooltip).setTimeout(0).setDelay(.2).setOffset(10)))}},{key:"hideNotification",value:function(){a.a.hasNotification(this.not_id)&&a.a.close(this.not_id)}},{key:"finalize",value:function(){this.hideNotification(),this.$target.off(this.evt_ns),this.$target.css("cursor","")}}])&&c(t.prototype,i),n&&c(t,n),e}(),f=i(130),p=i.n(f);function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hintsById={}}var t,i,n;return t=e,(i=[{key:"createHint",value:function(e,t,i,n){var o=new d(e,t,i,n);return this.hintsById[o.id]=o,o}},{key:"removeHint",value:function(e){e in this.hintsById&&(this.hintsById[e].finalize(),delete this.hintsById[e])}},{key:"parseDefinitions",value:function(){var e=this;o()(".ui-hint-definition").each((function(t,i){var n,a,r=o()(i);r.attr("data-target")?(n=!0,a=o()(r.attr("data-target"))):(n=!1,a=o()(p()())),e.createHint(a,r.find("span.title").text()||null,r.find("span.content").html(),"true"===r.attr("data-openable")),n?r.remove():r.replaceWith(a)}))}}])&&v(t.prototype,i),n&&v(t,n),e}();t.a=new g},function(e,t,i){"use strict";var n=i(2);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._enabled=!1}var t,i,n;return t=e,(i=[{key:"enable",value:function(){this._enabled=!0}},{key:"define",value:function(e,t){if(this._enabled){if(this[e])throw"The key ".concat(e," is already in use.");this[e]=t}}}])&&o(t.prototype,i),n&&o(t,n),e}());if(n.a.has("visitor")){var r=n.a.get("visitor");r.userAuthed&&"admin"===r.user.type&&(a.enable(),window.PDConsole=a)}t.a=a},function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));
/*!
 * ScrollToPlugin 3.0.5
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var n,o,a,r,s,l,u,c=function(){return"undefined"!=typeof window},h=function(){return n||c()&&(n=window.gsap)&&n.registerPlugin&&n},d=function(e){return"string"==typeof e},f=function(e,t){var i="x"===t?"Width":"Height",n="scroll"+i,o="client"+i;return e===a||e===r||e===s?Math.max(r[n],s[n])-(a["inner"+i]||r[o]||s[o]):e[n]-e["offset"+i]},p=function(e,t){var i="scroll"+("x"===t?"Left":"Top");return e===a&&(null!=e.pageXOffset?i="page"+t.toUpperCase()+"Offset":e=null!=r[i]?r:s),function(){return e[i]}},v=function(e,t){var i=l(e)[0].getBoundingClientRect(),n=!t||t===a||t===s,o=n?{top:r.clientTop-(a.pageYOffset||r.scrollTop||s.scrollTop||0),left:r.clientLeft-(a.pageXOffset||r.scrollLeft||s.scrollLeft||0)}:t.getBoundingClientRect(),u={x:i.left-o.left,y:i.top-o.top};return!n&&t&&(u.x+=p(t,"x")(),u.y+=p(t,"y")()),u},g=function(e,t,i,n){return isNaN(e)?d(e)&&"="===e.charAt(1)?parseFloat(e.substr(2))*("-"===e.charAt(0)?-1:1)+n:"max"===e?f(t,i):Math.min(f(t,i),v(e,t)[i]):parseFloat(e)},m=function(){n=h(),c()&&n&&document.body&&(a=window,s=document.body,r=document.documentElement,l=n.utils.toArray,n.config({autoKillThreshold:7}),u=n.config(),o=1)},y={version:"3.0.5",name:"scrollTo",rawVars:1,register:function(e){n=e,m()},init:function(e,t,i,n,r){o||m();this.isWin=e===a,this.target=e,this.tween=i,"object"!=typeof t?d((t={y:t}).y)&&"max"!==t.y&&"="!==t.y.charAt(1)&&(t.x=t.y):t.nodeType&&(t={y:t,x:t}),this.vars=t,this.autoKill=!!t.autoKill,this.getX=p(e,"x"),this.getY=p(e,"y"),this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=t.x?(this.add(this,"x",this.x,g(t.x,e,"x",this.x)-(t.offsetX||0),n,r,Math.round),this._props.push("scrollTo_x")):this.skipX=1,null!=t.y?(this.add(this,"y",this.y,g(t.y,e,"y",this.y)-(t.offsetY||0),n,r,Math.round),this._props.push("scrollTo_y")):this.skipY=1},render:function(e,t){for(var i,n,o,r,s,l=t._pt,c=t.target,h=t.tween,d=t.autoKill,p=t.xPrev,v=t.yPrev,g=t.isWin;l;)l.r(e,l.d),l=l._next;i=g||!t.skipX?t.getX():p,o=(n=g||!t.skipY?t.getY():v)-v,r=i-p,s=u.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),d&&(!t.skipX&&(r>s||r<-s)&&i<f(c,"x")&&(t.skipX=1),!t.skipY&&(o>s||o<-s)&&n<f(c,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(h.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(h,t.vars.onAutoKillParams||[]))),g?a.scrollTo(t.skipX?i:t.x,t.skipY?n:t.y):(t.skipY||(c.scrollTop=t.y),t.skipX||(c.scrollLeft=t.x)),t.xPrev=t.x,t.yPrev=t.y},kill:function(e){var t="scrollTo"===e;(t||"scrollTo_x"===e)&&(this.skipX=1),(t||"scrollTo_y"===e)&&(this.skipY=1)}};y.max=f,y.getOffset=v,y.buildGetter=p,h()&&n.registerPlugin(y)},function(e,t){e.exports=function(e){var t='<div class="mouse-notification"> ';return e.title&&(t+=' <span class="title">'+e.title+"</span> "),t+=' <div class="content"></div></div>'}},function(e,t,i){"use strict";var n=i(60);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),this.container=t,this.containerWidth=null,this.containerHeight=null,this.colWidth=i,this.gutterWidth=n,this.order=a.order||"dynamic",this.elements=[],this._numCols=null,this._colInfo=null,this._colPointer=null,this._initialize()}var t,i,r;return t=e,r=[{key:"ORDER_DYNAMIC",get:function(){return"dynamic"}},{key:"ORDER_LINEAR",get:function(){return"linear"}}],(i=[{key:"_initialize",value:function(){this.container.style.position="relative"}},{key:"setElementsBySelector",value:function(e){this.clearElements(),this.addElements(Array.prototype.slice.call(this.container.querySelectorAll(e)))}},{key:"addElements",value:function(e){this.elements=this.elements.concat(e);for(var t=0,i=e.length;t<i;t++)e[t].style.position="absolute"}},{key:"removeElements",value:function(e){for(var t=this.elements.length-1;t>=0;t--)for(var i=0;i<e.length;i++)if(this.elements[t]===e[i]){if(this.elements.splice(t,1),e.splice(i,1),0===e.length)return;break}}},{key:"clearElements",value:function(){this.elements=[]}},{key:"_prepareUpdate",value:function(e){var t=n.a.calculateNumCols(e,this.colWidth,this.gutterWidth);this.containerWidth=n.a.calculateContainerWidth(Math.min(t,this.elements.length),this.colWidth,this.gutterWidth),this.containerHeight=0,this._numCols=t,this._colInfo=[],this._colPointer=0;for(var i=0;i<t;i++)this._colInfo[i]={x:Math.round(i*(this.colWidth+this.gutterWidth)),y:0}}},{key:"update",value:function(e){if(0!==this.elements.length){this._prepareUpdate(e);for(var t,i,n=this.elements.length,o=0;o<n;)t=this.elements[o],i=this._colInfo[this._colPointer],t.style.left="".concat(i.x,"px"),t.style.top="".concat(i.y,"px"),this._advanceColInfo(t.clientHeight),o++;this.container.style.width="".concat(this.containerWidth,"px"),this.container.style.height="".concat(this.containerHeight,"px")}}},{key:"_advanceColInfo",value:function(t){var i=this._colInfo[this._colPointer],n=Math.floor(i.y+t);if(n>this.containerHeight&&(this.containerHeight=n),i.y=Math.floor(n+this.gutterWidth),this.order===e.ORDER_DYNAMIC){for(var o,a=0,r=void 0;a<this._numCols;)(void 0===r||this._colInfo[a].y<r)&&(o=a,r=this._colInfo[a].y-2),a++;this._colPointer=o}else this.order===e.ORDER_LINEAR&&(this._colPointer=(this._colPointer+1)%this._numCols)}},{key:"setColWidth",value:function(e){this.colWidth=e}},{key:"setGutterWidth",value:function(e){this.gutterWidth=e}},{key:"finalize",value:function(){this.clearElements(),this.container=null}}])&&a(t.prototype,i),r&&a(t,r),e}();t.a=r},function(e,t,i){"use strict";t.a=function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerMinWidth=t,this.gutterWidth=i,this.elementMinWidth=n}},function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=a(this,r(t).call(this,e)))._preset=void 0,i}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),i=t,l=[{key:"PRESET_ADDED",get:function(){return"preset_added"}},{key:"PRESET_REMOVED",get:function(){return"preset_removed"}}],(n=[{key:"setPreset",value:function(e){return this._preset=e,this}},{key:"getPreset",value:function(){return this._preset}}])&&o(i.prototype,n),l&&o(i,l),t}(i(5).a);t.a=l},,,,function(e,t,i){"use strict";t.a={NONE:"none",RED:"red",ORANGE:"orange",GREEN:"green",FINAL:"final"}},,function(e,t,i){"use strict";var n=i(3),o=i(0),a=i.n(o),r=i(63),s=i.n(r),l=i(8),u=i(12),c=i(2),h=i(51),d=i(18),f=i(36),p=i(37),v=i(52),g=i(81),m=i(9),y=i(7),b=i(23),_=i(125),w=i.n(_),E=i(126),S=i.n(E),k=i(82),T=i.n(k);function C(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var x=function(){function e(t,i,n,o,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.galleryListing=t,this.navigationElement=i,this.gallery=i.getGallery(),this.optMenu=!0===n,this.optDnD=!0===o,this.optSelectMode=a||null,this.optLazyLoadSubEntries=Boolean(r),this.isAllowedCopy=f.a.isAllowed(p.a.COPY_GALLERIES),this.parentView=null,this.subViews=null,this.$dom=null,this.$ui={},this.visible=!0,this.selected=!1,this.disabled=!1,this.restricted=!1,this.expandable=!1,this.expanded=!1,this.containerAttached=!1,this.menuVisible=!1,this.createDOM(),this.initialize()}var t,o,r;return t=e,r=[{key:"SELECTED",get:function(){return"evt_selected"}},{key:"DESELECTED",get:function(){return"evt_deselected"}}],(o=[{key:"createDOM",value:function(){var e={name:this.navigationElement.name,url:this.galleryListing.domain.urlRel+this.navigationElement.url,numFiles:this.navigationElement.numFiles,isLocked:this.navigationElement.isLocked,optMenu:this.optMenu,optSelectMode:this.optSelectMode};this.$dom=a()(w()(e)),this.$ui.body=a()("body"),this.$ui.buttonWrapper=this.$dom.find(".button-wrapper"),this.$ui.bullet=this.$dom.find(".bullet"),this.$ui.button=this.$dom.find(".button"),this.$ui.numImages=this.$dom.find(".num-images"),this.$ui.btnToggleMenu=this.$dom.find(".btn--toggle-menu"),this.$ui.container=this.$dom.find(".container"),this.$ui.menu=null,this.$ui.container.detach().hide(),this.$ui.btnToggleMenu.hide()}},{key:"initialize",value:function(){var t=this;if(this.navigationElement.hasChildren&&(0!==this.navigationElement.children.length||this.optLazyLoadSubEntries)&&(this.$dom.addClass("expandable"),this.expandable=!0),this.$ui.bullet.on("click",(function(e){e.preventDefault(),t.expandable&&(t.expanded?t.collapse(!0):t.expand(!0))})),this.optMenu&&(this.$ui.buttonWrapper.hover((function(){t.menuVisible||(t.$ui.numImages.hide(),t.$ui.btnToggleMenu.show())}),(function(){t.menuVisible||(t.$ui.numImages.show(),t.$ui.btnToggleMenu.hide())})),this.$ui.btnToggleMenu.on("click",(function(e){e.preventDefault(),t.showMenu()})),this.$dom.on("contextmenu",(function(e){e.preventDefault(),t.showMenu()}))),null!==this.optSelectMode){switch(this.optSelectMode){case"single":this.$dom.addClass("selectable-single");break;case"multiple":this.$dom.addClass("selectable-multi")}this.$ui.button.on("click",(function(i){i.preventDefault(),t.toggleSelection(),a()(t).trigger(t.selected?e.SELECTED:e.DESELECTED,[t.gallery])}))}this.gallery.addEventListener(l.a.FAVORIZED,this.handleGalleryFavorized.bind(this)),this.gallery.addEventListener(l.a.UNFAVORIZED,this.handleGalleryUnfavorized.bind(this)),this.gallery.addEventListener(l.a.RENAMED,this.handleGalleryRenamed.bind(this)),this.optDnD&&this.initDragAndDrop()}},{key:"initDragAndDrop",value:function(){var e=this;v.a.registerDraggable(this.$ui.button[0],new g.a(this.gallery,"gallery"),{onDragStart:function(t){t.setDragGhost(a()(T()({galleries:[e.gallery]})),-20,-10)}}),v.a.registerTarget(this.$ui.button[0],{onValidateLoad:function(t){if(t&&t.elm===e.$ui.button[0])return 0;if(t&&t.load){if("gallery"===t.load.type){var i=t.load.content;return i.uuid===e.gallery.uuid?-1:i.parentGalleryUuid===e.gallery.uuid?-1:0===e.gallery.path.indexOf(i.path)?-1:1}if("files"===t.load.type)return 1}return 0},onDrop:function(t){if(t.load)if("gallery"===t.load.type){var o=t.load.content;if(o.parentGalleryUuid===e.gallery.uuid||0===e.gallery.path.indexOf(o.path))return;Promise.all([i.e(1),i.e(16)]).then((function(){var t=[i(209)];(function(t){var i=t.default,r=new i(o,e.gallery);a()(r).on(i.MOVED,(function(){y.a.open((new b.a).setContent(n.a.p__("gallery","move_success",o.name,e.gallery.name)).setLevel(b.a.LEVEL_SUCCESS))})),r.open()}).apply(null,t)})).catch(i.oe)}else if("files"===t.load.type){var r=t.load.content,s=[];for(var l in r)s.push(r[l].uuid);Promise.all([i.e(5),i.e(11)]).then((function(){var t=[i(216)];(function(t){var i=t.default;new i(e.gallery.domain,e.gallery,s,i.MODE_MOVE,e.gallery.uuid)}).apply(null,t)})).catch(i.oe)}}})}},{key:"initMenu",value:function(){var e=this;if(null===this.$ui.menu){var t={isAllowedCopy:this.isAllowedCopy};this.$ui.menu=a()(S()(t)),this.gallery.isFavorite&&(this.$ui.menu.find(".btn--fav").addClass("active"),this.updateFavButtonState(!0)),this.$ui.menu.find(".btn--fav").on("click",(function(t){t.preventDefault(),e.actionToggleFav()})),this.$ui.menu.find(".btn--rename").on("click",(function(t){t.preventDefault(),e.actionRename()})),this.$ui.menu.find(".btn--move").on("click",(function(t){t.preventDefault(),e.actionMove()})),this.$ui.menu.find(".btn--remove").on("click",(function(t){t.preventDefault(),e.actionRemove()})),this.$ui.menu.on("mouseleave",(function(){e.hideMenu()}))}}},{key:"showMenu",value:function(){var e=this;if(!this.menuVisible){null===this.$ui.menu&&this.initMenu(),this.$ui.body.append(this.$ui.menu);var t=h.a.getClientPosition();this.$ui.menu.css({left:t.x-18,top:t.y-18});var i=".gallery-entry-menu-".concat(this.navigationElement.uuid);this.$ui.menu.fadeIn(100),this.$dom.addClass("menu-opened"),a()(document).on("click".concat(i),(function(t){e.menuVisible&&!u.a.domIsChildOf(t.target,e.$ui.buttonWrapper[0])&&e.hideMenu()})),this.menuVisible=!0}}},{key:"hideMenu",value:function(){var e=this;if(this.menuVisible){var t=".gallery-entry-menu-".concat(this.navigationElement.uuid);this.$ui.menu.fadeOut(100,(function(){e.$ui.menu.detach()})),this.$dom.removeClass("menu-opened"),this.$ui.numImages.show(),this.$ui.btnToggleMenu.hide(),this.$dom.off(t),a()(document).off(t),this.menuVisible=!1}}},{key:"restrict",value:function(){null===this.optSelectMode||this.restricted||(this.$dom.addClass("restricted"),this.restricted=!0)}},{key:"resetRestricted",value:function(){null!==this.optSelectMode&&this.restricted&&(this.$dom.removeClass("restricted"),this.restricted=!1)}},{key:"select",value:function(){null===this.optSelectMode||this.selected||(this.$dom.addClass("selected"),this.selected=!0)}},{key:"deselect",value:function(){null!==this.optSelectMode&&this.selected&&(this.$dom.removeClass("selected"),this.selected=!1)}},{key:"toggleSelection",value:function(){null!==this.optSelectMode&&(this.selected?this.deselect():this.select())}},{key:"enable",value:function(){this.disabled&&(this.$dom.removeClass("disabled"),this.disabled=!1)}},{key:"disable",value:function(){this.disabled||(this.$dom.addClass("disabled"),this.disabled=!0)}},{key:"actionToggleFav",value:function(){var e=this,t=new d.a(c.a.get("user")||c.a.get("visitor").user);this.gallery.isFavorite?(t.unfavorizeGallery(this.gallery,(function(t){t||e.updateFavButtonState(!0)})),this.updateFavButtonState(!1)):(t.favorizeGallery(this.gallery,(function(t){t||e.updateFavButtonState(!0)})),this.updateFavButtonState(!1))}},{key:"actionRename",value:function(){var e=this;Promise.all([i.e(1),i.e(18)]).then((function(){var t=[i(210)];(function(t){new(0,t.default)(e.gallery).open()}).apply(null,t)})).catch(i.oe)}},{key:"actionMove",value:function(){var e=this;Promise.all([i.e(1),i.e(9),i.e(14)]).then((function(){var t=[i(214)];(function(t){new(0,t.default)(e.gallery).open()}).apply(null,t)})).catch(i.oe)}},{key:"actionRemove",value:function(){var e=this;Promise.all([i.e(1),i.e(17)]).then((function(){var t=[i(211)];(function(t){var i=t.default,o=new i(e.gallery);a()(o).on(i.REMOVED,(function(){y.a.open((new b.a).setContent(n.a.p__("gallery","remove_success",e.gallery.name)).setDelay(1).setLevel(b.a.LEVEL_SUCCESS))})),o.open()}).apply(null,t)})).catch(i.oe)}},{key:"addSubViews",value:function(e){if(0!==this.$ui.container.length){for(var t=document.createDocumentFragment(),i=0;i<e.length;i++){var n=e[i];null===this.subViews?this.subViews=[n]:this.subViews.push(n),n.parentView=this,t.appendChild(n.$dom[0])}this.$ui.container.append(t)}}},{key:"highlightSubString",value:function(e){var t=new RegExp(e,"gi");this.$ui.button.html(this.gallery.name.replace(t,(function(e){return"<em>".concat(e,"</em>")})))}},{key:"unhighlight",value:function(){this.$ui.button.html(this.gallery.name)}},{key:"blink",value:function(){var e=this;this.$ui.button.css({"background-color":"rgba(137,180,0,1)"}),m.default.to(this.$ui.button,{backgroundColor:"rgba(137,180,0,0)",duration:3,ease:"power2.out",overwrite:"all",onComplete:function(){e.$ui.button.css("background-color","")}})}},{key:"show",value:function(){this.visible||(this.$dom.show(),this.visible=!0)}},{key:"hide",value:function(){this.visible&&(this.$dom.hide(),this.visible=!1)}},{key:"expand",value:function(e,t){var i=this;if(!0===t&&null!==this.parentView&&this.parentView.expand(e,t),this.expandable&&!this.expanded)if(this.navigationElement.hasChildren&&null===this.subViews&&this.optLazyLoadSubEntries){var n=window.setTimeout((function(){i.$dom.addClass("pending")}),250);this.galleryListing.lazyLoadSubEntries(this,(function(){i.expand(e,t),window.clearTimeout(n),i.$dom.removeClass("pending")}))}else this.containerAttached||(this.$dom.append(this.$ui.container),this.containerAttached=!0),!0===e?this.$ui.container.slideDown(200):this.$ui.container.show(),this.$dom.addClass("opened"),this.expanded=!0}},{key:"collapse",value:function(e){this.expandable&&this.expanded&&(!0===e?this.$ui.container.slideUp(200):this.$ui.container.hide(),this.$dom.removeClass("opened"),this.expanded=!1)}},{key:"handleGalleryFavorized",value:function(){this.updateFavButtonState(!0)}},{key:"handleGalleryUnfavorized",value:function(){this.updateFavButtonState(!1)}},{key:"handleGalleryRenamed",value:function(){this.$ui.button.text(this.gallery.name).attr("title",this.gallery.name).attr("href",this.gallery.urlRel)}},{key:"updateFavButtonState",value:function(e){null!==this.$ui.menu&&this.$ui.menu.find(".btn--fav").toggleClass("active",e).find("span").html(n.a.p__("gallery.actions",e?"unfavorize":"favorize"))}},{key:"finalize",value:function(){this.subViews=null,this.parentView=null,this.$dom.remove()}}])&&C(t.prototype,o),r&&C(t,r),e}(),O=i(127),D=i.n(O);function A(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var I=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=i,this.viewsEntries=[],this.$dom=null,this.$ui={},this.createDOM(),this.addViews(t)}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){this.$dom=a()(D()({title:this.title})),this.$ui.entries=this.$dom.find(".entries")}},{key:"addViews",value:function(e){for(var t=document.createDocumentFragment(),i=0;i<e.length;i++){var n=e[i];this.viewsEntries.push(n),t.appendChild(n.$dom[0])}this.$ui.entries.append(t)}},{key:"updateVisibility",value:function(){this.$dom.show(),0===this.$ui.entries.children(":visible").length&&this.$dom.hide()}},{key:"finalize",value:function(){for(var e in this.viewsEntries)this.viewsEntries[e].finalize();this.$dom.remove()}}])&&A(t.prototype,i),n&&A(t,n),e}(),P=i(76),$=i(71),R=i(78),L=i(128),M=i.n(L);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=0,U=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!==t&&"object"===F(t)||(t={}),this.domain=null,this.navigationRequest=null,this.navigationElements=[],this.viewsSections=[],this.viewsEntriesByUuid={},this.$dom=void 0,this.$ui={},this.optShowIndices="indices"in t&&!0===t.indices,this.optExpanded="expanded"in t&&!0===t.expanded,this.optEntryMenu="menu"in t&&!0===t.menu,this.optEntryDnD="dragAndDrop"in t&&!0===t.dragAndDrop,this.optSelectMode="selectMode"in t?t.selectMode:null,this.optLazyLoadSubEntries="lazyLoadSubEntries"in t&&Boolean(t.lazyLoadSubEntries),this._highlightString=null,this._selectedUuids=[],this._disabledUuids=[],this._hiddenUuids=[],this._restrictedUuids=[],this._apiRequestController=void 0,this._preFilterRequest=void 0,this._filterRequest=void 0,this._eventNamespace="view_gallery_listing_".concat(B++),this.createDOM()}var t,i,o;return t=e,o=[{key:"SELECT_MODE_SINGLE",get:function(){return"single"}},{key:"SELECT_MODE_MULTIPLE",get:function(){return"multiple"}},{key:"GALLERY_SELECTED",get:function(){return"evt_gallery_selected"}},{key:"GALLERY_DESELECTED",get:function(){return"evt_gallery_deselected"}}],(i=[{key:"createDOM",value:function(){this.$dom=a()(M()()),this.$ui.entries=this.$dom.find(".entries"),this.$ui.messageEmpty=this.$dom.find(".message-empty"),this.$ui.messageEmpty.hide()}},{key:"initWithNavigationRequestOrResult",value:function(e){var t=this;return new Promise((function(i,n){e instanceof $.a?(t.domain=e.getDomain(),t.navigationRequest=e,t._executeNavigationRequest(e).then(i).catch(n)):e instanceof R.a?(t.domain=e.getRequest().getDomain(),t.navigationRequest=e.getRequest(),t._applyNavigationResult(e),i()):n()}))}},{key:"_executeNavigationRequest",value:function(e){var t=this;return this._apiRequestController&&(this._apiRequestController.abort(),this._apiRequestController=void 0),new Promise((function(i,n){t._apiRequestController={},P.a.getNavigation(e,t._apiRequestController).then((function(e){t._apiRequestController=void 0,t._applyNavigationResult(e),i()})).catch((function(){t._apiRequestController=void 0,n()}))}))}},{key:"_applyNavigationResult",value:function(e){this._setElements(e.getNavigationElements())}},{key:"_setElements",value:function(e){if(!(e instanceof Array))throw"Argument 'navigationElements' is not of type Array.";this.navigationElements=e,this.initializeEntries()}},{key:"initializeEntries",value:function(){this.finalizeSectionsAndViews(),this.sectionize()}},{key:"hasEntries",value:function(){return 0!==this.navigationElements.length}},{key:"sectionize",value:function(){var e=this.navigationElements;if(this.optShowIndices){var t=e.length;if(0!==t)for(var i=e[0].name.substr(0,1),n="",o=[],a=t-1,r=0;r<t;)n=e[r].name.substr(0,1),0===s.a.alphanumCase(n,i)?o.push(e[r]):(this.viewsSections.push(this.buildSection(o,i.toUpperCase())),o=[e[r]]),r===a&&this.viewsSections.push(this.buildSection(o,n.toUpperCase())),i=n,r++}else this.viewsSections.push(this.buildSection(e));for(var l=document.createDocumentFragment(),u=0;u<this.viewsSections.length;u++)l.appendChild(this.viewsSections[u].$dom[0]);this.$ui.entries.append(l)}},{key:"buildSection",value:function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(this.provideViewForElement(e[n]));for(var o=0;o<i.length;o++)this.initSubViews(i[o],!0);return new I(i,t)}},{key:"provideViewForElement",value:function(e){if(e.uuid in this.viewsEntriesByUuid)return this.viewsEntriesByUuid[e.uuid];var t=new x(this,e,this.optEntryMenu,this.optEntryDnD,this.optSelectMode,this.optLazyLoadSubEntries);return null!==this._highlightString&&this._applyHighlighting(t),0!==this._selectedUuids.length&&this._applySelectedState(t),0!==this._restrictedUuids.length&&this._applyRestrictedState(t),0!==this._disabledUuids.length&&this._applyDisabledState(t),0!==this._hiddenUuids.length&&this._applyHiddenState(t),this.optSelectMode&&a()(t).on(["".concat(x.SELECTED,".").concat(this._eventNamespace),"".concat(x.DESELECTED,".").concat(this._eventNamespace)].join(" "),this.handleEntrySelectionChanged.bind(this)),t.gallery.addEventListener(l.a.MOVED,this.handleGalleryMoved.bind(this),this._eventNamespace),t.gallery.addEventListener(l.a.REMOVED,this.handleGalleryRemoved.bind(this),this._eventNamespace),this.viewsEntriesByUuid[e.uuid]=t,t}},{key:"releaseView",value:function(e){a()(e).off(".".concat(this._eventNamespace)),e.gallery.removeEventListenersByNamespace(this._eventNamespace)}},{key:"finalizeSectionsAndViews",value:function(){for(var e=0;e<this.viewsSections.length;e++)this.viewsSections[e].finalize();for(var t in this.viewsEntriesByUuid)this.releaseView(this.viewsEntriesByUuid[t]);this.viewsSections=[],this.viewsEntriesByUuid={}}},{key:"initSubViews",value:function(e,t){if(0!==e.navigationElement.children.length&&null===e.subViews){for(var i,n=e.navigationElement.children,o=[],a=0;a<n.length;a++)i=this.provideViewForElement(n[a]),!0===t&&this.initSubViews(i,t),o.push(i);e.addSubViews(o),!0===this.optExpanded&&e.expand(!1,!0)}}},{key:"lazyLoadSubEntries",value:function(e,t){var i=this;if(!this.optLazyLoadSubEntries)throw"Lazy loading disabled.";if(0!==e.navigationElement.children.length)throw"Views navigation element already has children set.";var n=this.navigationRequest.clone().setPath(e.navigationElement.url).setFilterString(void 0);P.a.getNavigation(n).then((function(n){var o=n.getNavigationElements();0!==o.length&&(e.navigationElement.addChildElements(o),i.initSubViews(e,!0),"function"==typeof t&&t())}))}},{key:"expandAll",value:function(){for(var e in this.viewsEntriesByUuid)this.viewsEntriesByUuid[e].expand(!1,!1)}},{key:"highlightSubString",value:function(e){for(var t in this._highlightString=e||null,this.viewsEntriesByUuid)this._applyHighlighting(this.viewsEntriesByUuid[t])}},{key:"_applyHighlighting",value:function(e){null!==this._highlightString?e.highlightSubString(this._highlightString):e.unhighlight()}},{key:"disableEntries",value:function(e){for(var t in e instanceof Array||(e=[]),this._disabledUuids=e,this.viewsEntriesByUuid)this._applyDisabledState(this.viewsEntriesByUuid[t])}},{key:"_applyDisabledState",value:function(e){-1===this._disabledUuids.indexOf(e.navigationElement.uuid)?e.enable():e.disable()}},{key:"hideEntries",value:function(e){for(var t in e instanceof Array||(e=[]),this._hiddenUuids=e,this.viewsEntriesByUuid)this._applyHiddenState(this.viewsEntriesByUuid[t])}},{key:"_applyHiddenState",value:function(e){-1===this._hiddenUuids.indexOf(e.navigationElement.uuid)?e.show():e.hide()}},{key:"restrictEntries",value:function(e){for(var t in e instanceof Array||(e=[]),this._restrictedUuids=e,this.viewsEntriesByUuid)this._applyRestrictedState(this.viewsEntriesByUuid[t])}},{key:"_applyRestrictedState",value:function(e){-1===this._restrictedUuids.indexOf(e.navigationElement.uuid)?e.resetRestricted():e.restrict()}},{key:"isRestricted",value:function(e){return this._restrictedUuids.includes(e)}},{key:"selectEntries",value:function(e){for(var t in e instanceof Array||(e=[]),this._selectedUuids=e,this.viewsEntriesByUuid)this._applySelectedState(this.viewsEntriesByUuid[t])}},{key:"_applySelectedState",value:function(e){-1===this._selectedUuids.indexOf(e.navigationElement.uuid)?e.deselect():e.select()}},{key:"getSelectedUuids",value:function(){return this._selectedUuids.concat()}},{key:"setFilterValue",value:function(e){var t=this;return new Promise((function(i,o){"string"==typeof e&&""!==e?(t._preFilterRequest||(t._preFilterRequest=t.navigationRequest,t._filterRequest=t.navigationRequest.clone().setDepth(0)),t._filterRequest.setFilterString(e),t.navigationRequest=t._filterRequest,t._executeNavigationRequest(t._filterRequest).then((function(){t.expandAll(),t.highlightSubString(e),t.hasEntries()?t.$ui.messageEmpty.hide():t.$ui.messageEmpty.html(n.a.p__("gallerylisting","message_empty",e)).show(),i()})).catch(o)):(t._preFilterRequest&&(t.navigationRequest=t._preFilterRequest,t._executeNavigationRequest(t._preFilterRequest).then((function(){t.highlightSubString(null),t.$ui.messageEmpty.hide(),i()})).catch(o)),t._preFilterRequest=void 0,t._filterRequest=void 0)}))}},{key:"handleEntrySelectionChanged",value:function(t){var i=t.currentTarget,n=i.navigationElement.uuid;if(i.selected){var o;if(this._selectedUuids.push(n),this.optSelectMode===e.SELECT_MODE_SINGLE)for(var r in this.viewsEntriesByUuid)(o=this.viewsEntriesByUuid[r]).selected&&r!==n&&o.deselect();a()(this).trigger(e.GALLERY_SELECTED,[i.gallery])}else{var s=this._selectedUuids.indexOf(n);-1!==s&&this._selectedUuids.splice(s,1),a()(this).trigger(e.GALLERY_DESELECTED,[i.gallery])}}},{key:"handleGalleryMoved",value:function(e){var t=this,i=e.target;this._executeNavigationRequest(this.navigationRequest).then((function(){i.uuid in t.viewsEntriesByUuid&&t.viewsEntriesByUuid[i.uuid].blink()}))}},{key:"handleGalleryRemoved",value:function(){this._executeNavigationRequest(this.navigationRequest)}}])&&N(t.prototype,i),o&&N(t,o),e}();t.a=U},,,,function(e,t){e.exports=function(e){var t='<div class="gallery-listing-entry"> <div class="button-wrapper"> <a class="button';return"limit_locked"===e.isLocked&&(t+=" limitlocked"),t+='" href="',null===e.optSelectMode&&(t+=""+e.url),t+='" title="'+e.name+'" draggable="true">'+e.name+'</a> <a href="" class="bullet" draggable="false"></a> ',!e.optSelectMode&&e.numFiles&&(t+='<span class="num-images">'+e.numFiles+"</span>"),t+=" ",e.optMenu&&(t+=' <a href="" class="btn--toggle-menu" draggable="false"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="4" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="8" cy="8" r="1"/></svg> </a> '),t+=" ",e.optSelectMode&&(t+=' <div class="checker"></div> '),t+=' </div> <div class="container"></div></div>'}},function(e,t){e.exports=function(e){var t='<ul class="gallery-listing-entry-menu cmp-overlay-menu icons"> <li><a href="" class="btn--fav"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><polygon points="10 1.569 11.889 7.382 18 7.382 13.056 10.974 14.944 16.786 10 13.194 5.056 16.786 6.944 10.974 2 7.382 8.111 7.382 10 1.569" fill="#ccc"></polygon></svg><span>'+i18n.p__("gallery.actions","favorize")+'</span></a></li> <li><a href="" class="btn--rename"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M4.55 12.62l-1.41 1.42v2.82h2.82l1.42-1.41m-2.123-3.535l7.778-7.778 2.83 2.828-7.78 7.778zM16.57 4.84l-1.41-1.41c-.39-.39-1.02-.39-1.41 0l2.83 2.83c.38-.39.38-1.03-.01-1.42z"/></svg><span>'+i18n.p__("gallery.actions","rename")+'</span></a></li> <li><a href="" class="btn--move"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="4" cy="4" r="2"/><circle cx="16" cy="16" r="2"/><path d="M13 13l-1.03-3.85-1.06 1.06-3.06-3.06c-.2-.2-.51-.2-.71 0s-.2.51 0 .71l3.06 3.06-1.06 1.06L13 13z"/></svg><span>';return e.isAllowedCopy?t+=""+i18n.p__("gallery.actions","move/copy"):t+=""+i18n.p__("gallery.actions","move"),t+='</span></a></li> <li><a href="" class="btn--remove"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M15.5 5H13V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4.5c-.28 0-.5.22-.5.5v1c0 .28.22.5.5.5H5v8c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V7h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5zM8 4h4v1H8V4zm4.5 10h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5z"/></svg><span>'+i18n.p__("gallery.actions","remove")+"</span></a></li></ul>"}},function(e,t){e.exports=function(e){var t='<div class="gallery-listing-section"> ';return e.title&&(t+='<div class="title"><span>'+e.title+"</span></div>"),t+=' <div class="entries"></div></div>'}},function(e,t){e.exports=function(e){return'<div class="gallery-listing"> <div class="entries"></div> <span class="message-empty"></span></div>'}},function(e,t){e.exports=function(e){var t='<div class="ui-hint-tooltip"> <div class="content-placeholder"></div> ';return e.openable&&(t+=' <span class="click-hint">'+i18n.p__("dialog","Click to open")+"</span> "),t+="</div>"}},function(e,t){e.exports=function(e){return'<div class="ui-hint-button"> <span>?</span></div>'}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(3),r=i(2),s=i(91),l=i(13),u=i(51),c=i(38),h=i(8),d=i(18),f=i(36),p=i(37),v=i(52),g=i(81),m=i(7),y=i(23),b=i(150),_=i.n(b),w=i(82),E=i.n(w);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var T=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];S(this,e),this.gallery=t,this.optAdmin=i,this.optShowParent=n,this.optLazyLoadImage=o,this.isAllowedCopy=f.a.isAllowed(p.a.COPY_GALLERIES),this.parentAvailable=!1,this.menuVisible=!1,this.inView=!1,this.width=null,this.thumb=null,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,n,b;return t=e,b=[{key:"HEIGHT_RATIO",get:function(){return.5625}}],(n=[{key:"createDOM",value:function(){var e={gallery:this.gallery,optAdmin:this.optAdmin,isAllowedCopy:this.isAllowedCopy};this.$dom=o()(_()(e)),this.$ui.headContainer=this.$dom.find(".head > .container"),this.$ui.name=this.$dom.find(".name"),this.$ui.numFiles=this.$dom.find(".num-files"),this.$ui.parent=this.$dom.find("a.parent"),this.$ui.content=this.$dom.find(".content"),this.$ui.iconNoImage=this.$dom.find("svg.icon-no-image"),this.$ui.menuToggle=this.$dom.find(".btn--menu-toggle"),this.$ui.menuEntries=this.$dom.find(".menu-entries"),this.$ui.menuBtnFav=this.$ui.menuEntries.find(".btn--fav"),this.$ui.menuBtnFavLabel=this.$ui.menuEntries.find(".btn--fav span"),this.$ui.menuBtnRename=this.$ui.menuEntries.find(".btn--rename"),this.$ui.menuBtnMove=this.$ui.menuEntries.find(".btn--move"),this.$ui.menuBtnRemove=this.$ui.menuEntries.find(".btn--remove")}},{key:"initialize",value:function(){var e=this;this.setPaths(),this.setParent(),0===this.gallery.numFiles?this.$ui.numFiles.hide():this.$ui.numFiles.text(this.gallery.numFiles),"limit_locked"===this.gallery.status&&this.$dom.addClass("limitlocked"),(this.optAdmin||this.optShowParent)&&this.$dom.hover((function(){e.optAdmin&&e.$ui.menuToggle.stop().fadeIn(200),e.optShowParent&&e.parentAvailable&&(e.$ui.headContainer.css("height",26+e.$ui.parent.outerHeight()-3),e.$ui.parent.css("top",-3))}),(function(){e.optAdmin&&(e.$ui.menuToggle.stop().fadeOut(200),e.hideMenu()),e.optShowParent&&e.parentAvailable&&(e.$ui.headContainer.css("height",26),e.$ui.parent.css("top",3))})),this.initMenu(),this.gallery.addEventListener(h.a.RENAMED,this.handleGalleryRenamed.bind(this)),this.gallery.addEventListener(h.a.MOVED,this.handleGalleryMoved.bind(this)),this.gallery.addEventListener(h.a.REMOVED,this.handleGalleryRemoved.bind(this)),this.gallery.addEventListener(h.a.FAVORIZED,this.handleGalleryFavorized.bind(this)),this.gallery.addEventListener(h.a.UNFAVORIZED,this.handleGalleryUnfavorized.bind(this)),this.optAdmin&&this.initDragAndDrop(),this.optLazyLoadImage&&c.a.getInstance().addElements([this.$dom[0]],this.handleInView.bind(this))}},{key:"initMenu",value:function(){var e=this;this.optAdmin&&0!==this.$ui.menuEntries.length&&(this.$ui.menuToggle.on("click",(function(){e.menuVisible?e.hideMenu():e.showMenu()})),this.$dom.on("contextmenu",(function(t){t.preventDefault(),e.showMenu()})),this.$ui.menuBtnFav.on("click",(function(t){t.preventDefault(),e.actionToggleFav()})),this.$ui.menuBtnRename.on("click",(function(t){t.preventDefault(),e.actionRename()})),this.$ui.menuBtnMove.on("click",(function(t){t.preventDefault(),e.actionMove()})),this.$ui.menuBtnRemove.on("click",(function(t){t.preventDefault(),e.actionRemove()})),this.updateFavButtonState(this.gallery.isFavorite),this.$ui.menuToggle.hide())}},{key:"showMenu",value:function(){if(!this.menuVisible){var e=u.a.getClientPosition(),t=s.a.toLocalPosition(e.x,e.y,this.$dom[0]);if(this.$ui.menuEntries.css({left:t.x-18,top:t.y-18}),this.$ui.menuEntries.stop().fadeIn(200),this.$ui.menuEntries[0].getBoundingClientRect){var i=this.$ui.menuEntries[0].getBoundingClientRect();i.right>l.a.getWidth()&&this.$ui.menuEntries.css({left:t.x-i.width+18})}this.menuVisible=!0}}},{key:"hideMenu",value:function(){this.menuVisible&&(this.$ui.menuEntries.stop().hide(),this.menuVisible=!1)}},{key:"setPaths",value:function(){this.$ui.name.text(this.gallery.name).attr({title:this.gallery.name,href:this.gallery.urlRel}),this.$ui.content.attr("href",this.gallery.urlRel)}},{key:"setParent",value:function(){if(this.optShowParent){var e=this.gallery.parentGallery;null===e?(this.$ui.parent.text("").attr("href","").hide(),this.parentAvailable=!1):(this.$ui.parent.text(a.a.p__("gallery","in %s",e.name)).attr("href",e.urlRel).show(),this.parentAvailable=!0)}}},{key:"setWidth",value:function(t){var i=parseInt(t,10);this.width!==i&&(this.width=i,this.$dom.css("width",this.width),this.$ui.content.css({width:this.width,height:parseInt(this.width*e.HEIGHT_RATIO)}),this.optLazyLoadImage&&!this.inView||this.updateImageResponsive())}},{key:"updateImageResponsive",value:function(){if(this.gallery.teaserImage){var t=window.devicePixelRatio||1,i=this.gallery.teaserImage.thumbnails.getThumbFitting(this.width*t,parseInt(this.width*e.HEIGHT_RATIO)*t,!0,!0);i!==this.thumb&&(this.thumb=i,this.$ui.content.css("background-image","url('".concat(i.url,"')")),this.$ui.iconNoImage.hide())}}},{key:"initDragAndDrop",value:function(){var e=this;v.a.registerDraggable(this.$dom[0],new g.a(this.gallery,"gallery"),{onDragStart:function(t){t.setDragGhost(o()(E()({galleries:[e.gallery]})),-20,-10)}}),v.a.registerTarget(this.$dom[0],{onValidateLoad:function(t){if(!t)return 0;if(t.elm===e.$dom[0])return 0;if(t.load){var i=t.load;if("gallery"===i.type){var n=i.content;return n.uuid===e.gallery.uuid?-1:n.parentGalleryUuid===e.gallery.uuid?-1:0===e.gallery.path.indexOf(n.path)?-1:1}if("files"===i.type)return 1}return 0},onDrop:function(t){if(t&&t.load)if("gallery"===t.load.type){var n=t.load.content;if(n.parentGalleryUuid===e.gallery.uuid)return;if(0===e.gallery.path.indexOf(n.path))return;Promise.all([i.e(1),i.e(16)]).then((function(){var t=[i(209)];(function(t){var i=t.default,r=new i(n,e.gallery);o()(r).on(i.MOVED,(function(){m.a.open((new y.a).setContent(a.a.p__("gallery","move_success",n.name,e.gallery.name)).setTimeout(5).setLevel(y.a.LEVEL_SUCCESS))})),r.open()}).apply(null,t)})).catch(i.oe)}else if("files"===t.load.type){var r=t.load.content,s=[];for(var l in r)s.push(r[l].uuid);Promise.all([i.e(5),i.e(11)]).then((function(){var t=[i(216)];(function(t){var i=t.default;new i(e.gallery.domain,e.gallery,s,i.MODE_MOVE,e.gallery.uuid)}).apply(null,t)})).catch(i.oe)}}})}},{key:"actionRename",value:function(){var e=this;Promise.all([i.e(1),i.e(18)]).then((function(){var t=[i(210)];(function(t){new(0,t.default)(e.gallery).open()}).apply(null,t)})).catch(i.oe)}},{key:"actionMove",value:function(){var e=this;Promise.all([i.e(1),i.e(9),i.e(14)]).then((function(){var t=[i(214)];(function(t){new(0,t.default)(e.gallery).open()}).apply(null,t)})).catch(i.oe)}},{key:"actionToggleFav",value:function(){var e=this,t=new d.a(r.a.get("user")||r.a.get("visitor").user);this.gallery.isFavorite?(t.unfavorizeGallery(this.gallery,(function(t){t||e.updateFavButtonState(!0)})),this.updateFavButtonState(!1)):(t.favorizeGallery(this.gallery,(function(t){t||e.updateFavButtonState(!0)})),this.updateFavButtonState(!1))}},{key:"actionRemove",value:function(){var e=this;Promise.all([i.e(1),i.e(17)]).then((function(){var t=[i(211)];(function(t){var i=t.default,n=new i(e.gallery);o()(n).on(i.REMOVED,(function(){m.a.open((new y.a).setContent(a.a.p__("gallery","remove_success",e.gallery.name)).setDelay(1).setLevel(y.a.LEVEL_SUCCESS))})),n.open()}).apply(null,t)})).catch(i.oe)}},{key:"handleInView",value:function(){this.inView=!0,this.updateImageResponsive()}},{key:"handleGalleryRenamed",value:function(){this.setPaths()}},{key:"handleGalleryMoved",value:function(){this.setPaths(),this.setParent()}},{key:"handleGalleryRemoved",value:function(){this.finalize(!0)}},{key:"handleGalleryFavorized",value:function(){this.updateFavButtonState(!0)}},{key:"handleGalleryUnfavorized",value:function(){this.updateFavButtonState(!1)}},{key:"updateFavButtonState",value:function(e){this.$ui.menuBtnFav.toggleClass("active",e),this.$ui.menuBtnFavLabel.html(a.a.p__("gallery.actions",e?"unfavorize":"favorize"))}},{key:"finalize",value:function(e){var t=this;!0===e?this.$dom.fadeOut(200,(function(){t.$dom.remove()})):this.$dom.remove()}}])&&k(t.prototype,n),b&&k(t,b),e}();t.a=T},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._gallery=t,this._pretty=void 0,this._overrideRole=void 0,this._limit=void 0,this._offset=void 0,this._filter=void 0}var t,i,o;return t=e,o=[{key:"OVERRIDE_ROLE_GUEST",get:function(){return"guest"}},{key:"FILTER_TYPE_FLAG",get:function(){return"flag"}}],(i=[{key:"getGallery",value:function(){return this._gallery}},{key:"getPretty",value:function(){return this._pretty}},{key:"setPretty",value:function(e){return this._pretty=Boolean(e),this}},{key:"getOverrideRole",value:function(){return this._overrideRole}},{key:"setOverrideRole",value:function(e){return this._overrideRole=e,this}},{key:"getLimit",value:function(){return this._limit}},{key:"setLimit",value:function(e){return this._limit=e,this}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e){return this._offset=e,this}},{key:"getFilter",value:function(){return this._filter}},{key:"setFilter",value:function(e,t){return this._filter="".concat(e,":").concat(t),this}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t,i){"use strict";var n=i(9);t.a={finalizeTweens:function(e,t,i){if(void 0!==e)for(var o=n.gsap.getTweensOf(e,t),a=null,r=0;r<o.length;r++)!0===(a=o[r]).isActive()&&(a.kill(e,t),!0===i&&a.vars.onComplete&&a.vars.onComplete.call())}}},,,,,,function(e,t,i){var n,o,a;o=[i(0)],void 0===(a="function"==typeof(n=function(e){var t,i,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(e.event.fixHooks)for(var r=n.length;r;)e.event.fixHooks[n[--r]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),n=i["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(n){var o=n||window.event,r=a.call(arguments,1),l=0,h=0,d=0,f=0,p=0,v=0;if((n=e.event.fix(o)).type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(h=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(h=-1*d,d=0),l=0===d?h:d,"deltaY"in o&&(l=d=-1*o.deltaY),"deltaX"in o&&(h=o.deltaX,0===d&&(l=-1*h)),0!==d||0!==h){if(1===o.deltaMode){var g=e.data(this,"mousewheel-line-height");l*=g,d*=g,h*=g}else if(2===o.deltaMode){var m=e.data(this,"mousewheel-page-height");l*=m,d*=m,h*=m}if(f=Math.max(Math.abs(d),Math.abs(h)),(!i||f<i)&&(i=f,c(o,f)&&(i/=40)),c(o,f)&&(l/=40,h/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/i),h=Math[h>=1?"floor":"ceil"](h/i),d=Math[d>=1?"floor":"ceil"](d/i),s.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=n.clientX-y.left,v=n.clientY-y.top}return n.deltaX=h,n.deltaY=d,n.deltaFactor=i,n.offsetX=p,n.offsetY=v,n.deltaMode=0,r.unshift(n,l,h,d),t&&clearTimeout(t),t=setTimeout(u,200),(e.event.dispatch||e.event.handle).apply(this,r)}}function u(){i=null}function c(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})?n.apply(t,o):n)||(e.exports=a)},,,function(e,t,i){"use strict";var n=i(63),o=i.n(n),a=i(65),r=i(4),s=i(5),l=i(34);function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.files=[]}var t,i,n;return t=e,(i=[{key:"addFile",value:function(e){this.files.push(e)}},{key:"sortFiles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.files.sort(e),!0===t&&this.files.reverse()}}])&&u(t.prototype,i),n&&u(t,n),e}();function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d(this,t),(i=p(this,v(t).call(this)))._files=[],i._filesOrdered=void 0,i._fileGroups=void 0,i._fileGroupsById=void 0,i._currentSortOrder=e,i._currentSortReverse=n,i._resortOnFileAddAndRemove=!1,"time_last_updated"===i._currentSortOrder&&(i._currentSortOrder=l.a.TIME_UPLOADED),i}var i,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),i=t,r=[{key:"_sortFilesByFilename",value:function(e,t){return o.a.alphanumCase(e.filename,t.filename)}},{key:"_sortFilesByFlag",value:function(e,t){var i=["red","orange","green","final","none"];return i.indexOf(e.flag)-i.indexOf(t.flag)}},{key:"_sortFilesByFilesize",value:function(e,t){return e.filesize-t.filesize}},{key:"_sortFilesByTimeCaptured",value:function(e,t){return(e.image.captureDate?e.image.captureDate.getTime():-1/0)-(t.image.captureDate?t.image.captureDate.getTime():-1/0)}},{key:"_sortFilesByTimeUploaded",value:function(e,t){return e.timeUploaded-t.timeUploaded}},{key:"_sortFilesByExtension",value:function(e,t){return o.a.alphanumCase(a.a.extractFileExtension(e.filename),a.a.extractFileExtension(t.filename))}},{key:"_sortFilesByImageSize",value:function(e,t){return(e.image?e.image.width+e.image.height:0)-(t.image?t.image.width+t.image.height:0)}},{key:"_sortFilesManually",value:function(e,t){return e.order-t.order}},{key:"SORTED",get:function(){return"sorted"}}],(n=[{key:"addFiles",value:function(e){this._files=this._files.concat(e),this._resortOnFileAddAndRemove&&this.resort()}},{key:"removeFiles",value:function(e){for(var t,i=0,n=e.length;i<n;i++){t=e[i];for(var o=0,a=this._files.length;o<a;o++)if(this._files[o]===t){this._files.splice(o,1);break}}this._resortOnFileAddAndRemove&&this.resort()}},{key:"sortBy",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentSortOrder=e,this._currentSortReverse=i,0!==this._files.length){this._clearGroups(),this._filesOrdered=[];for(var n,o=0,a=this._files.length;o<a;o++)(n=this._files[o]).visible&&this.getGroupForFile(n,e).addFile(n);if(void 0!==this._fileGroups){this._sortGroups(e,i);for(var r=0,l=this._fileGroups.length;r<l;r++)this._filesOrdered=this._filesOrdered.concat(this._fileGroups[r].files);this.dispatchEvent(new s.a(t.SORTED))}}}},{key:"resort",value:function(){this.sortBy(this._currentSortOrder,this._currentSortReverse)}},{key:"_clearGroups",value:function(){this._fileGroups=void 0,this._fileGroupsById=void 0}},{key:"_getGroup",value:function(e){if(void 0!==this._fileGroupsById&&this._fileGroupsById[e])return this._fileGroupsById[e];var t=new c(e);return void 0===this._fileGroups&&(this._fileGroups=[]),void 0===this._fileGroupsById&&(this._fileGroupsById={}),this._fileGroups.push(t),this._fileGroupsById[e]=t,t}},{key:"getGroupForFile",value:function(e,t){switch(t){case l.a.FILENAME:return this._getGroup("main");case l.a.FLAG:return this._getGroup(e.flag);case l.a.TIME_CAPTURED:return e.image&&e.image.captureDate?this._getGroup("main"):this._getGroup("none");case l.a.EXTENSION:return this._getGroup(a.a.extractFileExtension(e.filename).toLowerCase());case l.a.IMAGE_SIZE:return e.image?this._getGroup("main"):this._getGroup("none");default:return this._getGroup("main")}}},{key:"_sortGroups",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==this._fileGroups)switch(e){case l.a.FILENAME:default:for(var n=0;n<this._fileGroups.length;n++)this._fileGroups[n].sortFiles(t._sortFilesByFilename,i);break;case l.a.FLAG:var a=i?["final","green","orange","red","none"]:["red","orange","green","final","none"];this._fileGroups.sort((function(e,t){return a.indexOf(e.id)-a.indexOf(t.id)}));for(var r=0;r<this._fileGroups.length;r++)this._fileGroups[r].sortFiles(t._sortFilesByFilename);break;case l.a.TIME_CAPTURED:var s=["main","none"];this._fileGroups.sort((function(e,t){return s.indexOf(e.id)-s.indexOf(t.id)}));for(var u=0;u<this._fileGroups.length;u++)"none"===this._fileGroups[u].id?this._fileGroups[u].sortFiles(t._sortFilesByFilename):this._fileGroups[u].sortFiles(t._sortFilesByTimeCaptured,i);break;case l.a.FILESIZE:for(var c=0;c<this._fileGroups.length;c++)this._fileGroups[c].sortFiles(t._sortFilesByFilesize,i);break;case l.a.TIME_UPLOADED:for(var h=0;h<this._fileGroups.length;h++)this._fileGroups[h].sortFiles(t._sortFilesByTimeUploaded,i);break;case l.a.EXTENSION:this._fileGroups.sort((function(e,t){return i?o.a.alphanumCase(t.id,e.id):o.a.alphanumCase(e.id,t.id)}));for(var d=0;d<this._fileGroups.length;d++)this._fileGroups[d].sortFiles(t._sortFilesByFilename);break;case l.a.IMAGE_SIZE:for(var f=0;f<this._fileGroups.length;f++)this._fileGroups[f].sortFiles(t._sortFilesByImageSize,i);break;case l.a.MANUALLY:for(var p=0;p<this._fileGroups.length;p++)this._fileGroups[p].sortFiles(t._sortFilesManually,i)}}},{key:"resortOnFileAddAndRemove",get:function(){return this._resortOnFileAddAndRemove},set:function(e){this._resortOnFileAddAndRemove=Boolean(e)}},{key:"currentSortOrder",get:function(){return this._currentSortOrder}},{key:"currentSortReverse",get:function(){return this._currentSortReverse}},{key:"filesOrdered",get:function(){return this._filesOrdered||[]}},{key:"fileGroups",get:function(){return this._fileGroups||[]}}])&&f(i.prototype,n),r&&f(i,r),t}(r.a);t.a=m},,,,function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=a(this,r(t).call(this)))._domElementMap={},e._cacheMap={},e}var i,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),i=t,(n=[{key:"_setDomElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(!(e instanceof HTMLElement))throw"element is not of type HTMLElement";if(t in this._domElementMap)throw"dom element with id '".concat(t,"' is already set");this._domElementMap[t]=e}},{key:"getDomElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";if(e in this._domElementMap)return this._domElementMap[e];throw"no dom element set with id '".concat(e,"'")}},{key:"_cache",value:function(e,t){if(void 0===t){if(!(e in this._cacheMap))throw"no cache element set for key '".concat(e,"'");return this._cacheMap[e]}return this._cacheMap[e]=t,t}},{key:"_isCached",value:function(e){return e in this._cacheMap}}])&&o(i.prototype,n),l&&o(i,l),t}(i(4).a);t.a=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.x=t,this.y=i}},function(e,t,i){"use strict";var n=i(1),o=i(15);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,r=[{key:"setColorFlag",value:function(e,t,i){for(var a=[],r=0,s=t.length;r<s;r++)a.push(t[r].uuid);return new Promise((function(r,s){n.a.post("/api/files/setcolorflag",{dataType:n.a.DATATYPE_JSON,data:{domain_uuid:e,file_uuids:a,flag:i},responseType:n.a.RESPONSETYPE_JSON,retryOnBadResponse:!1,onComplete:function(e,n){if(n.success){for(var a=0,l=t.length;a<l;a++)t[a].image&&t[a].setFlag(i);r()}else s(o.a.extractErrorFromApiResponse(e))}})}))}}],(i=null)&&a(t.prototype,i),r&&a(t,r),e}();t.a=r},function(e,t,i){"use strict";var n=i(1),o=i(15);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,r;return t=e,r=[{key:"acknowledgeStep",value:function(e,t){return new Promise((function(i,a){n.a.post("/api/onboarding/acknowledgeintrostep",{dataType:n.a.DATATYPE_JSON,data:{funnel_id:e,step_code:t},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,t){t.success?i():a(o.a.extractErrorFromApiResponse(e))},lock:!0})}))}},{key:"cancelIntroFunnel",value:function(e){return new Promise((function(t,i){n.a.post("/api/onboarding/cancelintrofunnel",{dataType:n.a.DATATYPE_JSON,data:{funnel_id:e},responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,n){n.success?t():i(o.a.extractErrorFromApiResponse(e))},lock:!0})}))}}],(i=null)&&a(t.prototype,i),r&&a(t,r),e}();t.a=r},function(e,t){e.exports=function(e){var t='<div class="gallery-box" draggable="true">  <a class="content" href="" target="_self" draggable="false"> <svg class="icon-no-image" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M40.324,30a5,5,0,0,1,4.16,2.227l1.031,1.547A5,5,0,0,0,49.676,36H78a2,2,0,0,1,2,2V68a2,2,0,0,1-2,2H22a2,2,0,0,1-2-2V32a2,2,0,0,1,2-2H40.324m0-2H22a4,4,0,0,0-4,4V68a4,4,0,0,0,4,4H78a4,4,0,0,0,4-4V38a4,4,0,0,0-4-4H49.676a2.994,2.994,0,0,1-2.5-1.336l-1.031-1.547A6.986,6.986,0,0,0,40.324,28Z"/><rect x="23" y="33" width="14" height="2" rx="1" ry="1"/></svg> </a> <div class="head"> <div class="container"> <a class="name" href="" target="_self" draggable="false"></a> <span class="num-files"></span> <a href="" target="_self" class="parent"></a> </div> </div>  ';return e.optAdmin&&(t+=' <div class="btn--menu-toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="4" cy="8" r="1"></circle><circle cx="12" cy="8" r="1"></circle><circle cx="8" cy="8" r="1"></circle></svg> </div> <ul class="menu-entries cmp-overlay-menu icons"> <li> <a href="" class="btn--fav"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><polygon points="10 1.569 11.889 7.382 18 7.382 13.056 10.974 14.944 16.786 10 13.194 5.056 16.786 6.944 10.974 2 7.382 8.111 7.382 10 1.569" fill="#ccc"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("gallery.actions","favorize")+'</span> </a> </li> <li> <a href="" class="btn--rename"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M4.55 12.62l-1.41 1.42v2.82h2.82l1.42-1.41m-2.123-3.535l7.778-7.778 2.83 2.828-7.78 7.778zM16.57 4.84l-1.41-1.41c-.39-.39-1.02-.39-1.41 0l2.83 2.83c.38-.39.38-1.03-.01-1.42z"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("gallery.actions","rename")+'</span> </a> </li> <li> <a href="" class="btn--move"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="4" cy="4" r="2"/><circle cx="16" cy="16" r="2"/><path d="M13 13l-1.03-3.85-1.06 1.06-3.06-3.06c-.2-.2-.51-.2-.71 0s-.2.51 0 .71l3.06 3.06-1.06 1.06L13 13z"/></svg>\x3c!-- --\x3e<span>',e.isAllowedCopy?t+=""+i18n.p__("gallery.actions","move/copy"):t+=""+i18n.p__("gallery.actions","move"),t+='</span> </a> </li> <li> <a href="" class="btn--remove"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M15.5 5H13V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4.5c-.28 0-.5.22-.5.5v1c0 .28.22.5.5.5H5v8c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V7h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5zM8 4h4v1H8V4zm4.5 10h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5z"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("gallery.actions","remove")+"</span> </a> </li> </ul> "),t+=" </div>"}},,,,,function(e,t,i){"use strict";var n=i(4),o=i(79);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=s(this,l(t).call(this)))._filesByUuid={},i._filesByFilename={},i._numFiles=0,e instanceof Array&&i.add(e),i}var i,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),i=t,(n=[{key:"add",value:function(e){for(var t,i=[],n=0,a=e.length;n<a;n++)(t=e[n]).uuid in this._filesByUuid||(this._filesByUuid[t.uuid]=t,this._filesByFilename[t.filename]=t,i.push(t));this._numFiles+=i.length,this.dispatchEvent(new o.a(o.a.FILES_ADDED).setFiles(i))}},{key:"remove",value:function(e){for(var t,i=[],n=0,a=e.length;n<a;n++)(t=e[n]).uuid in this._filesByUuid&&(delete this._filesByUuid[t.uuid],delete this._filesByFilename[t.filename],i.push(t));this._numFiles-=i.length,this.dispatchEvent(new o.a(o.a.FILES_REMOVED).setFiles(i))}},{key:"each",value:function(e,t){for(var i in this._filesByUuid)if(!1===e.call(t,this._filesByUuid[i]))break}},{key:"isEmpty",value:function(){return 0===this._numFiles}},{key:"export",value:function(){var e=[];for(var t in this._filesByUuid)e.push(this._filesByUuid[t]);return e}},{key:"count",value:function(){return this._numFiles}},{key:"countSelectedFiles",value:function(){var e=0;for(var t in this._filesByUuid)this._filesByUuid[t].selected&&e++;return e}},{key:"countVisibleFiles",value:function(){var e=0;for(var t in this._filesByUuid)this._filesByUuid[t].visible&&e++;return e}},{key:"getFileByUuid",value:function(e){return e in this._filesByUuid?this._filesByUuid[e]:null}},{key:"getFileByFilename",value:function(e){return e in this._filesByFilename?this._filesByFilename[e]:null}},{key:"getSelectedFiles",value:function(){var e=[];for(var t in this._filesByUuid)this._filesByUuid[t].selected&&e.push(this._filesByUuid[t]);return e}},{key:"finalize",value:function(){this._filesByUuid=null,this._filesByFilename=null,this._numFiles=void 0}}])&&r(i.prototype,n),a&&r(i,a),t}(n.a);t.a=c},function(e,t,i){"use strict";var n=i(2),o=i(149);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id,this._stepsLinear=[],this._stepsRandom={},this._initSteps(t.steps)}var t,i,n;return t=e,(i=[{key:"_initSteps",value:function(e){if(e)for(var t=0,i=e.length;t<i;t++)e[t].is_linear?this._stepsLinear.push(e[t].code):this._stepsRandom[e[t].code]=void 0}},{key:"getNextLinearStep",value:function(){return 0===this._stepsLinear.length?void 0:this._stepsLinear[0]}},{key:"allowForStep",value:function(e){return e in this._stepsRandom||0!==this._stepsLinear.length&&this._stepsLinear[0]===e}},{key:"acknowledgeStep",value:function(e,t,i){var n=this;if(!this.allowForStep(e))throw"Step code '".concat(e,"' is not valid for acknowledgement.");o.a.acknowledgeStep(this.id,e).then((function(){if(e in n._stepsRandom)delete n._stepsRandom[e];else{if(0===n._stepsLinear.length||n._stepsLinear[0]!==e)throw"Step code '".concat(e,"' not found for stack removal.");n._stepsLinear.shift()}"function"==typeof t&&t()})).catch((function(e){return"function"==typeof i&&i(e)}))}}])&&r(t.prototype,i),n&&r(t,n),e}();t.a=new s(n.a.get("introFunnel")||void 0)},function(e,t,i){"use strict";var n=i(1),o=i(15),a=i(14),r=i(67);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasMore=!1,this.lastSortKey=void 0,this.files=[]}var t,i,n;return t=e,(i=[{key:"addFile",value:function(e){this.files.push(e)}},{key:"getFiles",value:function(){return this.files}}])&&s(t.prototype,i),n&&s(t,n),e}();function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"getFiles",value:function(t){return new Promise((function(i,r){var s=[];!0===t.getPretty()&&s.push("pretty=true");var u=t.getOverrideRole();"string"==typeof u&&s.push("overrideRole=".concat(u));var c=t.getLimit();"number"==typeof c&&s.push("limit=".concat(c));var h=t.getOffset();"string"==typeof h&&s.push("offset=".concat(h));var d=t.getFilter();"string"==typeof d&&s.push("filter=".concat(d));var f=a.default.encodePathForAjax(t.getGallery().urlRel),p=0===s.length?"":"?".concat(s.join("&"));n.a.get("/api/content/".concat(f,"/files").concat(p),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(t,n){if(n.success){var a=new l;a.hasMore=t.hasMore,a.lastSortKey=t.lastSortKey;for(var s=t.files,u=0,c=s.length;u<c;u++)a.addFile(e._convertFilePreviewDataToFile(s[u]));i(a)}else r(o.a.extractErrorFromApiResponse(t))},lock:!0})}))}},{key:"_convertFilePreviewDataToFile",value:function(e){var t={uuid:e.key,filetype:"image"===e.type?"image":"file",filename:e.name,filesize:e.size,timeUploaded:new Date(e.uploadedAt).getTime()/1e3,order:0,status:e.locked?"limit_locked":e.status,flag:e.flag||"none",category:e.type};return"dimensions"in e&&(t.image={width:e.dimensions.width,height:e.dimensions.height,thumbnails:e.thumbnails,captureDate:e.capturedAt,numComments:e.numComments}),r.a.instantiateFromExport(t)}}],(i=null)&&u(t.prototype,i),s&&u(t,s),e}();t.a=c},,function(e,t,i){"use strict";t.a={READY:"public",LIMIT_LOCKED:"limit_locked",INVISIBLE:"invisible",STORED:"stored"}},,,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(3),r=i(46),s=i(60),l=i(113),u=i(90),c=i(184),h=i.n(c);function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.layout=i,this.title=n,this.context=o,this.width=null,this.layoutBreakpoints=[],this.views=[],this.viewsByFileUuid={},this.viewDNDHint=null,this.clearfix=!1,this.gridElmWidth=null,this.masonry=null,this.masonryElmWidth=null,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"REQUEST_DOWNLOAD",get:function(){return"request_download"}},{key:"REQUEST_SELECTION",get:function(){return"request_selection"}}],(i=[{key:"createDOM",value:function(){var e={title:this.title,layout:this.layout,optAdmin:this.context.isAdminModeEnabled(),optSelection:this.context.isSelectionEnabled(),optFlags:this.context.isFlagsEnabled(),optDownload:this.context.isDownloadEnabled(),optComments:this.context.isCommentsEnabled(),i18n:a.a};this.$dom=o()(h()(e)),this.$ui.head=this.$dom.find(".head"),this.$ui.btnSelect=this.$ui.head.find(".btn-select"),this.$ui.btnDownload=this.$ui.head.find(".btn-download"),this.$ui.body=this.$dom.find(".body")}},{key:"initialize",value:function(){var t=this;switch(this.$dom.attr("data-layout",this.layout),this.$ui.btnSelect.on("click",(function(i){i.preventDefault(),o()(t).trigger(e.REQUEST_SELECTION)})),this.$ui.btnDownload.on("click",(function(i){i.preventDefault(),o()(t).trigger(e.REQUEST_DOWNLOAD)})),this.layout){case r.a.GRID:this.setClearfix();break;case r.a.MASONRY:this.masonryInit();break;case r.a.LIST:this.$ui.listEntryTable=this.$dom.find("table.list-entry-table"),this.$ui.listEntryTableBody=this.$ui.listEntryTable.find("tbody")}}},{key:"addFileViews",value:function(e){for(var t,i=[],n=document.createDocumentFragment(),o=0;o<e.length;o++){switch(t=e[o],this.views.push(t),this.viewsByFileUuid[t.file.uuid]=t,this._addViewListeners(t),this.layout){case r.a.GRID:t.setWidth(this.gridElmWidth);break;case r.a.MASONRY:t.setWidth(this.masonryElmWidth)}i.push(t.$dom[0]),n.appendChild(t.$dom[0])}switch(this.layout){case r.a.MASONRY:this.$ui.body.append(n),this.masonry.addElements(i);break;case r.a.LIST:this.$ui.listEntryTableBody.append(n);break;default:this.clearfix?this.$ui.clearfix.before(n):this.$ui.body.append(n)}}},{key:"removeFileView",value:function(e){for(var t=0;t<this.views.length;t++)if(this.views[t]===e){this.views.splice(t,1),delete this.viewsByFileUuid[e.file.uuid],this._removeViewListeners(e),null!==this.masonry&&(this.masonry.removeElements([e.$dom[0]]),this.masonryUpdate()),e.$dom.remove();break}}},{key:"_addViewListeners",value:function(e){o()(e).on(u.a.REMOVED,this.handleViewRemoved.bind(this))}},{key:"_removeViewListeners",value:function(e){o()(e).off(u.a.REMOVED)}},{key:"arrangeFileViews",value:function(e){var t,i,n,o;t=this.layout===r.a.LIST?this.$ui.listEntryTableBody:this.$ui.body;for(var a=0;a<e.length;a++)i=e[a],this.viewsByFileUuid[i.uuid]&&(n=this.viewsByFileUuid[i.uuid],o=Math.floor(a),n.$dom.index()!==o&&(0===o?t.prepend(n.$dom):t.find(".entry:eq(".concat(o-1,")")).after(n.$dom)));this.masonryReload()}},{key:"setClearfix",value:function(){this.clearfix||(this.$ui.clearfix=o()('<div class="clearfix"></div>'),this.$ui.body.append(this.$ui.clearfix),this.clearfix=!0)}},{key:"setDndHint",value:function(e){if(null===this.viewDNDHint)switch(e.section&&e.section.removeDnDHint(),this.viewDNDHint=e,e.section=this,this.clearfix?this.$ui.clearfix.before(e.$dom):this.$ui.body.append(e.$dom),this.layout){case r.a.GRID:e.setWidth(this.gridElmWidth);break;case r.a.MASONRY:null!==this.masonry&&(e.setWidth(this.masonryElmWidth),this.masonry.addElements([e.$dom[0]]),this.masonryUpdate())}}},{key:"removeDnDHint",value:function(){null!==this.viewDNDHint&&(this.viewDNDHint.$dom.detach(),this.viewDNDHint.section=null,this.viewDNDHint=null)}},{key:"setWidth",value:function(e){if(this.width!==e)if(this.width=e,this.layout===r.a.GRID){var t=this.getLayoutBreakpointForWidth(e);if(!t)throw"no layout breakpoint set";var i=s.a.calculateDynamicColWidth(e,t.elementMinWidth,t.gutterWidth);if(this.gridElmWidth=i,0!==this.views.length||null!==this.viewDNDHint){for(var n=0;n<this.views.length;n++)this.views[n].setWidth(i);null!==this.viewDNDHint&&this.viewDNDHint.setWidth(i)}}else if(this.layout===r.a.MASONRY&&null!==this.masonry){var o=this.getLayoutBreakpointForWidth(e);if(!o)throw"no layout breakpoint set";var a=s.a.calculateDynamicColWidth(e,o.elementMinWidth,o.gutterWidth);if(this.masonryElmWidth=a,this.masonry.setColWidth(a),this.masonry.setGutterWidth(o.gutterWidth),0!==this.views.length||null!==this.viewDNDHint){for(var l=0;l<this.views.length;l++)this.views[l].setWidth(a);null!==this.viewDNDHint&&this.viewDNDHint.setWidth(a),this.masonryUpdate()}}}},{key:"center",value:function(){this.$ui.body.addClass("center")}},{key:"addLayoutBreakpoints",value:function(e){for(var t=0;t<e.length;t++)this.layoutBreakpoints.push(e[t])}},{key:"getLayoutBreakpointForWidth",value:function(e){for(var t,i=null,n=0;n<this.layoutBreakpoints.length;n++)e>=(t=this.layoutBreakpoints[n]).containerMinWidth&&(null===i||t.containerMinWidth>i.containerMinWidth)&&(i=t);return i}},{key:"masonryInit",value:function(){this.masonryDestroy(),this.masonry=new l.a(this.$ui.body[0],0,0)}},{key:"masonryReload",value:function(){null!==this.masonry&&(this.masonry.clearElements(),this.masonry.setElementsBySelector(".entry:not(.invisible)"),this.masonryUpdate())}},{key:"masonryUpdate",value:function(){null!==this.masonry&&this.masonryElmWidth&&this.masonry.update(this.$dom.width())}},{key:"masonryDestroy",value:function(){null!==this.masonry&&(this.masonry.finalize(),this.masonry=null)}},{key:"handleViewRemoved",value:function(e){this.removeFileView(e.target)}},{key:"finalize",value:function(){for(var e=0;e<this.views.length;e++)this.views[e].$dom.detach();this.views=[],this.removeDnDHint(),this.masonryDestroy(),this.$dom.remove()}}])&&d(t.prototype,i),n&&d(t,n),e}();t.a=f},,function(e,t,i){"use strict";var n=i(1),o=i(15);var a=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t,this.name=i};function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"addTagsToGallery",value:function(e,t){return new Promise((function(i,a){n.a.post("/api/tags/addtagstogallery/".concat(e),{dataType:n.a.DATATYPE_JSON,data:{tag_names:t},onComplete:function(e,t){t.success?i():a(o.a.extractErrorFromApiResponse(e))}})}))}},{key:"getTagsForGallery",value:function(e){return new Promise((function(t,i){n.a.get("/api/tags/gettagsforgallery/".concat(e),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,n){if(n.success){for(var r,s=[],l=0,u=e.tags.length;l<u;l++)r=e.tags[l],s.push(new a(r.code,r.name));t(s)}else i(o.a.extractErrorFromApiResponse(e))}})}))}},{key:"removeTags",value:function(e){return new Promise((function(t,i){n.a.post("/api/tags/removetags",{dataType:n.a.DATATYPE_JSON,data:{tag_codes:e},onComplete:function(e,n){n.success?t():i(o.a.extractErrorFromApiResponse(e))}})}))}},{key:"getStatsForDomain",value:function(e){return new Promise((function(t,i){n.a.get("/api/tags/getstatsfordomain/".concat(e),{responseType:n.a.RESPONSETYPE_JSON,onComplete:function(e,n){n.success?t(e.stats):i(o.a.extractErrorFromApiResponse(e))}})}))}}],(i=null)&&r(t.prototype,i),s&&r(t,s),e}();t.a=s},function(e,t,i){"use strict";var n=i(39),o=i(0),a=i.n(o),r=i(187),s=i.n(r);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,h(t).call(this,e,i)))._setSerial(),n.$dom=void 0,n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),i=t,(n=[{key:"open",value:function(){var e=this;this.$dom=a()(s()({id:this.getId()}));var t=this.$dom.find(".title"),i=this._definition.getTitle();null===i?t.remove():t.text(i),this.$dom.find(".content").html(this._definition.getContent());var n=this._definition.getMaxWidth();"number"==typeof n&&this.$dom.css("max-width","".concat(n,"  px"));var o=this._definition.getMaxInnerWidth();"number"==typeof o&&this.$dom.find(".inner").css("max-width","".concat(o," px"));var r=this._definition.getLevel();"string"==typeof r&&this.$dom.attr("data-level",r),this.$dom.hide();var l=this._definition.getContainer();null===l?(this.$dom.css({position:"fixed",top:0,left:0,right:0,zIndex:1e3}),a()("body").append(this.$dom)):(this.$dom.addClass("inline"),l.prepend(this.$dom)),this.$dom.slideDown((function(){e.setOpened()}))}},{key:"close",value:function(){var e=this,t=this;this.$dom.slideUp((function(){a()(e).detach(),t.setClosed()}))}}])&&u(i.prototype,n),o&&u(i,o),t}(i(26).a);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=g(this,m(t).call(this,f)))._title=null,e._maxWidth=null,e._maxInnerWidth=null,e._level=null,e._container=null,e}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),i=t,o=[{key:"LEVEL_ERROR",get:function(){return"error"}},{key:"LEVEL_WARNING",get:function(){return"warning"}},{key:"LEVEL_SUCCESS",get:function(){return"success"}}],(n=[{key:"setTitle",value:function(e){return this._title=e,this}},{key:"getTitle",value:function(){return this._title}},{key:"setMaxWidth",value:function(e){return this._maxWidth=e,this}},{key:"getMaxWidth",value:function(){return this._maxWidth}},{key:"setMaxInnerWidth",value:function(e){return this._maxInnerWidth=e,this}},{key:"getMaxInnerWidth",value:function(){return this._maxInnerWidth}},{key:"setLevel",value:function(e){return this._level=e,this}},{key:"getLevel",value:function(){return this._level}},{key:"setContainer",value:function(e){return this._container=e,this}},{key:"getContainer",value:function(){return this._container}}])&&v(i.prototype,n),o&&v(i,o),t}(n.a);t.a=b},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},,,,,,,,function(e,t,i){var n,o,a;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i(0);o=[i(0)],void 0===(a="function"==typeof(n=function(t){var n,o,a,s,l,u,c,h,d,f,p,v,g,m,y,b,_,w,E,S,k,T,C,x,O,D,A,I,P,$,R,L,M,F,N,B,U,j,G,H,z,V,W,Y,q,X,J,K,Z,Q,ee,te,ie,ne,oe,ae,re,se;ae=i(196),re=e.exports,se="https:"==document.location.protocol?"https:":"http:",ae||(re?i(139)(t):t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+se+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),o="mCustomScrollbar",a={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,l={},u=window.attachEvent&&!window.addEventListener?1:0,c=!1,h=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],d={init:function(e){e=t.extend(!0,{},a,e);var i=f.call(this);if(e.live){var n=e.liveSelector||this.selector||".mCustomScrollbar",o=t(n);if("off"===e.live)return void v(n);l[n]=setTimeout((function(){o.mCustomScrollbar(e),"once"===e.live&&o.length&&v(n)}),500)}else v(n);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":g(e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!==r(e.mouseWheel)&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=m(e.scrollButtons.scrollType),p(e),t(i).each((function(){var i=t(this);if(!i.data("mCS")){i.data("mCS",{idx:++s,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:i.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var n=i.data("mCS"),o=n.opt,a=i.data("mcs-axis"),r=i.data("mcs-scrollbar-position"),l=i.data("mcs-theme");a&&(o.axis=a),r&&(o.scrollbarPosition=r),l&&(o.theme=l,p(o)),y.call(this),n&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),t("#mCSB_"+n.idx+"_container img:not(."+h[2]+")").addClass(h[2]),d.update.call(null,i)}}))},update:function(e,i){var n=e||f.call(this);return t(n).each((function(){var e=t(this);if(e.data("mCS")){var n=e.data("mCS"),o=n.opt,a=t("#mCSB_"+n.idx+"_container"),r=t("#mCSB_"+n.idx),s=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")];if(!a.length)return;n.tweenRunning&&q(e),i&&n&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),e.hasClass(h[3])&&e.removeClass(h[3]),e.hasClass(h[4])&&e.removeClass(h[4]),r.css("max-height","none"),r.height()!==e.height()&&r.css("max-height",e.height()),_.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||a.css("width",b(a)),n.overflowed=T.call(this),D.call(this),o.autoDraggerLength&&E.call(this),S.call(this),x.call(this);var l=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==o.axis&&(n.overflowed[0]?s[0].height()>s[0].parent().height()?C.call(this):(X(e,l[0].toString(),{dir:"y",dur:0,overwrite:"none"}),n.contentReset.y=null):(C.call(this),"y"===o.axis?O.call(this):"yx"===o.axis&&n.overflowed[1]&&X(e,l[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(n.overflowed[1]?s[1].width()>s[1].parent().width()?C.call(this):(X(e,l[1].toString(),{dir:"x",dur:0,overwrite:"none"}),n.contentReset.x=null):(C.call(this),"x"===o.axis?O.call(this):"yx"===o.axis&&n.overflowed[0]&&X(e,l[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),i&&n&&(2===i&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===i&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),Y.call(this)}}))},scrollTo:function(e,i){if(void 0!==e&&null!=e){var n=f.call(this);return t(n).each((function(){var n=t(this);if(n.data("mCS")){var o=n.data("mCS"),a=o.opt,r={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=t.extend(!0,{},r,i),l=V.call(this,e),u=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;l[0]=W.call(this,l[0],"y"),l[1]=W.call(this,l[1],"x"),s.moveDragger&&(l[0]*=o.scrollRatio.y,l[1]*=o.scrollRatio.x),s.dur=oe()?0:u,setTimeout((function(){null!==l[0]&&void 0!==l[0]&&"x"!==a.axis&&o.overflowed[0]&&(s.dir="y",s.overwrite="all",X(n,l[0].toString(),s)),null!==l[1]&&void 0!==l[1]&&"y"!==a.axis&&o.overflowed[1]&&(s.dir="x",s.overwrite="none",X(n,l[1].toString(),s))}),s.timeout)}}))}},stop:function(){var e=f.call(this);return t(e).each((function(){var e=t(this);e.data("mCS")&&q(e)}))},disable:function(e){var i=f.call(this);return t(i).each((function(){var i=t(this);i.data("mCS")&&(i.data("mCS"),Y.call(this,"remove"),O.call(this),e&&C.call(this),D.call(this,!0),i.addClass(h[3]))}))},destroy:function(){var e=f.call(this);return t(e).each((function(){var i=t(this);if(i.data("mCS")){var n=i.data("mCS"),a=n.opt,r=t("#mCSB_"+n.idx),s=t("#mCSB_"+n.idx+"_container"),l=t(".mCSB_"+n.idx+"_scrollbar");a.live&&v(a.liveSelector||t(e).selector),Y.call(this,"remove"),O.call(this),C.call(this),i.removeData("mCS"),Q(this,"mcs"),l.remove(),s.find("img."+h[2]).removeClass(h[2]),r.replaceWith(s.contents()),i.removeClass(o+" _mCS_"+n.idx+" "+h[6]+" "+h[7]+" "+h[5]+" "+h[3]).addClass(h[4])}}))}},f=function(){return"object"!==r(t(this))||t(this).length<1?".mCustomScrollbar":this},p=function(e){e.autoDraggerLength=!(t.inArray(e.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1)&&e.autoDraggerLength,e.autoExpandScrollbar=!(t.inArray(e.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1)&&e.autoExpandScrollbar,e.scrollButtons.enable=!(t.inArray(e.theme,["minimal","minimal-dark"])>-1)&&e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,["minimal","minimal-dark"])>-1||e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,["minimal","minimal-dark"])>-1?"outside":e.scrollbarPosition},v=function(e){l[e]&&(clearTimeout(l[e]),Q(l,e))},g=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},m=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},y=function(){var e=t(this),i=e.data("mCS"),n=i.opt,a=n.autoExpandScrollbar?" "+h[1]+"_expand":"",r=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+n.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+h[12]+"'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+n.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+h[12]+"'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],s="yx"===n.axis?"mCSB_vertical_horizontal":"x"===n.axis?"mCSB_horizontal":"mCSB_vertical",l="yx"===n.axis?r[0]+r[1]:"x"===n.axis?r[1]:r[0],u="yx"===n.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",c=n.autoHideScrollbar?" "+h[6]:"",d="x"!==n.axis&&"rtl"===i.langDir?" "+h[7]:"";n.setWidth&&e.css("width",n.setWidth),n.setHeight&&e.css("height",n.setHeight),n.setLeft="y"!==n.axis&&"rtl"===i.langDir?"989999px":n.setLeft,e.addClass(o+" _mCS_"+i.idx+c+d).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+n.theme+" "+s+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+n.setTop+"; left:"+n.setLeft+";' dir='"+i.langDir+"' /></div>");var f=t("#mCSB_"+i.idx),p=t("#mCSB_"+i.idx+"_container");"y"===n.axis||n.advanced.autoExpandHorizontalScroll||p.css("width",b(p)),"outside"===n.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),f.addClass("mCSB_outside").after(l)):(f.addClass("mCSB_inside").append(l),p.wrap(u)),w.call(this);var v=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];v[0].css("min-height",v[0].height()),v[1].css("min-width",v[1].width())},b=function(e){var i=[e[0].scrollWidth,Math.max.apply(Math,e.children().map((function(){return t(this).outerWidth(!0)})).get())],n=e.parent().width();return i[0]>n?i[0]:i[1]>n?i[1]:"100%"},_=function(){var e=t(this).data("mCS"),i=e.opt,n=t("#mCSB_"+e.idx+"_container");if(i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis){n.css({width:"auto","min-width":0,"overflow-x":"scroll"});var o=Math.ceil(n[0].scrollWidth);3===i.advanced.autoExpandHorizontalScroll||2!==i.advanced.autoExpandHorizontalScroll&&o>n.parent().width()?n.css({width:o,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var e=t(this).data("mCS"),i=e.opt,n=t(".mCSB_"+e.idx+"_scrollbar:first"),o=ie(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",a=["<a href='#' class='"+h[13]+"' "+o+" />","<a href='#' class='"+h[14]+"' "+o+" />","<a href='#' class='"+h[15]+"' "+o+" />","<a href='#' class='"+h[16]+"' "+o+" />"],r=["x"===i.axis?a[2]:a[0],"x"===i.axis?a[3]:a[1],a[2],a[3]];i.scrollButtons.enable&&n.prepend(r[0]).append(r[1]).next(".mCSB_scrollTools").prepend(r[2]).append(r[3])},E=function(){var e=t(this).data("mCS"),i=t("#mCSB_"+e.idx),n=t("#mCSB_"+e.idx+"_container"),o=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],a=[i.height()/n.outerHeight(!1),i.width()/n.outerWidth(!1)],r=[parseInt(o[0].css("min-height")),Math.round(a[0]*o[0].parent().height()),parseInt(o[1].css("min-width")),Math.round(a[1]*o[1].parent().width())],s=u&&r[1]<r[0]?r[0]:r[1],l=u&&r[3]<r[2]?r[2]:r[3];o[0].css({height:s,"max-height":o[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":r[0]+"px"}),o[1].css({width:l,"max-width":o[1].parent().width()-10})},S=function(){var e=t(this).data("mCS"),i=t("#mCSB_"+e.idx),n=t("#mCSB_"+e.idx+"_container"),o=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],a=[n.outerHeight(!1)-i.height(),n.outerWidth(!1)-i.width()],r=[a[0]/(o[0].parent().height()-o[0].height()),a[1]/(o[1].parent().width()-o[1].width())];e.scrollRatio={y:r[0],x:r[1]}},k=function(e,t,i){var n=i?h[0]+"_expanded":"",o=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(h[0]+" "+n),o.toggleClass(h[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(h[0]),o.removeClass(h[1])):(e.addClass(h[0]),o.addClass(h[1])))},T=function(){var e=t(this).data("mCS"),i=t("#mCSB_"+e.idx),n=t("#mCSB_"+e.idx+"_container"),o=null==e.overflowed?n.height():n.outerHeight(!1),a=null==e.overflowed?n.width():n.outerWidth(!1),r=n[0].scrollHeight,s=n[0].scrollWidth;return r>o&&(o=r),s>a&&(a=s),[o>i.height(),a>i.width()]},C=function(){var e=t(this),i=e.data("mCS"),n=i.opt,o=t("#mCSB_"+i.idx),a=t("#mCSB_"+i.idx+"_container"),r=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];if(q(e),("x"!==n.axis&&!i.overflowed[0]||"y"===n.axis&&i.overflowed[0])&&(r[0].add(a).css("top",0),X(e,"_resetY")),"y"!==n.axis&&!i.overflowed[1]||"x"===n.axis&&i.overflowed[1]){var s=0,l=0;"rtl"===i.langDir&&(s=o.width()-a.outerWidth(!1),l=Math.abs(s/i.scrollRatio.x)),a.css("left",s),r[1].css("left",l),X(e,"_resetX")}},x=function(){var e,i=t(this),n=i.data("mCS"),o=n.opt;n.bindEvents||(I.call(this),o.contentTouchScroll&&P.call(this),$.call(this),o.mouseWheel.enable&&function n(){e=setTimeout((function(){t.event.special.mousewheel?(clearTimeout(e),R.call(i[0])):n()}),100)}(),B.call(this),j.call(this),o.advanced.autoScrollOnFocus&&U.call(this),o.scrollButtons.enable&&G.call(this),o.keyboard.enable&&H.call(this),n.bindEvents=!0)},O=function(){var e=t(this),i=e.data("mCS"),n=i.opt,o="mCS_"+i.idx,a=".mCSB_"+i.idx+"_scrollbar",r=t("#mCSB_"+i.idx+",#mCSB_"+i.idx+"_container,#mCSB_"+i.idx+"_container_wrapper,"+a+" ."+h[12]+",#mCSB_"+i.idx+"_dragger_vertical,#mCSB_"+i.idx+"_dragger_horizontal,"+a+">a"),s=t("#mCSB_"+i.idx+"_container");if(n.advanced.releaseDraggableSelectors&&r.add(t(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&r.add(t(n.advanced.extraDraggableSelectors)),i.bindEvents){var l=M()?top.document:document;t(document).add(t(l)).unbind("."+o),r.each((function(){t(this).unbind("."+o)})),clearTimeout(e[0]._focusTimeout),Q(e[0],"_focusTimeout"),clearTimeout(i.sequential.step),Q(i.sequential,"step"),clearTimeout(s[0].onCompleteTimeout),Q(s[0],"onCompleteTimeout"),i.bindEvents=!1}},D=function(e){var i=t(this),n=i.data("mCS"),o=n.opt,a=t("#mCSB_"+n.idx+"_container_wrapper"),r=a.length?a:t("#mCSB_"+n.idx+"_container"),s=[t("#mCSB_"+n.idx+"_scrollbar_vertical"),t("#mCSB_"+n.idx+"_scrollbar_horizontal")],l=[s[0].find(".mCSB_dragger"),s[1].find(".mCSB_dragger")];"x"!==o.axis&&(n.overflowed[0]&&!e?(s[0].add(l[0]).add(s[0].children("a")).css("display","block"),r.removeClass(h[8]+" "+h[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&l[0].css("display","none"),r.removeClass(h[10])):(s[0].css("display","none"),r.addClass(h[10])),r.addClass(h[8]))),"y"!==o.axis&&(n.overflowed[1]&&!e?(s[1].add(l[1]).add(s[1].children("a")).css("display","block"),r.removeClass(h[9]+" "+h[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&l[1].css("display","none"),r.removeClass(h[11])):(s[1].css("display","none"),r.addClass(h[11])),r.addClass(h[9]))),n.overflowed[0]||n.overflowed[1]?i.removeClass(h[5]):i.addClass(h[5])},A=function(e){var i=e.type,n=e.target.ownerDocument!==document&&null!==frameElement?[t(frameElement).offset().top,t(frameElement).offset().left]:null,o=M()&&e.target.ownerDocument!==top.document&&null!==frameElement?[t(e.view.frameElement).offset().top,t(e.view.frameElement).offset().left]:[0,0];switch(i){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return n?[e.originalEvent.pageY-n[0]+o[0],e.originalEvent.pageX-n[1]+o[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],r=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[a.screenY,a.screenX,r>1]:[a.pageY,a.pageX,r>1];default:return n?[e.pageY-n[0]+o[0],e.pageX-n[1]+o[1],!1]:[e.pageY,e.pageX,!1]}},I=function(){var e,i,n,o=t(this),a=o.data("mCS"),r=a.opt,s="mCS_"+a.idx,l=["mCSB_"+a.idx+"_dragger_vertical","mCSB_"+a.idx+"_dragger_horizontal"],h=t("#mCSB_"+a.idx+"_container"),d=t("#"+l[0]+",#"+l[1]),f=r.advanced.releaseDraggableSelectors?d.add(t(r.advanced.releaseDraggableSelectors)):d,p=M()?top.document:document,v=r.advanced.extraDraggableSelectors?t(p).add(t(r.advanced.extraDraggableSelectors)):t(p);function g(t,i,n,s){if(h[0].idleTimer=r.scrollInertia<233?250:0,e.attr("id")===l[1])var u="x",c=(e[0].offsetLeft-i+s)*a.scrollRatio.x;else u="y",c=(e[0].offsetTop-t+n)*a.scrollRatio.y;X(o,c.toString(),{dir:u,drag:!0})}d.bind("contextmenu."+s,(function(e){e.preventDefault()})).bind("mousedown."+s+" touchstart."+s+" pointerdown."+s+" MSPointerDown."+s,(function(a){if(a.stopImmediatePropagation(),a.preventDefault(),ee(a)){c=!0,u&&(document.onselectstart=function(){return!1}),F.call(h,!1),q(o);var s=(e=t(this)).offset(),l=A(a)[0]-s.top,d=A(a)[1]-s.left,f=e.height()+s.top,p=e.width()+s.left;l<f&&l>0&&d<p&&d>0&&(i=l,n=d),k(e,"active",r.autoExpandScrollbar)}})).bind("touchmove."+s,(function(t){t.stopImmediatePropagation(),t.preventDefault();var o=e.offset(),a=A(t)[0]-o.top,r=A(t)[1]-o.left;g(i,n,a,r)})),t(document).add(v).bind("mousemove."+s+" pointermove."+s+" MSPointerMove."+s,(function(t){if(e){var o=e.offset(),a=A(t)[0]-o.top,r=A(t)[1]-o.left;if(i===a&&n===r)return;g(i,n,a,r)}})).add(f).bind("mouseup."+s+" touchend."+s+" pointerup."+s+" MSPointerUp."+s,(function(t){e&&(k(e,"active",r.autoExpandScrollbar),e=null),c=!1,u&&(document.onselectstart=null),F.call(h,!0)}))},P=function(){var e,i,o,a,r,s,l,u,h,d,f,p,v,g,m=t(this),y=m.data("mCS"),b=y.opt,_="mCS_"+y.idx,w=t("#mCSB_"+y.idx),E=t("#mCSB_"+y.idx+"_container"),S=[t("#mCSB_"+y.idx+"_dragger_vertical"),t("#mCSB_"+y.idx+"_dragger_horizontal")],k=[],T=[],C="yx"===b.axis?"none":"all",x=[],O=E.find("iframe"),D=["touchstart."+_+" pointerdown."+_+" MSPointerDown."+_,"touchmove."+_+" pointermove."+_+" MSPointerMove."+_,"touchend."+_+" pointerup."+_+" MSPointerUp."+_],I=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;function P(t){if(!te(t)||c||A(t)[2])n=0;else{n=1,v=0,g=0,e=1,m.removeClass("mCS_touch_action");var a=E.offset();i=A(t)[0]-a.top,o=A(t)[1]-a.left,x=[A(t)[0],A(t)[1]]}}function $(t){if(te(t)&&!c&&!A(t)[2]&&(b.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!g||v)&&e)){l=K();var n=w.offset(),a=A(t)[0]-n.top,r=A(t)[1]-n.left;if(k.push(a),T.push(r),x[2]=Math.abs(A(t)[0]-x[0]),x[3]=Math.abs(A(t)[1]-x[1]),y.overflowed[0])var s=S[0].parent().height()-S[0].height(),u=i-a>0&&a-i>-s*y.scrollRatio.y&&(2*x[3]<x[2]||"yx"===b.axis);if(y.overflowed[1])var h=S[1].parent().width()-S[1].width(),d=o-r>0&&r-o>-h*y.scrollRatio.x&&(2*x[2]<x[3]||"yx"===b.axis);u||d?(I||t.preventDefault(),v=1):(g=1,m.addClass("mCS_touch_action")),I&&t.preventDefault(),f="yx"===b.axis?[i-a,o-r]:"x"===b.axis?[null,o-r]:[i-a,null],E[0].idleTimer=250,y.overflowed[0]&&N(f[0],0,"mcsLinearOut","y","all",!0),y.overflowed[1]&&N(f[1],0,"mcsLinearOut","x",C,!0)}}function R(e){if(!te(e)||c||A(e)[2])n=0;else{n=1,e.stopImmediatePropagation(),q(m),s=K();var t=w.offset();a=A(e)[0]-t.top,r=A(e)[1]-t.left,k=[],T=[]}}function L(t){if(te(t)&&!c&&!A(t)[2]){e=0,t.stopImmediatePropagation(),v=0,g=0,u=K();var i=w.offset(),n=A(t)[0]-i.top,o=A(t)[1]-i.left;if(!(u-l>30)){var m=(d=1e3/(u-s))<2.5,_=m?[k[k.length-2],T[T.length-2]]:[0,0];h=m?[n-_[0],o-_[1]]:[n-a,o-r];var S=[Math.abs(h[0]),Math.abs(h[1])];d=m?[Math.abs(h[0]/4),Math.abs(h[1]/4)]:[d,d];var x=[Math.abs(E[0].offsetTop)-h[0]*F(S[0]/d[0],d[0]),Math.abs(E[0].offsetLeft)-h[1]*F(S[1]/d[1],d[1])];f="yx"===b.axis?[x[0],x[1]]:"x"===b.axis?[null,x[1]]:[x[0],null],p=[4*S[0]+b.scrollInertia,4*S[1]+b.scrollInertia];var O=parseInt(b.contentTouchScroll)||0;f[0]=S[0]>O?f[0]:0,f[1]=S[1]>O?f[1]:0,y.overflowed[0]&&N(f[0],p[0],"mcsEaseOut","y",C,!1),y.overflowed[1]&&N(f[1],p[1],"mcsEaseOut","x",C,!1)}}}function F(e,t){var i=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?i[0]:i[3]:e>60?t>3?i[3]:i[2]:e>30?t>8?i[1]:t>6?i[0]:t>4?t:i[2]:t>8?t:i[3]}function N(e,t,i,n,o,a){e&&X(m,e.toString(),{dur:t,scrollEasing:i,dir:n,overwrite:o,drag:a})}E.bind(D[0],(function(e){P(e)})).bind(D[1],(function(e){$(e)})),w.bind(D[0],(function(e){R(e)})).bind(D[2],(function(e){L(e)})),O.length&&O.each((function(){t(this).bind("load",(function(){M(this)&&t(this.contentDocument||this.contentWindow.document).bind(D[0],(function(e){P(e),R(e)})).bind(D[1],(function(e){$(e)})).bind(D[2],(function(e){L(e)}))}))}))},$=function(){var e,i=t(this),o=i.data("mCS"),a=o.opt,r=o.sequential,s="mCS_"+o.idx,l=t("#mCSB_"+o.idx+"_container"),u=l.parent();function h(t,n,o){r.type=o&&e?"stepped":"stepless",r.scrollAmount=10,z(i,t,n,"mcsLinearOut",o?60:null)}l.bind("mousedown."+s,(function(t){n||e||(e=1,c=!0)})).add(document).bind("mousemove."+s,(function(t){if(!n&&e&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var i=l.offset(),s=A(t)[0]-i.top+l[0].offsetTop,c=A(t)[1]-i.left+l[0].offsetLeft;s>0&&s<u.height()&&c>0&&c<u.width()?r.step&&h("off",null,"stepped"):("x"!==a.axis&&o.overflowed[0]&&(s<0?h("on",38):s>u.height()&&h("on",40)),"y"!==a.axis&&o.overflowed[1]&&(c<0?h("on",37):c>u.width()&&h("on",39)))}})).bind("mouseup."+s+" dragend."+s,(function(t){n||(e&&(e=0,h("off",null)),c=!1)}))},R=function(){if(t(this).data("mCS")){var e=t(this),i=e.data("mCS"),n=i.opt,o="mCS_"+i.idx,a=t("#mCSB_"+i.idx),r=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")],s=t("#mCSB_"+i.idx+"_container").find("iframe");s.length&&s.each((function(){t(this).bind("load",(function(){M(this)&&t(this.contentDocument||this.contentWindow.document).bind("mousewheel."+o,(function(e,t){l(e,t)}))}))})),a.bind("mousewheel."+o,(function(e,t){l(e,t)}))}function l(o,s){if(q(e),!N(e,o.target)){var l="auto"!==n.mouseWheel.deltaFactor?parseInt(n.mouseWheel.deltaFactor):u&&o.deltaFactor<100?100:o.deltaFactor||100,c=n.scrollInertia;if("x"===n.axis||"x"===n.mouseWheel.axis)var h="x",d=[Math.round(l*i.scrollRatio.x),parseInt(n.mouseWheel.scrollAmount)],f="auto"!==n.mouseWheel.scrollAmount?d[1]:d[0]>=a.width()?.9*a.width():d[0],p=Math.abs(t("#mCSB_"+i.idx+"_container")[0].offsetLeft),v=r[1][0].offsetLeft,g=r[1].parent().width()-r[1].width(),m="y"===n.mouseWheel.axis?o.deltaY||s:o.deltaX;else h="y",d=[Math.round(l*i.scrollRatio.y),parseInt(n.mouseWheel.scrollAmount)],f="auto"!==n.mouseWheel.scrollAmount?d[1]:d[0]>=a.height()?.9*a.height():d[0],p=Math.abs(t("#mCSB_"+i.idx+"_container")[0].offsetTop),v=r[0][0].offsetTop,g=r[0].parent().height()-r[0].height(),m=o.deltaY||s;"y"===h&&!i.overflowed[0]||"x"===h&&!i.overflowed[1]||((n.mouseWheel.invert||o.webkitDirectionInvertedFromDevice)&&(m=-m),n.mouseWheel.normalizeDelta&&(m=m<0?-1:1),(m>0&&0!==v||m<0&&v!==g||n.mouseWheel.preventDefault)&&(o.stopImmediatePropagation(),o.preventDefault()),o.deltaFactor<5&&!n.mouseWheel.normalizeDelta&&(f=o.deltaFactor,c=17),X(e,(p-m*f).toString(),{dir:h,dur:c}))}}},L=new Object,M=function(e){var i=!1,n=!1,o=null;if(void 0===e?n="#empty":void 0!==t(e).attr("id")&&(n=t(e).attr("id")),!1!==n&&void 0!==L[n])return L[n];if(e){try{o=(e.contentDocument||e.contentWindow.document).body.innerHTML}catch(e){}i=null!==o}else{try{o=top.document.body.innerHTML}catch(e){}i=null!==o}return!1!==n&&(L[n]=i),i},F=function(e){var t=this.find("iframe");if(t.length){var i=e?"auto":"none";t.css("pointer-events",i)}},N=function(e,i){var n=i.nodeName.toLowerCase(),o=e.data("mCS").opt.mouseWheel.disableOver;return t.inArray(n,o)>-1&&!(t.inArray(n,["select","textarea"])>-1&&!t(i).is(":focus"))},B=function(){var e,i=t(this),n=i.data("mCS"),o="mCS_"+n.idx,a=t("#mCSB_"+n.idx+"_container"),r=a.parent();t(".mCSB_"+n.idx+"_scrollbar ."+h[12]).bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,(function(i){c=!0,t(i.target).hasClass("mCSB_dragger")||(e=1)})).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,(function(e){c=!1})).bind("click."+o,(function(o){if(e&&(e=0,t(o.target).hasClass(h[12])||t(o.target).hasClass("mCSB_draggerRail"))){q(i);var s=t(this),l=s.find(".mCSB_dragger");if(s.parent(".mCSB_scrollTools_horizontal").length>0){if(!n.overflowed[1])return;var u="x",c=o.pageX>l.offset().left?-1:1,d=Math.abs(a[0].offsetLeft)-c*(.9*r.width())}else{if(!n.overflowed[0])return;u="y",c=o.pageY>l.offset().top?-1:1,d=Math.abs(a[0].offsetTop)-c*(.9*r.height())}X(i,d.toString(),{dir:u,scrollEasing:"mcsEaseInOut"})}}))},U=function(){var e=t(this),i=e.data("mCS"),n=i.opt,o="mCS_"+i.idx,a=t("#mCSB_"+i.idx+"_container"),r=a.parent();a.bind("focusin."+o,(function(i){var o=t(document.activeElement),s=a.find(".mCustomScrollBox").length;o.is(n.advanced.autoScrollOnFocus)&&(q(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=s?17*s:0,e[0]._focusTimeout=setTimeout((function(){var t=[ne(o)[0],ne(o)[1]],i=[a[0].offsetTop,a[0].offsetLeft],s=[i[0]+t[0]>=0&&i[0]+t[0]<r.height()-o.outerHeight(!1),i[1]+t[1]>=0&&i[0]+t[1]<r.width()-o.outerWidth(!1)],l="yx"!==n.axis||s[0]||s[1]?"all":"none";"x"===n.axis||s[0]||X(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0}),"y"===n.axis||s[1]||X(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0})}),e[0]._focusTimer))}))},j=function(){var e=t(this).data("mCS"),i="mCS_"+e.idx,n=t("#mCSB_"+e.idx+"_container").parent();n.bind("scroll."+i,(function(i){0===n.scrollTop()&&0===n.scrollLeft()||t(".mCSB_"+e.idx+"_scrollbar").css("visibility","hidden")}))},G=function(){var e=t(this),i=e.data("mCS"),n=i.opt,o=i.sequential,a="mCS_"+i.idx,r=".mCSB_"+i.idx+"_scrollbar";t(r+">a").bind("contextmenu."+a,(function(e){e.preventDefault()})).bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,(function(a){if(a.preventDefault(),ee(a)){var r=t(this).attr("class");switch(o.type=n.scrollButtons.scrollType,a.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;c=!0,i.tweenRunning=!1,s("on",r);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;c=!1,o.dir&&s("off",r);break;case"click":if("stepped"!==o.type||i.tweenRunning)return;s("on",r)}}function s(t,i){o.scrollAmount=n.scrollButtons.scrollAmount,z(e,t,i)}}))},H=function(){var e=t(this),i=e.data("mCS"),n=i.opt,o=i.sequential,a="mCS_"+i.idx,r=t("#mCSB_"+i.idx),s=t("#mCSB_"+i.idx+"_container"),l=s.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",c=s.find("iframe"),h=["blur."+a+" keydown."+a+" keyup."+a];function d(a){switch(a.type){case"blur":i.tweenRunning&&o.dir&&p("off",null);break;case"keydown":case"keyup":var r=a.keyCode?a.keyCode:a.which,c="on";if("x"!==n.axis&&(38===r||40===r)||"y"!==n.axis&&(37===r||39===r)){if((38===r||40===r)&&!i.overflowed[0]||(37===r||39===r)&&!i.overflowed[1])return;"keyup"===a.type&&(c="off"),t(document.activeElement).is(u)||(a.preventDefault(),a.stopImmediatePropagation(),p(c,r))}else if(33===r||34===r){if((i.overflowed[0]||i.overflowed[1])&&(a.preventDefault(),a.stopImmediatePropagation()),"keyup"===a.type){q(e);var h=34===r?-1:1;if("x"===n.axis||"yx"===n.axis&&i.overflowed[1]&&!i.overflowed[0])var d="x",f=Math.abs(s[0].offsetLeft)-h*(.9*l.width());else d="y",f=Math.abs(s[0].offsetTop)-h*(.9*l.height());X(e,f.toString(),{dir:d,scrollEasing:"mcsEaseInOut"})}}else 35!==r&&36!==r||t(document.activeElement).is(u)||((i.overflowed[0]||i.overflowed[1])&&(a.preventDefault(),a.stopImmediatePropagation()),"keyup"!==a.type)||("x"===n.axis||"yx"===n.axis&&i.overflowed[1]&&!i.overflowed[0]?(d="x",f=35===r?Math.abs(l.width()-s.outerWidth(!1)):0):(d="y",f=35===r?Math.abs(l.height()-s.outerHeight(!1)):0),X(e,f.toString(),{dir:d,scrollEasing:"mcsEaseInOut"}))}function p(t,a){o.type=n.keyboard.scrollType,o.scrollAmount=n.keyboard.scrollAmount,"stepped"===o.type&&i.tweenRunning||z(e,t,a)}}c.length&&c.each((function(){t(this).bind("load",(function(){M(this)&&t(this.contentDocument||this.contentWindow.document).bind(h[0],(function(e){d(e)}))}))})),r.attr("tabindex","0").bind(h[0],(function(e){d(e)}))},z=function(e,i,n,o,a){var r=e.data("mCS"),s=r.opt,l=r.sequential,u=t("#mCSB_"+r.idx+"_container"),c="stepped"===l.type,d=s.scrollInertia<26?26:s.scrollInertia,f=s.scrollInertia<1?17:s.scrollInertia;switch(i){case"on":if(l.dir=[n===h[16]||n===h[15]||39===n||37===n?"x":"y",n===h[13]||n===h[15]||38===n||37===n?-1:1],q(e),ie(n)&&"stepped"===l.type)return;p(c);break;case"off":clearTimeout(l.step),Q(l,"step"),q(e),(c||r.tweenRunning&&l.dir)&&p(!0)}function p(t){s.snapAmount&&(l.scrollAmount=s.snapAmount instanceof Array?"x"===l.dir[0]?s.snapAmount[1]:s.snapAmount[0]:s.snapAmount);var i="stepped"!==l.type,n=a||(t?i?d/1.5:f:1e3/60),c=t?i?7.5:40:2.5,h=[Math.abs(u[0].offsetTop),Math.abs(u[0].offsetLeft)],v=[r.scrollRatio.y>10?10:r.scrollRatio.y,r.scrollRatio.x>10?10:r.scrollRatio.x],g="x"===l.dir[0]?h[1]+l.dir[1]*(v[1]*c):h[0]+l.dir[1]*(v[0]*c),m="x"===l.dir[0]?h[1]+l.dir[1]*parseInt(l.scrollAmount):h[0]+l.dir[1]*parseInt(l.scrollAmount),y="auto"!==l.scrollAmount?m:g,b=o||(t?i?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),_=!!t;t&&n<17&&(y="x"===l.dir[0]?h[1]:h[0]),X(e,y.toString(),{dir:l.dir[0],scrollEasing:b,dur:n,onComplete:_}),t?l.dir=!1:(clearTimeout(l.step),l.step=setTimeout((function(){p()}),n))}},V=function(e){var i=t(this).data("mCS").opt,n=[];return"function"==typeof e&&(e=e()),e instanceof Array?n=e.length>1?[e[0],e[1]]:"x"===i.axis?[null,e[0]]:[e[0],null]:(n[0]=e.y?e.y:e.x||"x"===i.axis?null:e,n[1]=e.x?e.x:e.y||"y"===i.axis?null:e),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},W=function(e,i){if(null!=e&&void 0!==e){var n=t(this),o=n.data("mCS"),a=o.opt,s=t("#mCSB_"+o.idx+"_container"),l=s.parent(),u=r(e);i||(i="x"===a.axis?"x":"y");var c="x"===i?s.outerWidth(!1)-l.width():s.outerHeight(!1)-l.height(),h="x"===i?s[0].offsetLeft:s[0].offsetTop,f="x"===i?"left":"top";switch(u){case"function":return e();case"object":if(!(v=e.jquery?e:t(e)).length)return;return"x"===i?ne(v)[1]:ne(v)[0];case"string":case"number":if(ie(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(c*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(h-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var p=h+parseInt(e.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==e.indexOf("px")&&ie(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-s.outerHeight(!1));if("right"===e)return Math.abs(l.width()-s.outerWidth(!1));if("first"===e||"last"===e){var v=s.find(":"+e);return"x"===i?ne(v)[1]:ne(v)[0]}return t(e).length?"x"===i?ne(t(e))[1]:ne(t(e))[0]:(s.css(f,e),void d.update.call(null,n[0]))}}},Y=function(e){var i=t(this),n=i.data("mCS"),o=n.opt,a=t("#mCSB_"+n.idx+"_container");if(e)return clearTimeout(a[0].autoUpdate),void Q(a[0],"autoUpdate");function r(e){clearTimeout(a[0].autoUpdate),d.update.call(null,i[0],e)}!function e(){clearTimeout(a[0].autoUpdate),0!==i.parents("html").length?a[0].autoUpdate=setTimeout((function(){return o.advanced.updateOnSelectorChange&&(n.poll.change.n=function(){!0===o.advanced.updateOnSelectorChange&&(o.advanced.updateOnSelectorChange="*");var e=0,t=a.find(o.advanced.updateOnSelectorChange);return o.advanced.updateOnSelectorChange&&t.length>0&&t.each((function(){e+=this.offsetHeight+this.offsetWidth})),e}(),n.poll.change.n!==n.poll.change.o)?(n.poll.change.o=n.poll.change.n,void r(3)):o.advanced.updateOnContentResize&&(n.poll.size.n=i[0].scrollHeight+i[0].scrollWidth+a[0].offsetHeight+i[0].offsetHeight+i[0].offsetWidth,n.poll.size.n!==n.poll.size.o)?(n.poll.size.o=n.poll.size.n,void r(1)):!o.advanced.updateOnImageLoad||"auto"===o.advanced.updateOnImageLoad&&"y"===o.axis||(n.poll.img.n=a.find("img").length,n.poll.img.n===n.poll.img.o)?void((o.advanced.updateOnSelectorChange||o.advanced.updateOnContentResize||o.advanced.updateOnImageLoad)&&e()):(n.poll.img.o=n.poll.img.n,void a.find("img").each((function(){!function(e){if(t(e).hasClass(h[2]))r();else{var i,n,o=new Image;o.onload=(i=o,n=function(){this.onload=null,t(e).addClass(h[2]),r(2)},function(){return n.apply(i,arguments)}),o.src=e.src}}(this)})))}),o.advanced.autoUpdateTimeout):i=null}()},q=function(e){var i=e.data("mCS");t("#mCSB_"+i.idx+"_container,#mCSB_"+i.idx+"_container_wrapper,#mCSB_"+i.idx+"_dragger_vertical,#mCSB_"+i.idx+"_dragger_horizontal").each((function(){Z.call(this)}))},X=function(e,i,n){var o=e.data("mCS"),a=o.opt,r={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:a.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=[(n=t.extend(r,n)).dur,n.drag?0:n.dur],l=t("#mCSB_"+o.idx),u=t("#mCSB_"+o.idx+"_container"),c=u.parent(),h=a.callbacks.onTotalScrollOffset?V.call(e,a.callbacks.onTotalScrollOffset):[0,0],d=a.callbacks.onTotalScrollBackOffset?V.call(e,a.callbacks.onTotalScrollBackOffset):[0,0];if(o.trigger=n.trigger,0===c.scrollTop()&&0===c.scrollLeft()||(t(".mCSB_"+o.idx+"_scrollbar").css("visibility","visible"),c.scrollTop(0).scrollLeft(0)),"_resetY"!==i||o.contentReset.y||(E("onOverflowYNone")&&a.callbacks.onOverflowYNone.call(e[0]),o.contentReset.y=1),"_resetX"!==i||o.contentReset.x||(E("onOverflowXNone")&&a.callbacks.onOverflowXNone.call(e[0]),o.contentReset.x=1),"_resetY"!==i&&"_resetX"!==i){switch(!o.contentReset.y&&e[0].mcs||!o.overflowed[0]||(E("onOverflowY")&&a.callbacks.onOverflowY.call(e[0]),o.contentReset.x=null),!o.contentReset.x&&e[0].mcs||!o.overflowed[1]||(E("onOverflowX")&&a.callbacks.onOverflowX.call(e[0]),o.contentReset.x=null),a.snapAmount&&(i=function(e,t,i){return Math.round(e/t)*t-i}(i,a.snapAmount instanceof Array?"x"===n.dir?a.snapAmount[1]:a.snapAmount[0]:a.snapAmount,a.snapOffset)),n.dir){case"x":var f=t("#mCSB_"+o.idx+"_dragger_horizontal"),p="left",v=u[0].offsetLeft,g=[l.width()-u.outerWidth(!1),f.parent().width()-f.width()],m=[i,0===i?0:i/o.scrollRatio.x],y=h[1],b=d[1],_=y>0?y/o.scrollRatio.x:0,w=b>0?b/o.scrollRatio.x:0;break;case"y":f=t("#mCSB_"+o.idx+"_dragger_vertical"),p="top",v=u[0].offsetTop,g=[l.height()-u.outerHeight(!1),f.parent().height()-f.height()],m=[i,0===i?0:i/o.scrollRatio.y],y=h[0],b=d[0],_=y>0?y/o.scrollRatio.y:0,w=b>0?b/o.scrollRatio.y:0}m[1]<0||0===m[0]&&0===m[1]?m=[0,0]:m[1]>=g[1]?m=[g[0],g[1]]:m[0]=-m[0],e[0].mcs||(S(),E("onInit")&&a.callbacks.onInit.call(e[0])),clearTimeout(u[0].onCompleteTimeout),J(f[0],p,Math.round(m[1]),s[1],n.scrollEasing),!o.tweenRunning&&(0===v&&m[0]>=0||v===g[0]&&m[0]<=g[0])||J(u[0],p,Math.round(m[0]),s[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!o.tweenRunning&&(E("onScrollStart")&&(S(),a.callbacks.onScrollStart.call(e[0])),o.tweenRunning=!0,k(f),o.cbOffsets=[a.callbacks.alwaysTriggerOffsets||v>=g[0]+y,a.callbacks.alwaysTriggerOffsets||v<=-b])},onUpdate:function(){n.callbacks&&n.onUpdate&&E("whileScrolling")&&(S(),a.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===a.axis&&clearTimeout(u[0].onCompleteTimeout);var t=u[0].idleTimer||0;u[0].onCompleteTimeout=setTimeout((function(){E("onScroll")&&(S(),a.callbacks.onScroll.call(e[0])),E("onTotalScroll")&&m[1]>=g[1]-_&&o.cbOffsets[0]&&(S(),a.callbacks.onTotalScroll.call(e[0])),E("onTotalScrollBack")&&m[1]<=w&&o.cbOffsets[1]&&(S(),a.callbacks.onTotalScrollBack.call(e[0])),o.tweenRunning=!1,u[0].idleTimer=0,k(f,"hide")}),t)}}})}function E(e){return o&&a.callbacks[e]&&"function"==typeof a.callbacks[e]}function S(){var t=[u[0].offsetTop,u[0].offsetLeft],i=[f[0].offsetTop,f[0].offsetLeft],o=[u.outerHeight(!1),u.outerWidth(!1)],a=[l.height(),l.width()];e[0].mcs={content:u,top:t[0],left:t[1],draggerTop:i[0],draggerLeft:i[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(o[0])-a[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(o[1])-a[1])),direction:n.dir}}},J=function(e,t,i,n,o,a,r){e._mTween||(e._mTween={top:{},left:{}});var s,l,u=(r=r||{}).onStart||function(){},c=r.onUpdate||function(){},h=r.onComplete||function(){},d=K(),f=0,p=e.offsetTop,v=e.style,g=e._mTween[t];"left"===t&&(p=e.offsetLeft);var m=i-p;function y(){g.stop||(f||u.call(),f=K()-d,b(),f>=g.time&&(g.time=f>g.time?f+s-(f-g.time):f+s-1,g.time<f+1&&(g.time=f+1)),g.time<n?g.id=l(y):h.call())}function b(){n>0?(g.currVal=function(e,t,i,n,o){switch(o){case"linear":case"mcsLinear":return i*e/n+t;case"mcsLinearOut":return e/=n,e--,i*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return(e/=n/2)<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t);case"easeInOutStrong":return(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:(e--,i/2*(2-Math.pow(2,-10*e))+t);case"easeInOut":case"mcsEaseInOut":return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t;case"easeOutSmooth":return e/=n,e--,-i*(e*e*e*e-1)+t;case"easeOutStrong":return i*(1-Math.pow(2,-10*e/n))+t;case"easeOut":case"mcsEaseOut":default:var a=(e/=n)*e,r=a*e;return t+i*(.499999999999997*r*a+-2.5*a*a+5.5*r+-6.5*a+4*e)}}(g.time,p,m,n,o),v[t]=Math.round(g.currVal)+"px"):v[t]=i+"px",c.call()}g.stop=0,"none"!==a&&null!=g.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(g.id):clearTimeout(g.id),g.id=null),s=1e3/60,g.time=f+s,l=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return b(),setTimeout(e,.01)},g.id=l(y)},K=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Z=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],i=0;i<t.length;i++){var n=t[i];e._mTween[n].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},Q=function(e,t){try{delete e[t]}catch(i){e[t]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ie=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ne=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},oe=function(){var e=function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}();return!!e&&document[e]},t.fn[o]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==r(e)&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[o]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==r(e)&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[o].defaults=a,window[o]=!0,t(window).bind("load",(function(){t(".mCustomScrollbar")[o](),t.extend(t.expr[":"],{mcsInView:t.expr[":"].mcsInView||function(e){var i,n,o=t(e),a=o.parents(".mCSB_container");if(a.length)return i=a.parent(),(n=[a[0].offsetTop,a[0].offsetLeft])[0]+ne(o)[0]>=0&&n[0]+ne(o)[0]<i.height()-o.outerHeight(!1)&&n[1]+ne(o)[1]>=0&&n[1]+ne(o)[1]<i.width()-o.outerWidth(!1)},mcsInSight:t.expr[":"].mcsInSight||function(e,i,n){var o,a,r,s,l=t(e),u=l.parents(".mCSB_container"),c="exact"===n[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(u.length)return o=[l.outerHeight(!1),l.outerWidth(!1)],r=[u[0].offsetTop+ne(l)[0],u[0].offsetLeft+ne(l)[1]],a=[u.parent()[0].offsetHeight,u.parent()[0].offsetWidth],r[0]-a[0]*(s=[o[0]<a[0]?c[0]:c[1],o[1]<a[1]?c[0]:c[1]])[0][0]<0&&r[0]+o[0]-a[0]*s[0][1]>=0&&r[1]-a[1]*s[1][0]<0&&r[1]+o[1]-a[1]*s[1][1]>=0},mcsOverflow:t.expr[":"].mcsOverflow||function(e){var i=t(e).data("mCS");if(i)return i.overflowed[0]||i.overflowed[1]}})}))})?n.apply(t,o):n)||(e.exports=a)},,,,,,,function(e,t,i){(function(i){var n,o,a,r;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r=function(){return function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){if(a)return a(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};t[r][0].call(u.exports,(function(e){var i=t[r][1][e];return o(i||e)}),u,u.exports,e,t,i,n)}return i[r].exports}for(var a=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,i){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(e,t,n){(function(i){var n=e("./transports"),o=e("component-emitter"),a=e("debug")("engine.io-client:socket"),r=e("indexof"),l=e("engine.io-parser"),u=e("parseuri"),c=e("parsejson"),h=e("parseqs");function d(e,t){if(!(this instanceof d))return new d(e,t);t=t||{},e&&"object"==s(e)&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:i.location&&"https:"==location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(i.location?location.hostname:"localhost"),this.port=t.port||(i.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?null:t.rejectUnauthorized;var n="object"==s(i)&&i;n.global===n&&t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),this.open()}t.exports=d,d.priorWebsocketSuccess=!1,o(d.prototype),d.protocol=l.protocol,d.Socket=d,d.Transport=e("./transport"),d.transports=e("./transports"),d.parser=e("engine.io-parser"),d.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this.query);return t.EIO=l.protocol,t.transport=e,this.id&&(t.sid=this.id),new n[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},d.prototype.open=function(){var e;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},d.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),i=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;i=i||o}i||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!i)if("pong"==o.type&&"probe"==o.data){if(a('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;d.priorWebsocketSuccess="websocket"==t.name,a('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){i||"closed"!=n.readyState&&(a("changing transport and sending upgrade packet"),h(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{a('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=t.name,n.emit("upgradeError",r)}})))}function r(){i||(i=!0,h(),t.close(),t=null)}function s(i){var o=new Error("probe error: "+i);o.transport=t.name,r(),a('probe transport "%s" failed because of error: %s',e,i),n.emit("upgradeError",o)}function l(){s("transport closed")}function u(){s("socket closed")}function c(e){t&&e.name!=t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),r())}function h(){t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",l),n.removeListener("close",u),n.removeListener("upgrading",c)}d.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",s),t.once("close",l),this.once("close",u),this.once("upgrading",c),t.open()},d.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},d.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(c(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!=t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,i){return this.sendPacket("message",e,t,i),this},d.prototype.sendPacket=function(e,t,i,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof i&&(n=i,i=null),"closing"!=this.readyState&&"closed"!=this.readyState){(i=i||{}).compress=!1!==i.compress;var o={type:e,data:t,options:i};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},d.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function i(){e.removeListener("upgrade",i),e.removeListener("upgradeError",i),t()}function n(){e.once("upgrade",i),e.once("upgradeError",i)}return this},d.prototype.onError=function(e){a("socket error %j",e),d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){"opening"!=this.readyState&&"open"!=this.readyState&&"closing"!=this.readyState||(a('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},d.prototype.filterUpgrades=function(e){for(var t=[],i=0,n=e.length;i<n;i++)~r(this.transports,e[i])&&t.push(e[i]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(e,t,i){var n=e("engine.io-parser"),o=e("component-emitter");function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}t.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var i=new Error(e);return i.type="TransportError",i.description=t,this.emit("error",i),this},a.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(e,t,n){(function(t){var i=e("xmlhttprequest-ssl"),o=e("./polling-xhr"),a=e("./polling-jsonp"),r=e("./websocket");n.polling=function(e){var n=!1,r=!1,s=!1!==e.jsonp;if(t.location){var l="https:"==location.protocol,u=location.port;u||(u=l?443:80),n=e.hostname!=location.hostname||u!=e.port,r=e.secure!=l}if(e.xdomain=n,e.xscheme=r,"open"in new i(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new a(e)},n.websocket=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(e,t,n){(function(i){var n=e("./polling"),o=e("component-inherit");t.exports=u;var a,r=/\n/g,s=/\\n/g;function l(){}function u(e){n.call(this,e),this.query=this.query||{},a||(i.___eio||(i.___eio=[]),a=i.___eio),this.index=a.length;var t=this;a.push((function(e){t.onData(e)})),this.query.j=this.index,i.document&&i.addEventListener&&i.addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}o(u,n),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(t,i):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var i=this;if(!this.form){var n,o=document.createElement("form"),a=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=l,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function u(){c(),t()}function c(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=i.iframeId,n.src="javascript:0"}n.id=i.iframeId,i.form.appendChild(n),i.iframe=n}this.form.action=this.uri(),c(),e=e.replace(s,"\\\n"),this.area.value=e.replace(r,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&u()}:this.iframe.onload=u}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./polling":8,"component-inherit":16}],7:[function(e,t,n){(function(i){var n=e("xmlhttprequest-ssl"),o=e("./polling"),a=e("component-emitter"),r=e("component-inherit"),s=e("debug")("engine.io-client:polling-xhr");function l(){}function u(e){if(o.call(this,e),i.location){var t="https:"==location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!=i.location.hostname||n!=e.port,this.xs=e.secure!=t}else this.extraHeaders=e.extraHeaders}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=null!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function h(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}t.exports=u,t.exports.Request=c,r(u,o),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new c(e)},u.prototype.doWrite=function(e,t){var i="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:i}),o=this;n.on("success",t),n.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=n},u.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(c.prototype),c.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),o=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var a in t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(a)&&t.setRequestHeader(a,this.extraHeaders[a])}catch(e){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){o.onLoad()},t.onerror=function(){o.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?o.onLoad():setTimeout((function(){o.onError(t.status)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){o.onError(e)}),0)}i.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},c.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}i.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var i=new Uint8Array(this.xhr.response),n=[],o=0,a=i.length;o<a;o++)n.push(i[o]);e=String.fromCharCode.apply(null,n)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},c.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},i.document&&(c.requestsCount=0,c.requests={},i.attachEvent?i.attachEvent("onunload",h):i.addEventListener&&i.addEventListener("beforeunload",h,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(e,t,i){var n=e("../transport"),o=e("parseqs"),a=e("engine.io-parser"),r=e("component-inherit"),s=e("yeast"),l=e("debug")("engine.io-client:polling");t.exports=c;var u=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function c(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),n.call(this,e)}r(c,n),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause=function(e){var t=this;function i(){l("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){l("pre-pause polling complete"),--n||i()}))),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){l("pre-pause writing complete"),--n||i()})))}else i()},c.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},c.prototype.onData=function(e){var t=this;l("polling got data %s",e),a.decodePayload(e,this.socket.binaryType,(function(e,i,n){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},c.prototype.doClose=function(){var e=this;function t(){l("writing close packet"),e.write([{type:"close"}])}"open"==this.readyState?(l("transport open - closing"),t()):(l("transport not open - deferring close"),this.once("open",t))},c.prototype.write=function(e){var t=this;this.writable=!1;var i=function(){t.writable=!0,t.emit("drain")};t=this,a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,i)}))},c.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(i=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(e,t,n){(function(i){var n=e("../transport"),o=e("engine.io-parser"),a=e("parseqs"),r=e("component-inherit"),s=e("yeast"),l=e("debug")("engine.io-client:websocket"),u=i.WebSocket||i.MozWebSocket,c=u;if(!c&&"undefined"==typeof window)try{c=e("ws")}catch(e){}function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,n.call(this,e)}t.exports=h,r(h,n),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.ws=u?new c(e):new c(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(h.prototype.onData=function(e){var t=this;setTimeout((function(){n.prototype.onData.call(t,e)}),0)}),h.prototype.write=function(e){var t=this;this.writable=!1;for(var n=e.length,a=0,r=n;a<r;a++)!function(e){o.encodePacket(e,t.supportsBinary,(function(o){if(!u){var a={};e.options&&(a.compress=e.options.compress),t.perMessageDeflate&&("string"==typeof o?i.Buffer.byteLength(o):o.length)<t.perMessageDeflate.threshold&&(a.compress=!1)}try{u?t.ws.send(o):t.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--n||(t.emit("flush"),setTimeout((function(){t.writable=!0,t.emit("drain")}),0))}))}(e[a])},h.prototype.onClose=function(){n.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",i="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(i=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+e},h.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===h.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(e,t,i){var n=e("has-cors");t.exports=function(e){var t=e.xdomain,i=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!i&&o)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":22}],11:[function(e,t,i){function n(){}t.exports=function(e,t,i){var o=!1;return i=i||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(o=!0,t(e),t=i):0!==a.count||o||t(null,n)}}},{}],12:[function(e,t,i){t.exports=function(e,t,i){var n=e.byteLength;if(t=t||0,i=i||n,e.slice)return e.slice(t,i);if(t<0&&(t+=n),i<0&&(i+=n),i>n&&(i=n),t>=n||t>=i||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(i-t),r=t,s=0;r<i;r++,s++)a[s]=o[r];return a.buffer}},{}],13:[function(e,t,i){!function(e){"use strict";i.encode=function(t){var i,n=new Uint8Array(t),o=n.length,a="";for(i=0;i<o;i+=3)a+=e[n[i]>>2],a+=e[(3&n[i])<<4|n[i+1]>>4],a+=e[(15&n[i+1])<<2|n[i+2]>>6],a+=e[63&n[i+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},i.decode=function(t){var i,n,o,a,r,s=.75*t.length,l=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),h=new Uint8Array(c);for(i=0;i<l;i+=4)n=e.indexOf(t[i]),o=e.indexOf(t[i+1]),a=e.indexOf(t[i+2]),r=e.indexOf(t[i+3]),h[u++]=n<<2|o>>4,h[u++]=(15&o)<<4|a>>2,h[u++]=(3&a)<<6|63&r;return c}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(e,t,n){(function(e){var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=i&&i.prototype.append&&i.prototype.getBlob;function r(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.buffer instanceof ArrayBuffer){var n=i.buffer;if(i.byteLength!==n.byteLength){var o=new Uint8Array(i.byteLength);o.set(new Uint8Array(n,i.byteOffset,i.byteLength)),n=o.buffer}e[t]=n}}}function s(e,t){t=t||{};var n=new i;r(e);for(var o=0;o<e.length;o++)n.append(e[o]);return t.type?n.getBlob(t.type):n.getBlob()}function l(e,t){return r(e),new Blob(e,t||{})}t.exports=n?o?e.Blob:l:a?s:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],15:[function(e,t,i){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){var i=this;function n(){i.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],16:[function(e,t,i){t.exports=function(e,t){var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],17:[function(e,t,i){function n(){var e;try{e=i.storage.debug}catch(e){}return e}(i=t.exports=e("./debug")).log=function(){return"object"===("undefined"==typeof console?"undefined":s(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,a=0;return e[0].replace(/%[a-z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,n),e},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=n,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){return JSON.stringify(e)},i.enable(n())},{"./debug":18}],18:[function(e,t,i){(i=t.exports=function(e){function t(){}function o(){var e=o,t=+new Date,r=t-(n||t);e.diff=r,e.prev=n,e.curr=t,n=t,null==e.useColors&&(e.useColors=i.useColors()),null==e.color&&e.useColors&&(e.color=a());var s=Array.prototype.slice.call(arguments);s[0]=i.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var l=0;s[0]=s[0].replace(/%([a-z%])/g,(function(t,n){if("%%"===t)return t;l++;var o=i.formatters[n];if("function"==typeof o){var a=s[l];t=o.call(e,a),s.splice(l,1),l--}return t})),"function"==typeof i.formatArgs&&(s=i.formatArgs.apply(e,s));var u=o.log||i.log||console.log.bind(console);u.apply(e,s)}t.enabled=!1,o.enabled=!0;var r=i.enabled(e)?o:t;return r.namespace=e,r}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},i.disable=function(){i.enable("")},i.enable=function(e){i.save(e);for(var t=(e||"").split(/[\s,]+/),n=t.length,o=0;o<n;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")))},i.enabled=function(e){var t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=e("ms"),i.names=[],i.skips=[],i.formatters={};var n,o=0;function a(){return i.colors[o++%i.colors.length]}},{ms:25}],19:[function(e,t,n){(function(t){var i=e("./keys"),o=e("has-binary"),a=e("arraybuffer.slice"),r=e("base64-arraybuffer"),s=e("after"),l=e("utf8"),u=navigator.userAgent.match(/Android/i),c=/PhantomJS/i.test(navigator.userAgent),h=u||c;n.protocol=3;var d=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=i(d),p={type:"error",data:"parser error"},v=e("blob");function g(e,t,i){for(var n=new Array(e.length),o=s(e.length,i),a=function(e,i,o){t(i,(function(t,i){n[e]=i,o(t,n)}))},r=0;r<e.length;r++)a(r,e[r],o)}n.encodePacket=function(e,i,o,a){"function"==typeof i&&(a=i,i=!1),"function"==typeof o&&(a=o,o=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&r instanceof ArrayBuffer)return function(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var o=e.data,a=new Uint8Array(o),r=new Uint8Array(1+o.byteLength);r[0]=d[e.type];for(var s=0;s<a.length;s++)r[s+1]=a[s];return i(r.buffer)}(e,i,a);if(v&&r instanceof t.Blob)return function(e,t,i){if(!t)return n.encodeBase64Packet(e,i);if(h)return function(e,t,i){if(!t)return n.encodeBase64Packet(e,i);var o=new FileReader;return o.onload=function(){e.data=o.result,n.encodePacket(e,t,!0,i)},o.readAsArrayBuffer(e.data)}(e,t,i);var o=new Uint8Array(1);o[0]=d[e.type];var a=new v([o.buffer,e.data]);return i(a)}(e,i,a);if(r&&r.base64)return function(e,t){var i="b"+n.packets[e.type]+e.data.data;return t(i)}(e,a);var s=d[e.type];return void 0!==e.data&&(s+=o?l.encode(String(e.data)):String(e.data)),a(""+s)},n.encodeBase64Packet=function(e,i){var o,a="b"+n.packets[e.type];if(v&&e.data instanceof t.Blob){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];i(a+e)},r.readAsDataURL(e.data)}try{o=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),l=new Array(s.length),u=0;u<s.length;u++)l[u]=s[u];o=String.fromCharCode.apply(null,l)}return a+=t.btoa(o),i(a)},n.decodePacket=function(e,t,i){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(i)try{e=l.decode(e)}catch(e){return p}var o=e.charAt(0);return Number(o)==o&&f[o]?e.length>1?{type:f[o],data:e.substring(1)}:{type:f[o]}:p}o=new Uint8Array(e)[0];var r=a(e,1);return v&&"blob"===t&&(r=new v([r])),{type:f[o],data:r}},n.decodeBase64Packet=function(e,i){var n=f[e.charAt(0)];if(!t.ArrayBuffer)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=r.decode(e.substr(1));return"blob"===i&&v&&(o=new v([o])),{type:n,data:o}},n.encodePayload=function(e,t,i){"function"==typeof t&&(i=t,t=null);var a=o(e);return t&&a?v&&!h?n.encodePayloadAsBlob(e,i):n.encodePayloadAsArrayBuffer(e,i):e.length?void g(e,(function(e,i){n.encodePacket(e,!!a&&t,!0,(function(e){i(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return i(t.join(""))})):i("0:")},n.decodePayload=function(e,t,i){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,i);var o;if("function"==typeof t&&(i=t,t=null),""==e)return i(p,0,1);for(var a,r,s="",l=0,u=e.length;l<u;l++){var c=e.charAt(l);if(":"!=c)s+=c;else{if(""==s||s!=(a=Number(s)))return i(p,0,1);if(s!=(r=e.substr(l+1,a)).length)return i(p,0,1);if(r.length){if(o=n.decodePacket(r,t,!0),p.type==o.type&&p.data==o.data)return i(p,0,1);if(!1===i(o,l+a,u))return}l+=a,s=""}}return""!=s?i(p,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));g(e,(function(e,t){n.encodePacket(e,!0,!0,(function(e){return t(null,e)}))}),(function(e,i){var n=i.reduce((function(e,t){var i;return e+(i="string"==typeof t?t.length:t.byteLength).toString().length+i+2}),0),o=new Uint8Array(n),a=0;return i.forEach((function(e){var t="string"==typeof e,i=e;if(t){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);i=n.buffer}o[a++]=t?0:1;var s=i.byteLength.toString();for(r=0;r<s.length;r++)o[a++]=parseInt(s[r]);for(o[a++]=255,n=new Uint8Array(i),r=0;r<n.length;r++)o[a++]=n[r]})),t(o.buffer)}))},n.encodePayloadAsBlob=function(e,t){g(e,(function(e,t){n.encodePacket(e,!0,!0,(function(e){var i=new Uint8Array(1);if(i[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,i[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),r=new Uint8Array(a.length+1);for(o=0;o<a.length;o++)r[o]=parseInt(a[o]);if(r[a.length]=255,v){var s=new v([i.buffer,r.buffer,e]);t(null,s)}}))}),(function(e,i){return t(new v(i))}))},n.decodePayloadAsBinary=function(e,t,i){"function"==typeof t&&(i=t,t=null);for(var o=e,r=[],s=!1;o.byteLength>0;){for(var l=new Uint8Array(o),u=0===l[0],c="",h=1;255!=l[h];h++){if(c.length>310){s=!0;break}c+=l[h]}if(s)return i(p,0,1);o=a(o,2+c.length),c=parseInt(c);var d=a(o,0,c);if(u)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var f=new Uint8Array(d);for(d="",h=0;h<f.length;h++)d+=String.fromCharCode(f[h])}r.push(d),o=a(o,c)}var v=r.length;r.forEach((function(e,o){i(n.decodePacket(e,t,!0),o,v)}))}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(e,t,i){t.exports=Object.keys||function(e){var t=[],i=Object.prototype.hasOwnProperty;for(var n in e)i.call(e,n)&&t.push(n);return t}},{}],21:[function(e,t,n){(function(i){var n=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(n(t)){for(var o=0;o<t.length;o++)if(e(t[o]))return!0}else if(t&&"object"==s(t))for(var a in t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{isarray:24}],22:[function(e,t,i){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],23:[function(e,t,i){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},{}],24:[function(e,t,i){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],25:[function(e,t,i){var n=1e3,o=6e4,a=36e5,r=24*a;function s(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}t.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if(!((e=""+e).length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*r;case"hours":case"hour":case"hrs":case"hr":case"h":return i*a;case"minutes":case"minute":case"mins":case"min":case"m":return i*o;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}}}(e):t.long?s(i=e,r,"day")||s(i,a,"hour")||s(i,o,"minute")||s(i,n,"second")||i+" ms":function(e){return e>=r?Math.round(e/r)+"d":e>=a?Math.round(e/a)+"h":e>=o?Math.round(e/o)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);var i}},{}],26:[function(e,t,n){(function(e){var i=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,a=/(?:^|:|,)(?:\s*\[)+/g,r=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(r,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):i.test(t.replace(n,"@").replace(o,"]").replace(a,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],27:[function(e,t,i){i.encode=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t},i.decode=function(e){for(var t={},i=e.split("&"),n=0,o=i.length;n<o;n++){var a=i[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},{}],28:[function(e,t,i){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,i=e.indexOf("["),a=e.indexOf("]");-1!=i&&-1!=a&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));for(var r=n.exec(e||""),s={},l=14;l--;)s[o[l]]=r[l]||"";return-1!=i&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],29:[function(e,t,n){(function(e){!function(i){var o="object"==s(n)&&n,a="object"==s(t)&&t&&t.exports==o&&t,r="object"==s(e)&&e;r.global!==r&&r.window!==r||(i=r);var l,u,c,h=String.fromCharCode;function d(e){for(var t,i,n=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(i=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),o--):n.push(t);return n}function f(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function p(e,t){return h(e>>t&63|128)}function v(e){if(0==(4294967168&e))return h(e);var t="";return 0==(4294965248&e)?t=h(e>>6&31|192):0==(4294901760&e)?(f(e),t=h(e>>12&15|224),t+=p(e,6)):0==(4292870144&e)&&(t=h(e>>18&7|240),t+=p(e,12),t+=p(e,6)),t+=h(63&e|128)}function g(){if(c>=u)throw Error("Invalid byte index");var e=255&l[c];if(c++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function m(){var e,t;if(c>u)throw Error("Invalid byte index");if(c==u)return!1;if(e=255&l[c],c++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|g())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|g()<<6|g())>=2048)return f(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|g()<<12|g()<<6|g())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var y={version:"2.0.0",encode:function(e){for(var t=d(e),i=t.length,n=-1,o="";++n<i;)o+=v(t[n]);return o},decode:function(e){l=d(e),u=l.length,c=0;for(var t,i=[];!1!==(t=m());)i.push(t);return function(e){for(var t,i=e.length,n=-1,o="";++n<i;)(t=e[n])>65535&&(o+=h((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=h(t);return o}(i)}};if(o&&!o.nodeType)if(a)a.exports=y;else{var b={}.hasOwnProperty;for(var _ in y)b.call(y,_)&&(o[_]=y[_])}else i.utf8=y}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],30:[function(e,t,i){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},r=0,s=0;function l(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=l(+new Date);return e!==n?(r=0,n=e):e+"."+l(r++)}for(;s<64;s++)a[o[s]]=s;u.encode=l,u.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+a[e.charAt(s)];return t},t.exports=u},{}],31:[function(e,t,i){var n=e("./url"),o=e("socket.io-parser"),a=e("./manager"),r=e("debug")("socket.io-client");t.exports=i=u;var l=i.managers={};function u(e,t){"object"==s(e)&&(t=e,e=void 0),t=t||{};var i,o=n(e),u=o.source,c=o.id,h=o.path,d=l[c]&&h in l[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(r("ignoring socket cache for %s",u),i=a(u,t)):(l[c]||(r("new io instance for %s",u),l[c]=a(u,t)),i=l[c]),i.socket(o.path)}i.protocol=o.protocol,i.connect=u,i.Manager=e("./manager"),i.Socket=e("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(e,t,i){var n=e("engine.io-client"),o=e("./socket"),a=e("component-emitter"),r=e("socket.io-parser"),l=e("./on"),u=e("component-bind"),c=e("debug")("socket.io-client:manager"),h=e("indexof"),d=e("backo2"),f=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==s(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},a(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);var t=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=l(t,"open",(function(){i.onopen(),e&&e()})),a=l(t,"error",(function(t){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var r=this._timeout;c("connect attempt will timeout after %d",r);var s=setTimeout((function(){c("connect attempt timed out after %d",r),o.destroy(),t.close(),t.emit("error","timeout"),i.emitAll("connect_timeout",r)}),r);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(o),this.subs.push(a),this},p.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",u(this,"ondata"))),this.subs.push(l(e,"ping",u(this,"onping"))),this.subs.push(l(e,"pong",u(this,"onpong"))),this.subs.push(l(e,"error",u(this,"onerror"))),this.subs.push(l(e,"close",u(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",u(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},p.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new o(this,e),this.nsps[e]=t;var i=this;t.on("connecting",n),t.on("connect",(function(){t.id=i.engine.id})),this.autoConnect&&n()}function n(){~h(i.connecting,t)||i.connecting.push(t)}return t},p.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){c("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(i){for(var n=0;n<i.length;n++)t.engine.write(i[n],e.options);t.encoding=!1,t.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){var e;for(c("cleanup");e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var i=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(i)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(e,t,i){t.exports=function(e,t,i){return e.on(t,i),{destroy:function(){e.removeListener(t,i)}}}},{}],34:[function(e,t,i){var n=e("socket.io-parser"),o=e("component-emitter"),a=e("to-array"),r=e("./on"),s=e("component-bind"),l=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=d;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;function d(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[r(e,"open",s(this,"onopen")),r(e,"packet",s(this,"onpacket")),r(e,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(c.hasOwnProperty(e))return h.apply(this,arguments),this;var t=a(arguments),i=n.EVENT;u(t)&&(i=n.BINARY_EVENT);var o={type:i,data:t,options:{}};return o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),delete this.flags,this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){l("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:n.CONNECT})},d.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,i=!1;return function(){if(!i){i=!0;var o=a(arguments);l("sending ack %j",o);var r=u(o)?n.BINARY_ACK:n.ACK;t.packet({type:r,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(e,t,n){(function(i){var n=e("parseuri"),o=e("debug")("socket.io-client:url");t.exports=function(e,t){var a=e;t=t||i.location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),a=n(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";var r=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+r+":"+a.port,a.href=a.protocol+"://"+r+(t&&t.port==a.port?"":":"+a.port),a}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{debug:39,parseuri:45}],36:[function(e,t,i){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-i:e+i}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},{}],37:[function(e,t,i){var n=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},{}],38:[function(e,t,i){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks["$"+e];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],39:[function(e,t,i){arguments[4][17][0].apply(i,arguments)},{"./debug":40,dup:17}],40:[function(e,t,i){arguments[4][18][0].apply(i,arguments)},{dup:18,ms:44}],41:[function(e,t,n){(function(i){var n=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(i.Buffer&&i.Buffer.isBuffer&&i.Buffer.isBuffer(t)||i.ArrayBuffer&&t instanceof ArrayBuffer||i.Blob&&t instanceof Blob||i.File&&t instanceof File)return!0;if(n(t)){for(var o=0;o<t.length;o++)if(e(t[o]))return!0}else if(t&&"object"==s(t))for(var a in t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,a)&&e(t[a]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{isarray:43}],42:[function(e,t,i){arguments[4][23][0].apply(i,arguments)},{dup:23}],43:[function(e,t,i){arguments[4][24][0].apply(i,arguments)},{dup:24}],44:[function(e,t,i){arguments[4][25][0].apply(i,arguments)},{dup:25}],45:[function(e,t,i){arguments[4][28][0].apply(i,arguments)},{dup:28}],46:[function(e,t,n){(function(t){var i=e("isarray"),o=e("./is-buffer");n.deconstructPacket=function(e){var t=[],n=e.data,a=e;return a.data=function e(n){if(!n)return n;if(o(n)){var a={_placeholder:!0,num:t.length};return t.push(n),a}if(i(n)){for(var r=new Array(n.length),l=0;l<n.length;l++)r[l]=e(n[l]);return r}if("object"==s(n)&&!(n instanceof Date)){for(var u in r={},n)r[u]=e(n[u]);return r}return n}(n),a.attachments=t.length,{packet:a,buffers:t}},n.reconstructPacket=function(e,t){return e.data=function e(n){if(n&&n._placeholder)return t[n.num];if(i(n)){for(var o=0;o<n.length;o++)n[o]=e(n[o]);return n}if(n&&"object"==s(n)){for(var a in n)n[a]=e(n[a]);return n}return n}(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){var a=0,r=e;!function e(l,u,c){if(!l)return l;if(t.Blob&&l instanceof Blob||t.File&&l instanceof File){a++;var h=new FileReader;h.onload=function(){c?c[u]=this.result:r=this.result,--a||n(r)},h.readAsArrayBuffer(l)}else if(i(l))for(var d=0;d<l.length;d++)e(l[d],d,l);else if(l&&"object"==s(l)&&!o(l))for(var f in l)e(l[f],f,l)}(r),a||n(r)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{"./is-buffer":48,isarray:43}],47:[function(e,t,i){var n=e("debug")("socket.io-parser"),o=e("json3"),a=(e("isarray"),e("component-emitter")),r=e("./binary"),s=e("./is-buffer");function l(){}function u(e){var t="",a=!1;return t+=e.type,i.BINARY_EVENT!=e.type&&i.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(a=!0,t+=e.nsp),null!=e.id&&(a&&(t+=",",a=!1),t+=e.id),null!=e.data&&(a&&(t+=","),t+=o.stringify(e.data)),n("encoded %j as %s",e,t),t}function c(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:i.ERROR,data:"parser error"}}i.protocol=4,i.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],i.CONNECT=0,i.DISCONNECT=1,i.EVENT=2,i.ACK=3,i.ERROR=4,i.BINARY_EVENT=5,i.BINARY_ACK=6,i.Encoder=l,i.Decoder=c,l.prototype.encode=function(e,t){n("encoding packet %j",e),i.BINARY_EVENT==e.type||i.BINARY_ACK==e.type?function(e,t){r.removeBlobs(e,(function(e){var i=r.deconstructPacket(e),n=u(i.packet),o=i.buffers;o.unshift(n),t(o)}))}(e,t):t([u(e)])},a(c.prototype),c.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t={},a=0;if(t.type=Number(e.charAt(0)),null==i.types[t.type])return d();if(i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type){for(var r="";"-"!=e.charAt(++a)&&(r+=e.charAt(a),a!=e.length););if(r!=Number(r)||"-"!=e.charAt(a))throw new Error("Illegal attachments");t.attachments=Number(r)}if("/"==e.charAt(a+1))for(t.nsp="";++a&&","!=(l=e.charAt(a))&&(t.nsp+=l,a!=e.length););else t.nsp="/";var s=e.charAt(a+1);if(""!==s&&Number(s)==s){for(t.id="";++a;){var l;if(null==(l=e.charAt(a))||Number(l)!=l){--a;break}if(t.id+=e.charAt(a),a==e.length)break}t.id=Number(t.id)}if(e.charAt(++a))try{t.data=o.parse(e.substr(a))}catch(e){return d()}return n("decoded %s as %j",e,t),t}(e),i.BINARY_EVENT==t.type||i.BINARY_ACK==t.type?(this.reconstructor=new h(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},c.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(e,t,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],49:[function(e,t,i){arguments[4][15][0].apply(i,arguments)},{dup:15}],50:[function(e,t,n){(function(e){(function(){var i={function:!0,object:!0},o=i[s(n)]&&n&&!n.nodeType&&n,a=i["undefined"==typeof window?"undefined":s(window)]&&window||this,r=o&&i[s(t)]&&t&&!t.nodeType&&"object"==s(e)&&e;function l(e,t){e||(e=a.Object()),t||(t=a.Object());var n=e.Number||a.Number,o=e.String||a.String,r=e.Object||a.Object,u=e.Date||a.Date,c=e.SyntaxError||a.SyntaxError,h=e.TypeError||a.TypeError,d=e.Math||a.Math,f=e.JSON||a.JSON;"object"==s(f)&&f&&(t.stringify=f.stringify,t.parse=f.parse);var p,v,g=r.prototype,m=g.toString,y=new u(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function b(e){if(void 0!==b[e])return b[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=b("json-stringify")&&b("json-parse");else{var a,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var s=t.stringify,l="function"==typeof s&&y;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===s(0)&&"0"===s(new n)&&'""'==s(new o)&&void 0===s(m)&&void 0===s(void 0)&&void 0===s()&&"1"===s(a)&&"[1]"==s([a])&&"[null]"==s([void 0])&&"null"==s(null)&&"[null,null,null]"==s([void 0,m,null])&&s({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===s(null,a)&&"[\n 1,\n 2\n]"==s([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==s(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==s(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==s(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==s(new u(-1))}catch(e){l=!1}}i=l}if("json-parse"==e){var c=t.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){var h=5==(a=c(r)).a.length&&1===a.a[0];if(h){try{h=!c('"\t"')}catch(e){}if(h)try{h=1!==c("01")}catch(e){}if(h)try{h=1!==c("1.")}catch(e){}}}}catch(e){h=!1}i=h}}return b[e]=!!i}if(!b("json")){var _=b("bug-string-char-index");if(!y)var w=d.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return E[t]+365*(e-1970)+w((e-1969+(t=+(t>1)))/4)-w((e-1901+t)/100)+w((e-1601+t)/400)};if((p=g.hasOwnProperty)||(p=function(e){var t,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=m?p=function(e){var t=this.__proto__,i=e in(this.__proto__=null,this);return this.__proto__=t,i}:(t=i.constructor,p=function(e){var i=(this.constructor||t).prototype;return e in this&&!(e in i&&this[e]===i[e])}),i=null,p.call(this,e)}),v=function(e,t){var n,o,a,r=0;for(a in(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n)p.call(o,a)&&r++;return n=o=null,r?v=2==r?function(e,t){var i,n={},o="[object Function]"==m.call(e);for(i in e)o&&"prototype"==i||p.call(n,i)||!(n[i]=1)||!p.call(e,i)||t(i)}:function(e,t){var i,n,o="[object Function]"==m.call(e);for(i in e)o&&"prototype"==i||!p.call(e,i)||(n="constructor"===i)||t(i);(n||p.call(e,i="constructor"))&&t(i)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],v=function(e,t){var n,a,r="[object Function]"==m.call(e),l=!r&&"function"!=typeof e.constructor&&i[s(e.hasOwnProperty)]&&e.hasOwnProperty||p;for(n in e)r&&"prototype"==n||!l.call(e,n)||t(n);for(a=o.length;n=o[--a];l.call(e,n)&&t(n));}),v(e,t)},!b("json-stringify")){var k={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},T=function(e,t){return("000000"+(t||0)).slice(-e)},C=function(e){for(var t='"',i=0,n=e.length,o=!_||n>10,a=o&&(_?e.split(""):e);i<n;i++){var r=e.charCodeAt(i);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=k[r];break;default:if(r<32){t+="\\u00"+T(2,r.toString(16));break}t+=o?a[i]:e.charAt(i)}}return t+'"'};t.stringify=function(e,t,n){var o,a,r,l;if(i[s(t)]&&t)if("[object Function]"==(l=m.call(t)))a=t;else if("[object Array]"==l){r={};for(var u,c=0,d=t.length;c<d;u=t[c++],("[object String]"==(l=m.call(u))||"[object Number]"==l)&&(r[u]=1));}if(n)if("[object Number]"==(l=m.call(n))){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else"[object String]"==l&&(o=n.length<=10?n:n.slice(0,10));return function e(t,i,n,o,a,r,l){var u,c,d,f,g,y,b,_,E,k,x,O,D,A,I,P;try{u=i[t]}catch(e){}if("object"==s(u)&&u)if("[object Date]"!=(c=m.call(u))||p.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||p.call(u,"toJSON"))&&(u=u.toJSON(t));else if(u>-1/0&&u<1/0){if(S){for(g=w(u/864e5),d=w(g/365.2425)+1970-1;S(d+1,0)<=g;d++);for(f=w((g-S(d,0))/30.42);S(d,f+1)<=g;f++);g=1+g-S(d,f),b=w((y=(u%864e5+864e5)%864e5)/36e5)%24,_=w(y/6e4)%60,E=w(y/1e3)%60,k=y%1e3}else d=u.getUTCFullYear(),f=u.getUTCMonth(),g=u.getUTCDate(),b=u.getUTCHours(),_=u.getUTCMinutes(),E=u.getUTCSeconds(),k=u.getUTCMilliseconds();u=(d<=0||d>=1e4?(d<0?"-":"+")+T(6,d<0?-d:d):T(4,d))+"-"+T(2,f+1)+"-"+T(2,g)+"T"+T(2,b)+":"+T(2,_)+":"+T(2,E)+"."+T(3,k)+"Z"}else u=null;if(n&&(u=n.call(i,t,u)),null===u)return"null";if("[object Boolean]"==(c=m.call(u)))return""+u;if("[object Number]"==c)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==c)return C(""+u);if("object"==s(u)){for(A=l.length;A--;)if(l[A]===u)throw h();if(l.push(u),x=[],I=r,r+=a,"[object Array]"==c){for(D=0,A=u.length;D<A;D++)O=e(D,u,n,o,a,r,l),x.push(void 0===O?"null":O);P=x.length?a?"[\n"+r+x.join(",\n"+r)+"\n"+I+"]":"["+x.join(",")+"]":"[]"}else v(o||u,(function(t){var i=e(t,u,n,o,a,r,l);void 0!==i&&x.push(C(t)+":"+(a?" ":"")+i)})),P=x.length?a?"{\n"+r+x.join(",\n"+r)+"\n"+I+"}":"{"+x.join(",")+"}":"{}";return l.pop(),P}}("",((u={})[""]=e,u),a,r,o,"",[])}}if(!b("json-parse")){var x,O,D=o.fromCharCode,A={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},I=function(){throw x=O=null,c()},P=function(){for(var e,t,i,n,o,a=O,r=a.length;x<r;)switch(o=a.charCodeAt(x)){case 9:case 10:case 13:case 32:x++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?a.charAt(x):a[x],x++,e;case 34:for(e="@",x++;x<r;)if((o=a.charCodeAt(x))<32)I();else if(92==o)switch(o=a.charCodeAt(++x)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=A[o],x++;break;case 117:for(t=++x,i=x+4;x<i;x++)(o=a.charCodeAt(x))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||I();e+=D("0x"+a.slice(t,x));break;default:I()}else{if(34==o)break;for(o=a.charCodeAt(x),t=x;o>=32&&92!=o&&34!=o;)o=a.charCodeAt(++x);e+=a.slice(t,x)}if(34==a.charCodeAt(x))return x++,e;I();default:if(t=x,45==o&&(n=!0,o=a.charCodeAt(++x)),o>=48&&o<=57){for(48==o&&(o=a.charCodeAt(x+1))>=48&&o<=57&&I(),n=!1;x<r&&(o=a.charCodeAt(x))>=48&&o<=57;x++);if(46==a.charCodeAt(x)){for(i=++x;i<r&&(o=a.charCodeAt(i))>=48&&o<=57;i++);i==x&&I(),x=i}if(101==(o=a.charCodeAt(x))||69==o){for(43!=(o=a.charCodeAt(++x))&&45!=o||x++,i=x;i<r&&(o=a.charCodeAt(i))>=48&&o<=57;i++);i==x&&I(),x=i}return+a.slice(t,x)}if(n&&I(),"true"==a.slice(x,x+4))return x+=4,!0;if("false"==a.slice(x,x+5))return x+=5,!1;if("null"==a.slice(x,x+4))return x+=4,null;I()}return"$"},$=function(e,t,i){var n=R(e,t,i);void 0===n?delete e[t]:e[t]=n},R=function(e,t,i){var n,o=e[t];if("object"==s(o)&&o)if("[object Array]"==m.call(o))for(n=o.length;n--;)$(o,n,i);else v(o,(function(e){$(o,e,i)}));return i.call(e,t,o)};t.parse=function(e,t){var i,n;return x=0,O=""+e,i=function e(t){var i,n;if("$"==t&&I(),"string"==typeof t){if("@"==(_?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(i=[];"]"!=(t=P());n||(n=!0))n&&(","==t?"]"==(t=P())&&I():I()),","==t&&I(),i.push(e(t));return i}if("{"==t){for(i={};"}"!=(t=P());n||(n=!0))n&&(","==t?"}"==(t=P())&&I():I()),","!=t&&"string"==typeof t&&"@"==(_?t.charAt(0):t[0])&&":"==P()||I(),i[t.slice(1)]=e(P());return i}I()}return t}(P()),"$"!=P()&&I(),x=O=null,t&&"[object Function]"==m.call(t)?R(((n={})[""]=i,n),"",t):i}}}return t.runInContext=l,t}if(!r||r.global!==r&&r.window!==r&&r.self!==r||(a=r),o)l(a,o);else{var u=a.JSON,c=a.JSON3,h=!1,d=l(a,a.JSON3={noConflict:function(){return h||(h=!0,a.JSON=u,a.JSON3=c,u=c=null),d}});a.JSON={parse:d.parse,stringify:d.stringify}}}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{})},{}],51:[function(e,t,i){t.exports=function(e,t){for(var i=[],n=(t=t||0)||0;n<e.length;n++)i[n-t]=e[n];return i}},{}]},{},[31])(31)},"object"===s(t)&&void 0!==e?e.exports=r():(o=[],void 0===(a="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=a))}).call(this,i(166))},function(e,t,i){"use strict";var n=i(4),o=i(115);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=s(this,l(t).call(this)))._presetsByUuid={},i._numPresets=0,e instanceof Array)for(var n=0,o=e.length;n<o;n++)i.add(e[n]);return i}var i,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),i=t,(n=[{key:"add",value:function(e){e.uuid in this._presetsByUuid||(this._presetsByUuid[e.uuid]=e,this._numPresets++,this.dispatchEvent(new o.a(o.a.PRESET_ADDED).setPreset(e)))}},{key:"remove",value:function(e){e.uuid in this._presetsByUuid&&(delete this._presetsByUuid[e.uuid],this._numPresets--,this.dispatchEvent(new o.a(o.a.PRESET_REMOVED).setPreset(e)))}},{key:"each",value:function(e,t){for(var i in this._presetsByUuid)if(!1===e.call(t,this._presetsByUuid[i]))break}},{key:"isEmpty",value:function(){return 0===this._numPresets}},{key:"export",value:function(){var e=[];for(var t in this._presetsByUuid)e.push(this._presetsByUuid[t]);return e}},{key:"count",value:function(){return this._numPresets}},{key:"getPresetByUuid",value:function(e){return e in this._presetsByUuid?this._presetsByUuid[e]:null}},{key:"finalize",value:function(){this._presetsByUuid=null,this._numPresets=void 0}}])&&r(i.prototype,n),a&&r(i,a),t}(n.a);t.a=c},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storageKey=t,this._fileBag=i}var t,i,o;return t=e,(i=[{key:"set",value:function(e){if(window.sessionStorage&&window.JSON){for(var t=[],i=0,n=e.length;i<n;i++)t.push(e[i].uuid);sessionStorage.setItem(this._storageKey,JSON.stringify(t))}}},{key:"get",value:function(){if(!window.sessionStorage||!window.JSON)return null;var e=sessionStorage.getItem(this._storageKey);if(e){for(var t,i=[],n=0,o=(e=JSON.parse(e)).length;n<o;n++)(t=this._fileBag.getFileByUuid(e[n]))&&i.push(t);if(0!==i.length)return i}return null}},{key:"clear",value:function(){sessionStorage.removeItem(this._storageKey)}}])&&n(t.prototype,i),o&&n(t,o),e}();t.a=o},function(e,t){e.exports=function(e){var t='<div class="gallery-file-section"> ';return e.title&&(t+=' <div class="head"> <span class="title">'+e.title+"</span> ",(e.optSelection||e.optDownload)&&(t+=' <ul class="buttons layout-list hit"> ',e.optSelection&&(t+=' <li class="btn-select" title="'+e.i18n.p__("gallery.filesection","Select all images in this section")+'"> <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19"><polygon points="15 9 10 9 10 4 9 4 9 9 4 9 4 10 9 10 9 15 10 15 10 10 15 10 15 9"/></svg> </li> '),t+=" ",e.optDownload&&(t+=' <li class="btn-download" title="'+e.i18n.p__("gallery.filesection","Download all images in this section")+'"> <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19"><polygon points="13.646 9.646 10 13.293 10 4 9 4 9 13.293 5.354 9.646 4.646 10.354 9.5 15.207 14.354 10.354 13.646 9.646"/></svg> </li> '),t+=" </ul> "),t+=" </div> "),t+=' <div class="body rst"> ',"list"===e.layout&&(t+=' <table class="list-entry-table" border="0" cellpadding="0" cellspacing="0"> <thead> <tr> ',e.optSelection&&(t+=' <th class="col-select"> <svg xmlns="http://www.w3.org/2000/svg" width="9" height="9" viewBox="0 0 9 9"><polygon points="9 4 5 4 5 0 4 0 4 4 0 4 0 5 4 5 4 9 5 9 5 5 9 5 9 4" fill="#999"/></svg> </th> '),t+=' <th class="col-thumb"> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="10" viewBox="0 0 14 10"><path d="M12,3.17A3.054,3.054,0,0,0,10.974,3C7.932,3,6.551,6.348,5.163,6.348S4.06,5.235,2.294,5.235A1.061,1.061,0,0,0,2,5.283V8H12Z" fill="#999"/><circle cx="4" cy="3" r="1" fill="#999"/><path d="M13,1V9H1V1H13m0-1H1A1,1,0,0,0,0,1V9a1,1,0,0,0,1,1H13a1,1,0,0,0,1-1V1a1,1,0,0,0-1-1Z" fill="#999"/></svg> </th> <th class="col-filename">'+e.i18n.p__("gallery.filesection","tableheading_filename")+"</th> ",e.optFlags&&(t+=' <th class="col-flags"> <svg xmlns="http://www.w3.org/2000/svg" width="8" height="11" viewBox="0 0 8 11"><path d="M5.617.922C4.451.922,3.741.114,2.5.114A4.776,4.776,0,0,0,0,1V11H1V6.477a3.833,3.833,0,0,1,1.5-.363c1.238,0,1.948.808,3.114.808A4.282,4.282,0,0,0,8,6V0A4.283,4.283,0,0,1,5.617.922ZM7,5.451a2.857,2.857,0,0,1-1.383.471A2.884,2.884,0,0,1,4.5,5.606a4.91,4.91,0,0,0-2-.492A4.478,4.478,0,0,0,1,5.393V1.576a3.3,3.3,0,0,1,1.5-.462,3.048,3.048,0,0,1,1.217.334,4.643,4.643,0,0,0,1.9.473A3.979,3.979,0,0,0,7,1.662Z" fill="#999"/></svg> </th> '),t+=" ",e.optComments&&(t+=' <th class="col-comments"> <svg xmlns="http://www.w3.org/2000/svg" width="12" height="7" viewBox="0 0 12 7"><rect y="2" width="12" height="1" fill="#999"/><rect width="12" height="1" fill="#999"/><rect y="4" width="12" height="1" fill="#999"/><rect y="6" width="8" height="1" fill="#999"/></svg> </th> '),t+=' <th class="col-dimensions">'+e.i18n.p__("gallery.filesection","tableheading_image_dimensions")+'</th> <th class="col-size">'+e.i18n.p__("gallery.filesection","tableheading_filesize")+'</th> <th class="col-ext">'+e.i18n.p__("gallery.filesection","tableheading_type")+'</th> <th class="col-time-captured">'+e.i18n.p__("gallery.filesection","tableheading_time_captured")+'</th> <th class="col-time-uploaded">'+e.i18n.p__("gallery.filesection","tableheading_time_uploaded")+"</th> ",(e.optAdmin||e.optDownload||e.optFlags)&&(t+=' <th class="col-menu"> <svg xmlns="http://www.w3.org/2000/svg" width="7" height="1" viewBox="0 0 7 1"><rect width="1" height="1" fill="#999"/><rect x="3" width="1" height="1" fill="#999"/><rect x="6" width="1" height="1" fill="#999"/></svg> </th> '),t+=" </tr> </thead> <tbody></tbody> </table> "),t+=" </div></div>"}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(7),r=i(98);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"setToolTip",value:function(e,t){var i=e.jquery?e:o()(e);i.on("mouseenter.".concat("pstt"),(function(e){e.currentTarget.tt_not=a.a.open((new r.a).setContent(t).setDelay(.3).setTimeout(0).setMessageType(r.a.TYPE_TOOLTIP).setWindowPadding(100))})),i.on("mouseleave.".concat("pstt"),(function(e){e.currentTarget.tt_not&&(a.a.close(e.currentTarget.tt_not),delete e.currentTarget.tt_not)}))}},{key:"removeToolTip",value:function(e){(e.jquery?e:o()(e)).trigger("mouseleave").off(".".concat("pstt"))}}],(i=null)&&s(t.prototype,i),n&&s(t,n),e}();t.a=l},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,e),this.width=t,this.height=i}},function(e,t){e.exports=function(e){return'<div class="bar-notification" data-id="'+e.id+'"> <div class="inner"> <span class="title"></span> <span class="content"></span> </div></div>'}},,,,,,function(e,t){!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),o=window.setTimeout((function(){t(i+n)}),n);return e=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},,,function(e,t){(function(t){e.exports=t}).call(this,{})},,,,,,,function(e,t){e.exports=function(e){var t="";if(e.entriesSingle){for(var i in t+='<div class="pdbox-meta-single-container"> ',e.entriesSingle)t+=' <div class="pdbox-meta-single"> <span class="label">'+i+'</span> <span class="value">'+e.entriesSingle[i]+"</span> </div> ";t+="</div>"}if(e.entriesTable){for(var i in t+='<table id="'+e.id+'" class="pdbox-meta-table"> ',e.entriesTable)t+=' <tr> <td class="label">'+i+'</td> <td class="value">'+e.entriesTable[i]+"</td> </tr> ";t+="</table>"}return t}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){var t='<ul class="dropdown cmp-overlay-menu"> ',i=e.siblings;if(i)for(var n,o=-1,a=i.length-1;o<a;)n=i[o+=1],t+=' <li> <a href="'+(e.gallery.domain.urlRel+n.url)+'" ',n.uuid===e.gallery.uuid&&(t+='class="disabled"'),t+=' title="'+n.name+'">'+n.name+"</a> </li> ";return t+="</ul>"}},function(e,t){e.exports=function(e){var t="<li ";return e.hasSiblings&&(t+='class="has-siblings"'),t+='> <a class="header-bar-btn btn--gallery" href="'+e.url+'" title="'+e.label+'">'+e.label+"</a> ",e.hasSiblings&&(t+=' <a href="" class="header-bar-btn btn--siblings"> <svg xmlns="http://www.w3.org/2000/svg" width="8" height="14" viewBox="0 0 8 14"><path d="M7.5,4a.5.5,0,0,1-.325-.12L4,1.158.825,3.88a.5.5,0,1,1-.65-.76l3.5-3a.5.5,0,0,1,.65,0l3.5,3A.5.5,0,0,1,7.5,4Z"/><path d="M.5,10a.5.5,0,0,1,.325.12L4,12.842,7.175,10.12a.5.5,0,0,1,.65.76l-3.5,3a.5.5,0,0,1-.65,0l-3.5-3A.5.5,0,0,1,.5,10Z"/></svg> </a> '),t+="</li>"}},function(e,t){e.exports=function(e){return'<ul id="gallery-breadcrumb" class="layout-list"> <li> <a class="header-bar-btn btn--domain" href="'+e.domain.urlRel+'">'+e.domain.name+'</a> </li> <li class="galleries-placeholder"></li> <li> <a class="header-bar-btn btn--subgalleries" href=""> <svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" viewBox="0 0 10 2"><circle cx="1" cy="1" r="1"/><circle cx="9" cy="1" r="1"/><circle cx="5" cy="1" r="1"/></svg> </a> <ul class="dropdown cmp-overlay-menu dd-subgalleries"> <li> <a href="" class="btn--create-subgallery">'+i18n.__("create sub gallery")+'</a> </li> <li class="subgalleries-placeholder"></li> </ul> </li></ul>'}},function(e,t){e.exports=function(e){return'<div class="file-prop-flag"> <svg class="artif" xmlns="http://www.w3.org/2000/svg" width="5" height="3" viewBox="0 0 5 3"><polygon points="0 3 0 0 5 0 0 3"/></svg> <div class="inner"> <div class="comment-count"> <span></span>\x3c!-- --\x3e<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><rect x="4" y="7" width="10" height="1"/><rect x="4" y="5" width="10" height="1"/><rect x="4" y="11" width="6" height="1"/><rect x="4" y="9" width="10" height="1"/></svg> </div> <div class="flag-display"> <svg class="flag" xmlns="http://www.w3.org/2000/svg" width="8" height="11" viewBox="0 0 8 11"><path d="M5.617.922C4.451.922,3.741.114,2.5.114A4.776,4.776,0,0,0,0,1V11H1V6.477a3.833,3.833,0,0,1,1.5-.363c1.238,0,1.948.808,3.114.808A4.282,4.282,0,0,0,8,6V0A4.283,4.283,0,0,1,5.617.922ZM7,5.451a2.857,2.857,0,0,1-1.383.471A2.884,2.884,0,0,1,4.5,5.606a4.91,4.91,0,0,0-2-.492A4.478,4.478,0,0,0,1,5.393V1.576a3.3,3.3,0,0,1,1.5-.462,3.048,3.048,0,0,1,1.217.334,4.643,4.643,0,0,0,1.9.473A3.979,3.979,0,0,0,7,1.662Z"/></svg> <span class="label-final">FINAL</span> </div> </div></div>'}},function(e,t){e.exports=function(e){var t='<ul class="menu-entries cmp-overlay-menu icons">  ';return e.showFileInformation&&(t+=' <li> <button href="" class="btn--metainfos"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M10,18a8,8,0,1,1,8-8A8.009,8.009,0,0,1,10,18ZM10,4a6,6,0,1,0,6,6A6.006,6.006,0,0,0,10,4Z"/><rect x="9" y="9" width="2" height="5" rx="1" ry="1"/><circle cx="10" cy="7" r="1"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","file information")+"</span> </button> </li> "),t+="  ",e.setAsHeaderImage&&(t+=' <li> <button href="" class="btn--header-image"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M16,3H4A2,2,0,0,0,2,5V15a2,2,0,0,0,2,2H16a2,2,0,0,0,2-2V5A2,2,0,0,0,16,3Zm1,12a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8H17Z" fill="#d8d8d8"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","set as header image")+"</span> </button> </li> "),t+="  ",e.setAsGalleryImage&&(t+=' <li> <button href="" class="btn--gallery-image"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M16,3H4A2,2,0,0,0,2,5V15a2,2,0,0,0,2,2H16a2,2,0,0,0,2-2V5A2,2,0,0,0,16,3ZM3,7V5A1,1,0,0,1,4,4H16a1,1,0,0,1,1,1V7Z" fill="#d8d8d8"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","set as gallery image")+"</span> </button> </li> "),t+=" ",e.remove&&(t+=' <li> <button href="" class="btn--remove"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M15.5 5H13V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4.5c-.28 0-.5.22-.5.5v1c0 .28.22.5.5.5H5v8c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V7h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5zM8 4h4v1H8V4zm4.5 10h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5z"></path></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","remove")+"</span> </button> </li> "),t+=" </ul>"}},function(e,t){e.exports=function(e){var t='<div class="entry file display-grid';return"limit_locked"===e.file.status&&(t+=" limit-locked"),t+='" data-uuid="'+e.file.uuid+'" data-cat="'+e.file.category+'"> ',e.topOut&&(t+=' <div class="menu-top"> ',e.optFileInformation&&(t+=' <span class="hit name" title="'+e.file.filename+'">'+(e.file.filenameOverride||e.file.filename)+"</span> "),t+=" </div> "),t+=' <div class="content type-display" draggable="true"> <span class="extension">'+e.extension.toUpperCase()+"</span> ",e.optSelection&&(t+=' <div class="selection-display"></div> '),t+=' <div class="prop-flag-placeholder hidden"></div> <div class="overlay-download" style="display:none;">'+e.extension.toUpperCase()+": "+e.filesize+'</div> <div class="overlay-admin" style="display:none"> ',e.optSetFlag&&(t+=' <div class="admin-bar admin-bar-top"> <ul class="flag-bar"> <li> <div data-type="none" class="hit flag-btn"> <div class="bullet"> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path class="st6" d="M5.12 4.41L3.71 3l1.41-1.41c.2-.2.2-.51 0-.71s-.51-.2-.71 0L3 2.29 1.59.88c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71L2.29 3 .88 4.41c-.2.2-.2.51 0 .71s.51.2.71 0L3 3.71l1.41 1.41c.2.2.51.2.71 0 .2-.19.2-.51 0-.71z"/></svg> </div> </div> </li> <li><div data-type="red" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="orange" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="green" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="final" class="hit flag-btn"><span>final</span></div></li> </ul> <div class="clearfix"></div> </div> '),t+="  ",e.optAdmin&&(t+=' <div class="btn--menu-toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="4" cy="8" r="1"></circle><circle cx="12" cy="8" r="1"></circle><circle cx="8" cy="8" r="1"></circle></svg> </div> '),t+=" ",e.optSelection&&(t+=' <div class="hit btn-fn-select"></div> '),t+=" </div> </div> ",e.bottomOut&&(t+=' <div class="menu-bottom"> ',e.optDownload&&(t+=' <div class="hit btn-fn-download no-dblclick">'+i18n.p__("file.actions","download")+"</div> "),t+=" </div> "),t+="</div>"}},function(e,t){e.exports=function(e){var t='<div class="entry uploading display-grid" data-cat="'+e.file.category+'"> ';return e.topOut&&(t+=' <div class="menu-spacer"></div> '),t+=' <div class="content type-display"> <div class="loaderinfo"> <span class="filename" title="'+e.file.filename+'">'+e.file.filename+'</span> <div class="pd-progress-bar success"></div> </div> </div> ',e.bottomOut&&(t+=' <div class="menu-spacer"></div> '),t+="</div>"}},function(e,t){e.exports=function(e){var t='<div class="entry image display-grid';"limit_locked"===e.file.status&&(t+=" limit-locked"),t+='" data-uuid="'+e.file.uuid+'" data-cat="'+e.file.category+'"> ';e.file.image;return t+="  ",e.topOut&&(t+=' <div class="menu-top"> ',e.optFileInformation&&(t+=' <span class="hit name" title="'+e.file.filename+'">'+(e.file.filenameOverride||e.file.filename)+"</span> "),t+=" </div> "),t+=' <div class="content" draggable="true">  <div class="hit image-link type-display"> <img src="/themes/picdrop/images/blank.gif" data-src="" width="" height="" class="thumb veiled no-pe" draggable="false" /> </div> ',e.optSelection&&(t+=' <div class="selection-display"></div> '),t+=' <div class="prop-flag-placeholder hidden"></div>  <div class="overlay-download" style="display: none;">'+e.extension.toUpperCase()+": "+e.filesize+'</div>  <div class="overlay-admin" style="display:none"> <div class="hit overlay-link"></div> ',e.optSetFlag&&(t+=' <div class="admin-bar admin-bar-top"> <ul class="flag-bar"> <li> <div data-type="none" class="hit flag-btn"> <div class="bullet"> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path class="st6" d="M5.12 4.41L3.71 3l1.41-1.41c.2-.2.2-.51 0-.71s-.51-.2-.71 0L3 2.29 1.59.88c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71L2.29 3 .88 4.41c-.2.2-.2.51 0 .71s.51.2.71 0L3 3.71l1.41 1.41c.2.2.51.2.71 0 .2-.19.2-.51 0-.71z"/></svg> </div> </div> </li> <li><div data-type="red" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="orange" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="green" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="final" class="hit flag-btn"><span>final</span></div></li> </ul> <div class="clearfix"></div> </div> '),t+=" ",e.optAdmin&&(t+=' <div class="btn--menu-toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="4" cy="8" r="1"></circle><circle cx="12" cy="8" r="1"></circle><circle cx="8" cy="8" r="1"></circle></svg> </div> '),t+=" ",e.optSelection&&(t+=' <div class="hit btn-fn-select"></div> '),t+=" </div> </div> ",e.bottomOut&&(t+=' <div class="menu-bottom"> ',e.optDownload&&(t+=' <div class="hit btn-fn-download no-dblclick">'+i18n.p__("file.actions","download")+"</div> "),t+=" </div> "),t+="</div>"}},function(e,t){e.exports=function(e){var t="",i=["entry","display-masonry"];if("uploading"!==e.file.status&&"processing"!==e.file.status||i.push("uploading"),"limit_locked"===e.file.status&&i.push("limit-locked"),t+='<div class="'+i.join(" ")+'" data-uuid="'+e.file.uuid+'" data-cat="'+e.file.category+'" draggable="true"> ',"uploading"===e.file.status||"processing"===e.file.status)t+=' <div class="body type-display"> <div class="loaderinfo"> <span class="filename" title="'+e.file.filename+'">'+e.file.filename+'</span> <div class="pd-progress-bar success"></div> </div> </div> ';else{t+=" ";e.file.image;t+=" ",e.optFileInformation&&(t+=' <div class="head"><span class="hit filename" title="'+e.file.filename+'">'+(e.file.filenameOverride||e.file.filename)+"</span></div> "),t+=' <div class="body"> ',e.file.hasPreview()?(t+=' <div class="hit image-link type-display"> <img src="/themes/picdrop/images/blank.gif" data-src="/themes/picdrop/images/blank.gif" class="thumb veiled',e.optDownload||(t+=" no-pe"),t+='" draggable="false" /> </div> '):t+=' <div class="no-image type-display"> <span class="extension">'+e.extension.toUpperCase()+"</span> </div> ",t+=" ",e.optSelection&&(t+=' <div class="selection-display"></div> '),t+=' <div class="prop-flag-placeholder hidden"></div>  ',(e.optSelection||e.optSetFlag||e.optDownload||e.optAdmin)&&(t+=' <div class="overlay-actions"> <div class="hit overlay-link" draggable="false"></div> ',e.optSelection&&(t+=' <div class="hit btn-select"></div> '),t+=" ",e.optSetFlag&&(t+=' <ul class="flag-bar"> <li> <div data-type="none" class="hit flag-btn"> <div class="bullet"> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path class="st6" d="M5.12 4.41L3.71 3l1.41-1.41c.2-.2.2-.51 0-.71s-.51-.2-.71 0L3 2.29 1.59.88c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71L2.29 3 .88 4.41c-.2.2-.2.51 0 .71s.51.2.71 0L3 3.71l1.41 1.41c.2.2.51.2.71 0 .2-.19.2-.51 0-.71z"/></svg> </div> </div> </li> <li><div data-type="red" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="orange" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="green" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="final" class="hit flag-btn"><span>final</span></div></li> </ul> '),t+=" ",e.optDownload&&(t+=' <div class="hit btn-download"> <svg xmlns="http://www.w3.org/2000/svg" width="7" height="9" viewBox="0 0 7 9"><path d="M6.854,5.146a.5.5,0,0,0-.707,0L4,7.293V.5a.5.5,0,0,0-1,0V7.293L.854,5.146a.5.5,0,0,0-.707.707l3,3a.5.5,0,0,0,.707,0l3-3A.5.5,0,0,0,6.854,5.146Z"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","download")+'</span> </div> <div class="download-info"> <span>'+e.extension.toUpperCase()+": "+e.filesize+'</span> <div class="arrow"></div> </div> '),t+=" ",e.optAdmin&&(t+=' <div class="btn--menu-toggle"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="4" cy="8" r="1"></circle><circle cx="12" cy="8" r="1"></circle><circle cx="8" cy="8" r="1"></circle></svg> </div> '),t+=" </div> "),t+="  </div> "}return t+="</div>"}},function(e,t){e.exports=function(e){var t="",i=e.file.image||null,n=e.timeUploaded?e.timeUploaded:"â",o=e.captureDate?e.captureDate:"â",a=["entry","file","display-list"];"limit_locked"===e.file.status&&a.push("limit-locked"),i&&"uploading"!==e.file.status&&a.push("image");var r=e.optAdmin||e.optDownload||e.optFlags;if(t+='<tr class="'+a.join(" ")+'" data-uuid="'+e.file.uuid+'" draggable="true">  ',"uploading"===e.file.status||"processing"===e.file.status){t+="  ";var s=5;e.optFlags&&s++,e.optComments&&s++,t+="  ",e.optSelection&&(t+=' <td class="col-select"><div class="spacer"></div></td> '),t+=' <td class="col-thumb"> <img src="/themes/picdrop/svg/icon_file_list_uploading_30x30.svg" width="30" height="30" class="thumb ',e.optDownload||(t+=" no-pe"),t+='" draggable="false" /> </td> <td class="col-filename"><span>'+e.file.filename+'</span></td>  <td class="col-loader-info" colspan="'+s+'"> <div class="pd-progress-bar success"></div> </td> ',r&&(t+=' <td class="col-menu"><div class="btn--toggle-menu"></div></td> '),t+=" "}else t+="  ",e.optSelection&&(t+=' <td class="col-select"> <a href="" class="btn--select"> <div class="inner"> <svg xmlns="http://www.w3.org/2000/svg" width="60" height="30" viewBox="0 0 60 30"><polygon points="16 16 16 22 14 22 14 16 8 16 8 14 14 14 14 8 16 8 16 14 22 14 22 16 16 16" fill="#009ada"/><polygon points="42.809 21.162 36.988 15.342 38.402 13.928 42.809 18.334 52.33 8.813 53.744 10.228 42.809 21.162" fill="#fff"/></svg> </div> </a> </td> '),t+='  <td class="col-thumb"> <div class="thumb">&nbsp;</div> </td> <td class="col-filename"> <span class="filename">'+e.file.filename+"</span> </td>  ",e.optFlags&&(t+=' <td class="col-flag"> <div class="flag-display"></div> </td> '),t+='  <td class="col-comments">â</td> <td class="col-dimensions">',t+=i?i.width+" x "+i.height:"â",t+='</td> <td class="col-size">'+e.filesize+'</td> <td class="col-ext">'+e.extension+'</td> <td class="col-time-captured">'+o+'</td> <td class="col-time-uploaded">'+n+"</td>  ",r&&(t+=' <td class="col-menu"> <div class="btn--toggle-menu"> <div class="inner"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="4" viewBox="0 0 18 4"><circle cx="2" cy="2" r="2"/><circle cx="9" cy="2" r="2"/><circle cx="16" cy="2" r="2"/></svg> </div> </div> <ul class="menu-entries cmp-overlay-menu icons">  ',e.optFlags&&(t+=' <li class="flags"> <ul class="flag-bar"> <li> <div data-type="none" class="hit flag-btn"> <div class="bullet"> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path class="st6" d="M5.12 4.41L3.71 3l1.41-1.41c.2-.2.2-.51 0-.71s-.51-.2-.71 0L3 2.29 1.59.88c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71L2.29 3 .88 4.41c-.2.2-.2.51 0 .71s.51.2.71 0L3 3.71l1.41 1.41c.2.2.51.2.71 0 .2-.19.2-.51 0-.71z"/></svg> </div> </div> </li> <li><div data-type="red" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="orange" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="green" class="hit flag-btn"><div class="bullet"></div></div></li> <li><div data-type="final" class="hit flag-btn"><span>final</span></div></li> </ul> </li> '),t+=" ",e.optDownload&&(t+=' <li> <a href="" class="btn--download"> <svg xmlns="http://www.w3.org/2000/svg" width="9" height="13" viewBox="0 0 9 13"><polygon points="7.793 6.793 5.5 9.086 5.5 0 3.5 0 3.5 9.086 1.207 6.793 -0.207 8.207 4.5 12.914 9.207 8.207 7.793 6.793"/></svg> <span>'+i18n.p__("file.actions","download")+"</span> </a> </li> "),t+="  ",e.optAdmin&&(t+=" ",e.optFileInformation&&(t+=' <li> <a href="" class="btn--metainfos"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M10,18a8,8,0,1,1,8-8A8.009,8.009,0,0,1,10,18ZM10,4a6,6,0,1,0,6,6A6.006,6.006,0,0,0,10,4Z"/><rect x="9" y="9" width="2" height="5" rx="1" ry="1"/><circle cx="10" cy="7" r="1"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","file information")+"</span> </a> </li> "),t+=" ",e.optHeaderImage&&"image"===e.file.filetype&&(t+=' <li> <a href="" class="btn--header-image"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M16,3H4A2,2,0,0,0,2,5V15a2,2,0,0,0,2,2H16a2,2,0,0,0,2-2V5A2,2,0,0,0,16,3Zm1,12a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V8H17Z" fill="#d8d8d8"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","set as header image")+"</span> </a> </li> "),t+="  ","image"===e.file.filetype&&(t+=' <li> <a href="" class="btn--gallery-image"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M16,3H4A2,2,0,0,0,2,5V15a2,2,0,0,0,2,2H16a2,2,0,0,0,2-2V5A2,2,0,0,0,16,3ZM3,7V5A1,1,0,0,1,4,4H16a1,1,0,0,1,1,1V7Z" fill="#d8d8d8"/></svg>\x3c!-- --\x3e<span>'+i18n.p__("file.actions","set as gallery image")+"</span> </a> </li> "),t+='  <li> <a href="" class="btn--remove"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path d="M15.5 5H13V4c0-.55-.45-1-1-1H8c-.55 0-1 .45-1 1v1H4.5c-.28 0-.5.22-.5.5v1c0 .28.22.5.5.5H5v8c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V7h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5zM8 4h4v1H8V4zm4.5 10h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5zm0-2h-5c-.28 0-.5-.23-.5-.5 0-.28.22-.5.5-.5h5c.28 0 .5.22.5.5 0 .27-.22.5-.5.5z"></path></svg> <span>'+i18n.p__("file.actions","remove")+"</span> </a> </li>  "),t+="  </ul> </td> "),t+=" ";return t+="</tr>"}},function(e,t){e.exports=function(e){var t='<div class="preset-sidebar" data-id="'+e.id+'">  <div class="hit title"> <svg class="icon-default" xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 18 16"><polygon points="6.667 13.455 1.293 8.081 2.707 6.667 6.667 10.627 15.293 2 16.707 3.414 6.667 13.455"/></svg> <svg class="icon-modified" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18.432,19.1,17.659,14l-5.095.771,2.028,1.494a4.985,4.985,0,0,1-7.308-2.6,1,1,0,1,0-1.887.664,6.974,6.974,0,0,0,10.887,3.188Z"/><path d="M18.6,9.663A6.974,6.974,0,0,0,7.718,6.486L5.57,4.9,6.344,10l5.095-.772L9.411,7.734a4.984,4.984,0,0,1,7.305,2.6A1,1,0,0,0,18.6,9.663Z"/></svg> <span>'+e.title+"</span> </div>  ";return(e.optRemove||e.optSolo||e.optInfo)&&(t+=' <div class="buttons"> ',e.optSolo&&(t+=' <div class="hit btn--solo" title="'+i18n.p__("preset.sidebar.js","btn_solo_title")+'"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="10" viewBox="0 0 16 10"><path d="M8,1.5a8.429,8.429,0,0,1,6.222,2.706,1.283,1.283,0,0,1,0,1.588,8.506,8.506,0,0,1-12.444,0,1.283,1.283,0,0,1,0-1.588A8.429,8.429,0,0,1,8,1.5M8,0A9.985,9.985,0,0,0,.681,3.182a2.767,2.767,0,0,0,0,3.636,10.008,10.008,0,0,0,14.638,0,2.767,2.767,0,0,0,0-3.636A9.985,9.985,0,0,0,8,0Z"/><circle cx="8" cy="5" r="3.5"/></svg> </div> '),t+=" ",e.optRemove&&(t+=' <div class="hit btn--remove" title="'+i18n.p__("preset.sidebar.js","btn_remove_title")+'"> <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="9px" height="13px" viewBox="0 0 9 13" enable-background="new 0 0 9 13" xml:space="preserve"><path d="M0,3v8c0,1.1,0.9,2,2,2h5c1.1,0,2-0.9,2-2V3H0z M3,10.5C3,10.775,2.775,11,2.5,11S2,10.775,2,10.5v-5C2,5.225,2.225,5,2.5,5S3,5.225,3,5.5V10.5z M5,10.5C5,10.775,4.775,11,4.5,11S4,10.775,4,10.5v-5C4,5.225,4.225,5,4.5,5S5,5.225,5,5.5V10.5z M7,10.5C7,10.775,6.775,11,6.5,11S6,10.775,6,10.5v-5C6,5.225,6.225,5,6.5,5S7,5.225,7,5.5V10.5z"/><path d="M7,1c0-0.55-0.45-1-1-1H3C2.45,0,2,0.45,2,1H0v1h9V1H7z"/></svg> </div> '),t+=" ",e.optInfo&&(t+=' <div class="hit btn--info" title="'+i18n.p__("preset.sidebar.js","btn_info_title")+'"> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 10 10"><style>.st5{fill-rule:evenodd;clip-rule:evenodd;}</style><path d="M5 1c2.21 0 4 1.79 4 4S7.21 9 5 9 1 7.21 1 5s1.79-4 4-4m0-1C2.24 0 0 2.24 0 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z"/><path class="st5" d="M5.5 3.01h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0 5h-1c-.28 0-.5-.22-.5-.5v-3c0-.28.22-.5.5-.5h1c.28 0 .5.22.5.5v3c0 .28-.22.5-.5.5z"/></svg> </div> '),t+=" </div> "),t+=" </div>"}},function(e,t){e.exports=function(e){return'<div id="dialog-gallery-header-image-edit"> <div class="content"> <div class="empty-state">'+i18n.p__("dialog.gallery.headerimage.edit","message_empty")+'</div> <div class="image-container"> <img src="" width="" height="" class="image" draggable="false" /> <div class="focus-point"></div> </div> </div> <span class="response-message"></span> <div class="progress-container"> <span></span> <div class="pd-progress-bar"></div> </div> <div class="buttons"> <div class="btn--upload"> <div>'+i18n.p__("dialog.gallery.headerimage.edit","upload image")+'</div> <input type="file" id="fileselect" name="fileselect[]" accept="image/*;capture=camera" /> </div> <button class="btn big btn-red btn--remove">'+i18n.p__("dialog.gallery.headerimage.edit","remove image")+'</button> <button class="btn big btn-green btn--done">'+i18n.__("done")+"</button> </div></div>"}},function(e,t){e.exports=function(e){var t='<div id="header-image-container">  ';return e.optDisabled?t+='  <div class="content-disabled"> <span>'+i18n.p__("gallery.headerimage","pro_hint")+"</span> </div>  ":(t+='  <div class="content-empty"> <span class="hit btn--create">'+i18n.p__("gallery.headerimage","add header image")+'</span> </div> <div class="content-image"> <img src="" width="" height="" class="image" /> ',e.optAdmin&&(t+=' <div class="hit btn--edit"> <svg xmlns="http://www.w3.org/2000/svg" width="13" height="14" viewBox="0 0 13 14"><polygon points="1.339 9.757 0 11.172 0 14 2.678 14 4.018 12.586 1.339 9.757"/><polygon points="9.375 1.272 2.009 9.05 4.687 11.879 12.053 4.101 9.375 1.272"/><path d="M12.723,1.979,11.383.565a.912.912,0,0,0-1.339,0l2.678,2.828A1.04,1.04,0,0,0,12.723,1.979Z"/></svg> <span>'+i18n.p__("gallery.headerimage","edit header image")+"</span> </div> "),t+=" ",e.optTrial&&(t+=' <div class="trial-info"> <span>'+i18n.p__("gallery.headerimage","pro_hint_trial")+"</span> </div> "),t+=' </div> <div class="content-upload-progress"> <div class="pd-progress-bar"></div> </div>  '),t+=" </div>"}},function(e,t){e.exports=function(e){return'<div id="dnd-hint" class="entry"> <span class="title">Drag &amp; Drop</span> <span class="message">'+i18n.p__("gallery.view.desktop.js","dndhint_text")+'</span> <div class="btn--upload"> <div>'+i18n.p__("gallery.view.desktop.js","dndhint_button_label")+'</div> <input type="file" id="fileselect" name="fileselect[]" multiple="multiple" accept="image/*;capture=camera" /> </div></div>'}},function(e,t){e.exports=function(e){var t='<div id="selection-menu"> <div class="tab"> <span class="tab-title"></span> </div> <div class="bar"> <div class="sections-left"> <span class="counter"></span> <div class="thumbs-wrapper"> <div class="drop-zone"></div> <div class="thumbs-container"></div> <span class="selection-hint">'+i18n.p__("selectionmenu.js","text_selectionhint")+'</span> </div> </div> <div class="sections-right"> <div class="buttons"> <ul class="layout-list"> ';return e.optSave&&(t+=' <li><div class="hit btn-sm btn--save"></div></li> <li class="divider"></li> '),t+=" ",e.optDownload&&(t+='<li><div class="hit btn-sm btn--download"><div class="spinner"></div></div></li>'),t+=" ",e.optSetFlag&&(t+='<li><div class="hit btn-sm btn--set-flag"></div></li>'),t+=" ",e.optAdmin&&(t+=' <li><div class="hit btn-sm btn--move-copy"></div></li> <li><div class="hit btn-sm btn--remove"></div></li> <li><div class="hit btn-sm btn--export"></div></li> '),t+=' <li class="divider"></li> <li><div class="hit btn-sm btn--deselect"></div></li> </ul> <div class="action-tooltip"></div> </div> </div> </div></div>'}},function(e,t){e.exports=function(e){var t="";return e.preview_url?t+=' <div data-uuid="'+e.file_uuid+'" class="hit thumb image" style="background-image:url(\''+e.preview_url+"')\">&nbsp;</div>":e.file_extension&&(t+=' <div data-uuid="'+e.file_uuid+'" class="hit thumb text">'+e.file_extension+"</div>"),t}},function(e,t){e.exports=function(e){return'<div class="uploader-progress-entry"> <div class="progress-bar-container"> <div class="progress-bar"></div> </div> <div class="content"> <div class="image"></div> <span class="title">'+e.filename+'</span> <span class="progress-label"></span> </div> <a href="" class="btn-cancel">'+i18n.p__("dialog.uploader","cancel")+"</a></div>"}},function(e,t){e.exports=function(e){return'<div id="progress-panel"> <div class="entry-container"></div> <div class="info"> <div class="loadbar"></div> <span>'+i18n.p__("dialog.uploader","upload")+'</span> </div> <div class="menu"> <a href="" class="btn btn-orange btn-pause">'+i18n.p__("dialog.uploader","pause")+'</a> <a href="" class="btn btn-red btn-cancel">'+i18n.p__("dialog.uploader","cancel")+"</a> </div></div>"}},function(e,t){e.exports=function(e){return'<div id="dialog-uploader-overwrite"> <p>'+i18n.p__("dialog.uploader.override","Some of the uploaded files are already in this gallery. Do you want to replace them, or skip their upload?")+'</p> <a href="" class="btn btn-green btn--replace">'+i18n.p__("dialog.uploader.override","replace")+'</a> <a href="" class="btn btn-green btn--skip">'+i18n.p__("dialog.uploader.override","skip")+"</a></div>"}},function(e,t){e.exports=function(e){return'<div id="presentation-enter-button"> <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><polygon points="10 0 12.361 7.265 20 7.265 13.82 11.756 16.18 19.021 10 14.531 3.82 19.021 6.18 11.756 0 7.265 7.639 7.265 10 0"/></svg></div>'}},function(e,t){e.exports=function(e){return'<div class="doodle-canvas"> <canvas class="main"></canvas> <canvas class="buffer"></canvas></div>'}},function(e,t){e.exports=function(e){return'<div class="image-panel"> <div class="pd-progress-bar success"></div> <div class="image-wrapper"> <img src=""/> <div class="overlay"></div> <div class="mag"> <svg class="mag-loader" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 128 128"><path d="M64,119A55,55,0,0,1,9,64" fill="none" stroke="#000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="8"/><path d="M64,9a55,55,0,0,1,55,55" fill="none" stroke="#000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="8"/></svg> </div> </div></div>'}},function(e,t){e.exports=function(e){var t='<div id="'+e.id+'" class="sidebar-segment';return e.optCollapsable&&(t+=" collapsable"),t+='"> ',e.optCollapsable?t+=' <a href="" class="title"><span>'+e.title+'</span><div class="arrow"></div></a> ':t+=' <span class="title">'+e.title+"</span> ",t+=' <div class="content"></div></div>'}},function(e,t){e.exports=function(e){var t='<div class="comment-entry '+(e.right?"right":"left");return e.optFollowUp&&(t+=" fu"),t+='"> ',e.optFollowUp||(t+=' <span class="name">'+e.comment.authorName+"</span> "),t+=' <div class="content"> <span class="text">'+e.comment.text.replace(/\n/g,"<br/>")+"</span>  ",e.optAdmin&&(t+=' <a href="" class="btn-delete"></a> '),t+=" </div></div>"}},function(e,t){e.exports=function(e){var t='<div id="pdbox"> ';return(e.optFileInfo||e.optEXIF||e.optIPTC||e.optComments)&&(t+=' <div class="sidebar"> <div class="top"> ',e.optFileInfo&&(t+=' <div class="sidebar-segment info"> <span class="title"></span> <div class="content"> <span class="copy"></span> </div> </div> '),t+=' </div> <div class="bottom"></div> </div> '),t+=' <div class="content">  <div class="image-panel-container"></div>  <div class="ui-bar-top meta-ui"> <div class="ui-top-right"> <button class="pdb-btn tr-btn btn-toggle-fullscreen" title="Vollbild ein/aus (tab)"><svg class="icon-enter" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="19 3 13 3 15.293 5.293 12.293 8.293 13.707 9.707 16.707 6.707 19 9 19 3"/><polygon points="9.707 13.707 8.293 12.293 5.293 15.293 3 13 3 19 9 19 6.707 16.707 9.707 13.707"/></svg><svg class="icon-leave" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="10 12 4 12 6.293 14.293 3.222 17.364 4.636 18.778 7.707 15.707 10 18 10 12"/><polygon points="18.778 4.636 17.364 3.222 14.293 6.293 12 4 12 10 18 10 15.707 7.707 18.778 4.636"/></svg></button> <button class="pdb-btn tr-btn btn-close"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="18.778 4.636 17.364 3.222 11 9.586 4.636 3.222 3.222 4.636 9.586 11 3.222 17.364 4.636 18.778 11 12.414 17.364 18.778 18.778 17.364 12.414 11 18.778 4.636"/></svg></button> </div> <div class="clearfix"></div> </div>  <div class="ui-bar-bottom meta-ui"> <div class="actions-panel"> ',e.optDownload&&(t+='<button class="pdb-btn act-btn btn-download" title="'+i18n.p__("pdbox.js","actions_btndownload_tooltip")+'"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="14.293 11.293 12 13.586 12 6 10 6 10 13.586 7.707 11.293 6.293 12.707 11 17.414 15.707 12.707 14.293 11.293"/></svg><span>'+i18n.p__("pdbox.js","actions_btndownload_label")+"</span></button>"),t+=" ",e.optSelection&&(t+='<button class="pdb-btn act-btn btn-select" title="'+i18n.p__("pdbox.js","actions_btnselect_tooltip")+'"><svg class="icon-select" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="16 10 12 10 12 6 10 6 10 10 6 10 6 12 10 12 10 16 12 16 12 12 16 12 16 10"/></svg><svg class="icon-selected" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="9.25 15.914 5.043 11.707 6.457 10.293 9.25 13.086 15.543 6.793 16.957 8.207 9.25 15.914"/></svg><span>'+i18n.p__("pdbox.js","actions_btnselect_label")+"</span></button>"),t+=" ",e.optSetFlag&&(t+=' <div class="flag-menu"> <span>'+i18n.p__("pdbox.js","actions_flag_label")+'</span> <a href="" data-type="none" class="btn-flag blt selected" title="'+i18n.p__("pdbox.js","actions_flagtitle_none")+'"> <svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" viewBox="0 0 6 6"><path class="st6" d="M5.12 4.41L3.71 3l1.41-1.41c.2-.2.2-.51 0-.71s-.51-.2-.71 0L3 2.29 1.59.88c-.2-.2-.51-.2-.71 0-.2.2-.2.51 0 .71L2.29 3 .88 4.41c-.2.2-.2.51 0 .71s.51.2.71 0L3 3.71l1.41 1.41c.2.2.51.2.71 0 .2-.19.2-.51 0-.71z"/></svg> </a> <a href="" data-type="red" class="btn-flag blt" title="'+i18n.p__("pdbox.js","actions_flagtitle_red")+'"></a> <a href="" data-type="orange" class="btn-flag blt" title="'+i18n.p__("pdbox.js","actions_flagtitle_orange")+'"></a> <a href="" data-type="green" class="btn-flag blt" title="'+i18n.p__("pdbox.js","actions_flagtitle_green")+'"></a> <a href="" data-type="final" class="btn-flag" title="'+i18n.p__("pdbox.js","actions_flagtitle_final")+'">final</a> <div class="clearfix"></div> </div> '),t+=" ",e.optRemove&&(t+=' <div class="remove"> <button class="pdb-btn act-btn btn-remove" title="'+i18n.p__("pdbox.js","actions_btnremove_tooltip")+'"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M7,9v6a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V9Zm2,5.5a.5.5,0,0,1-1,0v-4a.5.5,0,0,1,1,0Zm2,0a.5.5,0,1,1-1,0v-4a.5.5,0,1,1,1,0Zm2,0a.5.5,0,0,1-1,0v-4a.5.5,0,0,1,1,0Z"/><path d="M12,7a1,1,0,0,0-1-1H10A1,1,0,0,0,9,7H7V8h7V7Z"/></svg><span>'+i18n.p__("pdbox.js","actions_btnremove_label")+'</span></button> <div class="confirm" style="display:none"> <button class="pdb-btn btn-remove-confirm">'+i18n.p__("pdbox.js","actions_btnremoveconfirm_label")+'</button> <button class="pdb-btn btn-remove-abort">'+i18n.__("cancel")+'</button> <div class="clearfix"></div> <div class="arrow"></div> </div> </div> '),t+=' <button class="pdb-btn act-btn btn--mag" title="'+i18n.p__("pdbox.js","actions_btnmag_tooltip")+'"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M11.25,9.5a.5.5,0,0,1-.5-.5A1.752,1.752,0,0,0,9,7.25a.5.5,0,0,1,0-1A2.753,2.753,0,0,1,11.75,9,.5.5,0,0,1,11.25,9.5Z"/><path d="M17.707,16.293l-4.472-4.472c-.022-.022-.052-.031-.076-.05a5.006,5.006,0,1,0-1.389,1.389c.02.024.028.053.05.076l4.472,4.472a1,1,0,0,0,1.414-1.414ZM5,9a4,4,0,1,1,6.845,2.806c-.007.007-.017.009-.024.016s-.009.017-.016.024A4,4,0,0,1,5,9Z"/></svg></button> </div>  <div class="navigator"> <button class="pdb-btn nav-btn prev"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="13.829 18.778 6.05 11 13.829 3.222 15.243 4.636 8.878 11 15.243 17.364 13.829 18.778"/></svg></button> <button class="pdb-btn nav-btn next"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><polygon points="8.171 18.778 6.757 17.364 13.122 11 6.757 4.636 8.171 3.222 15.95 11 8.171 18.778"/></svg></button> <div class="clearfix"></div> <div class="indicator"><div class="inner"></div></div> </div>  <div class="clearfix"></div> </div> </div></div>'}},function(e,t){e.exports=function(e){return'<div id="pdbox-comments"> <span class="message-no-comments"></span> <div class="entries-container"></div></div>'}},function(e,t){e.exports=function(e){return'<div id="pdbox-comments-form"> <div class="content-init"> <button class="pdb-btn green btn--write-comment">'+i18n.p__("pdbox.js","write comment")+'</button> </div> <div class="content-edit"> <input type="text" class="inp--name" placeholder="'+i18n.p__("pdbox.js","comments_name_placeholder")+'"> <textarea class="inp--message" placeholder="'+i18n.p__("pdbox.js","comments_message_placeholder")+'"></textarea> <span class="server-message"></span> <button class="pdb-btn green btn--send">'+i18n.p__("pdbox.js","comments_btnsend_label")+"</button> </div></div>"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t);var n,o,a,r=i(27),s=i(17),l=i.n(s),u=i(2),c=i(110),h=i(21),d=i(24),f=i(18),p=i(61),v=i(3),g=i(0),m=i.n(g),y=i(9),b=i(111),_=i(181),w=i.n(_),E=i(7),S=i(25),k=i(12),T=i(1),C=i(33),x=i(51),O=i(13),D=[];if(void 0!==document.hidden?(o="hidden",a="visibilitychange"):void 0!==document.msHidden?(o="msHidden",a="msvisibilitychange"):void 0!==document.webkitHidden&&(o="webkitHidden",a="webkitvisibilitychange"),void 0===document.addEventListener||void 0===document[o])!1;else{!0;var A=function(){var e=!document[o];if(n!==e){n=e;for(var t=0;t<D.length;t++)D[t].call(void 0,n)}};A(),document.addEventListener(a,A,!1)}var I=function(){return n},P=function(e){"function"==typeof e&&D.push(e)},$=i(14),R=i(20),L=i(60),M=i(86),F=i(74),N=i(36),B=i(37),U=i(94),j=i(10),G=i(34),H=i(16),z=i(155),V=i(79),W=i(157),Y=i(132),q=i(46),X=i(114),J=i(159),K=i(8),Z=i(66),Q=i(22),ee=i(35),te=i(62),ie=i(142),ne=i(182),oe=i(115),ae=i(183),re=i(43),se=i(119),le=i(30),ue=i(87),ce=i(76),he=i(71),de=i(230),fe=i.n(de);function pe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ve=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.siblingNavigationElements=i,this.$dom=void 0,this.createDOM(),this.initialize()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){this.$dom=m()(fe()({gallery:this.gallery,siblings:this.siblingNavigationElements}))}},{key:"initialize",value:function(){this.$dom.on("wheel",(function(e){return e.stopPropagation()}))}}])&&pe(t.prototype,i),n&&pe(t,n),e}(),ge=i(231),me=i.n(ge);function ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var be=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.isCurrent=Boolean(i),this.siblings=null,this.viewDropdown=null,this.dropdownVisible=!1,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){this.$dom=m()(me()({url:this.gallery.urlRel,label:this.gallery.name,hasSiblings:this.gallery.hasSiblings})),this.$ui.document=m()(document),this.$ui.btnGallery=this.$dom.find(".btn--gallery"),this.$ui.btnSiblings=this.$dom.find(".btn--siblings")}},{key:"initialize",value:function(){var e=this;this.isCurrent&&this.$ui.btnGallery.addClass("current"),this.gallery.hasSiblings&&this.$ui.btnSiblings.on("click",(function(t){t.preventDefault(),e.dropdownVisible?e.hideDropdown():e.initDropdown()}))}},{key:"initDropdown",value:function(){var e=this;if(this.viewDropdown)this.showDropdown();else{var t=window.setTimeout((function(){return e.$ui.btnSiblings.addClass("pending")}),500),i=this.gallery.parentGallery,n=new he.a(this.gallery.domain,i?"/".concat(i.urlRelDom):void 0).setDepth(1);ce.a.getNavigation(n).then((function(i){e.siblings=i.getNavigationElements(),e.viewDropdown=new ve(e.gallery,e.siblings),e.viewDropdown.$dom.hide(),e.$dom.append(e.viewDropdown.$dom),e.showDropdown(),window.clearTimeout(t),e.$ui.btnSiblings.removeClass("pending")})).catch((function(){window.clearTimeout(t),e.$ui.btnSiblings.removeClass("pending")}))}}},{key:"showDropdown",value:function(){var e=this;this.dropdownVisible||(this.viewDropdown.$dom.fadeIn(200),this.$ui.document.on("mousedown.bcbc",(function(t){k.a.domIsChildOf(t.target,e.$dom[0])||e.hideDropdown()})),this.dropdownVisible=!0)}},{key:"hideDropdown",value:function(){this.dropdownVisible&&(this.viewDropdown.$dom.fadeOut(100),this.$ui.document.off(".bcbc"),this.dropdownVisible=!1)}}])&&ye(t.prototype,i),n&&ye(t,n),e}(),_e=i(232),we=i.n(_e);function Ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Se=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=t,this.galleries=i,this.viewsEntries=[],this.subGalleriesLoaded=!1,this.subGalleryDropdownVisible=!1,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"REQUEST_CREATE_SUBGALLERY",get:function(){return"evt_request_create_subgallery"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()(we()({domain:this.domain})),this.$ui.document=m()(document),this.$ui.btnSubGalleries=this.$dom.find(".btn--subgalleries"),this.$ui.dropdownSubGalleries=this.$dom.find(".dd-subgalleries"),this.$ui.btnCreateSubgallery=this.$dom.find(".btn--create-subgallery")}},{key:"initialize",value:function(){for(var t,i=this,n=document.createDocumentFragment(),o=this.galleries.length-1;o>=0;o--)t=new be(this.galleries[o],0===o),this.viewsEntries.push(t),n.appendChild(t.$dom[0]);this.$dom.find(".galleries-placeholder").replaceWith(n),this.$ui.btnSubGalleries.on("click",(function(e){e.preventDefault(),i.initSubGalleriesDropDown()})),this.$ui.btnCreateSubgallery.on("click",(function(t){t.preventDefault(),i.hideSubGalleriesDropdown(),m()(i).trigger(e.REQUEST_CREATE_SUBGALLERY)}))}},{key:"initSubGalleriesDropDown",value:function(){var e=this;if(this.subGalleriesLoaded)this.subGalleryDropdownVisible?this.hideSubGalleriesDropdown():this.showSubGalleriesDropdown();else{var t=new he.a(this.domain,"/".concat(this.galleries[0].urlRelDom)).setDepth(1);ce.a.getNavigation(t).then((function(t){var i=t.getNavigationElements();if(0!==i.length){var n,o=[];o.push('<li class="divider"></li>');for(var a=0,r=i.length;a<r;a++)n=i[a],o.push('<li><a href="'.concat(e.domain.urlRel).concat(n.url,'">').concat(n.name,"</a></li>"));e.$ui.dropdownSubGalleries.find(".subgalleries-placeholder").replaceWith(o.join("")),e.$ui.dropdownSubGalleries.on("wheel",(function(e){return e.stopPropagation()}))}else e.$ui.dropdownSubGalleries.find(".subgalleries-placeholder").remove();e.subGalleriesLoaded=!0,e.showSubGalleriesDropdown()}))}}},{key:"showSubGalleriesDropdown",value:function(){var e=this;this.subGalleryDropdownVisible||(this.$ui.dropdownSubGalleries.fadeIn(200),this.$ui.document.on("mousedown.bcsgddbc",(function(t){k.a.domIsChildOf(t.target,e.$ui.dropdownSubGalleries[0])||k.a.domIsChildOf(t.target,e.$ui.btnSubGalleries[0])||e.hideSubGalleriesDropdown()})),this.subGalleryDropdownVisible=!0)}},{key:"hideSubGalleriesDropdown",value:function(){this.subGalleryDropdownVisible&&(this.$ui.dropdownSubGalleries.fadeOut(100),this.$ui.document.off(".bcsgddbc"),this.subGalleryDropdownVisible=!1)}}])&&Ee(t.prototype,i),n&&Ee(t,n),e}(),ke=i(131),Te=i(65),Ce=i(91),xe=i(38),Oe=i(90),De=i(233),Ae=i.n(De);function Ie(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numComments=0,this.flag="none",this.$dom=null,this.$ui={},this.createDOM()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){this.$dom=m()(Ae()()),this.$ui.commentCount=this.$dom.find(".comment-count"),this.$ui.commentCountLabel=this.$ui.commentCount.find("span"),this.$ui.flagDisplay=this.$dom.find(".flag-display")}},{key:"setNumComments",value:function(e){return"number"!=typeof e&&(e=0),this.numComments=e,this}},{key:"setFlag",value:function(e){return"string"!=typeof e&&(e="none"),this.flag=e,this}},{key:"update",value:function(){this.$ui.commentCountLabel.text(this.numComments),0===this.numComments?this.$ui.commentCount.hide():this.$ui.commentCount.show(),this.$ui.flagDisplay.attr("data-flag",this.flag).css("display","none"===this.flag?"none":"block"),0===this.numComments&&"none"===this.flag?this.$dom.hide():this.$dom.show()}}])&&Ie(t.prototype,i),n&&Ie(t,n),e}(),$e=i(146),Re=i(11),Le=i(234),Me=i.n(Le);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ne(this,t),(e=Ue(this,je(t).call(this))).options=i,e.visible=!1,e.$dom=void 0,e.createDOM(),e.initialize(),e}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,e),i=t,o=[{key:"EVT_ENTRY_SELECTED",get:function(){return"evt_entry_selected"}},{key:"ENTRY_SHOW_FILE_INFORMATION",get:function(){return"entry_show_file_information"}},{key:"ENTRY_SET_AS_HEADER_IMAGE",get:function(){return"entry_set_as_header_image"}},{key:"ENTRY_SET_AS_GALLERY_IMAGE",get:function(){return"entry_set_as_gallery_image"}},{key:"ENTRY_REMOVE",get:function(){return"entry_remove"}}],(n=[{key:"createDOM",value:function(){this.$dom=m()(Me()({showFileInformation:Boolean(this.options.showFileInformation),setAsHeaderImage:Boolean(this.options.setAsHeaderImage),setAsGalleryImage:Boolean(this.options.setAsGalleryImage),remove:Boolean(this.options.remove)})),this._setDomElement(this.$dom[0])}},{key:"initialize",value:function(){this.$dom.hide(),this.$dom.on("click","button",this._handleButtonClicked.bind(this))}},{key:"show",value:function(){this.visible||(this.$dom.fadeIn(200),this.visible=!0)}},{key:"hide",value:function(){this.visible&&(this.$dom.stop().hide(),this.visible=!1)}},{key:"_dispatchSelectionEvent",value:function(e){this.dispatchEvent(new Re.a(t.EVT_ENTRY_SELECTED,{entry_id:e}))}},{key:"_handleButtonClicked",value:function(e){switch(e.currentTarget.className){case"btn--metainfos":this._dispatchSelectionEvent(t.ENTRY_SHOW_FILE_INFORMATION);break;case"btn--header-image":this._dispatchSelectionEvent(t.ENTRY_SET_AS_HEADER_IMAGE);break;case"btn--gallery-image":this._dispatchSelectionEvent(t.ENTRY_SET_AS_GALLERY_IMAGE);break;case"btn--remove":this._dispatchSelectionEvent(t.ENTRY_REMOVE)}}}])&&Be(i.prototype,n),o&&Be(i,o),t}($e.a),ze=i(235),Ve=i.n(ze),We=i(236),Ye=i.n(We),qe=i(237),Xe=i.n(qe);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ze(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tt=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ze(this,Qe(t).call(this,e,i))).thumb=null,n.width=0,n.imageRevealed=!1,n.viewPropFlag=null,n.viewMenu=null,n.createDOM(),n.initialize(),n.registerEventListeners(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,e),i=t,(n=[{key:"createDOM",value:function(){var e,t=this.file,i=this.context.isFileInformationEnabled(),n=this.context.isDownloadEnabled()&&this.file.status!==Z.a.LIMIT_LOCKED;"uploading"===t.status||"processing"===t.status?(e={file:t,extension:Te.a.extractFileExtension(t.filename),topOut:i,bottomOut:n},this.$dom=m()(Ye()(e))):this.file.hasPreview()?this.file.hasPreview()&&(e={file:t,extension:Te.a.extractFileExtension(t.filename),filesize:C.a.formatFileSize(t.filesize),optComments:this.context.isCommentsEnabled(),optFileInformation:this.context.isFileInformationEnabled(),optDownload:this.context.isDownloadEnabled()&&this.file.status!==Z.a.LIMIT_LOCKED,optSelection:this.context.isSelectionEnabled(),optSetFlag:this.context.isFlagsEnabled(),optAdmin:this.context.isAdminModeEnabled(),topOut:i,bottomOut:n},this.$dom=m()(Xe()(e)),this.$ui.thumb=this.$dom.find("img.thumb"),this.$ui.propBar=this.$dom.find(".prop-bar")):(e={file:t,extension:Te.a.extractFileExtension(t.filename),filesize:C.a.formatFileSize(t.filesize),optFileInformation:this.context.isFileInformationEnabled(),optSelection:this.context.isSelectionEnabled(),optSetFlag:this.context.isFlagsEnabled(),optDownload:this.context.isDownloadEnabled()&&this.file.status!==Z.a.LIMIT_LOCKED,optAdmin:this.context.isAdminModeEnabled(),topOut:i,bottomOut:n},this.$dom=m()(Ve()(e))),this.$ui.window=m()(window),this.$ui.content=this.$dom.find(".content"),this.$ui.overlayAdmin=this.$dom.find(".overlay-admin"),this.$ui.menuToggle=this.$dom.find(".btn--menu-toggle"),this.$ui.menuEntries=this.$dom.find(".menu-entries")}},{key:"initialize",value:function(){var e=this;if("uploading"===this.file.status||"processing"===this.file.status);else{this.$dom.find(".name").on("click",(function(t){t.preventDefault(),e.requestMetaInformationView()})),this.$ui.content.hover((function(){e.$ui.overlayAdmin.stop().fadeIn(100)}),(function(){e.$ui.overlayAdmin.stop().fadeOut(100),e.hideMenu()})),this.$dom.find(".btn-fn-select").on("click",(function(t){t.preventDefault(),t.offsetX&&t.offsetY&&t.offsetX+t.offsetY>50?e.file.hasPreview()&&e.requestDetailView():e.file.toggleSelection("userinput")}));var t=this.$dom.find(".btn-fn-download"),i=this.$dom.find(".overlay-download");if(t.on("click",(function(t){t.preventDefault(),m()(t.currentTarget).addClass("clicked"),e.initDownload()})),t.on("mouseenter",(function(){i.stop().fadeIn("fast")})),t.on("mouseleave",(function(){i.stop().fadeOut("fast")})),k.a.preventDoubleClick(this.$dom.find(".no-dblclick")),(this.context.isCommentsEnabled()||this.context.isFlagsEnabled())&&(this.viewPropFlag=new Pe,this.viewPropFlag.setFlag(this.context.isFlagsEnabled()?this.file.flag:null).setNumComments(this.context.isCommentsEnabled()&&this.image?this.image.numComments:null).update(),this.$ui.filePropFlag=this.viewPropFlag.$dom,this.$dom.find(".prop-flag-placeholder").replaceWith(this.viewPropFlag.$dom)),this.context.isFlagsEnabled()&&this.$ui.content.hover((function(){e.$ui.filePropFlag.addClass("down")}),(function(){e.$ui.filePropFlag.removeClass("down")})),this.$dom.find(".flag-btn").on("click",(function(t){t.preventDefault();var i=m()(t.currentTarget).attr("data-type");e.requestColorFlag(i),e.uiSetFlagMenu(i),e.viewPropFlag.setFlag(i).update()})),this.uiSetFlagMenu(this.file.flag),this.file.hasPreview()){xe.a.getInstance().addElements([this.$dom[0]],(function(){e.$ui.thumb.one("load",(function(){e.$ui.thumb.removeClass("veiled"),e.$dom.find(".image-link").removeClass("type-display")})),e.imageRevealed=!0,e.updateResponsiveImage()}));var n=function(t){t.preventDefault(),!0!==t.altKey?e.requestDetailView():e.file.toggleSelection("userinput")};this.$dom.find(".image-link").on("click",n),this.$dom.find(".overlay-link").on("click",n)}}this.initMenu(),this.initDragAndDrop(this.$dom)}},{key:"initMenu",value:function(){var e=this;0!==this.$ui.menuToggle.length&&(this.$ui.menuToggle.on("click",(function(){e.viewMenu&&e.viewMenu.visible?e.hideMenu():e.showMenu()})),this.$dom.on("contextmenu",(function(t){t.preventDefault(),e.showMenu()})))}},{key:"_lazyCreateMenu",value:function(){null===this.viewMenu&&(this.viewMenu=new He({showFileInformation:this.context.isFileInformationEnabled(),setAsHeaderImage:N.a.isAllowed(B.a.GALLERY_HEADER_IMAGE)&&"image"===this.file.filetype,setAsGalleryImage:"image"===this.file.filetype,remove:this.context.isAdminModeEnabled()}),this.viewMenu.addEventListener(He.EVT_ENTRY_SELECTED,this._handleMenuEntrySelected.bind(this)),this.$ui.menuToggle.after(this.viewMenu.getDomElement()),this.$ui.menu=m()(this.viewMenu.getDomElement()))}},{key:"showMenu",value:function(){if(this._lazyCreateMenu(),!this.viewMenu.visible){var e=x.a.getClientPosition(),t=Ce.a.toLocalPosition(e.x,e.y,this.$ui.overlayAdmin[0]);if(this.$ui.menu.css({left:t.x-18,top:t.y-18}),this.viewMenu.show(),this.$ui.menu[0].getBoundingClientRect){var i=this.$ui.menu[0].getBoundingClientRect();i.right>O.a.getWidth()&&this.$ui.menu.css({left:t.x-i.width+18})}}}},{key:"hideMenu",value:function(){this.viewMenu&&this.viewMenu.hide()}},{key:"setWidth",value:function(e){var t=Math.floor(e);t!==this.width&&(this.width=t,this.$dom.css("width",t),this.$ui.content.css({width:t,height:t}),this.image&&-1==="uploading,processing".indexOf(this.file.status)&&this.updateResponsiveImage())}},{key:"updateResponsiveImage",value:function(){if(this.image&&this.imageRevealed){var e=window.devicePixelRatio||1,t=this.image.thumbnails.getThumbFitting(this.width*e,this.width*e,!1,!0);if(this.thumb!==t&&(this.thumb=t,this.$ui.thumb.attr("src",t.url)),t){var i=C.a.fitDimensions(t.width,t.height,this.width,this.width,!1,!0);this.$ui.thumb.attr({width:i.width,height:i.height})}}}},{key:"uiSetFlagMenu",value:function(e){this.$dom.find(".flag-btn").removeClass("selected"),this.$dom.find('.flag-btn[data-type="'.concat(e,'"]')).addClass("selected")}},{key:"registerEventListeners",value:function(){var e="view-file-grid-".concat(this.file.uuid);this.file.addEventListener(Q.a.SELECTED,this.handleFileSelected.bind(this),e),this.file.addEventListener(Q.a.DESELECTED,this.handleFileDeselected.bind(this),e),this.file.addEventListener(Q.a.FLAG_CHANGED,this.handleFileFlagChanged.bind(this),e),this.file.addEventListener(Q.a.VISIBILITY_CHANGED,this.handleFileVisibilityChanged.bind(this),e),this.file.addEventListener(Q.a.DRAGGINGSTATE_CHANGED,this.handleFileDraggingStateChanged.bind(this),e),this.file.addEventListener(Q.a.REMOVED,this.handleFileRemoved.bind(this),e),this.file.addEventListener(Q.a.FILENAME_OVERRIDE,this.handleFilenameOverride.bind(this),e),this.image&&(this.image.addEventListener(ee.a.THUMBNAILS_UPDATED,this.handleImageThumbnailsUpdated.bind(this),e),this.image.addEventListener([ee.a.COMMENT_ADDED,ee.a.COMMENT_REMOVED],this.handleImageCommentsUpdated.bind(this),e))}},{key:"unregisterEventListeners",value:function(){var e="view-file-grid-".concat(this.file.uuid);this.file.removeEventListenersByNamespace(e),this.image&&this.image.removeEventListenersByNamespace(e)}},{key:"handleFileSelected",value:function(){this.$dom.addClass("selected")}},{key:"handleFileDeselected",value:function(){this.$dom.removeClass("selected")}},{key:"handleFileVisibilityChanged",value:function(){this.file.visible?this.$dom.removeClass("invisible"):this.$dom.addClass("invisible")}},{key:"handleFileDraggingStateChanged",value:function(){this.file.dragging?this.$dom.addClass("dragging"):this.$dom.removeClass("dragging")}},{key:"handleFileRemoved",value:function(){var e=this;this.$dom.stop().fadeOut(300,(function(){e.removeFromDOMTree()}))}},{key:"handleFilenameOverride",value:function(e){var t=e.get("newName");this.$dom.find(".name").text(t||this.file.filename)}},{key:"handleFileFlagChanged",value:function(e){var t=e.get("flag");this.uiSetFlagMenu(t),this.viewPropFlag&&this.viewPropFlag.setFlag(t).update()}},{key:"handleImageThumbnailsUpdated",value:function(){this.updateResponsiveImage(),this.imageRevealed&&this.$dom.hide().fadeIn(300)}},{key:"handleImageCommentsUpdated",value:function(){this.viewPropFlag&&this.viewPropFlag.setNumComments(this.image.numComments).update()}},{key:"_handleMenuEntrySelected",value:function(e){switch(e.get("entry_id")){case He.ENTRY_SHOW_FILE_INFORMATION:this.requestMetaInformationView(),this.hideMenu();break;case He.ENTRY_SET_AS_HEADER_IMAGE:this.requestAsHeaderImage(),this.hideMenu();break;case He.ENTRY_SET_AS_GALLERY_IMAGE:this.requestAsTeaserImage(),this.hideMenu();break;case He.ENTRY_REMOVE:te.a.removeFile(this.file),this.hideMenu()}}},{key:"finalize",value:function(){this.unregisterEventListeners(),this.removeFromDOMTree()}}])&&Ke(i.prototype,n),o&&Ke(i,o),t}(Oe.a),it=i(238),nt=i.n(it);function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e,t,i){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ct=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rt(this,lt(t).call(this,e,i))).imageAspectRatio=e.image?e.image.width/e.image.height:null,n.thumb=null,n.width=0,n.imageRevealed=!1,n.viewPropFlag=null,n.viewMenu=null,n.createDOM(),n.initialize(),n.registerEventListeners(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,e),i=t,(n=[{key:"createDOM",value:function(){var e={file:this.file,extension:Te.a.extractFileExtension(this.file.filename),filesize:C.a.formatFileSize(this.file.filesize),optFileInformation:this.context.isFileInformationEnabled(),optSelection:this.context.isSelectionEnabled(),optDownload:this.context.isDownloadEnabled()&&this.file.status!==Z.a.LIMIT_LOCKED,optComments:this.context.isCommentsEnabled(),optSetFlag:this.context.isFlagsEnabled(),optAdmin:this.context.isAdminModeEnabled()};this.$dom=m()(nt()(e)),this.$ui.window=m()(window),this.$ui.image=this.$dom.find("img.thumb"),this.$ui.filename=this.$dom.find(".filename"),this.$ui.overlayActions=this.$dom.find(".overlay-actions"),this.$ui.btnSelect=this.$dom.find(".btn-select"),this.$ui.btnDownload=this.$dom.find(".btn-download"),this.$ui.downloadInfo=this.$dom.find(".download-info"),this.$ui.menuToggle=this.$dom.find(".btn--menu-toggle")}},{key:"initialize",value:function(){var e=this;if("uploading"!==this.file.status&&"processing"!==this.file.status){if(this.$ui.filename.on("click",(function(t){t.preventDefault(),e.requestMetaInformationView()})),0!==this.$ui.overlayActions.length&&this.$dom.hover((function(){e.$ui.overlayActions.stop().fadeIn(200),e.context.isFlagsEnabled()&&e.$ui.filePropFlag.addClass("down")}),(function(){e.$ui.overlayActions.stop().fadeOut(200),e.context.isFlagsEnabled()&&e.$ui.filePropFlag.removeClass("down"),e.hideMenu()})),this.$ui.btnSelect.on("click",(function(t){t.preventDefault(),t.offsetX&&t.offsetY&&t.offsetX+t.offsetY>50?e.file.hasPreview()&&e.requestDetailView():e.file.toggleSelection("userinput")})),this.$ui.btnDownload.hover((function(){e.$ui.downloadInfo.stop().fadeIn(200)}),(function(){e.$ui.downloadInfo.stop().fadeOut(200)})),this.$ui.btnDownload.on("click",(function(t){t.preventDefault(),m()(t.currentTarget).addClass("clicked"),e.initDownload()})),this.initDragAndDrop(this.$dom),(this.context.isCommentsEnabled()||this.context.isFlagsEnabled())&&(this.viewPropFlag=new Pe,this.viewPropFlag.setFlag(this.context.isFlagsEnabled()?this.file.flag:null).setNumComments(this.context.isCommentsEnabled()&&this.image?this.image.numComments:null).update(),this.$ui.filePropFlag=this.viewPropFlag.$dom,this.$dom.find(".prop-flag-placeholder").replaceWith(this.viewPropFlag.$dom)),this.$dom.find(".flag-btn").on("click",(function(t){t.preventDefault();var i=m()(t.currentTarget).attr("data-type");e.uiSetFlagMenu(i),e.viewPropFlag.setFlag(i).update(),e.requestColorFlag(i)})),this.uiSetFlagMenu(this.file.flag),this.image){xe.a.getInstance().addElements([this.$dom[0]],(function(){e.$ui.image.one("load",(function(){e.$ui.image.removeClass("veiled"),e.$dom.find(".image-link").removeClass("type-display")})),e.imageRevealed=!0,e.updateResponsiveImage()}));var t=function(t){t.preventDefault(),!0!==t.altKey?e.requestDetailView():e.file.toggleSelection("userinput")};this.$dom.find(".image-link").on("click",t),this.$dom.find(".overlay-link").on("click",t)}this.initMenu()}}},{key:"onFlagSetFail",value:function(e){this.uiSetFlagMenu(e),this.viewPropFlag.setFlag(e).update()}},{key:"initMenu",value:function(){var e=this;0!==this.$ui.menuToggle.length&&(this.$ui.menuToggle.on("click",(function(){e.viewMenu&&e.viewMenu.visibility?e.hideMenu():e.showMenu()})),this.$dom.on("contextmenu",(function(t){t.preventDefault(),e.showMenu()})))}},{key:"_lazyCreateMenu",value:function(){null===this.viewMenu&&(this.viewMenu=new He({showFileInformation:this.context.isFileInformationEnabled(),setAsHeaderImage:N.a.isAllowed(B.a.GALLERY_HEADER_IMAGE)&&"image"===this.file.filetype,setAsGalleryImage:"image"===this.file.filetype,remove:this.context.isAdminModeEnabled()}),this.viewMenu.addEventListener(He.EVT_ENTRY_SELECTED,this._handleMenuEntrySelected.bind(this)),this.$ui.menuToggle.after(this.viewMenu.getDomElement()),this.$ui.menu=m()(this.viewMenu.getDomElement()))}},{key:"showMenu",value:function(){if(this._lazyCreateMenu(),!this.viewMenu.visible){var e=x.a.getClientPosition(),t=Ce.a.toLocalPosition(e.x,e.y,this.$ui.overlayActions[0]);if(this.$ui.menu.css({left:t.x-18,top:t.y-18}),this.viewMenu.show(),this.$ui.menu[0].getBoundingClientRect){var i=this.$ui.menu[0].getBoundingClientRect();i.right>O.a.getWidth()&&this.$ui.menu.css({left:t.x-i.width+18})}}}},{key:"hideMenu",value:function(){this.viewMenu&&this.viewMenu.hide()}},{key:"setWidth",value:function(e){var t=Math.floor(e);if(t!==this.width&&(this.width=t,this.$dom.css("width",t),this.image&&-1==="uploading,processing".indexOf(this.file.status))){this.updateResponsiveImage();var i=Math.floor(t/this.imageAspectRatio);this.$dom.find(".image-link").css({width:t,height:i}),this.$ui.image.css({width:t,height:i})}}},{key:"updateResponsiveImage",value:function(){if(this.image&&this.imageRevealed){var e=window.devicePixelRatio||1,t=this.image.thumbnails.getThumbOfWidth(this.width*e,!0);t!==this.thumb&&(this.thumb=t,this.$ui.image.attr({src:t.url,width:t.width,height:t.height}))}}},{key:"uiSetFlagMenu",value:function(e){this.$dom.find(".flag-btn").removeClass("selected"),this.$dom.find('.flag-btn[data-type="'.concat(e,'"]')).addClass("selected")}},{key:"registerEventListeners",value:function(){var e="view-file-masonry-".concat(this.file.uuid);this.file.addEventListener(Q.a.SELECTED,this.handleFileSelected.bind(this),e),this.file.addEventListener(Q.a.DESELECTED,this.handleFileDeselected.bind(this),e),this.file.addEventListener(Q.a.FLAG_CHANGED,this.handleFileFlagChanged.bind(this),e),this.file.addEventListener(Q.a.VISIBILITY_CHANGED,this.handleFileVisibilityChanged.bind(this),e),this.file.addEventListener(Q.a.DRAGGINGSTATE_CHANGED,this.handleFileDraggingStateChanged.bind(this),e),this.file.addEventListener(Q.a.REMOVED,this.handleFileRemoved.bind(this),e),this.file.addEventListener(Q.a.FILENAME_OVERRIDE,this.handleFileNameOverride.bind(this),e),this.image&&(this.image.addEventListener(ee.a.THUMBNAILS_UPDATED,this.handleImageThumbnailsUpdated.bind(this),e),this.image.addEventListener(ee.a.COMMENT_ADDED,this.handleImageCommentsUpdated.bind(this),e),this.image.addEventListener(ee.a.COMMENT_REMOVED,this.handleImageCommentsUpdated.bind(this),e))}},{key:"unregisterEventListeners",value:function(){var e="view-file-masonry-".concat(this.file.uuid);this.file.removeEventListenersByNamespace(e),this.image&&this.image.removeEventListenersByNamespace(e)}},{key:"handleFileSelected",value:function(){this.$dom.addClass("selected")}},{key:"handleFileDeselected",value:function(){this.$dom.removeClass("selected")}},{key:"handleFileVisibilityChanged",value:function(){this.$dom.toggleClass("invisible",!this.file.visible)}},{key:"handleFileDraggingStateChanged",value:function(){this.$dom.toggleClass("dragging",this.file.dragging)}},{key:"handleFileRemoved",value:function(){var e=this;this.$dom.stop().fadeOut(300,(function(){return e.removeFromDOMTree()}))}},{key:"handleFileNameOverride",value:function(e){var t=e.get("newName");this.$ui.filename.text(t||this.file.filename)}},{key:"handleImageThumbnailsUpdated",value:function(){this.updateResponsiveImage(),this.imageRevealed&&this.$dom.hide().fadeIn(300)}},{key:"handleFileFlagChanged",value:function(e){var t=e.get("flag");this.uiSetFlagMenu(t),this.viewPropFlag&&this.viewPropFlag.setFlag(t).update()}},{key:"handleImageCommentsUpdated",value:function(){this.viewPropFlag&&this.viewPropFlag.setNumComments(this.image.numComments).update()}},{key:"_handleMenuEntrySelected",value:function(e){switch(e.get("entry_id")){case He.ENTRY_SHOW_FILE_INFORMATION:this.requestMetaInformationView(),this.hideMenu();break;case He.ENTRY_SET_AS_HEADER_IMAGE:this.requestAsHeaderImage(),this.hideMenu();break;case He.ENTRY_SET_AS_GALLERY_IMAGE:this.requestAsTeaserImage(),this.hideMenu();break;case He.ENTRY_REMOVE:te.a.removeFile(this.file),this.hideMenu()}}},{key:"finalize",value:function(){st(lt(t.prototype),"finalize",this).call(this),this.unregisterEventListeners()}}])&&at(i.prototype,n),o&&at(i,o),t}(Oe.a),ht=i(70),dt=i.n(ht),ft=i(239),pt=i.n(ft);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e,t,i){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wt=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mt(this,bt(t).call(this,e,i))).menuVisible=!1,n.createDOM(),n.initialize(),n.registerEventListeners(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,e),i=t,(n=[{key:"createDOM",value:function(){var e={file:this.file,extension:Te.a.extractFileExtension(this.file.filename),filesize:C.a.formatFileSize(this.file.filesize),timeUploaded:dt.a.format.date(1e3*this.file.timeUploaded,v.a.__("unix_long_date_format")),optFileInformation:this.context.isFileInformationEnabled(),optSelection:this.context.isSelectionEnabled(),optFlags:this.context.isFlagsEnabled(),optComments:this.context.isCommentsEnabled(),optDownload:this.context.isDownloadEnabled()&&this.file.status!==Z.a.LIMIT_LOCKED,optAdmin:this.context.isAdminModeEnabled(),optLazyLoad:!0,optHeaderImage:N.a.isAllowed(B.a.GALLERY_HEADER_IMAGE)};this.file.image&&this.image.captureDate&&(e.captureDate=dt.a.format.date(this.file.image.captureDate.getTime(),v.a.__("unix_long_date_format"))),this.$dom=m()(pt()(e)),this.$ui.document=m()(document),this.$ui.thumb=this.$dom.find(".thumb"),this.$ui.btnSelect=this.$dom.find(".btn--select"),this.$ui.flagDisplay=this.$dom.find(".flag-display"),this.$ui.colComments=this.$dom.find(".col-comments"),this.$ui.colMenu=this.$dom.find(".col-menu"),this.$ui.btnToggleMenu=this.$ui.colMenu.find(".btn--toggle-menu"),this.$ui.menuEntries=this.$ui.colMenu.find(".menu-entries"),this.$ui.btnGalleryImage=this.$ui.colMenu.find(".btn--gallery-image"),this.$ui.btnHeaderImage=this.$ui.colMenu.find(".btn--header-image"),this.$ui.btnDownload=this.$ui.colMenu.find(".btn--download"),this.$ui.btnRemove=this.$ui.colMenu.find(".btn--remove"),this.$ui.btnMetaInfos=this.$ui.colMenu.find(".btn--metainfos"),this.$ui.flagBar=this.$ui.colMenu.find(".flag-bar")}},{key:"initialize",value:function(){var e=this;"uploading"!==this.file.status&&"processing"!==this.file.status&&(this.$dom.on("click",(function(t){"excluded elements here"!==t.target&&function(t){t.preventDefault(),!0!==t.altKey?e.requestDetailView():e.file.toggleSelection("userinput")}(t)})),this.$ui.btnSelect.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.file.toggleSelection("userinput")})),this.applyFlag(this.file.flag),this.$ui.flagBar.find(".flag-btn").on("click",(function(t){t.preventDefault();var i=m()(t.currentTarget).attr("data-type");e.requestColorFlag(i),e.applyFlag(i)})),this.uiUpdateCommentCount(),this.image&&xe.a.getInstance().addElements([this.$dom[0]],(function(){var t=window.devicePixelRatio||1,i=e.image.thumbnails.getThumbFitting(30*t,30*t,!0,!0);i&&e.$ui.thumb.css("background-image",'url("'.concat(i.url,'")'))})),this.$ui.btnToggleMenu.on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.menuVisible?e.hideMenu():e.showMenu()})),this.$dom.on("contextmenu",(function(t){t.preventDefault(),e.showMenu()})),this.$dom.on("mouseleave",(function(){e.hideMenu()})),this.$ui.menuEntries.on("click",(function(e){return e.stopPropagation()})),this.$ui.btnHeaderImage.on("click",(function(t){t.preventDefault(),e.requestAsHeaderImage(),e.hideMenu()})),this.$ui.btnGalleryImage.on("click",(function(t){t.preventDefault(),e.requestAsTeaserImage(),e.hideMenu()})),this.$ui.btnDownload.on("click",(function(t){t.preventDefault(),m()(t.currentTarget).addClass("clicked"),e.initDownload(),e.hideMenu()})),this.$ui.btnRemove.on("click",(function(t){t.preventDefault(),te.a.removeFile(e.file),e.hideMenu()})),this.$ui.btnMetaInfos.on("click",(function(t){t.preventDefault(),e.requestMetaInformationView()})),0===this.$ui.menuEntries.find("li").length&&this.$ui.btnToggleMenu.addClass("disabled"),this.initDragAndDrop(this.$dom))}},{key:"uiUpdateCommentCount",value:function(){var e=this.file.image;this.$ui.colComments.text(e&&e.numComments>0?this.file.image.numComments:"â")}},{key:"applyFlag",value:function(e){this.$ui.flagDisplay.attr("data-type",e),this.$ui.flagBar.find(".flag-btn").removeClass("selected").filter('[data-type="'.concat(e,'"]')).addClass("selected")}},{key:"showMenu",value:function(){var e=this;if(!this.menuVisible){var t=x.a.getClientPosition(),i=Ce.a.toLocalPosition(t.x,t.y,this.$ui.colMenu[0]);if(this.$ui.menuEntries.css({left:i.x-18,top:i.y-18}),this.$ui.menuEntries.fadeIn(200),this.$ui.menuEntries[0].getBoundingClientRect){var n=this.$ui.menuEntries[0].getBoundingClientRect();n.right>O.a.getWidth()&&this.$ui.menuEntries.css({left:i.x-n.width+18})}this.$ui.document.on("mousedown.flm",(function(t){k.a.domIsChildOf(t.target,e.$ui.colMenu[0])||e.hideMenu()})),this.menuVisible=!0}}},{key:"hideMenu",value:function(){this.menuVisible&&(this.$ui.menuEntries.fadeOut(200),this.$ui.document.off("mousedown.flm"),this.menuVisible=!1)}},{key:"registerEventListeners",value:function(){var e="view-file-list-".concat(this.file.uuid);this.file.addEventListener(Q.a.SELECTED,this.handleFileSelected.bind(this),e),this.file.addEventListener(Q.a.DESELECTED,this.handleFileDeselected.bind(this),e),this.file.addEventListener(Q.a.FLAG_CHANGED,this.handleFileFlagChanged.bind(this),e),this.file.addEventListener(Q.a.VISIBILITY_CHANGED,this.handleFileVisibilityChanged.bind(this),e),this.file.addEventListener(Q.a.DRAGGINGSTATE_CHANGED,this.handleFileDraggingStateChanged.bind(this),e),this.file.addEventListener(Q.a.REMOVED,this.handleFileRemoved.bind(this),e),this.file.image&&(this.file.image.addEventListener(ee.a.COMMENT_ADDED,this.handleImageCommentsUpdated.bind(this),e),this.file.image.addEventListener(ee.a.COMMENT_REMOVED,this.handleImageCommentsUpdated.bind(this),e))}},{key:"unregisterEventListeners",value:function(){var e="view-file-list-".concat(this.file.uuid);this.file.removeEventListenersByNamespace(e),this.file.image&&this.file.image.removeEventListenersByNamespace(e)}},{key:"handleFileSelected",value:function(){this.$dom.addClass("selected")}},{key:"handleFileDeselected",value:function(){this.$dom.removeClass("selected")}},{key:"handleFileVisibilityChanged",value:function(){this.file.visible?this.$dom.removeClass("invisible"):this.$dom.addClass("invisible")}},{key:"handleFileDraggingStateChanged",value:function(){this.file.dragging?this.$dom.addClass("dragging"):this.$dom.removeClass("dragging")}},{key:"handleFileRemoved",value:function(){var e=this;this.$dom.stop().fadeOut(300,(function(){e.removeFromDOMTree()}))}},{key:"handleFileFlagChanged",value:function(e){this.applyFlag(e.get("flag"))}},{key:"handleImageCommentsUpdated",value:function(){this.uiUpdateCommentCount()}},{key:"finalize",value:function(){yt(bt(t.prototype),"finalize",this).call(this),this.unregisterEventListeners()}}])&&gt(i.prototype,n),o&&gt(i,o),t}(Oe.a),Et=i(240),St=i.n(Et);function kt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tt=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.preset=t,this.optAdmin=!0===i,this.optSolo=!0===n,this.optInfo=!0===o,this.active=!1,this.soloEnabled=!1,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,n,o;return t=e,o=[{key:"REQUEST_ACTIVATION_TOGGLE",get:function(){return"req_activation_toggle"}},{key:"REQUEST_SOLO_ENABLE",get:function(){return"req_solo_enable"}},{key:"REQUEST_SOLO_DISABLE",get:function(){return"req_solo_disable"}},{key:"REQUEST_INFO_DIALOG",get:function(){return"req_info_dialog"}}],(n=[{key:"createDOM",value:function(){var e={id:this.preset.id,title:""===this.preset.name?v.a.p__("preset.sidebar.js","title_default"):this.preset.name,optRemove:this.optAdmin,optSolo:this.optSolo,optInfo:this.optInfo};this.$dom=m()(St()(e)),this.$ui.title=this.$dom.find(".title"),this.$ui.titleSpan=this.$ui.title.find("span"),this.$ui.buttons=this.$dom.find(".buttons"),this.$ui.btnRemove=this.$ui.buttons.find(".btn--remove"),this.$ui.btnSolo=this.$ui.buttons.find(".btn--solo"),this.$ui.btnInfo=this.$ui.buttons.find(".btn--info")}},{key:"initialize",value:function(){var e=this;this.$ui.title.on("click",this.handleBtnClick.bind(this)),this.$ui.btnRemove.on("click",this.handleBtnClick.bind(this)),this.$ui.btnSolo.on("click",this.handleBtnClick.bind(this)),this.$ui.btnInfo.on("click",this.handleBtnClick.bind(this)),(this.optAdmin||this.optSolo||this.optInfo)&&this.$dom.hover((function(){var t=0;e.optInfo&&(e.$ui.btnInfo.show(),t++),e.optAdmin&&(e.$ui.btnRemove.show(),t++),e.optSolo&&(e.$ui.btnSolo.show(),t++),e.$ui.titleSpan.css("padding-right",24*t+5)}),(function(){e.optInfo&&e.$ui.btnInfo.hide(),e.optAdmin&&e.$ui.btnRemove.hide(),e.optSolo&&(e.soloEnabled||e.$ui.btnSolo.hide()),e.$ui.titleSpan.css("padding-right","")})),this.registerEventListeners()}},{key:"registerEventListeners",value:function(){this.preset.addEventListener(p.a.MODIFIED,this.handlePresetModified.bind(this)),this.preset.addEventListener(p.a.SAVED,this.handlePresetSaved.bind(this)),this.preset.addEventListener(p.a.UPDATED,this.handlePresetUpdated.bind(this)),this.preset.addEventListener(p.a.REVERTED,this.handlePresetReverted.bind(this)),this.preset.addEventListener(p.a.REMOVED,this.handlePresetRemoved.bind(this))}},{key:"activate",value:function(){this.active||(this.$dom.addClass("active"),this.active=!0)}},{key:"deactivate",value:function(){this.active&&(this.$dom.removeClass("active"),this.active=!1)}},{key:"actionToggleSolo",value:function(){this.soloEnabled?(this.soloEnabled=!1,this.$dom.removeClass("solo"),m()(this).trigger(e.REQUEST_SOLO_DISABLE,[this.preset])):(this.soloEnabled=!0,this.$dom.addClass("solo"),m()(this).trigger(e.REQUEST_SOLO_ENABLE,[this.preset]))}},{key:"actionRemove",value:function(){var e=this;i.e(109).then((function(){var t=[i(440)];(function(t){new(0,t.default)(e.preset).open()}).apply(null,t)})).catch(i.oe)}},{key:"actionShowInfoDialog",value:function(){var e=this;i.e(110).then((function(){var t=[i(441)];(function(t){new(0,t.default)(e.preset).open()}).apply(null,t)})).catch(i.oe)}},{key:"handleBtnClick",value:function(t){switch(t.preventDefault(),t.currentTarget){case this.$ui.title[0]:m()(this).trigger(e.REQUEST_ACTIVATION_TOGGLE);break;case this.$ui.btnSolo[0]:this.actionToggleSolo();break;case this.$ui.btnRemove[0]:this.actionRemove();break;case this.$ui.btnInfo[0]:this.actionShowInfoDialog()}}},{key:"handlePresetModified",value:function(){this.$dom.addClass("modified")}},{key:"handlePresetSaved",value:function(){this.$ui.title.find("span").text(this.preset.name),this.$dom.removeClass("modified")}},{key:"handlePresetUpdated",value:function(){this.$dom.removeClass("modified")}},{key:"handlePresetReverted",value:function(){this.$dom.removeClass("modified")}},{key:"handlePresetRemoved",value:function(){var e=this;this.$dom.slideUp(200,(function(){e.$dom.remove()}))}}])&&kt(t.prototype,n),o&&kt(t,o),e}(),Ct=i(121),xt=i(162),Ot=i(97),Dt=i(52),At=i(59),It=i(6),Pt=i(57),$t=i(241),Rt=i.n($t);function Lt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Mt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.notification=null,this.headerImage=null,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"HEADER_IMAGE_UPDATED",get:function(){return"evt_dialog_header_image_updated"}},{key:"HEADER_IMAGE_REMOVED",get:function(){return"evt_dialog_header_image_removed"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()(Rt()()),this.$ui.content=this.$dom.find(".content"),this.$ui.emptyState=this.$dom.find(".empty-state"),this.$ui.imageContainer=this.$dom.find(".image-container"),this.$ui.image=this.$dom.find(".image"),this.$ui.focusPoint=this.$dom.find(".focus-point"),this.$ui.progressContainer=this.$dom.find(".progress-container"),this.$ui.progressBar=this.$dom.find(".pd-progress-bar"),this.$ui.buttons=this.$dom.find(".buttons"),this.$ui.btnUpload=this.$dom.find(".btn--upload"),this.$ui.fileInput=this.$dom.find(".btn--upload input"),this.$ui.btnRemove=this.$dom.find(".btn--remove"),this.$ui.btnDone=this.$dom.find(".btn--done"),this.$ui.responseMessage=this.$dom.find(".response-message"),this.$ui.imageContainer.hide(),this.$ui.btnRemove.hide(),this.$ui.responseMessage.hide()}},{key:"initialize",value:function(){var e=this;this.$ui.image.on("click",(function(t){t.preventDefault(),e.headerImage.setFocusPoint(t.offsetX/e.$ui.image.width(),t.offsetY/e.$ui.image.height(),!0)})),this.$ui.fileInput.change((function(t){t.currentTarget.files.length>0&&e.actionUpload(t.currentTarget.files[0])})),this.$ui.btnRemove.on("click",(function(t){t.preventDefault(),e.actionRemove()})),this.$ui.btnDone.on("click",(function(t){t.preventDefault(),e.close()})),this.initDragAndDrop()}},{key:"initDragAndDrop",value:function(){var e=this;Dt.a.registerTarget(this.$ui.content[0],{onDrop:function(t,i){i&&i.files&&i.files.length>0&&e.actionUpload(i.files[0])}})}},{key:"setHeaderImage",value:function(e){var t=this;if(e!==this.headerImage){null!==this.headerImage&&this.unregisterHeaderImageListeners(this.headerImage),this.headerImage=e;var i=e.thumbnails.getThumbFitting(2e3,2e3,!1,!0);i&&(Ot.a.preloadImages([i.url]).then((function(){t.$ui.emptyState.hide(),t.$ui.imageContainer.show(),t.$ui.btnRemove.show(),t.$ui.image.attr({width:i.width,height:i.height,src:i.url}),t.centerImage(),t.$dom.is(":visible")&&t.updateFocusPoint(!0),null!==t.notification&&t.notification.container.center()})),this.registerHeaderImageListeners(e),this.$ui.buttons.slideDown(300),this.$ui.progressContainer.slideUp(300),this.$ui.imageContainer.removeClass("disabled"))}}},{key:"unsetHeaderImage",value:function(){null!==this.headerImage&&(this.unregisterHeaderImageListeners(this.headerImage),this.$ui.image.attr({src:"",width:"",height:""}),this.$ui.btnRemove.hide(),this.$ui.emptyState.show(),this.$ui.imageContainer.hide(),null!==this.notification&&this.notification.container.center(),this.headerImage=null)}},{key:"centerImage",value:function(){var e,t;this.headerImage.aspectRatio>1.575?t=(e=630)/this.headerImage.aspectRatio:e=(t=400)*this.headerImage.aspectRatio,this.$ui.image.css({width:e,height:t,left:.5*(630-e)})}},{key:"registerHeaderImageListeners",value:function(e){e.addEventListener(At.default.FOCUS_UPDATED,this.handleHeaderImageFocusUpdated.bind(this),"dialog_gallery_header_image")}},{key:"unregisterHeaderImageListeners",value:function(e){e.removeEventListenersByNamespace("dialog_gallery_header_image")}},{key:"updateFocusPoint",value:function(e){if(null!==this.headerImage){var t=this.$ui.image,i=t.position().left+t.width()*this.headerImage.focusX-12.5,n=t.height()*this.headerImage.focusY-12.5;e?y.default.to(this.$ui.focusPoint[0],{x:i,y:n,duration:.3,ease:"expo.out"}):this.$ui.focusPoint.css("transform","translate(".concat(i,"px, ").concat(n,"px)"))}}},{key:"showResponseMessage",value:function(e){var t=this;this.$ui.responseMessage.is(":visible")?this.$ui.responseMessage.fadeOut(200,(function(){t.$ui.responseMessage.text(e).fadeIn(300)})):this.$ui.responseMessage.text(e).slideDown(300)}},{key:"hideResponseMessage",value:function(){this.$ui.responseMessage.slideUp(200)}},{key:"open",value:function(){E.a.hasNotification("dialog-gallery-header-image-edit")||(this.$ui.responseMessage.hide(),this.notification=E.a.open((new Pt.a).setId("dialog-gallery-header-image-edit").setTitle(v.a.p__("dialog.gallery.headerimage.edit","title")).setContent(this.$dom).setMaxWidth(650)),this.updateFocusPoint(!1))}},{key:"close",value:function(){E.a.close("dialog-gallery-header-image-edit"),this.notification=null}},{key:"isOpened",value:function(){return this.notification&&this.notification.getStatus()===It.a.OPENED}},{key:"actionUpload",value:function(e){var t=this;if(!(e instanceof File))throw"argument file is not of type File";/image\/(png|jpe?g)/.test(e.type)?(T.a.post("/ajax/galleries/path:"+"".concat($.default.encodePathForAjax(this.gallery.urlRel))+"/uploadheaderimage?"+"".concat(u.a.get("xsrfkeyname"))+"="+"".concat(u.a.get("xsrfkey")),{data:e,dataType:T.a.DATATYPE_FILE,responseType:T.a.RESPONSETYPE_JSON,onUploadProgress:function(e){var i=e.loaded/e.total;t.$ui.progressBar.css("width","".concat(String(100*i),"%")),1===i&&t.$ui.progressBar.addClass("success")},onComplete:function(e){e.success?t.$ui.progressContainer.find("span").text(v.a.p__("dialog.gallery.headerimage.edit","image is processing ...")):("filetype_not_allowed"===e.code?t.showResponseMessage(v.a.p__("errors","error_filetype_not_supported")):t.showResponseMessage(v.a.p__("dialog.gallery.headerimage.edit","error_upload_failed")),t.$ui.buttons.slideDown(300),t.$ui.progressContainer.slideUp(300),t.$ui.imageContainer.removeClass("disabled"))},lock:!0}),this.hideResponseMessage(),this.$ui.progressBar.css("width","0").removeClass("success"),this.$ui.buttons.slideUp(300),this.$ui.progressContainer.find("span").text(v.a.p__("dialog.gallery.headerimage.edit","image is uploading ...")),this.$ui.progressContainer.slideDown(300),this.$ui.imageContainer.addClass("disabled")):this.showResponseMessage(v.a.p__("errors","error_filetype_not_supported"))}},{key:"actionSetGalleryFile",value:function(e){var t=this;"image"===e.filetype?(T.a.post("/ajax/galleries/path:".concat($.default.encodePathForAjax(this.gallery.urlRel),"/setheaderimage"),{dataType:T.a.DATATYPE_JSON,data:{fileUuid:e.uuid},responseType:T.a.RESPONSETYPE_JSON,onComplete:function(e){e.success?t.$ui.progressContainer.find("span").text(v.a.p__("dialog.gallery.headerimage.edit","image is processing ...")):("filetype_not_allowed"===e.code?t.showResponseMessage(v.a.p__("errors","error_filetype_not_supported")):t.showResponseMessage(v.a.p__("dialog.gallery.headerimage.edit","error_upload_failed")),t.$ui.buttons.slideDown(300),t.$ui.progressContainer.slideUp(300),t.$ui.imageContainer.removeClass("disabled"))},lock:!0}),this.$ui.progressBar.css("width","100%").addClass("success"),this.$ui.buttons.slideUp(300),this.$ui.progressContainer.find("span").text(v.a.p__("dialog.gallery.headerimage.edit","image is uploading ...")),this.$ui.progressContainer.slideDown(300),this.$ui.imageContainer.addClass("disabled")):this.showResponseMessage(v.a.p__("errors","error_filetype_not_supported"))}},{key:"actionRemove",value:function(){null!==this.headerImage&&(T.a.post("/ajax/galleries/path:".concat($.default.encodePathForAjax(this.gallery.urlRel),"/removeheaderimage"),{responseType:T.a.RESPONSETYPE_JSON,onComplete:function(e){e.success},lock:!0}),this.unsetHeaderImage(),m()(this).trigger(e.HEADER_IMAGE_REMOVED))}},{key:"handleHeaderImageFocusUpdated",value:function(){this.updateFocusPoint(!0)}}])&&Lt(t.prototype,i),n&&Lt(t,n),e}(),Ft=i(242),Nt=i.n(Ft);function Bt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ut=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.width=null,this.height=null,this.headerImage=null,this.pixelRatio=window.devicePixelRatio||1,this.thumb=null,this.thumbLoadMap=null,this.dialogEdit=null,this.optAdmin=!0===i,this.mode=n||null,this.parallaxOffset=0,this.imagePos={x:0,y:0},this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"MODE_TRIAL",get:function(){return"mode_trial"}},{key:"MODE_DISABLED",get:function(){return"mode_disabled"}},{key:"HEADER_IMAGE_UPDATED",get:function(){return"evt_header_image_updated"}}],(i=[{key:"createDOM",value:function(){var t={optAdmin:this.optAdmin,optDisabled:this.mode===e.MODE_DISABLED,optTrial:this.optAdmin&&this.mode===e.MODE_TRIAL};this.$dom=m()(Nt()(t)),this.mode!==e.MODE_DISABLED&&(this.$ui.contentEmpty=this.$dom.find(".content-empty"),this.$ui.contentImage=this.$dom.find(".content-image"),this.$ui.image=this.$dom.find(".image"),this.$ui.btnCreate=this.$dom.find(".btn--create"),this.$ui.btnEdit=this.$dom.find(".btn--edit"),this.$ui.contentUploadProgress=this.$dom.find(".content-upload-progress"),this.$ui.uploadProgressBar=this.$ui.contentUploadProgress.find(".pd-progress-bar"),this.$ui.contentImage.hide(),this.$ui.contentUploadProgress.hide())}},{key:"initialize",value:function(){var t=this;this.mode!==e.MODE_DISABLED&&(this.optAdmin&&(this.$ui.contentImage.hover((function(){t.$ui.btnEdit.stop().fadeIn(200).css("display","block")}),(function(){t.$ui.btnEdit.stop().fadeOut(200)})),this.$ui.btnCreate.on("click",(function(e){e.preventDefault(),t.openEditDialog()})),this.$ui.btnEdit.on("click",(function(e){e.preventDefault(),t.openEditDialog()}))),this.initDragAndDrop())}},{key:"initDragAndDrop",value:function(){var e=this;this.optAdmin&&Dt.a.registerTarget(this.$dom[0],{onDrop:function(t,i){if(t&&t.load&&"files"===t.load.type){var n=t.load.content[0];e.openEditDialog(),e.dialogEdit.actionSetGalleryFile(n)}else i&&i.files&&i.files.length>0&&(e.openEditDialog(),e.dialogEdit.actionUpload(i.files[0]))}})}},{key:"setHeaderImage",value:function(t){t!==this.headerImage&&(null!==this.headerImage&&this.unregisterHeaderImageListeners(this.headerImage),this.headerImage=t,this.thumbLoadMap={},this.alignImage(!0,!1),this.$ui.contentEmpty.hide(),this.$ui.contentUploadProgress.hide(),this.$ui.contentImage.show(),this.registerHeaderImageListeners(t),m()(this).trigger(e.HEADER_IMAGE_UPDATED,[this.headerImage]),null!==this.dialogEdit&&this.dialogEdit.isOpened()&&this.dialogEdit.setHeaderImage(t))}},{key:"unsetHeaderImage",value:function(){null!==this.headerImage&&(this.$ui.image.attr({src:"",width:"",height:""}),this.$ui.contentImage.hide(),this.$ui.contentEmpty.show(),this.unregisterHeaderImageListeners(this.headerImage),this.headerImage=null,this.thumb=null,m()(this).trigger(e.HEADER_IMAGE_UPDATED,[this.headerImage]))}},{key:"registerHeaderImageListeners",value:function(e){e.addEventListener(At.default.FOCUS_UPDATED,this.handleHeaderImageFocusUpdated.bind(this),"view_gallery_header_image")}},{key:"unregisterHeaderImageListeners",value:function(e){e.removeEventListenersByNamespace("view_gallery_header_image")}},{key:"setThumbResponsive",value:function(e,t){var i=this;if(!this.headerImage)return!1;var n=this.headerImage.thumbnails.getThumbFitting(e*this.pixelRatio,t*this.pixelRatio,!0,!0);if(!n||n===this.thumb)return!1;this.thumb=n;var o=function(){var e=i.$ui.image;e.off(".ghi_str"),e.one("load.ghi_str",(function(){e.attr({width:n.width,height:n.height}),e.is(":visible")||e.show()})),e.attr({src:n.url})};return n.url in this.thumbLoadMap?o():(Ot.a.preloadImages([n.url]).then((function(){o()})),this.thumbLoadMap[n.url]=null),!0}},{key:"updateParallax",value:function(e){if(!(null===this.headerImage||e>this.height)){this.parallaxOffset=.5*e;var t=Math.floor(this.imagePos.y+this.parallaxOffset);this.$ui.image[0].style.transform="translate3d(".concat(this.imagePos.x,"px, ").concat(t,"px, 0)")}}},{key:"setImageSize",value:function(t,i){this.mode===e.MODE_DISABLED||this.width===t&&this.height===i||(this.width=t,this.height=i,this.$ui.contentImage.css({width:"".concat(t,"px"),height:"".concat(i,"px")}),this.alignImage(!0,!1),m()(this).trigger(e.HEADER_IMAGE_UPDATED,[this.headerImage]))}},{key:"alignImage",value:function(e,t){if(null!==this.headerImage&&(e&&this.setThumbResponsive(this.width,this.height),this.thumb)){var i=C.a.fitDimensions(this.thumb.width,this.thumb.height,this.width,this.height,!0,!0),n=i.width,o=i.height;this.imagePos.x=Math.floor(C.a.constrain(n*this.headerImage.focusX*-1+.5*this.width,this.width-n,0)),this.imagePos.y=Math.floor(C.a.constrain(o*this.headerImage.focusY*-1+.5*this.height,this.height-o,0));var a=Math.floor(this.imagePos.y+this.parallaxOffset);!0===t?y.default.to(this.$ui.image,{width:n,height:o,x:this.imagePos.x,y:a,duration:.2,ease:"power2.out"}):this.$ui.image.css({width:n,height:o,transform:"translate3d(".concat(this.imagePos.x,"px, ").concat(a,"px, 0)")})}}},{key:"openEditDialog",value:function(){null===this.dialogEdit&&(this.dialogEdit=new Mt(this.gallery)),null!==this.headerImage&&this.dialogEdit.setHeaderImage(this.headerImage),this.dialogEdit.open()}},{key:"handleHeaderImageFocusUpdated",value:function(){this.alignImage(!1,!0)}}])&&Bt(t.prototype,i),n&&Bt(t,n),e}(),jt=i(243),Gt=i.n(jt);function Ht(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var zt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.section=null,this.displayType=null,this.highlighted=!1,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"FILES_SELECTED",get:function(){return"files_selected"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()(Gt()()),this.$ui.button=this.$dom.find("#btn-upload"),this.$ui.fileInput=this.$dom.find("#fileselect")}},{key:"initialize",value:function(){var t=this;this.$ui.fileInput.on("change",(function(i){for(var n=[],o=0,a=i.currentTarget.files.length;o<a;o++)n.push(i.currentTarget.files[o]);m()(t).trigger(e.FILES_SELECTED,[n])}))}},{key:"setDisplayType",value:function(e){if(-1==="grid,masonry,list".indexOf(e))throw"displayType ".concat(e," is invalid");this.displayType=e,this.$dom.attr("data-display-type",e),"grid"===e&&this.gallery.settings.get(j.a.ENABLE_FILE_INFORMATION)&&this.$dom.addClass("filenames-visible")}},{key:"setWidth",value:function(e){switch(this.displayType){case"masonry":this.$dom.css("width",e);break;case"grid":this.$dom.css({width:e,height:e});break;default:throw"setWidth is not allowed for displayType ".concat(this.displayType)}}},{key:"highlight",value:function(){this.highlighted||(this.$dom.addClass("highlight"),this.$dom.find(".title").html("Drop"),this.highlighted=!0)}},{key:"unhighlight",value:function(){this.highlighted&&(this.$dom.removeClass("highlight"),this.$dom.find(".title").html("Drag & Drop"),this.highlighted=!1)}}])&&Ht(t.prototype,i),n&&Ht(t,n),e}();function Vt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wt=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.files=i,this.entities=[],this.entPresets=[],this.entFlag=[],this.entSearchTerm=null,this.filterActive=!1,this.matchCount=0,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"FILTER_UPDATED",get:function(){return"evt_filter_updated"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()("#sidebar-filter"),this.$ui.inputWrapper=this.$dom.find(".input-wrapper"),this.$ui.inputFilterString=this.$dom.find(".inp-filter-string"),this.$ui.searchBtnClear=this.$dom.find(".clear-btn"),this.$ui.flags=this.$dom.find(".flags"),this.$ui.flagButtons=this.$dom.find(".flag-button"),this.$ui.commentsButton=this.$dom.find(".comments-button"),this.$ui.selection=this.$dom.find(".selection"),this.$ui.selectionButton=this.$dom.find(".selection-button"),this.$ui.filterInfoWrapper=m()("#filter-info-wrapper"),this.$ui.filterInfo=m()("#filter-info");var e=0;this.gallery.settings.get(j.a.ENABLE_FILE_INFORMATION)||(this.$ui.inputWrapper.hide(),e++),this.gallery.settings.get(j.a.ENABLE_FLAGS)||(this.$ui.flags.hide(),e++),this.gallery.settings.get(j.a.ENABLE_SELECTION)||(this.$ui.selectionButton.hide(),e++),this.gallery.settings.get(j.a.ENABLE_COMMENTS)||(this.$ui.commentsButton.hide(),e++),4===e&&this.$dom.hide()}},{key:"initialize",value:function(){var e=this;this.gallery.settings.get(j.a.ENABLE_FILE_INFORMATION)&&(this.$ui.inputFilterString.keyup((function(t){var i=m()(t.currentTarget);27===t.keyCode&&i.val(""),e.setSearch(i.val())})),this.$ui.searchBtnClear.on("click",(function(t){t.preventDefault(),e.setSearch(""),e.$ui.inputFilterString.val("")}))),this.gallery.settings.get(j.a.ENABLE_FLAGS)&&this.$dom.on("click",".flag-button",(function(t){t.preventDefault();var i=m()(t.currentTarget);i.hasClass("active")?e.removeFlag(i.attr("data-flag")):e.addFlag(i.attr("data-flag"))})),this.gallery.settings.get(j.a.ENABLE_COMMENTS)&&this.$ui.commentsButton.on("click",(function(t){t.preventDefault(),e.setCommentedFilter(!m()(t.currentTarget).hasClass("active"))})),this.gallery.settings.get(j.a.ENABLE_SELECTION)&&this.$ui.selectionButton.on("click",(function(t){t.preventDefault(),e.setSelectedFilter(!m()(t.currentTarget).hasClass("active"))}))}},{key:"addFlag",value:function(e){var t=!1;for(var i in this.entFlag)if(this.entFlag[i]===e){t=!0;break}!1===t&&this.entFlag.push(e),1===this.entFlag.length&&this.addEntity("flag"),this.$ui.flagButtons.filter('[data-flag="'.concat(e,'"]')).addClass("active"),this.apply()}},{key:"removeFlag",value:function(e){for(var t in this.entFlag)if(this.entFlag[t]===e){this.entFlag.splice(parseInt(t),1);break}0===this.entFlag.length&&this.removeEntity("flag"),this.$ui.flagButtons.filter('[data-flag="'.concat(e,'"]')).removeClass("active"),this.apply()}},{key:"setCommentedFilter",value:function(e){e?(this.$ui.commentsButton.addClass("active"),this.addEntity("commented")):(this.$ui.commentsButton.removeClass("active"),this.removeEntity("commented")),this.apply()}},{key:"setSelectedFilter",value:function(e){e?(this.$ui.selectionButton.addClass("active"),this.addEntity("selected")):(this.$ui.selectionButton.removeClass("active"),this.removeEntity("selected")),this.apply()}},{key:"updateInfo",value:function(){this.filterActive?(0===this.matchCount?this.$ui.filterInfo.find(".content").text(v.a.p__("gallery.view.desktop.js","filter_no_result")):this.$ui.filterInfo.find(".content").html(v.a.p__("gallery.view.desktop.js","filter_result_hint",this.matchCount,this.files.count())),this.$ui.filterInfoWrapper.show()):this.$ui.filterInfoWrapper.hide()}},{key:"setSearch",value:function(e){this.entSearchTerm=e&&"string"==typeof e?e.toLowerCase():null,null===this.entSearchTerm?(this.removeEntity("search"),this.$ui.inputWrapper.removeClass("active"),this.$ui.searchBtnClear.fadeOut()):(this.addEntity("search"),this.$ui.inputWrapper.addClass("active"),this.$ui.searchBtnClear.is(":visible")||this.$ui.searchBtnClear.fadeIn(),""===this.$ui.inputFilterString.val()&&this.$ui.inputFilterString.val(this.entSearchTerm)),this.apply()}},{key:"addPreset",value:function(e){for(var t in this.entPresets)if(this.entPresets[t]===e)return;this.entPresets.push(e),1===this.entPresets.length&&this.addEntity("presets"),this.apply()}},{key:"removePreset",value:function(e){for(var t=0;t<this.entPresets.length;t++)if(this.entPresets[t]===e){this.entPresets.splice(t,1);break}0===this.entPresets.length&&this.removeEntity("presets"),this.apply()}},{key:"clearPresets",value:function(){this.entPresets=[],this.removeEntity("presets")}},{key:"addEntity",value:function(e){var t=!1;for(var i in this.entities)if(this.entities[i]===e){t=!0;break}if(!t){this.entities.push(e);var n="gallery_images.filtered_by_";switch(e){case"search":n+="name";break;case"flag":n+="flag";break;case"preset":n+="preset"}var o=u.a.get("visitor");o&&"user"===o.type?n+=".user":n+=".client",$.default.submitMetric(n)}}},{key:"removeEntity",value:function(e){for(var t in this.entities)if(this.entities[t]===e)return this.entities.splice(parseInt(t),1),void this.apply()}},{key:"clear",value:function(){this.entities=[],this.apply()}},{key:"update",value:function(){this.apply()}},{key:"getSearchTerm",value:function(){return this.entSearchTerm}},{key:"getFlags",value:function(){return this.entFlag}},{key:"getEntities",value:function(){return this.entities}},{key:"apply",value:function(){var t,i=this,n=this.entities.length,o=0,a=0;if(0===n)return this.files.each((function(e){e.visible||(e.setVisibility(!0),a++)})),this.filterActive=!1,this.matchCount=0,this.$dom.removeClass("active"),this.updateInfo(),void m()(this).trigger(e.FILTER_UPDATED,[a]);this.files.each((function(e){t=0;for(var r=0;r<n;r++)switch(i.entities[r]){case"search":null!==i.entSearchTerm&&-1!==e.filename.toLowerCase().indexOf(i.entSearchTerm)&&t++;break;case"flag":for(var s in i.entFlag)if(i.entFlag[s]===e.flag){t++;break}break;case"presets":for(var l in i.entPresets)if(i.entPresets[l].hasFile(e)){t++;break}break;case"selected":e.selected&&t++;break;case"commented":e.image&&e.image.numComments>0&&t++}t===n?(e.visible||(e.setVisibility(!0),a++),o++):e.visible&&(e.setVisibility(!1),a++)}),this),this.filterActive=!0,this.matchCount=o,this.$dom.addClass("active"),this.updateInfo(),m()(this).trigger(e.FILTER_UPDATED,[a])}}])&&Vt(t.prototype,i),n&&Vt(t,n),e}(),Yt=i(4);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qt=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jt(this,Kt(t).call(this))).sortOrder=e,n.sortReverse=i,n.$dom=void 0,n.$ui={},n.createDOM(),n.initialize(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(t,e),i=t,o=[{key:"SORT_UPDATED",get:function(){return"evt_sort_updated"}}],(n=[{key:"createDOM",value:function(){this.$dom=m()("#sidebar-sort"),this.$ui.selectSortOrder=this.$dom.find(".select-sort-order"),this.$ui.btnReverse=this.$dom.find(".btn--reverse")}},{key:"initialize",value:function(){var e=this;"time_last_updated"===this.sortOrder&&(this.sortOrder=G.a.TIME_UPLOADED),this.$ui.selectSortOrder.val(this.sortOrder),this.sortReverse&&this.$ui.btnReverse.addClass("active"),this.$ui.selectSortOrder.on("change",(function(){e.sortOrder=e.$ui.selectSortOrder.val(),e.apply()})),this.$ui.btnReverse.on("click",(function(t){t.preventDefault(),e.sortReverse=!e.sortReverse,e.sortReverse?e.$ui.btnReverse.addClass("active"):e.$ui.btnReverse.removeClass("active"),e.apply()}))}},{key:"apply",value:function(){this.dispatchEvent(new Re.a(t.SORT_UPDATED,{order:this.sortOrder,reverse:this.sortReverse})),u.a.has("visitor")&&"user"===u.a.get("visitor").type?$.default.submitMetric("gallery_images.sorted.user"):$.default.submitMetric("gallery_images.sorted.client")}}])&&Xt(i.prototype,n),o&&Xt(i,o),t}(Yt.a);function ei(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ti=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entriesVisible=!1,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){this.$dom=m()("#sidebar-gallery-info").find(".action-menu"),this.$ui.btnToggle=this.$dom.find(".btn--toggle"),this.$ui.entries=this.$dom.find(".entries")}},{key:"initialize",value:function(){var e=this;this.$ui.btnToggle.on("click",(function(){e.toggleEntries()})),this.$ui.entries.on("click","a",(function(){e.hideEntries()}))}},{key:"showEntries",value:function(){var e=this;if(!this.entriesVisible){var t=x.a.getClientPosition(),i=Ce.a.toLocalPosition(t.x,t.y,this.$dom[0]);this.$ui.entries.css({left:i.x-18,top:i.y-18}),this.$ui.entries.fadeIn(100),m()(document).on("mousedown".concat(".gallery-action-menu"),(function(t){k.a.domIsChildOf(t.target,e.$dom[0])||e.hideEntries()})),this.entriesVisible=!0}}},{key:"hideEntries",value:function(){this.entriesVisible&&(this.$ui.entries.fadeOut(200),m()(document).off(".gallery-action-menu"),this.entriesVisible=!1)}},{key:"toggleEntries",value:function(){this.entriesVisible?this.hideEntries():this.showEntries()}}])&&ei(t.prototype,i),n&&ei(t,n),e}(),ii=i(67),ni=i(68),oi=i(244),ai=i.n(oi),ri=i(245),si=i.n(ri),li=(i(139),i(174),i(23));function ui(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ci=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.preset=null,this.optAdmin=Boolean(i),this.isAllowedCopy=N.a.isAllowed(B.a.COPY_FILES),this.visible=!1,this.scrollingInitialized=!1,this.excessHintIn=!1,this.buttonsDisabled=!1,this.saveButtonHighlighted=!1,this.$dom=null,this.$spacer=null,this.$ui={},this.createDOM(),this.initialize()}var t,n,o;return t=e,o=[{key:"SPACER_UPDATING",get:function(){return"spacer_updating"}},{key:"REQUEST_FILE_HINT",get:function(){return"req_file_hint"}},{key:"REQUEST_DESELECTION",get:function(){return"req_deselection"}}],(n=[{key:"createDOM",value:function(){var e={optSave:this.gallery.settings.get(j.a.ENABLE_SELECTION),optDownload:this.gallery.settings.get(j.a.ENABLE_DOWNLOAD),optSetFlag:this.gallery.settings.get(j.a.ENABLE_FLAGS),optAdmin:this.optAdmin};this.$dom=m()(ai()(e)),this.$spacer=m()('<div id="selection-menu-spacer"></div>').hide(),this.$ui.window=m()(window),this.$ui.bar=this.$dom.find(".bar"),this.$ui.tab=this.$dom.find(".tab"),this.$ui.tabTitle=this.$dom.find(".tab-title"),this.$ui.counter=this.$dom.find(".counter"),this.$ui.thumbsWrapper=this.$dom.find(".thumbs-wrapper"),this.$ui.thumbsContainer=this.$dom.find(".thumbs-container"),this.$ui.selectionHint=this.$ui.thumbsWrapper.find(".selection-hint"),this.$ui.buttons=this.$dom.find(".buttons"),this.$ui.btnSave=this.$dom.find(".btn--save"),this.$ui.btnDownload=this.$dom.find(".btn--download"),this.$ui.btnDownloadSpinner=this.$dom.find(".btn--download .spinner"),this.$ui.btnSetFlag=this.$dom.find(".btn--set-flag"),this.$ui.btnMoveCopy=this.$dom.find(".btn--move-copy"),this.$ui.btnRemove=this.$dom.find(".btn--remove"),this.$ui.btnExport=this.$dom.find(".btn--export"),this.$ui.btnDeselect=this.$dom.find(".btn--deselect"),this.$ui.actionTooltip=this.$dom.find(".action-tooltip"),this.$ui.actionTooltip.hide()}},{key:"initialize",value:function(){var t=this;this.$ui.thumbsContainer.on("click",".thumb",this.handleThumbClicked.bind(this)),this.$dom.find(".buttons").on("click mouseenter mouseleave",".btn-sm",(function(i){if("mouseleave"!==i.type)switch(i.target){case t.$ui.btnSave[0]:switch(i.type){case"mouseenter":t.$ui.btnSave.hasClass("with-text")||t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_save"));break;case"click":t._actionSave()}break;case t.$ui.btnDownload[0]:switch(i.type){case"mouseenter":t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_download"));break;case"click":t._actionDownload()}break;case t.$ui.btnSetFlag[0]:switch(i.type){case"mouseenter":t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_setflag"));break;case"click":t._actionSetFlag()}break;case t.$ui.btnMoveCopy[0]:switch(i.type){case"mouseenter":t.isAllowedCopy?t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_movecopy")):t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_move"));break;case"click":t._actionMoveCopy()}break;case t.$ui.btnRemove[0]:switch(i.type){case"mouseenter":t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_remove"));break;case"click":t._actionRemove()}break;case t.$ui.btnExport[0]:switch(i.type){case"mouseenter":t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_export"));break;case"click":t._actionExport()}break;case t.$ui.btnDeselect[0]:switch(i.type){case"mouseenter":t._setActionTooltip(v.a.p__("selectionmenu.js","tooltip_action_deactivate"));break;case"click":m()(t).trigger(e.REQUEST_DESELECTION)}}else t._removeActionToolTip()})),m()(window).resize(this.handleWindowResize.bind(this)),this.initDragAndDrop()}},{key:"initDragAndDrop",value:function(){Dt.a.registerTarget(this.$dom[0],{onDrop:function(e){if(e&&"files"===e.load.type)for(var t=e.load.content,i=0;i<t.length;i++)t[i].select("userinput")}})}},{key:"setPreset",value:function(e){this.resetPreset(),this.preset=e,this._registerPresetListeners(e),e.status===p.a.STATUS_RAW?(this.$ui.tabTitle.html(""),this.$ui.tab.fadeOut(200)):(this.$ui.tabTitle.html(e.name),this.$ui.tab.fadeIn(200)),this._updateCounter(),(e.modified||e.status===p.a.STATUS_RAW)&&this._highlightSaveButton(),this.addFilePreviews(e.getFiles(),!1),this.visible&&this._updateSpacing()}},{key:"resetPreset",value:function(){null!==this.preset&&(this.$ui.counter.html("0"),this.$ui.thumbsContainer.empty(),this.$ui.selectionHint.show(),this.$ui.buttons.find(".btn-sm").removeClass("disabled"),this.buttonsDisabled=!1,this._unhighlightSaveButton(),this._unregisterPresetListeners(this.preset),this.preset=null)}},{key:"_registerPresetListeners",value:function(e){var t="selection-menu";e.addEventListener(p.a.FILES_ADDED,this.handlePresetFilesAdded.bind(this),t),e.addEventListener(p.a.FILES_REMOVED,this.handlePresetFilesRemoved.bind(this),t),e.addEventListener(p.a.MODIFIED,this.handlePresetModified.bind(this),t),e.addEventListener(p.a.REVERTED,this.handlePresetReverted.bind(this),t),e.addEventListener(p.a.UPDATED,this.handlePresetUpdated.bind(this),t),e.addEventListener(p.a.SAVED,this.handlePresetSaved.bind(this),t)}},{key:"_unregisterPresetListeners",value:function(e){e.removeEventListenersByNamespace("selection-menu")}},{key:"_updateCounter",value:function(){var e=this.preset.getNumFiles(),t=this.gallery.settings.get(j.a.MAX_SELECTIONS);this.gallery.settings.get(j.a.ENABLE_SELECTION)&&0!==t?(this.$ui.counter.html("".concat(e," / ").concat(t)),e>t?this.excessHintIn||(this.$ui.counter.addClass("exceeded"),this.excessHintIn=!0):this.excessHintIn&&(this.$ui.counter.removeClass("exceeded"),this.excessHintIn=!1)):this.$ui.counter.html(e),0===e?this.buttonsDisabled||(this.$ui.btnSave.addClass("disabled"),this.$ui.btnDownload.addClass("disabled"),this.$ui.btnSetFlag.addClass("disabled"),this.$ui.btnMoveCopy.addClass("disabled"),this.$ui.btnRemove.addClass("disabled"),this.$ui.btnExport.addClass("disabled"),this.buttonsDisabled=!0):this.buttonsDisabled&&(this.$ui.buttons.find(".btn-sm").removeClass("disabled"),this.buttonsDisabled=!1)}},{key:"_updateSpacing",value:function(){this.$ui.thumbsWrapper.css("max-width",this.$ui.bar.innerWidth()-this.$ui.counter.outerWidth()-this.$ui.buttons.outerWidth()),this.$ui.thumbsWrapper.mCustomScrollbar("update")}},{key:"_highlightSaveButton",value:function(){this.saveButtonHighlighted||(this.$ui.btnSave.text(v.a.p__("selectionmenu.js","tooltip_action_save")),this.$ui.btnSave.addClass("highlight with-text"),this.saveButtonHighlighted=!0)}},{key:"_unhighlightSaveButton",value:function(){this.saveButtonHighlighted&&(this.$ui.btnSave.text(""),this.$ui.btnSave.removeClass("highlight with-text"),this.saveButtonHighlighted=!1)}},{key:"_setActionTooltip",value:function(e){this.$ui.actionTooltip.text(e).show(),this.$ui.buttons.on("mousemove.selection-menu",this.handleActionTooltipMouseMove.bind(this))}},{key:"_removeActionToolTip",value:function(){this.$ui.actionTooltip.hide(),this.$dom.off("mousemove.selection-menu")}},{key:"show",value:function(){var t=this;if(!this.visible){if(null===this.preset)throw"no preset set";this.$ui.bar.slideDown(200),this.$spacer.slideDown({duration:200,progress:function(){m()(t).trigger(e.SPACER_UPDATING)}}),ni.a.getInstance().setBottomOffset(65),this.scrollingInitialized||(this.$ui.thumbsWrapper.mCustomScrollbar({axis:"x",scrollbarPosition:"outside",advanced:{autoExpandHorizontalScroll:!0},mouseWheel:{invert:!0},scrollInertia:0}),this.scrollingInitialized=!0),this._updateSpacing(),this.visible=!0}}},{key:"hide",value:function(){var t=this;this.visible&&(this.$ui.bar.slideUp(200,(function(){t.resetPreset()})),this.$ui.tab.fadeOut(200),this.$spacer.slideUp({duration:200,progress:function(){m()(t).trigger(e.SPACER_UPDATING)}}),ni.a.getInstance().setBottomOffset(0),this.visible=!1)}},{key:"addFilePreviews",value:function(e,t){if(0!==e.length){for(var i,n,o,a,r=window.devicePixelRatio||1,s=[],l=document.createDocumentFragment(),u=0,c=e.length;u<c;u++)n={file_uuid:(i=e[u]).uuid},i.hasPreview()?(o=i.image.thumbnails.getThumbFitting(45*r,45*r,!0,!0),n.preview_url=o.url):n.file_extension=i.filename.substr(i.filename.lastIndexOf(".")+1),a=m()(si()(n)),t&&a.hide(),s.push(a),l.appendChild(a[0]);if(this.$ui.thumbsContainer.append(l),!0===t)for(var h=0;h<s.length;h++)s[h].fadeIn(200);this.$ui.selectionHint.hide(),this.$ui.thumbsWrapper.mCustomScrollbar("update"),this.$ui.thumbsWrapper.mCustomScrollbar("scrollTo","right",{scrollInertia:300,scrollEasing:"easeOut"})}}},{key:"removeFilePreviews",value:function(e){for(var t=0;t<e.length;t++)this.$ui.thumbsContainer.find('.thumb[data-uuid="'.concat(e[t].uuid,'"]')).remove();this.$ui.thumbsWrapper.mCustomScrollbar("update")}},{key:"_actionDownload",value:function(){var e=this;this.$ui.btnDownloadSpinner.stop().fadeIn(200),Promise.all([i.e(2),i.e(7)]).then((function(){var t=[i(460),i(436)];(function(t,i){var n=t.default,o=i.default;n.downloadPreset(e.preset).then((function(t){var i=new o(t);i.open(),t.awaitDownloadReady().then((function(t){$.default.triggerDownload(t),e.$ui.btnDownloadSpinner.stop().fadeOut(200)})),t.awaitDownloadError().then((function(){e.$ui.btnDownloadSpinner.stop().fadeOut(200),i.close(),E.a.open(v.a.p__("files.zipdownload","error_download"),{level:"error"})}))})).catch((function(){E.a.open((new li.a).setContent(v.a.p__("files.zipdownload","error_general")).setLevel(li.a.LEVEL_ERROR))}))}).apply(null,t)})).catch(i.oe)}},{key:"_actionSave",value:function(){var e=this;this.preset.status===p.a.STATUS_RAW?i.e(92).then((function(){var t=[i(371)];(function(t){new(0,t.default)(e.preset).open()}).apply(null,t)})).catch(i.oe):i.e(89).then((function(){var t=[i(442)];(function(t){new(0,t.default)(e.preset).open()}).apply(null,t)})).catch(i.oe)}},{key:"_actionSetFlag",value:function(){var e=this;i.e(101).then((function(){var t=[i(443)];(function(t){new(0,t.default)(e.gallery.domain,e.preset.getFiles()).open()}).apply(null,t)})).catch(i.oe)}},{key:"_actionRemove",value:function(){var e=this;i.e(100).then((function(){var t=[i(444)];(function(t){new(0,t.default)(e.gallery.domain,e.preset.getFiles()).open()}).apply(null,t)})).catch(i.oe)}},{key:"_actionMoveCopy",value:function(){for(var e=this,t=this.preset.getFiles(),n=[],o=0;o<t.length;o++)n.push(t[o].uuid);i.e(5).then((function(){var t=[i(216)];(function(t){new(0,t.default)(e.gallery.domain,e.gallery,n)}).apply(null,t)})).catch(i.oe)}},{key:"_actionExport",value:function(){var e=this;i.e(88).then((function(){var t=[i(445)];(function(t){new(0,t.default)(e.preset.getFiles()).open()}).apply(null,t)})).catch(i.oe)}},{key:"handlePresetFilesAdded",value:function(e){var t=e.get("files");this._updateCounter(),this.addFilePreviews(t,!0),this._updateSpacing()}},{key:"handlePresetFilesRemoved",value:function(e){var t=e.get("files");this._updateCounter(),this.removeFilePreviews(t),this._updateSpacing()}},{key:"handlePresetModified",value:function(){this._highlightSaveButton()}},{key:"handlePresetReverted",value:function(){this._unhighlightSaveButton()}},{key:"handlePresetUpdated",value:function(){this._unhighlightSaveButton()}},{key:"handlePresetSaved",value:function(e){this.$ui.tabTitle.html(e.target.name),this.$ui.tab.fadeIn(200),this._unhighlightSaveButton()}},{key:"handleThumbClicked",value:function(t){t.preventDefault();var i=m()(t.target),n=ii.a.getByUuid(i.attr("data-uuid"));null!==n&&m()(this).trigger(e.REQUEST_FILE_HINT,[n])}},{key:"handleActionTooltipMouseMove",value:function(e){var t=this.$ui.window.innerWidth(),i=this.$ui.buttons.outerWidth(),n=t-i,o=this.$ui.actionTooltip.outerWidth();this.$ui.actionTooltip.css("left",Math.min(e.clientX-n-.5*o,i-o-5))}},{key:"handleWindowResize",value:function(){this.scrollingInitialized&&this._updateSpacing()}}])&&ui(t.prototype,n),o&&ui(t,o),e}(),hi=i(96),di=i(50),fi=i(31),pi=i(80),vi=i(246),gi=i.n(vi);function mi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var yi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.process=t,this.progress=0,this.$dom=null,this.$ui={},this.visualizeProgressFCT=null,this.createDOM(),this.initialize()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){var e={filename:this.process.file.name};this.$dom=m()(gi()(e)),this.$ui.image=this.$dom.find(".image"),this.$ui.progressBar=this.$dom.find(".progress-bar"),this.$ui.progressLabel=this.$dom.find(".progress-label"),this.loadFileThumb()}},{key:"loadFileThumb",value:function(){var e=this;if(window.FileReader&&I()){var t=this.process.file;if(t.type.match("image/(jpeg|png|gif)")&&!(t.size>10485760)){var i=window.navigator.userAgent;if(!new RegExp("^(?=.*windows)(?=.*firefox).*$","i").test(i)){var n=new FileReader;n.onload=function(t){var i=document.createElement("canvas");if(i.getContext&&i.getContext("2d")){var n=document.createElement("img");n.onload=function(){var t=i.getContext("2d"),o=C.a.fitDimensions(n.width,n.height,40,40,!0,!0);i.width=4*o.width,i.height=4*o.height,t.drawImage(n,0,0,i.width,i.height),e.$ui.image.css("background-image","url('".concat(i.toDataURL(),"')")),e.$ui.image.addClass("preview")},n.src=t.target.result}else e.$ui.image.css("background-image","url('".concat(t.target.result,"')")),e.$ui.image.addClass("preview")},n.readAsDataURL(t)}}}}},{key:"initialize",value:function(){var e=this;this.$ui.btnCancel=this.$dom.find(".btn-cancel"),this.process.addEventListener(pi.a.STATUS_CHANGED,this.handleProcessStatusChanged.bind(this)),this.process.addEventListener(pi.a.PROGRESS,this.handleProcessProgress.bind(this)),this.$ui.btnCancel.on("click",(function(t){t.preventDefault(),e.process.cancel()})),this.$dom.hover((function(){e.$ui.btnCancel.fadeIn(100)}),(function(){e.$ui.btnCancel.fadeOut(100)})),this.visualizeProgressFCT=new fi.a(500,this.visualizeProgress,this)}},{key:"visualizeProgress",value:function(){this.$ui.progressBar.css("width","".concat(String(100*this.progress),"%")),this.$ui.progressLabel.html("".concat(Math.round(100*this.progress),"%")),1===this.progress&&this.$ui.progressLabel.html(v.a.p__("upload","complete"))}},{key:"finalize",value:function(){}},{key:"handleProcessStatusChanged",value:function(e){switch(e.get("status")){case pi.a.STATUS_PAUSED:this.$ui.progressLabel.html(v.a.p__("upload","paused"));break;case pi.a.STATUS_STALLING:this.$ui.progressLabel.html(v.a.p__("upload","waiting"));break;case pi.a.STATUS_CANCELLED:this.$ui.progressLabel.html(v.a.p__("upload","canceled"));break;case pi.a.STATUS_COMPLETE:this.finalize()}}},{key:"handleProcessProgress",value:function(e){this.progress=e.get("progress"),this.visualizeProgressFCT.trigger()}}])&&mi(t.prototype,i),n&&mi(t,n),e}(),bi=i(247),_i=i.n(bi),wi=i(248),Ei=i.n(wi);function Si(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ki=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uploader=t,this.processViews=[],this.menuVisible=!0,this.$ui={},this.$dom=null,this._panelHideTimeout=null,this._menuHideTimeout=null,this._statsInterval=null,this._updateInfoFCT=null,this.createDOM(),this.initialize()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){this.$dom=m()(_i()()),this.$ui.menu=this.$dom.find(".menu").first(),this.$ui.btnPause=this.$dom.find(".btn-pause").first(),this.$ui.btnCancel=this.$dom.find(".btn-cancel").first(),this.$ui.infoLoadbar=this.$dom.find(".info .loadbar"),this.$ui.infoLabel=this.$dom.find(".info span")}},{key:"initialize",value:function(){var e=this;this.uploader.addEventListener(di.a.UPLOAD_SESSION_START,this.handleUploadSessionStart.bind(this)),this.uploader.addEventListener(di.a.UPLOAD_SESSION_END,this.handleUploadSessionEnd.bind(this)),this.uploader.addEventListener(di.a.FILE_UPLOAD_START,this.handleUploaderFileStart.bind(this)),this.uploader.addEventListener(di.a.FILE_UPLOAD_END,this.handleUploaderFileEnd.bind(this)),this.uploader.addEventListener(di.a.STATUS_CHANGED,this.handleUploaderStatusChanged.bind(this)),this.uploader.addEventListener(di.a.REQUEST_OVERWRITE_RULE,this.handleUploaderRequestOverwriteRule.bind(this)),this.$ui.btnPause.on("click",this.handleButtonClicked.bind(this)),this.$ui.btnCancel.on("click",this.handleButtonClicked.bind(this));var t=this;this.$dom.hover((function(){null!==t._menuHideTimeout&&(window.clearTimeout(t._menuHideTimeout),t._menuHideTimeout=null),t.showMenu()}),(function(){t.hideMenu()})),this._updateInfoFCT=new fi.a(500,this.updateInfo,this),P((function(t){t?e.$dom.show():e.$dom.hide()}))}},{key:"showPanel",value:function(){if(!E.a.hasNotification("uploadProgressNotification")){var e=this;this.showMenu(!1),this._menuHideTimeout=window.setTimeout((function(){e.hideMenu(),e._menuHideTimeout=null}),3e3),E.a.open((new li.a).setId("uploadProgressNotification").setTitle(v.a.p__("upload","Uploading")).setContent(this.$dom).setIsCloseable(!1).setTimeout(0)),this._statsInterval=window.setInterval(this.handleStatsInterval.bind(this),2e3)}}},{key:"hidePanel",value:function(){E.a.hasNotification("uploadProgressNotification")&&(this._statsInterval&&(window.clearInterval(this._statsInterval),this._statsInterval=null),E.a.close("uploadProgressNotification"))}},{key:"showMenu",value:function(e){this.menuVisible||(!1===e?this.$ui.menu.show():this.$ui.menu.stop().slideDown(100),this.menuVisible=!0)}},{key:"hideMenu",value:function(e){this.menuVisible&&(!1===e?this.$ui.menu.hide():this.$ui.menu.stop().slideUp(100),this.menuVisible=!1)}},{key:"addProcessView",value:function(e){var t=new yi(e);return this.processViews.push(t),this.$dom.find(".entry-container").append(t.$dom),!0}},{key:"removeProcessView",value:function(e){for(var t in this.processViews)if(this.processViews[t].process===e){var i=this.processViews[t];return this.processViews.splice(parseInt(t),1),i.$dom.remove(),!0}return!1}},{key:"updateInfo",value:function(){var e=this.uploader.getNumFilesWaiting()+this.uploader.getNumFilesUploading(),t=!1;switch(this.uploader.status){case hi.a.STATUS_LOADING:var i="";i+=v.a.np__("upload","one file left","%d files left",e,e);var n=this.uploader.getCurrentUploadSpeed(3e4);if(null!==n){var o=this.uploader.getBytesLeft(),a=Math.floor(o/1024/n);if(i+=" | ",a<=60)i+=a<=5?v.a.p__("upload","almost ready"):v.a.np__("upload","aprox. one second","aprox. %d seconds",a,a);else{var r=Math.round(a/60);if(r<=60)i+=v.a.np__("upload","aprox. one minute","aprox. %d minutes",r,r);else{var s=Math.round(r/60);i+=v.a.np__("upload","aprox. one hour","aprox. %d hours",s,s)}}}this.$ui.infoLabel.text(i);break;case hi.a.STATUS_PAUSED:this.$ui.infoLabel.text(v.a.p__("upload","paused"));break;default:t=!0,this.$ui.infoLabel.text(v.a.p__("upload","completed"))}if(t)this.$ui.infoLoadbar.css("width","100%");else if(0!==this.uploader.getNumFilesTotal()){var l=this.uploader.getProgress();this.$ui.infoLoadbar.css("width","".concat(String(100*l),"%"))}}},{key:"showOverwriteDialog",value:function(){var e=this;if(!E.a.hasNotification("dialog-gallery-uploader-overwrite")){var t=m()(Ei()());t.find(".btn--replace").on("click",(function(t){t.preventDefault(),e.uploader.setOverwriteRule(hi.a.OVERWRITE_REPLACE),E.a.close("dialog-gallery-uploader-overwrite")})),t.find(".btn--skip").on("click",(function(t){t.preventDefault(),e.uploader.setOverwriteRule(hi.a.OVERWRITE_SKIP),E.a.close("dialog-gallery-uploader-overwrite")})),E.a.open((new Pt.a).setId("dialog-gallery-uploader-overwrite").setTitle(v.a.p__("upload","Override files?")).setContent(t).setIsCloseable(!1).setMaxWidth(350))}}},{key:"handleUploaderFileStart",value:function(e){var t=e.get("process");this.addProcessView(t),this._updateInfoFCT.trigger()}},{key:"handleUploaderFileEnd",value:function(e){var t=e.get("process");this.removeProcessView(t),this._updateInfoFCT.trigger()}},{key:"handleUploadSessionStart",value:function(){this._panelHideTimeout&&(window.clearTimeout(this._panelHideTimeout),this._panelHideTimeout=null),this.showPanel()}},{key:"handleUploadSessionEnd",value:function(){this._panelHideTimeout=window.setTimeout(this.hidePanel.bind(this),1e3)}},{key:"handleUploaderStatusChanged",value:function(e){e.get("status")===hi.a.STATUS_PAUSED?this.$ui.btnPause.html(v.a.p__("upload","continue")):this.$ui.btnPause.html(v.a.p__("upload","pause")),this._updateInfoFCT.trigger()}},{key:"handleUploaderRequestOverwriteRule",value:function(){this.showOverwriteDialog()}},{key:"handleButtonClicked",value:function(e){switch(e.preventDefault(),e.target){case this.$ui.btnPause[0]:this.uploader.status===hi.a.STATUS_LOADING?this.uploader.pause():this.uploader.status===hi.a.STATUS_PAUSED&&this.uploader.resume();break;case this.$ui.btnCancel[0]:this.uploader.cancel()}}},{key:"handleStatsInterval",value:function(){this._updateInfoFCT.trigger()}}])&&Si(t.prototype,i),n&&Si(t,n),e}(),Ti=i(185),Ci=i(249),xi=i.n(Ci);function Oi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Di=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.visible=!1,this.$dom=null,this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"CLICKED",get:function(){return"evt_clicked"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()(xi()())}},{key:"initialize",value:function(){var t=this;Ti.a.setToolTip(this.$dom,v.a.p__("gallery.presentation.btnenter","tooltip")),this.$dom.on("click",(function(i){i.preventDefault(),m()(t).trigger(e.CLICKED)}))}},{key:"show",value:function(){this.visible||(this.$dom.removeClass("invisible"),this.visible=!0)}},{key:"hide",value:function(){this.visible&&(this.$dom.addClass("invisible"),this.visible=!1)}}])&&Oi(t.prototype,i),n&&Oi(t,n),e}(),Ai=i(48),Ii=i(133),Pi=i(147);function $i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Li=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$i(this,e),this._points=t}var t,i,n;return t=e,(i=[{key:"addPoint",value:function(e,t){this._points.push(new Pi.a(e,t))}},{key:"setPoints",value:function(e){this._points=e}},{key:"getNumPoints",value:function(){return this._points.length}},{key:"getPoints",value:function(){return this._points}},{key:"getFirstPoint",value:function(){return 0!==this._points.length?this._points[0]:null}},{key:"getLastPoint",value:function(){return 0!==this._points.length?this._points[this._points.length-1]:null}},{key:"getMaxOriginDist",value:function(e,t){if(this._points.length<2)return 0;for(var i,n,o=this.getFirstPoint(),a=0,r=1,s=this._points.length;r<s;r++)i=this._points[r],(n=Math.sqrt(Math.pow((i.x-o.x)*e,2)+Math.pow((i.y-o.y)*t,2)))>a&&(a=n);return a}}])&&Ri(t.prototype,i),n&&Ri(t,n),e}();var Mi=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=i};function Fi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ni=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"_distanceBetweenPoints",value:function(e,t,i,n){return Math.pow(e-i,2)+Math.pow(t-n,2)}},{key:"_distanceToSegmentSquared",value:function(t,i,n,o,a,r){var s=e._distanceBetweenPoints(n,o,a,r);if(0===s)return e._distanceBetweenPoints(t,i,n,o);var l=((t-n)*(a-n)+(i-o)*(r-o))/s;return l<0?e._distanceBetweenPoints(t,i,n,o):l>1?e._distanceBetweenPoints(t,i,a,r):e._distanceBetweenPoints(t,i,n+l*(a-n),o+l*(r-o))}},{key:"_perpendicularDistance",value:function(t,i,n,o,a,r){return Math.sqrt(e._distanceToSegmentSquared(t,i,n,o,a,r))}},{key:"_douglasPeucker",value:function(t,i,n,o,a){for(var r=0,s=0,l=i,u=n-1,c=l+1;c<u;c++){var h=t[c].x,d=t[c].y,f=t[l].x,p=t[l].y,v=t[u].x,g=t[u].y,m=e._perpendicularDistance(h,d,f,p,v,g);m>r&&(s=c,r=m)}r>o?(e._douglasPeucker(t,i,s,o,a),e._douglasPeucker(t,s,n,o,a)):u-l>0?(a.push(t[l]),a.push(t[u])):a.push(t[l])}},{key:"execute",value:function(t,i){var n=[];return e._douglasPeucker(t,0,t.length,i,n),n}}],(i=null)&&Fi(t.prototype,i),n&&Fi(t,n),e}();function Bi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ui=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"optimizeForCanvasDimensions",value:function(e,t,i){for(var n=e.getPoints(),o=0,a=n.length;o<a;o++)n[o].x*=t,n[o].y*=i;for(var r=Ni.execute(n,1),s=0,l=r.length;s<l;s++)r[s].x/=t,r[s].y/=i;e.setPoints(r)}}],(i=null)&&Bi(t.prototype,i),n&&Bi(t,n),e}(),ji=i(250),Gi=i.n(ji);i(193);function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vi(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yi(e,t){return(Yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qi=function(e){function t(e,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vi(this,Wi(t).call(this)))._width=Math.ceil(e),n._height=Math.ceil(i),n._pixelRatio=window.devicePixelRatio||1,n._canvasWidth=0,n._canvasHeight=0,n._doodles=[],n._doodleMap={},n._interactiveDoodle=null,n._forwardHistory=[],n._activeStroke=null,n._ctxMain=void 0,n._ctxBuffer=void 0,n._isVisible=!0,n._animationFrameRequest=void 0,n._touchId=null,n._$dom=void 0,n._$ui={},n._initDOM(),n}var i,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yi(e,t)}(t,e),i=t,o=[{key:"DOODLE_UPDATED",get:function(){return"doodle_updated"}}],(n=[{key:"_initDOM",value:function(){this._$dom=m()(Gi()()),this._$ui.canvasMain=this._$dom.find("canvas.main"),this._$ui.canvasBuffer=this._$dom.find("canvas.buffer"),this._ctxMain=this._$ui.canvasMain[0].getContext("2d"),this._ctxBuffer=this._$ui.canvasBuffer[0].getContext("2d"),this.resize(this._width,this._height),this._pixelRatio>1&&(this._$ui.canvasMain.css("transform","scale(".concat(1/this._pixelRatio,")")),this._$ui.canvasBuffer.css("transform","scale(".concat(1/this._pixelRatio,")")))}},{key:"appendTo",value:function(e){this._$dom.appendTo(e)}},{key:"addDoodles",value:function(e){for(var t,i=0,n=e.length;i<n;i++)(t=e[i]).id in this._doodleMap||(this._doodles.push(t),this._doodleMap[t.id]=t);this.redraw()}},{key:"clearDoodles",value:function(){this._doodles=[],this._clearCanvas(this._ctxMain)}},{key:"redraw",value:function(){var e;this._clearCanvas(this._ctxMain);for(var t=0,i=this._doodles.length;t<i;t++)for(var n=0,o=(e=this._doodles[t].getElements()).length;n<o;n++)this._drawElement(e[n],this._ctxMain)}},{key:"_drawElement",value:function(e,t){e instanceof Li&&e.getNumPoints()>1?this._drawStroke(e,t):e instanceof Mi&&this._drawSpot(e,t)}},{key:"_clearCanvas",value:function(e){e.clearRect(0,0,this._canvasWidth,this._canvasHeight)}},{key:"_drawStroke",value:function(e,t){var i=e.getPoints();t.beginPath(),t.lineWidth=3*this._pixelRatio,t.lineCap="round",t.lineJoin="round",t.strokeStyle="#fff",t.filter="drop-shadow(0 0 ".concat(this._pixelRatio,"px rgba(0,0,0,0.5)"),t.moveTo(i[0].x*this._canvasWidth,i[0].y*this._canvasHeight);for(var n=1;n<i.length;n++)t.lineTo(i[n].x*this._canvasWidth,i[n].y*this._canvasHeight);t.stroke()}},{key:"_drawSpot",value:function(e,t){t.beginPath(),t.lineWidth=3*this._pixelRatio,t.strokeStyle="#fff",t.filter="drop-shadow(0 0 ".concat(this._pixelRatio,"px rgba(0,0,0,0.5)"),t.arc(e.x*this._canvasWidth,e.y*this._canvasHeight,20*this._pixelRatio,0,2*Math.PI,!1),t.stroke()}},{key:"setInteractiveDoodle",value:function(e){null!==this._interactiveDoodle&&this.clearInteractiveDoodle(),this._interactiveDoodle=e,this._$dom.addClass("interactive"),this._$dom.on("mousedown",this._handleMouseDown.bind(this)),this._$dom.on("touchstart",this._handleTouchStart.bind(this))}},{key:"clearInteractiveDoodle",value:function(){null!==this._interactiveDoodle&&(this._$dom.removeClass("interactive"),this._$dom.off("mousedown"),this._interactiveDoodle=null,this._clearForwardHistory())}},{key:"isInteractive",value:function(){return null!==this._interactiveDoodle}},{key:"show",value:function(){this._isVisible||(this._$dom.show(),this._isVisible=!0)}},{key:"hide",value:function(){this._isVisible&&(this._$dom.hide(),this._isVisible=!1)}},{key:"resize",value:function(e,t){e=Math.ceil(e),t=Math.ceil(t),this._width=e,this._height=t,this._canvasWidth=e*this._pixelRatio,this._canvasHeight=t*this._pixelRatio,this._$dom.css({width:this._width,height:this._height}),this._$ui.canvasMain[0].width=this._canvasWidth,this._$ui.canvasMain[0].height=this._canvasHeight,this._$ui.canvasBuffer[0].width=this._canvasWidth,this._$ui.canvasBuffer[0].height=this._canvasHeight,this.redraw()}},{key:"historyBack",value:function(){if(this.isInteractive()){var e=this._interactiveDoodle.popElement();null!==e&&(this._forwardHistory.push(e),this.redraw())}}},{key:"historyForward",value:function(){this.isInteractive()&&0!==this._forwardHistory.length&&(this._interactiveDoodle.pushElement(this._forwardHistory.pop()),this.redraw())}},{key:"_clearForwardHistory",value:function(){this._forwardHistory=[]}},{key:"_drawStart",value:function(e,t){this._activeStroke=new Li,this._activeStroke.addPoint(e,t)}},{key:"_drawContinue",value:function(e,t){this._activeStroke.addPoint(e,t),void 0===this._animationFrameRequest&&(this._animationFrameRequest=window.requestAnimationFrame(this._handleAnimationFrame.bind(this)))}},{key:"_drawCancel",value:function(){void 0!==this._animationFrameRequest&&(window.cancelAnimationFrame(this._animationFrameRequest),this._animationFrameRequest=void 0),this._clearCanvas(this._ctxBuffer),this._clearForwardHistory(),this._activeStroke=null}},{key:"_drawEnd",value:function(){if(void 0!==this._animationFrameRequest&&(window.cancelAnimationFrame(this._animationFrameRequest),this._animationFrameRequest=void 0),this._activeStroke.getMaxOriginDist(this._width,this._height)<5){var e=this._activeStroke.getFirstPoint(),i=new Mi(e.x,e.y);this._interactiveDoodle.pushElement(i),this._drawElement(i,this._ctxMain)}else{var n=C.a.fitDimensions(this._width,this._height,1920,1080,!1,!0);Ui.optimizeForCanvasDimensions(this._activeStroke,n.width,n.height),this._interactiveDoodle.pushElement(this._activeStroke),this._drawElement(this._activeStroke,this._ctxMain)}this._clearCanvas(this._ctxBuffer),this._clearForwardHistory(),this._activeStroke=null,this.dispatchEvent(new Re.a(t.DOODLE_UPDATED,{doodle:this._interactiveDoodle}))}},{key:"_handleAnimationFrame",value:function(){this._clearCanvas(this._ctxBuffer),this._drawElement(this._activeStroke,this._ctxBuffer),this._animationFrameRequest=void 0}},{key:"_handleMouseDown",value:function(e){e.preventDefault(),this._drawStart(e.offsetX/this._width,e.offsetY/this._height),this._$dom.on("mousemove",this._handleMouseMove.bind(this)),this._$dom.on("mouseup",this._handleMouseUp.bind(this))}},{key:"_handleMouseMove",value:function(e){this._drawContinue(e.offsetX/this._width,e.offsetY/this._height)}},{key:"_handleMouseUp",value:function(){this._drawEnd(),this._$dom.off("mousemove"),this._$dom.off("mouseup")}},{key:"_handleTouchStart",value:function(e){var t=e.originalEvent.changedTouches;if(void 0!==t&&0!==t.length){e.preventDefault();var i=t[0];this._touchId=i.identifier;var n=Ce.a.toLocalPosition(i.clientX,i.clientY,this._$dom[0]);this._drawStart(n.x/this._width,n.y/this._height),this._$dom.on("touchmove",this._handleTouchMove.bind(this)),this._$dom.on("touchcancel",this._handleTouchCancel.bind(this)),this._$dom.on("touchend",this._handleTouchEnd.bind(this))}}},{key:"_handleTouchMove",value:function(e){e.preventDefault();for(var t=e.originalEvent.changedTouches,i=0,n=t.length;i<n;i++)if(t[i].identifier===this._touchId){var o=t[i],a=Ce.a.toLocalPosition(o.clientX,o.clientY,this._$dom[0]);this._drawContinue(a.x/this._width,a.y/this._height);break}}},{key:"_handleTouchCancel",value:function(e){e.preventDefault();for(var t=e.originalEvent.changedTouches,i=0,n=t.length;i<n;i++)if(t[i].identifier===this._touchId){this._drawCancel(),this._touchId=null,this._$dom.off("touchmove"),this._$dom.off("touchcancel"),this._$dom.off("touchend");break}}},{key:"_handleTouchEnd",value:function(e){e.preventDefault();for(var t=e.originalEvent.changedTouches,i=0,n=t.length;i<n;i++)if(t[i].identifier===this._touchId){this._drawEnd(),this._touchId=null,this._$dom.off("touchmove"),this._$dom.off("touchcancel"),this._$dom.off("touchend");break}}}])&&zi(i.prototype,n),o&&zi(i,o),t}(Yt.a),Xi=i(251),Ji=i.n(Xi);function Ki(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Zi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t,this._elements=[]}var t,i,n;return t=e,(i=[{key:"getId",value:function(){return this._id}},{key:"pushElement",value:function(e){this._elements.push(e)}},{key:"popElement",value:function(){return 0===this._elements.length?null:this._elements.pop()}},{key:"clearElements",value:function(){this._elements=[]}},{key:"getElements",value:function(){return this._elements}}])&&Ki(t.prototype,i),n&&Ki(t,n),e}();function Qi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var en=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"exportDoodle",value:function(t){for(var i={id:t.getId(),elements:[]},n=t.getElements(),o=0,a=n.length;o<a;o++)i.elements.push(e._exportElement(n[o]));return i}},{key:"_exportElement",value:function(t){if(t instanceof Li)return e._exportStroke(t);if(t instanceof Mi)return e._exportSpot(t);throw"invalid element"}},{key:"_exportStroke",value:function(e){for(var t=e.getPoints(),i=[],n=0,o=t.length;n<o;n++)i.push(C.a.numDecimals(t[n].x,4),C.a.numDecimals(t[n].y,4));return{object:"stroke",points:i}}},{key:"_exportSpot",value:function(e){return{object:"spot",x:C.a.numDecimals(e.x,4),y:C.a.numDecimals(e.y,4)}}},{key:"importDoodle",value:function(t){for(var i=new Zi(t.id),n=0,o=t.elements.length;n<o;n++)i.pushElement(e._importElement(t.elements[n]));return i}},{key:"_importElement",value:function(t){if("stroke"===t.object)return e._importStroke(t);if("spot"===t.object)return e._importSpot(t);throw"invalid data element for import"}},{key:"_importStroke",value:function(e){if(!e.object||"stroke"!==e.object)throw"given data is no stroke export";for(var t=[],i=0,n=e.points.length;i<n;i+=2)t.push(new Pi.a(e.points[i],e.points[i+1]));return new Li(t)}},{key:"_importSpot",value:function(e){if(!e.object||"spot"!==e.object)throw"given data is no spot export";return new Mi(e.x,e.y)}}],(i=null)&&Qi(t.prototype,i),n&&Qi(t,n),e}();function tn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var nn=function(){function e(t,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.image)throw"file is not an image";if(!1===t.visible)throw"file is not visible";if(t.status===Z.a.UPLOADING)throw"file is in uploading state";this.file=t,this.pdbox=i,this.width=void 0,this.height=void 0,this.thumb=null,this.thumbScale=0,this.magThumb=null,this.devicePixelRatio=window.devicePixelRatio||1,this.magActive=!1,this.magVisible=!1,this._doodleVisible=!1,this._doodleCanvas=null,this._doodle=null,this.visible=!1,this.state=e.STATE_LOADING,this.thumbsPreloaded={},this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,i,n;return t=e,n=[{key:"STATE_LOADING",get:function(){return"loading"}},{key:"STATE_LOADED",get:function(){return"loaded"}},{key:"EVT_STATE_CHANGED",get:function(){return"evt_state_changed"}},{key:"MAG_ACTIVATED",get:function(){return"evt_mag_activated"}},{key:"MAG_DEACTIVATED",get:function(){return"evt_mag_deactivated"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()(Ji()())}},{key:"initialize",value:function(){this.$dom[0].style.display="none",this.$dom[0].style.opacity="0",this.$ui.progressBar=this.$dom.find(".pd-progress-bar"),this.$ui.imageWrapper=this.$dom.find(".image-wrapper"),this.$ui.image=this.$dom.find("img"),this.$ui.overlay=this.$dom.find(".overlay"),this.$ui.mag=this.$dom.find(".mag"),this.$ui.magLoader=this.$dom.find(".mag-loader"),this.$ui.image[0].style.display="none",this.$ui.image[0].style.opacity="0",this.$ui.image.one("load",this.handleImageLoaded.bind(this))}},{key:"setSize",value:function(e,t){if((this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.setThumbResponsive(e,t),null!==this.thumb)){var i=C.a.fitDimensions(this.thumb.width,this.thumb.height,e,t,!1,!1);this.$ui.imageWrapper.css({width:i.width,height:i.height,left:.5*(e-i.width),top:.5*(t-i.height)}),this.$ui.image.attr({width:i.width,height:i.height}),this._doodleCanvas&&this._doodleCanvas.resize(i.width,i.height),this.thumbScale=i.scale}}},{key:"setThumbResponsive",value:function(e,t){var i=this.file.image.thumbnails.getThumbFitting(e*this.devicePixelRatio,t*this.devicePixelRatio,!1,!0);i!==this.thumb&&(this.thumb=i,this.$ui.image.attr({src:i.url,width:i.width,height:i.height}),i.url in this.thumbsPreloaded?!0===this.thumbsPreloaded[i.url]&&this.toLoadedState(!1):this.thumbsPreloaded[i.url]=!0)}},{key:"preloadThumbForSize",value:function(e,t){var i=this,n=this.file.image.thumbnails.getThumbFitting(e*this.devicePixelRatio,t*this.devicePixelRatio,!1,!0);null!==n&&(n.url in this.thumbsPreloaded||(this.thumbsPreloaded[n.url]=!1,Ot.a.preloadImages([n.url]).then((function(){i.thumbsPreloaded[n.url]=!0}))))}},{key:"show",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(i){e.visible||(e.visible=!0,Ii.a.finalizeTweens(e.$dom[0],null,!0),t?(e.$dom[0].style.display="",y.gsap.to(e.$dom[0],{duration:.3,opacity:1,ease:"power1.out",overwrite:!0,onComplete:i})):(e.$dom[0].style.display="",e.$dom[0].style.opacity="1",i()))}))}},{key:"hide",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(i){e.visible&&(e.visible=!1,Ii.a.finalizeTweens(e.$dom[0],null,!0),t?y.gsap.to(e.$dom[0],{duration:.3,opacity:0,ease:"power1.out",overwrite:!0,onComplete:function(){e.$dom[0].style.display="none",e.deactivateMag(),i()}}):(e.$dom[0].style.opacity="1",e.$dom[0].style.display="none",e.deactivateMag(),i()))}))}},{key:"toLoadedState",value:function(t){var i=this;this.state!==e.STATE_LOADED&&(!0===t?(y.gsap.to(this.$ui.progressBar[0],.3,{opacity:0,onComplete:function(){i.$ui.progressBar[0].style.display="none"}}),this.$ui.image[0].style.display="",y.gsap.to(this.$ui.image[0],.3,{opacity:1,ease:"power1.out"})):(this.$ui.progressBar[0].style.display="none",this.$ui.image[0].style.display="",this.$ui.image[0].style.opacity="1"),this.state=e.STATE_LOADED,m()(this).trigger(e.EVT_STATE_CHANGED))}},{key:"isMagAvailable",value:function(){if(!this.thumb)return!1;var e=this._getMagThumb();return!(null===e||e===this.thumb&&this.thumbScale>.8/this.devicePixelRatio)}},{key:"_getMagThumb",value:function(){return this.file.image?this.file.image.thumbnails.getBiggestThumb():null}},{key:"activateMag",value:function(){if(!this.magActive){this.$ui.imageWrapper.on("mouseenter.pdbox_mag",this._showMag.bind(this)),this.$ui.imageWrapper.on("mouseleave.pdbox_mag",this._hideMag.bind(this));var t=x.a.getClientPosition();if(k.a.domIsChildOf(document.elementFromPoint(t.x,t.y),this.$ui.imageWrapper[0])){var i=this.pdbox.getOffset(),n=this.$ui.imageWrapper.offset();this._showMag(),this._moveMag(t.x-(n.left-i.left),t.y-(n.top-i.top))}this.magActive=!0,m()(this).trigger(e.MAG_ACTIVATED)}}},{key:"deactivateMag",value:function(){this.magActive&&(this.$ui.imageWrapper.off(".pdbox_mag"),this._hideMag(),this.magActive=!1,m()(this).trigger(e.MAG_DEACTIVATED))}},{key:"_moveMag",value:function(e,t){if(this.magThumb){var i=this.$ui.imageWrapper,n=e/i.outerWidth(),o=t/i.outerHeight();this.$ui.mag.css({left:e-150,top:t-150,backgroundPosition:"".concat(-this.magThumb.width*n/this.devicePixelRatio+150,"px ").concat(-this.magThumb.height*o/this.devicePixelRatio+150,"px")})}}},{key:"_showMag",value:function(){var e=this;if(!this.magVisible&&this.thumb&&this.isMagAvailable()){var t=this._getMagThumb();null!==t&&(this.$ui.overlay.css("cursor","none"),t!==this.magThumb&&(this.magThumb=t,!0===this.thumbsPreloaded[t.url]?this._setMagThumb(t):(this.$ui.magLoader.show(),this.thumbsPreloaded[t.url]=!1,Ot.a.preloadImages([t.url]).then((function(){e.thumbsPreloaded[t.url]=!0,e._setMagThumb(t),e.$ui.magLoader.hide()})))),this.$ui.imageWrapper.on("mousemove",this.handleMagMouseMove.bind(this)),this.$ui.mag.fadeIn(100),this.magVisible=!0)}}},{key:"_setMagThumb",value:function(e){this.$ui.mag.css({"background-image":'url("'.concat(e.url,'")'),"background-size":"".concat(e.width/this.devicePixelRatio,"px ").concat(e.height/this.devicePixelRatio,"px")})}},{key:"_hideMag",value:function(){this.magVisible&&(this.$ui.overlay.css("cursor",""),this.$ui.imageWrapper.off("mousemove"),this.$ui.mag.fadeOut(100),this.magVisible=!1)}},{key:"doodleShow",value:function(){var e=this;!this._doodleVisible&&this.thumb&&(this._doodleCanvas||(this._doodleCanvas=new qi(this.thumb.width*this.thumbScale,this.thumb.height*this.thumbScale),this._doodle=this._provideFileDoodle(),this._doodleCanvas.addDoodles([this._doodle]),this._doodleCanvas.addEventListener(qi.DOODLE_UPDATED,(function(){e._saveDoodleToLocalStorage()})),this._doodleCanvas.appendTo(this.$ui.imageWrapper[0])),this._doodleCanvas.show(),this._doodleVisible=!0)}},{key:"doodleHide",value:function(){this._doodleVisible&&(this._doodleCanvas.hide(),this._doodleVisible=!1)}},{key:"doodleEnableInteractivity",value:function(){this._doodleCanvas&&this._doodleCanvas.setInteractiveDoodle(this._doodle)}},{key:"doodleDisableInteractivity",value:function(){this._doodleCanvas&&this._doodleCanvas.clearInteractiveDoodle()}},{key:"doodleClear",value:function(){this._doodle&&this._doodleCanvas.isInteractive()&&(this._doodle.clearElements(),this._doodleCanvas.redraw(),this._saveDoodleToLocalStorage())}},{key:"doodleHistoryBack",value:function(){this._doodleCanvas&&this._doodleCanvas.historyBack()}},{key:"doodleHistoryForward",value:function(){this._doodleCanvas&&this._doodleCanvas.historyForward()}},{key:"_provideFileDoodle",value:function(){var e=this._getDoodleFromLocalStorage();return null===e?new Zi(this.file.uuid):e}},{key:"_saveDoodleToLocalStorage",value:function(){window.localStorage&&window.JSON&&this._doodle&&localStorage.setItem("doodle_".concat(this.file.uuid),JSON.stringify(en.exportDoodle(this._doodle)))}},{key:"_getDoodleFromLocalStorage",value:function(){if(!window.localStorage||!window.JSON)return null;var e=localStorage.getItem("doodle_".concat(this.file.uuid));return null===e?null:en.importDoodle(JSON.parse(e))}},{key:"handleImageLoaded",value:function(){this.toLoadedState(this.visible)}},{key:"handleMagMouseMove",value:function(e){this._moveMag(e.offsetX,e.offsetY)}}])&&tn(t.prototype,i),n&&tn(t,n),e}(),on=i(252),an=i.n(on);function rn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var sn=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.title=i,this.content=null,this.collapsable=!0===o,this.collapsed=!1,this.maxHeight=null,this.maxContentHeight=0,this.scrollingInitialized=!1,this.$dom=!1,this.$ui={},this.createDOM(),this.initialize(),n&&this.setContent(n)}var t,i,n;return t=e,n=[{key:"ANIMATING",get:function(){return"animating"}}],(i=[{key:"createDOM",value:function(){this.$dom=m()(an()({id:this.id,title:this.title,optCollapsable:this.collapsable})),this.$ui.title=this.$dom.find(".title"),this.$ui.content=this.$dom.find(".content"),this.$ui.contentContainer=this.$ui.content}},{key:"initialize",value:function(){!0===this.collapsable&&this.$ui.title.on("click",this.handleTitleClicked.bind(this))}},{key:"setMaxHeight",value:function(e){this.maxHeight=e,this.maxContentHeight=Math.max(0,e-this.$ui.title.outerHeight()-5),this.$ui.content.css({"max-height":this.maxContentHeight}),this.scrollingInitialized&&this.updateScrolling()}},{key:"initScrolling",value:function(){!0!==this.scrollingInitialized&&(this.$ui.content.mCustomScrollbar({scrollbarPosition:"inside",scrollInertia:0,theme:"dark",advanced:{updateOnContentResize:!1}}),this.$ui.content.addClass("scrollable"),this.$ui.contentContainer=this.$dom.find(".mCSB_container"),this.scrollingInitialized=!0)}},{key:"updateScrolling",value:function(){this.scrollingInitialized&&this.$ui.content.mCustomScrollbar("update")}},{key:"setContent",value:function(e){if(!e)return this.content=!1,void this.$ui.contentContainer.empty();this.content=e,this.$ui.contentContainer.html(e),this.updateScrolling()}},{key:"expand",value:function(t){var i=this;this.collapsed&&(!1===t?(this.$ui.content.show(),this.updateScrolling(),m()(this).trigger(e.ANIMATING)):this.$ui.content.slideDown({duration:200,progress:function(){return m()(i).trigger(e.ANIMATING)},complete:function(){return i.updateScrolling()}}),this.$dom.removeClass("collapsed"),this.collapsed=!1)}},{key:"collapse",value:function(t){var i=this;this.collapsed||(!1===t?(this.$ui.content.hide(),m()(this).trigger(e.ANIMATING)):this.$ui.content.slideUp({duration:200,progress:function(){return m()(i).trigger(e.ANIMATING)}}),this.$dom.addClass("collapsed"),this.collapsed=!0)}},{key:"handleTitleClicked",value:function(e){e.preventDefault(),this.collapsed?this.expand():this.collapse()}}])&&rn(t.prototype,i),n&&rn(t,n),e}(),ln=i(253),un=i.n(ln);function cn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var hn,dn=function(){function e(t,i,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gallery=t,this.comment=i,this.optAdmin=Boolean(n),this.optFollowUp=Boolean(o),this.$dom=!1,this.createDOM(),this.initialize(),this.registerEventListeners()}var t,i,n;return t=e,(i=[{key:"createDOM",value:function(){var e={comment:this.comment,optAdmin:this.optAdmin,optFollowUp:this.optFollowUp,right:this.comment.authorUuid===this.gallery.photographer.uuid};this.$dom=m()(un()(e))}},{key:"initialize",value:function(){var e=this;this.optAdmin&&this.$dom.find(".btn-delete").on("click",(function(t){t.preventDefault(),e.comment.remove((function(e){e?E.a.open((new li.a).setContent("Das Kommentar wurde erfolgreich gelÃ¶scht.").setLevel(li.a.LEVEL_SUCCESS)):E.a.open((new li.a).setContent("Beim LÃ¶schen des Kommentars ist leider ein Fehler aufgetreten.").setLevel(li.a.LEVEL_ERROR))}))}))}},{key:"registerEventListeners",value:function(){var e=this;m()(this.comment).on(re.a.REMOVED,(function(){e.$dom.slideUp(200,(function(){return e.$dom.remove()}))}))}}])&&cn(t.prototype,i),n&&cn(t,n),e}(),fn=i(109),pn=i(186),vn=i(254),gn=i.n(vn),mn=i(203),yn=i.n(mn),bn=i(255),_n=i.n(bn),wn=i(256),En=i.n(wn);i(45);function Sn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var kn=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==hn)throw"PDBox is a singleton and therefor can only be accessed through PDBox.getInstance().";this.width=0,this.height=0,this.domain=null,this.gallery=null,this.files=null,this.cursor=0,this.currentFile=null,this.viewsImagePanels={},this.viewSidebarIPTC=!1,this.viewSidebarEXIF=!1,this.viewSidebarComments=!1,this.imagePanelContainerSize=null,this.recentImagePanel=null,this.currentImagePanel=null,this.opened=!1,this.metaUIHidingEnabled=!1,this.metaUIVisible=!0,this.metaUITimeoutLimit=500,this.metaUITimeout=null,this.permalinkFCT=null,this.sidebarEnabled=!1,this.sidebarVisible=!1,this.sidebarWidth=280,this.fullscreenEnabled=!1,this.selectionEnabled=!1,this.magEnabled=!1,this.magDisableHint=null,this.doodleEnabled=!1,this.doodleInteractive=!1,this.defaults={},this.mouseMoveTime=0,this.lastCommentId=null,this.$dom=null,this.$ui={}}var t,i,n;return t=e,n=[{key:"getInstance",value:function(){return void 0===hn&&(hn=new e),hn}},{key:"_unsetCurrentFileListeners",value:function(e){e.image&&e.image.removeEventListenersByNamespace("pdbox")}}],(i=[{key:"initialize",value:function(e,t,i,n,o){this.domain=i,this.gallery=n,this.selectionEnabled=!0===o,this.defaults.imgPanelContainerPos={top:44,bottom:44,left:10,right:10},this._build(),this.resize(e,t),N.a.isAllowed(B.a.GALLERY_IMAGE_MARKINGS)&&this.enableDoodling()}},{key:"_build",value:function(){var e=this;this.$dom=m()(gn()({optFileInfo:this.gallery.settings.get(j.a.ENABLE_FILE_INFORMATION),optEXIF:this.gallery.settings.get(j.a.ENABLE_EXIF),optIPTC:this.gallery.settings.get(j.a.ENABLE_IPTC),optComments:this.gallery.settings.get(j.a.ENABLE_COMMENTS),optDownload:this.gallery.settings.get(j.a.ENABLE_DOWNLOAD),optSelection:this.selectionEnabled,optSetFlag:this.gallery.settings.get(j.a.ENABLE_FLAGS),optRemove:"user"===u.a.get("visitor").type&&u.a.get("visitor").verifiedForGallery})),this.$dom[0].style.display="none",this.$dom[0].style.opacity="0",this.$ui.document=m()(document),this.$ui.body=m()("body"),this.$ui.sidebar=this.$dom.find(".sidebar"),this.$ui.sidebarTop=this.$dom.find(".sidebar .top"),this.$ui.sidebarBottom=this.$dom.find(".sidebar .bottom"),this.$ui.sidebarInfo=this.$ui.sidebar.find(".info"),this.$ui.content=this.$dom.find("> .content"),this.$ui.uiBarTop=this.$ui.content.find("> .ui-bar-top"),this.$ui.uiBarBottom=this.$ui.content.find("> .ui-bar-bottom"),this.$ui.imagePanelContainer=this.$ui.content.find("> .image-panel-container"),this.$ui.navigator=this.$ui.content.find(".navigator"),this.$ui.actionsPanel=this.$ui.content.find(".actions-panel"),this.$ui.btnToggleFullscreen=this.$dom.find(".btn-toggle-fullscreen"),this.$ui.btnMag=this.$ui.actionsPanel.find("button.btn--mag"),this.$ui.imagePanelContainer.css(this.defaults.imgPanelContainerPos),this.$dom.on("click",(function(t){(e.currentImagePanel&&t.target===e.currentImagePanel.$dom[0]||t.target===e.$ui.content[0]||t.target===e)&&e.close(),e.$ui.actionsPanel.find(".confirm").fadeOut(200)})),0!==this.$ui.sidebar.length&&(this.sidebarEnabled=!0,this.$ui.sidebar.css("width","".concat(this.sidebarWidth,"px")),this.showSidebar(!1),this.gallery.settings.get(j.a.ENABLE_IPTC)&&(this.viewSidebarIPTC=new sn("sidebar-iptc",v.a.p__("pdbox.js","sidebar_IPTC_title"),void 0,!0),this.viewSidebarIPTC.collapse(!1),this.$ui.sidebarTop.append(this.viewSidebarIPTC.$dom)),this.gallery.settings.get(j.a.ENABLE_EXIF)&&(this.viewSidebarEXIF=new sn("sidebar-exif",v.a.p__("pdbox.js","sidebar_EXIF_title"),void 0,!0),this.viewSidebarEXIF.collapse(!1),this.$ui.sidebarTop.append(this.viewSidebarEXIF.$dom)),this.gallery.settings.get(j.a.ENABLE_COMMENTS)&&(this.viewSidebarComments=new sn("sidebar-comments",v.a.p__("pdbox.js","sidebar_comments_title"),_n()(),!1),this.$ui.sidebarBottom.append(this.viewSidebarComments.$dom),this.$ui.sidebarBottom.append(En()()),this.$ui.comments=this.$ui.sidebarBottom.find("#pdbox-comments"),this.$ui.commentsMessageNoComments=this.$ui.comments.find(".message-no-comments"),this.$ui.commentsEntriesContainer=this.$ui.comments.find(".entries-container"),this.$ui.commentsForm=this.$ui.sidebarBottom.find("#pdbox-comments-form"),this.$ui.commentsFormContentInit=this.$ui.commentsForm.find(".content-init"),this.$ui.commentsFormBtnWrite=this.$ui.commentsFormContentInit.find(".btn--write-comment"),this.$ui.commentsFormContentEdit=this.$ui.commentsForm.find(".content-edit"),this.$ui.commentsFormInputName=this.$ui.commentsFormContentEdit.find(".inp--name"),this.$ui.commentsFormInputMessage=this.$ui.commentsFormContentEdit.find(".inp--message"),this.$ui.commentsFormBtnSend=this.$ui.commentsFormContentEdit.find(".btn--send"),this.$ui.commentsFormServerMessage=this.$ui.commentsFormContentEdit.find(".server-message"),this.$ui.commentsFormServerMessage.hide(),u.a.get("visitor").name&&this.$ui.commentsFormInputName.val(u.a.get("visitor").name),this.$ui.commentsFormBtnWrite.on("click",(function(){e.$ui.commentsFormContentInit.slideUp(300),e.$ui.commentsFormContentEdit.slideDown({duration:300,progress:function(){return e.manageSidebarVSpace()}}),""===e.$ui.commentsFormInputName.val()?e.$ui.commentsFormInputName.focus():e.$ui.commentsFormInputMessage.focus()})),this.$ui.commentsFormBtnSend.on("click",(function(t){t.preventDefault(),e.sendComment()})),this.$ui.commentsFormInputMessage.on("keydown",(function(t){13===t.which&&(t.ctrlKey||t.metaKey)&&e.sendComment()})))),this.$ui.content.find(".btn-close").on("click",(function(t){t.preventDefault(),e.close()})),this.$ui.navigator.find(".nav-btn.prev").on("click",(function(t){t.preventDefault(),e.showPrev(!t.shiftKey&&!t.altKey)})),this.$ui.navigator.find(".nav-btn.next").on("click",(function(t){t.preventDefault(),e.showNext(!t.shiftKey&&!t.altKey)})),this.$ui.btnToggleFullscreen.on("click",(function(t){t.preventDefault(),e.toggleFullscreen(!0)})),this.gallery.settings.get(j.a.ENABLE_DOWNLOAD)&&this.$ui.actionsPanel.find(".btn-download").on("click",(function(t){t.preventDefault(),e.initDownload()})),this.selectionEnabled&&this.$ui.actionsPanel.find(".btn-select").on("click",(function(t){t.preventDefault(),e.toggleSelection()})),this.gallery.settings.get(j.a.ENABLE_FLAGS)&&this.$ui.actionsPanel.find(".btn-flag").on("click",(function(t){t.preventDefault();var i=m()(t.target),n=i.data("type");if(!i.hasClass("selected")){var o=e.currentFile.flag;e.updateFlagMenu(n),te.a.setFileFlag(e.currentFile,e.domain.uuid,n,void 0,(function(){e.updateFlagMenu(o)}))}})),"user"===u.a.get("visitor").type&&u.a.get("visitor").verifiedForGallery&&(this.$ui.actionsPanel.find(".btn-remove").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.toggleRemoveConfirm()})),this.$ui.actionsPanel.find(".btn-remove-confirm").on("click",(function(t){t.preventDefault(),e.removeCurrent(),e.$ui.actionsPanel.find(".confirm").fadeOut(200)})),this.$ui.actionsPanel.find(".btn-remove-abort").on("click",(function(t){t.preventDefault(),e.$ui.actionsPanel.find(".confirm").fadeOut(200)})),this.$ui.actionsPanel.find(".confirm").on("click",(function(e){return e.stopPropagation()}))),this.$ui.btnMag.on("click",(function(t){t.preventDefault(),e.toggleMagnification()}))}},{key:"open",value:function(e,t){var i;this.files=[];for(var n=0,o=e.length;n<o;n++)(i=e[n]).image&&i.visible&&i.status===Z.a.READY&&this.files.push(i);this._openBox();var a=this.cursor;if("string"==typeof t)for(var r=0,s=this.files.length;r<s;r++)if(this.files[r].uuid===t){a=r;break}this.showImage(a,!0)}},{key:"_openBox",value:function(){this.opened||(this.$ui.body.append(this.$dom),this.$ui.body.addClass("noscroll"),this.magEnabled=!1,this.$dom[0].style.display="",y.default.to(this.$dom[0],{opacity:1,duration:.3,ease:"power1.out",onComplete:this.handleBoxOpened.bind(this)}),this.updateImagePanelContainerSize(),!1!==this.viewSidebarIPTC&&this.viewSidebarIPTC.initScrolling(),!1!==this.viewSidebarEXIF&&this.viewSidebarEXIF.initScrolling(),!1!==this.viewSidebarComments&&this.viewSidebarComments.initScrolling(),this.manageSidebarVSpace(),this.opened=!0)}},{key:"close",value:function(){this._closeBox()}},{key:"_closeBox",value:function(){var e=this;this.opened&&(this.$ui.document.off(".pdbox"),this.permalinkFCT&&this.permalinkFCT.cancel(),window.history&&window.history.replaceState&&window.history.replaceState({},document.title,window.location.pathname),Ai.a.broadcastPath(this.gallery.urlRelDom),this.disableFullscreen(!0),this.magDisableHint&&(fn.a.removeHint(this.magDisableHint.id),this.magDisableHint=null),y.default.to(this.$dom[0],{opacity:0,duration:.2,ease:"power1.out",onComplete:function(){e.$dom[0].style.display="none",e.handleBoxClosed()}}),this.$ui.body.removeClass("noscroll"),this.opened=!1)}},{key:"getOffset",value:function(){return this.$dom.offset()}},{key:"reset",value:function(){this.currentImagePanel&&this.currentImagePanel.$dom.detach(),this.currentImagePanel=null,null!==this.recentImagePanel&&(this.recentImagePanel.$dom.detach(),this.recentImagePanel=null),this.$dom.detach()}},{key:"enableMetaUIHiding",value:function(){this.metaUIHidingEnabled||(this.mouseMoveTime=0,this.hideMetaUI(),this.$ui.document.on("mousemove.pdbox",this.handleMouseMoveMetaUI.bind(this)),this.metaUIHidingEnabled=!0)}},{key:"disableMetaUIHiding",value:function(){this.metaUIHidingEnabled&&(this.$ui.document.off("mousemove.pdbox"),this.stopMetaUITimeout(),this.showMetaUI(),this.metaUIHidingEnabled=!1)}},{key:"showMetaUI",value:function(){this.metaUIVisible||(this.$dom.find(".meta-ui").fadeIn(200),this.metaUIVisible=!0)}},{key:"hideMetaUI",value:function(){this.metaUIVisible&&(this.$dom.find(".meta-ui").fadeOut(200),this.metaUIVisible=!1)}},{key:"startMetaUITimeout",value:function(e){this.stopMetaUITimeout(),this.metaUITimeout=window.setTimeout(this.handleMetaUITimeout.bind(this),e)}},{key:"stopMetaUITimeout",value:function(){null!==this.metaUITimeout&&(window.clearTimeout(this.metaUITimeout),this.metaUITimeout=null)}},{key:"handleMetaUITimeout",value:function(){if(this.metaUITimeout=null,this.metaUIVisible){var e=Date.now()-this.mouseMoveTime;if(e<this.metaUITimeoutLimit)this.startMetaUITimeout(this.metaUITimeoutLimit-e);else{var t=x.a.getClientPosition();k.a.domIsChildOfClass(document.elementFromPoint(t.x,t.y),"meta-ui")?this.startMetaUITimeout(this.metaUITimeoutLimit):this.hideMetaUI()}}}},{key:"showPrev",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cursor<=0||this.showImage(this.cursor-1,e)}},{key:"showNext",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cursor>=this.files.length-1||this.showImage(this.cursor+1,e)}},{key:"showImage",value:function(t,i){t>=this.files.length||t<0||(null!==this.currentFile&&e._unsetCurrentFileListeners(this.currentFile),this.cursor=t,this.currentFile=this.files[t],null!==this.recentImagePanel&&this.recentImagePanel.$dom.detach(),this.recentImagePanel=this.currentImagePanel,this.currentImagePanel=this.provideImagePanel(this.files[t]),this.alternate(i),this.updateUI(),this.updateMeta(),this.updateComments(),this.setCurrentFileListeners(this.currentFile))}},{key:"provideImagePanel",value:function(e){if(e.uuid in this.viewsImagePanels)return this.viewsImagePanels[e.uuid];var t=new nn(e,this);return this.viewsImagePanels[e.uuid]=t,t.$dom.find(".overlay").on("click",this.handleImageOverlayClick.bind(this)),t}},{key:"updateUI",value:function(){this.files.length>1?this.$ui.navigator.is(":visible")||this.$ui.navigator.fadeIn():this.$ui.navigator.is(":visible")&&this.$ui.navigator.fadeOut();var e=Math.round((this.cursor+1)/this.files.length*100);this.$ui.navigator.find(".indicator .inner").css("width","".concat(e,"%"));var t=this.$ui.navigator.find(".nav-btn.prev"),i=this.$ui.navigator.find(".nav-btn.next");this.cursor<=0?t.addClass("disabled"):t.removeClass("disabled"),this.cursor>=this.files.length-1?i.addClass("disabled"):i.removeClass("disabled"),this.updateFlagMenu(this.currentFile.flag)}},{key:"updateImagePanelContainerSize",value:function(){null===this.imagePanelContainerSize&&(this.imagePanelContainerSize=new pn.a),this.imagePanelContainerSize.width=this.$ui.imagePanelContainer.width(),this.imagePanelContainerSize.height=this.$ui.imagePanelContainer.height()}},{key:"alternate",value:function(e){var t=this;if(this.currentImagePanel){if(null!==this.recentImagePanel){var i=this.recentImagePanel;m()(i).off(".pdbox"),i.hide(e).then((function(){i!==t.currentImagePanel&&(i.$dom.detach(),i=null)}))}if(this.$ui.imagePanelContainer.prepend(this.currentImagePanel.$dom),this.currentImagePanel.setSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height),this.currentImagePanel.show(e),this.gallery.settings.get(j.a.ENABLE_FILE_INFORMATION)){this.$ui.sidebarInfo.find(".title").html(this.currentFile.filename);var n=this.currentFile.image,o="".concat(n.width," x ").concat(n.height," px");this.$ui.sidebarInfo.find(".copy").html("".concat(o,"<br/>").concat(C.a.formatFileSize(this.currentFile.filesize)))}this.setPermalink(),this.checkSelectionState(),this.currentImagePanel&&(this.magEnabled?this.currentImagePanel.activateMag():this.currentImagePanel.deactivateMag()),this.currentImagePanel&&(this.doodleEnabled?this.currentImagePanel.doodleShow():this.currentImagePanel.doodleHide(),this.doodleInteractive?this.currentImagePanel.doodleEnableInteractivity():this.currentImagePanel.doodleDisableInteractivity()),this.checkMagActiveState(),m()(this.currentImagePanel).on([nn.MAG_ACTIVATED+".pdbox",nn.MAG_DEACTIVATED+".pdbox"].join(" "),this.handleImagePanelMagToggled.bind(this)),this.currentImagePanel.state===nn.STATE_LOADED?this.manageCaching():m()(this.currentImagePanel).one(nn.EVT_STATE_CHANGED+".pdbox",(function(){return t.manageCaching()}))}}},{key:"setPermalink",value:function(){var e=this;null===this.permalinkFCT&&(this.permalinkFCT=new fi.a(1e3,(function(){if(window.history&&window.history.replaceState){var t="".concat(window.location.pathname,"?img=").concat(e.currentFile.uuid);window.history.replaceState({},document.title,t),Ai.a.broadcastPath("".concat(e.gallery.urlRelDom,"?img=").concat(e.currentFile.uuid))}}),this)),this.permalinkFCT.trigger()}},{key:"manageCaching",value:function(){var e,t,i=this.files.length;for(e=this.cursor,t=0;--e>=0&&(this.provideImagePanel(this.files[e]).preloadThumbForSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height),!(++t>=2)););for(e=this.cursor,t=0;++e<i&&(this.provideImagePanel(this.files[e]).preloadThumbForSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height),!(++t>=2)););}},{key:"updateMeta",value:function(){var e=this;if(this.gallery.settings.get(j.a.ENABLE_EXIF)||this.gallery.settings.get(j.a.ENABLE_IPTC)){var t=this.currentFile.image,i=this.$ui.sidebar.find(".metaData.exif > .content"),n=this.$ui.sidebar.find(".metaData.iptc > .content");i.empty(),n.empty();var o=function(){if(e.gallery.settings.get(j.a.ENABLE_EXIF))if(t.metaData.exif){var i={};for(var n in t.metaData.exif)i[t.metaData.exif[n].label]=t.metaData.exif[n].value;e.viewSidebarEXIF.$dom.show(),e.viewSidebarEXIF.setContent(yn()({id:"meta-exif",entriesTable:i}))}else e.viewSidebarEXIF.$dom.hide();if(e.gallery.settings.get(j.a.ENABLE_IPTC))if(t.metaData.iptc){var o,a=k.a.cloneObject(t.metaData.iptc),r=!1,s=!1,l=["iptc.application2.headline","iptc.application2.caption","iptc.application2.keywords"];for(var u in l)a[o=l[u]]&&(!1===r&&(r={}),r[a[o].label]=a[o].value,delete a[o]);for(var c in a)!1===s&&(s={}),s[a[c].label]=a[c].value;e.viewSidebarIPTC.$dom.show(),e.viewSidebarIPTC.setContent(yn()({id:"meta-iptc",entriesSingle:r,entriesTable:s}))}else e.viewSidebarIPTC.$dom.hide();e.manageSidebarVSpace()};void 0===t.metaData?te.a.loadImageMetaData(this.currentFile,o):o()}}},{key:"updateFlagMenu",value:function(e){var t=this.$ui.actionsPanel.find(".flag-menu");0!==t.length&&(t.attr("data-active-flag",e),t.find(".btn-flag").removeClass("selected"),t.find('[data-type="'.concat(e,'"]')).addClass("selected"))}},{key:"updateComments",value:function(){var e=this;if(this.gallery.settings.get(j.a.ENABLE_COMMENTS)){var t=this.currentFile.image,i=function(){if(e.$ui.commentsEntriesContainer.empty(),e.lastCommentId=null,t.comments&&0!==t.comments.length){var i;for(var n in t.comments)i=e.provideCommentView(t.comments[n]),e.$ui.commentsEntriesContainer.append(i.$dom);e.$ui.commentsMessageNoComments.hide()}else e.$ui.commentsMessageNoComments.html(v.a.p__("pdbox.js","message_empty")).show();e.viewSidebarComments.updateScrolling()};void 0===t.comments?te.a.loadFileComments(this.currentFile,i):i()}}},{key:"provideCommentView",value:function(e){var t=e.authorUuid||e.authorName,i=new dn(this.gallery,e,"user"===u.a.get("visitor").type&&u.a.get("visitor").verifiedForGallery,this.lastCommentId===t);return this.lastCommentId=t,i}},{key:"setCurrentFileListeners",value:function(e){e.image&&e.image.addEventListener(ee.a.COMMENT_ADDED,this.handleCommentAdded.bind(this),"pdbox")}},{key:"manageSidebarVSpace",value:function(){var e=this.$ui.sidebar.innerHeight()-(0===this.$ui.sidebarInfo.length?0:this.$ui.sidebarInfo.outerHeight())-("commentsForm"in this.$ui?this.$ui.commentsForm.outerHeight():0),t=[];if(!1!==this.viewSidebarIPTC&&this.viewSidebarIPTC.$dom.is(":visible")&&t.push(this.viewSidebarIPTC),!1!==this.viewSidebarEXIF&&this.viewSidebarEXIF.$dom.is(":visible")&&t.push(this.viewSidebarEXIF),!1!==this.viewSidebarComments&&this.viewSidebarComments.$dom.is(":visible")&&t.push(this.viewSidebarComments),0!==t.length){var i=e/t.length;for(var n in t)t[n].setMaxHeight(i)}}},{key:"toggleFullscreen",value:function(e){this.fullscreenEnabled?this.disableFullscreen(e):this.enableFullscreen(e)}},{key:"enableFullscreen",value:function(e){var t=this;this.fullscreenEnabled||(this.hideSidebar(e),e?y.default.to(this.$ui.imagePanelContainer,{top:0,bottom:0,left:0,right:0,duration:.3,ease:"power2.inout",onUpdate:function(){t.updateImagePanelContainerSize(),t.currentImagePanel&&t.currentImagePanel.setSize(t.imagePanelContainerSize.width,t.imagePanelContainerSize.height)}}):(this.$ui.imagePanelContainer.css({top:0,bottom:0,left:0,right:0}),this.updateImagePanelContainerSize(),this.currentImagePanel&&this.currentImagePanel.setSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height)),this.enableMetaUIHiding(),this.$ui.btnToggleFullscreen.addClass("active"),this.enableBrowserFullscreen(),this.fullscreenEnabled=!0)}},{key:"enableBrowserFullscreen",value:function(){var e=this;document.fullscreenEnabled&&(this.$dom[0].requestFullscreen(),this.$ui.document.on("fullscreenchange.pdbox",(function(){null===document.fullscreenElement&&e.disableFullscreen(!0)})))}},{key:"disableFullscreen",value:function(e){var t=this;this.fullscreenEnabled&&(this.showSidebar(e),e?y.default.to(this.$ui.imagePanelContainer,{top:this.defaults.imgPanelContainerPos.top,bottom:this.defaults.imgPanelContainerPos.bottom,left:this.defaults.imgPanelContainerPos.left,right:this.defaults.imgPanelContainerPos.right,duration:.3,ease:"power2.inout",onUpdate:function(){t.updateImagePanelContainerSize(),t.currentImagePanel&&t.currentImagePanel.setSize(t.imagePanelContainerSize.width,t.imagePanelContainerSize.height)}}):(this.$ui.imagePanelContainer.css(this.defaults.imgPanelContainerPos),this.updateImagePanelContainerSize(),this.currentImagePanel&&this.currentImagePanel.setSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height)),this.disableMetaUIHiding(),this.$ui.btnToggleFullscreen.removeClass("active"),this.disableBrowserFullscreen(),this.fullscreenEnabled=!1)}},{key:"disableBrowserFullscreen",value:function(){document.fullscreenEnabled&&document.fullscreenElement===this.$dom[0]&&(document.exitFullscreen(),this.$ui.document.off("fullscreenchange.pdbox"))}},{key:"showSidebar",value:function(e){var t=this;this.sidebarEnabled&&!this.sidebarVisible&&(e?(y.default.to(this.$ui.sidebar,{left:0,duration:.3,ease:"power2.inout"}),y.default.to(this.$ui.content,{marginLeft:this.sidebarWidth,duration:.3,ease:"power2.inout",onUpdate:function(){t.updateImagePanelContainerSize(),t.currentImagePanel&&t.currentImagePanel.setSize(t.imagePanelContainerSize.width,t.imagePanelContainerSize.height)}})):(this.$ui.sidebar.css("left","0"),this.$ui.content.css("margin-left","".concat(this.sidebarWidth,"px")),this.updateImagePanelContainerSize(),this.currentImagePanel&&this.currentImagePanel.setSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height)),this.sidebarVisible=!0)}},{key:"hideSidebar",value:function(e){var t=this;this.sidebarEnabled&&this.sidebarVisible&&(e?(y.default.to(this.$ui.sidebar,{left:-this.sidebarWidth,duration:.3,ease:"power2.inout"}),y.default.to(this.$ui.content,{marginLeft:0,duration:.3,ease:"power2.inout",onUpdate:function(){t.updateImagePanelContainerSize(),t.currentImagePanel&&t.currentImagePanel.setSize(t.imagePanelContainerSize.width,t.imagePanelContainerSize.height)}})):(this.$ui.sidebar.css("left","-".concat(this.sidebarWidth,"px")),this.$ui.content.css("margin-left","0"),this.updateImagePanelContainerSize(),this.currentImagePanel&&this.currentImagePanel.setSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height)),this.sidebarVisible=!1)}},{key:"initDownload",value:function(){if(this.gallery.settings.get(j.a.ENABLE_DOWNLOAD)){var e=te.a.generateDownloadURLSync(this.currentFile.uuid,this.gallery.urlRel);$.default.triggerDownload(e)}}},{key:"toggleSelection",value:function(){this.selectionEnabled&&(this.currentFile.toggleSelection("userinput"),this.checkSelectionState())}},{key:"toggleRemoveConfirm",value:function(e){var t=this.$ui.actionsPanel.find(".confirm");!0===e?t.fadeIn(200):!1===e?t.fadeOut(200):t.is(":visible")?t.fadeOut(200):t.fadeIn(200)}},{key:"removeCurrent",value:function(){te.a.removeFile(this.currentFile),this.files.splice(this.cursor,1),0===this.files.length?this._closeBox():this.cursor>this.files.length-1?this.showImage(this.files.length-1,!0):this.showImage(this.cursor,!0)}},{key:"enableMagnification",value:function(){this.magEnabled||(this.currentImagePanel&&this.currentImagePanel.activateMag(),this.magEnabled=!0)}},{key:"disableMagnification",value:function(){this.magEnabled&&(this.currentImagePanel&&this.currentImagePanel.deactivateMag(),this.magEnabled=!1)}},{key:"toggleMagnification",value:function(){this.magEnabled?this.disableMagnification():this.enableMagnification()}},{key:"checkMagActiveState",value:function(){this.currentImagePanel&&this.currentImagePanel.isMagAvailable()?(this.$ui.btnMag.removeClass("inavailable"),this.magDisableHint&&(fn.a.removeHint(this.magDisableHint.id),this.magDisableHint=null)):(this.$ui.btnMag.addClass("inavailable"),this.magDisableHint||0===this.$ui.btnMag.length||(this.magDisableHint=fn.a.createHint(this.$ui.btnMag,null,v.a.p__("pdbox.js","missing_zoom_detail"),!1))),this.currentImagePanel&&this.currentImagePanel.magActive?this.$ui.btnMag.addClass("active"):this.$ui.btnMag.removeClass("active")}},{key:"enableDoodling",value:function(){if(!N.a.isAllowed(B.a.GALLERY_IMAGE_MARKINGS))throw"image markings feature is not allowed";this.doodleEnabled||(this.currentImagePanel&&this.currentImagePanel.doodleShow(),this.doodleEnabled=!0)}},{key:"disableDoodling",value:function(){this.doodleEnabled&&(this.currentImagePanel&&this.currentImagePanel.doodleHide(),this.doodleEnabled=!1)}},{key:"toggleDoodling",value:function(){this.doodleEnabled?this.disableDoodling():this.enableDoodling()}},{key:"enableDoodleInteractivity",value:function(){this.doodleEnabled&&!this.doodleInteractive&&(this.currentImagePanel&&this.currentImagePanel.doodleEnableInteractivity(),this.doodleInteractive=!0)}},{key:"disableDoodleInteractivity",value:function(){this.doodleEnabled&&this.doodleInteractive&&(this.currentImagePanel&&this.currentImagePanel.doodleDisableInteractivity(),this.doodleInteractive=!1)}},{key:"toggleDoodleInteractivity",value:function(){this.doodleInteractive?this.disableDoodleInteractivity():this.enableDoodleInteractivity()}},{key:"checkSelectionState",value:function(){this.currentFile.selected?this.$ui.actionsPanel.find(".btn-select").addClass("selected").find("span").html(v.a.p__("pdbox.js","actions_btndeselect_label")):this.$ui.actionsPanel.find(".btn-select").removeClass("selected").find("span").html(v.a.p__("pdbox.js","actions_btnselect_label"))}},{key:"sendComment",value:function(){var e=this;if(!this.currentFile.image)throw"current file ist not of type image";var t=this.$ui.commentsFormInputName.val(),i=this.$ui.commentsFormInputMessage.val();""!==t?""!==i?(this.$ui.commentsFormBtnSend.addClass("pending"),re.a.createInstance(this.currentFile,t,i,(function(t,i,n,o){if(t)e.$ui.commentsFormInputMessage.val("").focus(),e.hideCommentMessage();else switch(o){case"author_empty":e.showCommentMessage(v.a.p__("pdbox.js","response_missing_name"));break;case"text_empty":e.showCommentMessage(v.a.p__("pdbox.js","response_missing_message"));break;default:e.showCommentMessage(v.a.p__("pdbox.js","response_comment_error"))}e.$ui.commentsFormBtnSend.removeClass("pending")}))):this.showCommentMessage(v.a.p__("pdbox.js","response_missing_message")):this.showCommentMessage(v.a.p__("pdbox.js","response_missing_name"))}},{key:"showCommentMessage",value:function(e){var t=this.$ui.commentsFormServerMessage;t.is(":visible")?t.fadeOut(200,(function(){return t.text(e).fadeIn(300)})):t.text(e).slideDown(300)}},{key:"hideCommentMessage",value:function(){var e=this.$ui.commentsFormServerMessage;e.is(":visible")&&e.slideUp(200)}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.$dom[0].style.width="".concat(e,"px"),this.$dom[0].style.height="".concat(t,"px"),this.opened&&(this.updateImagePanelContainerSize(),this.currentImagePanel&&this.currentImagePanel.setSize(this.imagePanelContainerSize.width,this.imagePanelContainerSize.height),this.checkMagActiveState(),this.manageSidebarVSpace())}},{key:"handleBoxOpened",value:function(){this.$ui.document.on("keydown.pdbox",this.handleKeyDown.bind(this)),this.fullscreenEnabled&&this.enableMetaUIHiding()}},{key:"handleBoxClosed",value:function(){this.disableMetaUIHiding(),this.reset()}},{key:"handleCommentAdded",value:function(e){var t=e.get("comment"),i=this.provideCommentView(t);this.$ui.commentsEntriesContainer.append(i.$dom),this.$ui.commentsMessageNoComments.hide(),this.viewSidebarComments.updateScrolling(),i.$dom.hide().slideDown(300)}},{key:"handleKeyDown",value:function(e){var t=e.target||e.srcElement,i=e.keyCode;if(!t||!t.type||"submit"===t.type)switch(i){case 32:case 34:case 39:case 40:e.preventDefault(),this.showNext(!e.shiftKey&&!e.altKey);break;case 8:case 33:case 37:case 38:e.preventDefault(),this.showPrev(!e.shiftKey&&!e.altKey);break;case 83:e.preventDefault(),this.toggleSelection();break;case 68:e.preventDefault(),this.initDownload();break;case 82:e.ctrlKey||e.metaKey||(e.preventDefault(),this.toggleRemoveConfirm());break;case 48:case 96:e.preventDefault(),"none"!==this.currentFile.flag&&m()('.btn-flag[data-type="none"]').trigger("click");break;case 49:case 97:e.preventDefault(),"red"!==this.currentFile.flag&&m()('.btn-flag[data-type="red"]').trigger("click");break;case 50:case 98:e.preventDefault(),"orange"!==this.currentFile.flag&&m()('.btn-flag[data-type="orange"]').trigger("click");break;case 51:case 99:e.preventDefault(),"green"!==this.currentFile.flag&&m()('.btn-flag[data-type="green"]').trigger("click");break;case 52:case 100:e.preventDefault(),"final"!==this.currentFile.flag&&m()('.btn-flag[data-type="final"]').trigger("click");break;case 13:e.preventDefault(),this.$ui.actionsPanel.find(".btn-remove-confirm").is(":visible")?(this.removeCurrent(),this.toggleRemoveConfirm(!1)):this.showNext(!e.shiftKey&&!e.altKey);break;case 27:e.preventDefault(),this.$ui.actionsPanel.find(".btn-remove-confirm").is(":visible")?this.toggleRemoveConfirm(!1):this.magEnabled?this.disableMagnification():this.close();break;case 9:e.preventDefault(),e.stopPropagation(),this.toggleFullscreen(!0);break;case 77:e.preventDefault(),this.toggleMagnification();break;case 219:N.a.isAllowed(B.a.GALLERY_IMAGE_MARKINGS)&&(e.preventDefault(),this.toggleDoodling());break;case 80:this.doodleEnabled&&(e.preventDefault(),this.toggleDoodleInteractivity());break;case 79:this.doodleEnabled&&(e.preventDefault(),this.currentImagePanel.doodleHistoryForward());break;case 73:this.doodleEnabled&&(e.preventDefault(),this.currentImagePanel.doodleHistoryBack());break;case 85:this.doodleEnabled&&(e.preventDefault(),this.currentImagePanel.doodleClear())}}},{key:"handleMouseMoveMetaUI",value:function(){var e=0!==this.mouseMoveTime;this.mouseMoveTime=Date.now(),!this.metaUIVisible&&e&&(this.showMetaUI(),this.startMetaUITimeout(this.metaUITimeoutLimit))}},{key:"handleImageOverlayClick",value:function(e){e.preventDefault(),this.showNext(!e.shiftKey&&!e.altKey)}},{key:"handleImagePanelMagToggled",value:function(){this.checkMagActiveState()}}])&&Sn(t.prototype,i),n&&Sn(t,n),e}();function Tn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,n;return t=e,n=[{key:"getShortFilenames",value:function(t,i,n){var o,a,r,s,l={};if(t.length>1)for(a=t[0].length,r=t[0].length,o=1;o<t.length;o++){var u=i?e._stripExtension(t[o-1]):t[o-1],c=i?e._stripExtension(t[o]):t[o];if(a=e.getMaxSameWidth(u,c,a,-1),r=e.getMaxSameWidth(u,c,r,1),0===a&&0===r)break}else a=0,r=0;if(a>0&&null!==(s=t[0].substr(0,a).match(/\d+$/))&&(a-=s[0].length),r>0){var h=i?e._stripExtension(t[0]):t[0];null!==(s=h.substr(h.length-r).match(/^\d+/))&&(r-=s[0].length)}if(0===a&&0===r)return null;for(o=0;o<t.length;o++){var d=i?e._stripExtension(t[o]):t[o];d=d.substr(a,d.length-a-r),n&&null!==(s=d.match(/^0*(\d+)$/))&&(d=s[1]),l[t[o]]=d}return l}},{key:"getMaxSameWidth",value:function(e,t,i,n){for(var o=Math.min(i,e.length,t.length);o>0&&e.substr(n<0?0:e.length-o,o)!==t.substr(n<0?0:t.length-o,o);)o-=1;return o}},{key:"_stripExtension",value:function(e){var t=e.lastIndexOf(".");return-1!==t?e.substr(0,t):e}}],(i=null)&&Tn(t.prototype,i),n&&Tn(t,n),e}(),xn=i(156);function On(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Dn=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.online=void 0,this.triggerCallbackOnRegister=!0,this._apiAvailable="onLine"in window.navigator&&void 0!==window.navigator.onLine,this._callbacks=[],this.initialize()}var t,i,n;return t=e,(i=[{key:"initialize",value:function(){var e=this;if(this._apiAvailable){this.online=window.navigator.onLine;var t=function(t){return e._handleOnlineStateChanged(t)};window.addEventListener("online",t),window.addEventListener("offline",t)}}},{key:"addCallback",value:function(e){this._apiAvailable&&(this._callbacks.push(e),this.triggerCallbackOnRegister&&this._triggerCallback(e))}},{key:"_triggerCallback",value:function(e){e(this.online)}},{key:"_handleOnlineStateChanged",value:function(e){this.online="online"===e.type;for(var t=0,i=this._callbacks.length;t<i;t++)this._triggerCallback(this._callbacks[t])}}])&&On(t.prototype,i),n&&On(t,n),e}()),An=i(164),In=i(93);function Pn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=void 0,this.uuid=void 0,this.name=void 0,this.userAuthed=!1,this.clientAuthed=!1,this.user=void 0,this.client=void 0,this.verifiedForGallery=!1}var t,i,n;return t=e,n=[{key:"createFromExport",value:function(t,i){var n=new e;return n.type=i.type,n.name=i.name,n.uuid=i.uuid,n.userAuthed=i.userAuthed||!1,n.clientAuthed=i.clientAuthed||!1,n.user=i.user?new f.a(i.user):void 0,n.client=i.client?new In.a(t,i.client):void 0,n.verifiedForGallery=i.verifiedForGallery||!1,n}},{key:"TYPE_USER",get:function(){return"user"}},{key:"TYPE_CLIENT",get:function(){return"client"}},{key:"TYPE_ANONYMOUS",get:function(){return"anonymous"}}],(i=null)&&Pn(t.prototype,i),n&&Pn(t,n),e}();function Rn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=void 0,this.fileUuid=void 0,this.fileUuids=void 0,this.filename=void 0,this.imageUuid=void 0,this.flag=void 0,this.commentId=void 0,this.galleryUuid=void 0,this.galleryPath=void 0,this.galleryPathNew=void 0,this.data=void 0}var t,i,n;return t=e,n=[{key:"createFromExport",value:function(t){var i=new e;return i.type=t.type,i.fileUuid=t.fileUuid,i.fileUuids=t.fileUuids,i.filename=t.filename,i.imageUuid=t.imageUuid,i.flag=t.flag,i.commentId=t.commentId,i.galleryUuid=t.galleryUuid,i.galleryPath=t.galleryPath,i.galleryPathNew=t.galleryPathNew,i.data=t.data,i}},{key:"FILE_UPLOAD_STARTED",get:function(){return"fileUploading"}},{key:"FILE_UPLOAD_ERROR",get:function(){return"fileUploadError"}},{key:"FILE_CREATED",get:function(){return"fileAdded"}},{key:"FILE_UPDATED",get:function(){return"fileUpdated"}},{key:"FILE_THUMBNAILS_UPDATED",get:function(){return"fileThumbnailsUpdated"}},{key:"FILE_STORED",get:function(){return"fileRemoved"}},{key:"FILES_MOVED_FROM",get:function(){return"filesMovedFrom"}},{key:"FILES_MOVED_TO",get:function(){return"filesMovedTo"}},{key:"IMAGE_FLAG_CHANGED",get:function(){return"imageFlagChanged"}},{key:"IMAGE_COMMENT_CREATED",get:function(){return"imageCommentAdded"}},{key:"IMAGE_COMMENT_REMOVED",get:function(){return"imageCommentRemoved"}},{key:"GALLERY_TRUNCATED",get:function(){return"galleryTruncated"}},{key:"GALLERY_STORED",get:function(){return"galleryRemoved"}},{key:"GALLERY_MOVED",get:function(){return"galleryMoved"}},{key:"HEADER_IMAGE_UPDATED",get:function(){return"headerImageUpdated"}},{key:"HEADER_IMAGE_UPDATE_FAILED",get:function(){return"headerImageUpdateFailed"}}],(i=null)&&Rn(t.prototype,i),n&&Rn(t,n),e}(),Mn=i(47),Fn=i(58),Nn=i(32),Bn=i(99),Un=i(165);function jn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}y.default.registerPlugin(b.a);var Gn,Hn,zn,Vn=!1,Wn=function(){function e(t,i,n,o,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domain=t,this.gallery=i,this.subGalleries=void 0,this.parentGallery=n,this.user=a,this.files=new z.a,this.fileSorter=new ie.a(this.gallery.settings.get(j.a.SORT_ORDER),this.gallery.settings.get(j.a.SORT_REVERSE)),this.presets=new ne.a(r),this.fileSelectionCache=new ae.a("raw_file_selection_".concat(this.gallery.uuid),this.files),this.presentationEnabledGallery=o,this.isPresentationModeExited=u.a.get("isPresentationModeExited"),this.viewsFiles=new H.a,this.viewsSections=new H.a,this.viewsSubGalleries=[],this.viewsPresets=[],this.pdbox=null,this.viewBreadcrumb=null,this.viewHeaderImage=null,this.viewGalleryActionMenu=null,this.viewGalleryListing=null,this.viewSelectionMenu=null,this.viewGallerySort=null,this.viewGalleryFilter=null,this.viewDnDHint=null,this.viewPMEnterButton=null,this.headerBar=null,this.headerBarLangSwitch=null,this.dialogGallerySettings=null,this.dialogGalleryShare=null,this.dialogEvents=null,this.dialogFileMeta=null,this.dialogFeedback=null,this.dialogUploadComplete=null,this.uploader=null,this.viewUpload=null,this.quillWelcome=null,this.socket=!1,this.fileInsertStack=[],this.fileInsertFCT=null,this.dropHintTimeout=null,this.visitor=null,this.userIsAdmin=!1,this.userIsOwner=!1,this.userIsOwnerOrAdmin=!1,this.clientMode=!1,this.settingsSavePending=!1,this.verbose=!1,this.selectionEnabled=!1,this.mouseWheelHijackEnabled=!1,this.sidebarVisible=!0,this.sidebarFlowingOffsetTop=0,this.sidebarFixedMarginY=0,this.sidebarFixed=!1,this.pmExitButtonOffsetBottom=0,this.animationFrameRequested=!1,this.scrollDelta=0,this.setUploadMessageTimeout=!1,this.flagResortTimeout=null,this.galleryBoxWidth=0,this.currentPreset=null,this.layout=null,this.helpBeacons=null,this.introFunnel=xn.a,this.$dom=null,this.$ui={},this.createDOM(),this.initialize()}var t,n,o;return t=e,o=[{key:"FILTER_PARAMETER_QUERY",get:function(){return"filterquery"}},{key:"FILTER_PARAMETER_FLAGS",get:function(){return"filterflags"}},{key:"FILTER_PARAMETER_COMMENTED",get:function(){return"filtercommented"}},{key:"FILTER_PARAMETER_SELECTED",get:function(){return"filterselected"}}],(n=[{key:"createDOM",value:function(){this.$dom=m()("#gallery"),this.$ui.window=m()(window),this.$ui.viewport=this.$ui.window,this.$ui.document=m()(document),this.$ui.body=m()("body"),this.$ui.galleryWrapper=m()("#gallery-content-wrapper"),this.$ui.innerWrapper=this.$ui.galleryWrapper.find("> .inner-wrapper"),this.$ui.paddedContent=m()("#padded-content"),this.$ui.welcome=m()("#welcome-message"),this.$ui.filesContainer=m()("#files-container"),this.$ui.subGalleriesContainer=m()("#sub-galleries-container"),this.$ui.btnCreateSubGallery=this.$dom.find(".create-gallery-button"),this.$ui.sidebarWrapper=m()("#sidebar-wrapper"),this.$ui.sidebar=m()("#sidebar"),this.$ui.sidebarScrollContainer=this.$ui.sidebar.children(".scroll-container"),this.$ui.sidebarNavBack=m()("#sidebar-nav-back"),this.$ui.sidebarGalleryInfo=m()("#sidebar-gallery-info"),this.$ui.sidebarNavigation=m()("#sidebar-navigation"),this.$ui.sidebarFilter=m()("#sidebar-filter"),this.$ui.sidebarSort=m()("#sidebar-sort"),this.$ui.sidebarSelection=m()("#sidebar-selection"),this.$ui.sidebarDownload=m()("#sidebar-download"),this.$ui.btnDownloadAll=this.$ui.sidebarDownload.find(".btn-download-all"),this.$ui.btnInitNewPreset=this.$ui.sidebarSelection.find(".btn--new-preset"),this.$ui.btnSelectAll=this.$ui.sidebarSelection.find(".btn--select-all"),this.$ui.footer=this.$dom.find("#footer"),this.$ui.footerSpacer=this.$dom.find("#footer-spacer"),this.$ui.selectionRectangle=m()("#selection-rectangle"),this.$ui.feedbackButton=m()("#feedback-button")}},{key:"initialize",value:function(){var e=this;this.visitor=$n.createFromExport(this.domain,u.a.get("visitor")),this.userIsAdmin=this.visitor.userAuthed&&"admin"===this.visitor.user.type,this.userIsOwner=this.visitor.userAuthed&&this.visitor.user.domainUuid===this.domain.uuid,this.userIsOwnerOrAdmin=this.userIsOwner||this.userIsAdmin,this.clientMode=!0===u.a.get("clientMode"),T.a.defaultParams.responseType=T.a.RESPONSETYPE_JSON,this.userIsAdmin&&(this.verbose=!0),this.initHeaderBar(),this.initBreadcrumb(),this.initHeaderImage(),this.initSidebar(),this.$ui.viewport.on("scroll.pdgvscroll",this.handleScroll.bind(this)),this.bumpFooter(),this.initUI(),this.initPresentationEnterButton(),this.initSelection(),this.initWelcomeMessage((function(){0===e.$ui.welcome.find("> :visible").length?e.$ui.welcome.hide():e.initWelcomeCrop()})),this.uploader=new hi.a(this.gallery,{completeSound:this.domain.settings.get(U.a.ENABLE_UPLOAD_COMPLETE_SOUND)}),this.viewUpload=new ki(this.uploader),Ai.a.broadcastPath(this.gallery.urlRelDom),Ai.a.broadcastTitle(document.title),Ai.a.initIOSFix(this.$ui.galleryWrapper,(function(){e.$ui.viewport.off(".pdgvscroll"),e.$ui.viewport=e.$ui.galleryWrapper,e.$ui.viewport.on("scroll.pdgvscroll",e.handleScroll.bind(e)),xe.a.getInstance().setScrollTarget(e.$ui.viewport[0])})),("user"===this.visitor.type&&this.visitor.verifiedForGallery||this.gallery.settings.get(j.a.ENABLE_GUEST_UPLOAD))&&(this.viewDnDHint=new zt(this.gallery),m()(this.viewDnDHint).on(zt.FILES_SELECTED,(function(t,i){e.uploader.upload(i)}))),this.setLayout(M.a.determineLayout(this.gallery.settings)),xe.a.getInstance().setThreshold(O.a.getHeight()),this.loadFiles(),this.initSubGalleries(),this.pdbox=kn.getInstance(),this.pdbox.initialize(O.a.getWidth(),O.a.getHeight(),this.domain,this.gallery,this.selectionEnabled),P(this.handleDocumentVisibilityChange.bind(this));var t=m()("#social-footer").find('.link[data-type="socialLinkPhone"]');0!==t.length&&t.on("click",(function(e){e.preventDefault();var t=m()(e.currentTarget).attr("href").replace("tel:","");i.e(75).then((function(){var e=[i(368)];(function(e){new(0,e.default)(t,!1).open()}).apply(null,e)})).catch(i.oe)})),Dn.addCallback((function(t){return e.handleConnectionStateChanged(t)})),this.userIsAdmin&&(c.a.define("tagsAdd",(function(t){An.a.addTagsToGallery(e.gallery.uuid,t.split(/\s+/))})),c.a.define("tagsList",(function(){An.a.getTagsForGallery(e.gallery.uuid).then((function(e){for(var t=0;t<e.length;t++)console.log("".concat(e[t].code,": ").concat(e[t].name))}))})),c.a.define("tagsRemove",(function(e){An.a.removeTags(e.split(/\s+/))})),c.a.define("help",(function(){null===e.helpBeacons?e.activateHelp():e.deactivateHelp()})))}},{key:"loadFiles",value:function(){var e=this;this.files.addEventListener(V.a.FILES_ADDED,this.handleFileBagFilesAdded.bind(this)),this.files.addEventListener(V.a.FILES_REMOVED,this.handleFileBagFilesRemoved.bind(this)),this.fileSorter.resortOnFileAddAndRemove=!0,this.fileSorter.addEventListener(ie.a.SORTED,(function(){return e.rebuildSections()})),this.loadFilesInBatches(500)}},{key:"loadFilesInBatches",value:function(e,t){var i=this,n=new Y.a(this.gallery).setLimit(e).setOffset(t);this.clientMode&&n.setOverrideRole(Y.a.OVERRIDE_ROLE_GUEST),W.a.getFiles(n).then((function(t){i.insertFiles(t.files),t.hasMore?i.loadFilesInBatches(e,t.lastSortKey):i.postFileInit()})).catch((function(){E.a.open((new li.a).setContent(v.a.p__("gallery.view","error_loadfiles_general")).setTimeout(5).setLevel(li.a.LEVEL_ERROR))}))}},{key:"setLayout",value:function(e){if("string"==typeof e&&""!==e&&-1!=="grid,masonry,list".indexOf(e)&&this.layout!==e&&(this.layout=e,this.viewsFiles.each((function(e){return e.finalize()})),this.viewsFiles.clear(),this.$ui.filesContainer.attr("data-layout",e),null!==this.viewDnDHint&&this.viewDnDHint.setDisplayType(e),!this.files.isEmpty())){var t=!this.userIsOwnerOrAdmin||this.clientMode,i=[];this.files.each((function(e){t&&e.status===Z.a.LIMIT_LOCKED||i.push(e)}),this),0!==i.length&&(this.viewsFilesCreate(i),this.rebuildSections())}}},{key:"postFileInit",value:function(){var e=this;m()("#loader-info").remove(),0===this.files.count()&&this.appendDNDHintToLastSection(),this.initPresets(),this.applyFilter(),this.initDragAndDrop();var t=R.a.get("img");if(t){var n=this.files.getFileByUuid(t);null!==n&&this.pdbox.open(this.fileSorter.filesOrdered,n.uuid)}var o=R.a.get("sel");if(o){var a=this.presets.getPresetByUuid(o);null!==a&&this.activatePreset(a)}else{var r=this.fileSelectionCache.get();r&&this.initNewPreset(r)}null!==R.a.get("download")&&this.gallery.settings.get(j.a.ENABLE_DOWNLOAD)&&(this.downloadAllVisibleFiles(),i.e(119).then((function(){var e=[i(427)];(function(e){var t=m()(e());t.find(".btn-view-gallery").on("click",(function(e){e.preventDefault(),E.a.close("messageDeeplinkDownload")})),E.a.open((new Pt.a).setId("messageDeeplinkDownload").setTitle(v.a.p__("dialog.gallery.downloaddeeplink","title")).setContent(t).setMaxWidth(420))}).apply(null,e)})).catch(i.oe)),this.registerEventListeners(),this.gallery.status===J.a.LIMIT_LOCKED?this.showLimitLockMessage("gallery"):this.files.each((function(t){return t.status!==Z.a.LIMIT_LOCKED||(e.showLimitLockMessage("file"),!1)})),this.checkUploads();var s=m()("#gallery-intro");s.length>0&&(s.show(),E.a.open((new li.a).setId("gallery-intro").setContent(s).setMaxWidth(450).setTimeout(0).setIsRawContent(!0)),s.find(".hint-settings").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.openDialogGallerySettings()})),s.find(".hint-share").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.openDialogShare()}))),this.$dom.on("click",".btn-show-gallery-settings",(function(t){t.preventDefault(),e.dialogGalleryShare.isOpened&&e.dialogGalleryShare.close();var i=m()(t.target);e.openDialogGallerySettings(i.attr("data-tab"),i.attr("data-setting"))})),this.$ui.document.on("keyup keydown",(function(t){return 80===t.which&&(t.ctrlKey||t.metaKey)?(t.preventDefault(),window.location.href="".concat(e.gallery.url,":contactsheet"),!1):null})),this.initSocketIO(),$.default.showAppMessages(),this.bumpFooter(),window.setTimeout((function(){return e.initIntroFunnel()}),1e3)}},{key:"registerEventListeners",value:function(){O.a.setContainerElement(document.getElementsByTagName("body")[0]),O.a.addResizeCallback(this.handleResize.bind(this)),this.$ui.window.on("beforeunload",this.handlePageLeave.bind(this)),this.$ui.window.on("keydown",this.handleKeyDown.bind(this)),this.uploader.addEventListener(di.a.UPLOAD_SESSION_END,this.handleUploadSessionEnd.bind(this))}},{key:"initHeaderImage",value:function(){var e=this.userIsOwnerOrAdmin&&!this.clientMode,t=N.a.isAllowed(B.a.GALLERY_HEADER_IMAGE),i=t&&N.a.isAllowedForTrial(B.a.GALLERY_HEADER_IMAGE),n=this.gallery.headerImage;if(e||t&&n){var o=null;i?o=Ut.MODE_TRIAL:t||(o=Ut.MODE_DISABLED),this.viewHeaderImage=new Ut(this.gallery,e,o),this.viewHeaderImage.setImageSize(O.a.getWidth(),450),m()("#header-image-placeholder").replaceWith(this.viewHeaderImage.$dom),m()(this.viewHeaderImage).on(Ut.HEADER_IMAGE_UPDATED,this.handleHeaderImageUpdated.bind(this)),t&&n&&this.viewHeaderImage.setHeaderImage(n)}}},{key:"initSidebar",value:function(){var e=this;this.sidebarFlowingOffsetTop=this.$ui.sidebarWrapper.offset().top,0!==this.$ui.sidebarFilter.length&&(this.viewGalleryFilter=new Wt(this.gallery,this.files),m()(this.viewGalleryFilter).on(Wt.FILTER_UPDATED,(function(t,i){e.onFilterChangeUpdateURI(),0!==i&&(e.fileSorter.resort(),e.checkNumFiles())}))),this.setFiltersFromURI(),this.viewGallerySort=new Qt(this.gallery.settings.get(j.a.SORT_ORDER),this.gallery.settings.get(j.a.SORT_REVERSE)),this.viewGallerySort.addEventListener(Qt.SORT_UPDATED,(function(t){e.fileSorter.sortBy(t.get("order"),t.get("reverse"))}));var t=m()("#header-bar-spacer");this.sidebarFixedMarginY=30+(0===t.length?0:t.height()),0!==this.$ui.sidebarScrollContainer.length&&(this.$ui.sidebarScrollContainer.mCustomScrollbar({scrollbarPosition:"outside",scrollInertia:0,theme:"dark",autoHideScrollbar:!0}),this.$ui.sidebarScrollContainerBox=this.$ui.sidebarScrollContainer.find(".mCSB_container")),this.$ui.sidebar.show(),this.updateSidebarScrolling(),this.addSugarAndSpice()}},{key:"showSidebar",value:function(){this.sidebarVisible||(y.default.to(this.$ui.sidebar,{left:0,duration:.3,ease:"power2.out"}),y.default.to(this.$ui.paddedContent,{paddingLeft:280,duration:.3,ease:"power2.out",onUpdate:this.updateSectionWidth.bind(this)}),0!==this.$ui.subGalleriesContainer.length&&y.default.to(this.$ui.subGalleriesContainer,{paddingLeft:280,duration:.3,ease:"power2.out"}),this.sidebarVisible=!0)}},{key:"hideSidebar",value:function(){this.sidebarVisible&&(y.default.to(this.$ui.sidebar,{left:-255,duration:.3,ease:"power2.out"}),y.default.to(this.$ui.paddedContent,{paddingLeft:30,duration:.3,ease:"power2.out",onUpdate:this.updateSectionWidth.bind(this)}),0!==this.$ui.subGalleriesContainer.length&&y.default.to(this.$ui.subGalleriesContainer,{paddingLeft:30,duration:.3,ease:"power2.out"}),this.sidebarVisible=!1)}},{key:"toggleSidebar",value:function(){this.sidebarVisible?this.hideSidebar():this.showSidebar()}},{key:"updateSidebarScrolling",value:function(){if(0!==this.$ui.sidebarScrollContainerBox.children(":not(.hidden)").length){this.$ui.sidebarScrollContainer.show();var e=this.$ui.viewport.height()-this.sidebarFixedMarginY-this.$ui.sidebar.children(".sidebar-head").height()-(0===this.$ui.feedbackButton.length?30:38);this.$ui.sidebarScrollContainer.css("max-height",e),this.$ui.sidebarScrollContainer.mCustomScrollbar("update")}else this.$ui.sidebarScrollContainer.hide()}},{key:"onFilterChangeUpdateURI",value:function(){var t=this.viewGalleryFilter.getEntities(),i=R.a.parseQuery();delete i[e.FILTER_PARAMETER_QUERY],delete i[e.FILTER_PARAMETER_FLAGS],delete i[e.FILTER_PARAMETER_COMMENTED],delete i[e.FILTER_PARAMETER_SELECTED];for(var n=0,o=t.length;n<o;n++)switch(t[n]){case"search":i[e.FILTER_PARAMETER_QUERY]=this.viewGalleryFilter.getSearchTerm();break;case"flag":i[e.FILTER_PARAMETER_FLAGS]=this.viewGalleryFilter.getFlags().join(" ");break;case"commented":i[e.FILTER_PARAMETER_COMMENTED]=1;break;case"selected":i[e.FILTER_PARAMETER_SELECTED]=1}var a=R.a.buildQuery(i);window.history&&window.history.replaceState&&window.history.replaceState({},document.title,window.location.origin+window.location.pathname+(a?"?".concat(a):""))}},{key:"setFiltersFromURI",value:function(){if(this.viewGalleryFilter){var t=R.a.get(e.FILTER_PARAMETER_FLAGS),i=R.a.get(e.FILTER_PARAMETER_QUERY),n=R.a.get(e.FILTER_PARAMETER_COMMENTED),o=R.a.get(e.FILTER_PARAMETER_SELECTED);if(i&&this.viewGalleryFilter.setSearch(decodeURI(i)),t){var a=t.split("+");for(var r in a)this.viewGalleryFilter.addFlag(a[r])}n&&this.viewGalleryFilter.setCommentedFilter(!0),o&&this.viewGalleryFilter.setSelectedFilter(!0)}}},{key:"updateFilenameShortification",value:function(){if(this.domain.settings.get(U.a.ENABLE_SHORTEN_FILENAMES)){var e=[];this.files.each((function(t){return e.push(t.filename)}));var t=Cn.getShortFilenames(e,!0,!1);this.files.each((function(e){null===t?e.setFilenameOverride(void 0):e.setFilenameOverride(t[e.filename])}))}}},{key:"initHeaderBar",value:function(){if(this.userIsOwnerOrAdmin?this.clientMode?(this.headerBar=new le.a((new Nn.a).setFloating(!0)),this.headerBar.addButton(new Fn.a(v.a.__("back to photographer-view"),le.a.LOCATION_RIGHT).setHref(window.location.pathname).setClass("btn-client-view-back"))):(this.headerBar=new le.a((new Nn.a).setShowHomeButton(!0)),this.headerBar.addDivider(le.a.LOCATION_RIGHT).addButton(new Fn.a(v.a.p__("headermenu.gallery","gallery settings"),le.a.LOCATION_RIGHT).setId("btn-gallery-settings-dialog").setIcon('<svg xmlns="http://www.w3.org/2000/svg" width="22.001" height="18" viewBox="0 0 22.001 18"><path d="M4,2V1A1,1,0,0,0,2,1V2Z" fill="#fff"/><path d="M2,9v8a1,1,0,0,0,2,0V9Z" fill="#fff"/><path d="M12,9V1a1,1,0,0,0-2,0V9Z" fill="#fff"/><path d="M10,16v1a1,1,0,0,0,2,0V16Z" fill="#fff"/><path d="M18,12v5a1,1,0,0,0,2,0V12Z" fill="#fff"/><path d="M20,5V1a1,1,0,0,0-2,0V5Z" fill="#fff"/><path d="M4.5,4h-3a1.5,1.5,0,1,0,0,3h3a1.5,1.5,0,0,0,0-3Z" fill="#fff"/><path d="M12.5,11h-3a1.5,1.5,0,0,0,0,3h3a1.5,1.5,0,0,0,0-3Z" fill="#fff"/><path d="M20.5,7h-3a1.5,1.5,0,0,0,0,3h3a1.5,1.5,0,0,0,0-3Z" fill="#fff"/></svg>').setCallback(this.openDialogGallerySettings.bind(this))),this.headerBar.addDivider(le.a.LOCATION_RIGHT).addButton(new Fn.a(v.a.p__("headermenu.gallery","share"),le.a.LOCATION_RIGHT).setId("btn-gallery-share-dialog").setIcon('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="12" viewBox="0 0 22 12"><polygon points="22 0 7.339 9.318 3.669 12 8.289 10.023 11.008 11.999 22 0" fill="#fff"/><polygon points="3.669 6.666 22 0 0 4 3.669 6.666" fill="#fff"/></svg>').setCallback(this.openDialogShare.bind(this))),this.headerBar.addDivider(le.a.LOCATION_RIGHT).addButton(new Fn.a(v.a.p__("headermenu.gallery","events"),le.a.LOCATION_RIGHT).setIcon('<svg xmlns="http://www.w3.org/2000/svg" width="20.001" height="14.001" viewBox="0 0 20.001 14.001"><rect width="2" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect x="4" width="13.001" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect y="4" width="2" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect x="4" y="4" width="16.001" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect y="8.001" width="2" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect x="4" y="8.001" width="9" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect y="12.001" width="2" height="2" rx="0.5" ry="0.5" fill="#fff"/><rect x="4" y="12.001" width="14.001" height="2" rx="0.5" ry="0.5" fill="#fff"/></svg>').setCallback(this.openDialogEvents.bind(this))),this.headerBar.addDivider(le.a.LOCATION_RIGHT).addButton(new Fn.a(v.a.p__("headermenu.gallery","client view"),le.a.LOCATION_RIGHT).setHref("".concat(window.location.pathname,"?client")).setIcon('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="12" viewBox="0 0 20 12"><path d="M19.148,3.819A12.721,12.721,0,0,0,10,0,12.72,12.72,0,0,0,.852,3.819a3.218,3.218,0,0,0,0,4.362A12.72,12.72,0,0,0,10,12a12.721,12.721,0,0,0,9.148-3.819A3.219,3.219,0,0,0,19.148,3.819ZM10,4.25A1.752,1.752,0,0,0,8.25,6a.75.75,0,1,1-1.5,0A3.254,3.254,0,0,1,10,2.75a.75.75,0,0,1,0,1.5Zm-7.714.963A10.5,10.5,0,0,1,6.321,2.638a4.938,4.938,0,0,0,0,6.723A10.5,10.5,0,0,1,2.286,6.787,1.231,1.231,0,0,1,2.286,5.213ZM17.715,6.787a10.5,10.5,0,0,1-4.035,2.575,4.938,4.938,0,0,0,0-6.723,10.5,10.5,0,0,1,4.035,2.575A1.231,1.231,0,0,1,17.715,6.787Z" fill="#fff"/></svg>')),this.headerBar.initUserMenu(this.user,this.domain)):this.visitor.client?(this.headerBar=new le.a,this.headerBar.addButton(new Fn.a(v.a.__("to dashboard"),le.a.LOCATION_LEFT).setHref("/client/dashboard/".concat(this.visitor.client.uuid)).setClass("btn-back")),this.headerBar.initClientMenu(this.visitor.client)):(this.headerBar=new le.a((new Nn.a).setFloating(!0)),u.a.has("protectingGallery")&&this.headerBar.addButton(new Fn.a(v.a.p__("gallery.view.desktop","headermenu_btn_closegallery_label"),le.a.LOCATION_RIGHT).setHref("".concat(window.location.pathname,"?leave"))).addDivider(le.a.LOCATION_RIGHT),this.headerBarLangSwitch=new ue.a(u.a.get("locale")),this.headerBar.addPlainContent(this.headerBarLangSwitch.$dom,le.a.LOCATION_RIGHT)),this.headerBar){var e=m()("#header-bar-placeholder");0===e.length?this.$ui.body.append(this.headerBar.$dom):e.replaceWith(this.headerBar.$dom),this.headerBarLangSwitch||this.clientMode||this.headerBar.placeSpacer(this.$ui.innerWrapper[0])}}},{key:"initSelectionMenu",value:function(){var e=this;this.viewSelectionMenu=new ci(this.gallery,this.userIsOwnerOrAdmin&&!this.clientMode),this.$dom.append(this.viewSelectionMenu.$dom),0===this.$ui.subGalleriesContainer.length?(this.$dom.append(this.viewSelectionMenu.$spacer),m()(this.viewSelectionMenu).on(ci.SPACER_UPDATING,this.bumpFooter.bind(this))):(this.$ui.footer.append(this.viewSelectionMenu.$spacer),m()(this.viewSelectionMenu).on(ci.SPACER_UPDATING,this.bumpFooter.bind(this))),m()(this.viewSelectionMenu).on(ci.REQUEST_FILE_HINT,(function(t,i){return e.hintFile(i)})),m()(this.viewSelectionMenu).on(ci.REQUEST_DESELECTION,this.deactivatePresets.bind(this))}},{key:"registerFileEventListeners",value:function(e){for(var t,i="pgv_fe",n=0;n<e.length;n++)(t=e[n]).addEventListener(Q.a.SELECTED,this.handleFileSelectionChanged.bind(this),i),t.addEventListener(Q.a.DESELECTED,this.handleFileSelectionChanged.bind(this),i),t.addEventListener(Q.a.FLAG_CHANGED,this.handleFileFlagChanged.bind(this),i),t.addEventListener(Q.a.REMOVED,this.handleFileRemoved.bind(this),i),t.image&&(t.image.addEventListener(ee.a.COMMENT_ADDED,this.handleImageCommentsChanged.bind(this),i),t.image.addEventListener(ee.a.COMMENT_REMOVED,this.handleImageCommentsChanged.bind(this),i))}},{key:"unregisterFileEventListeners",value:function(e){for(var t,i=0,n=e.length;i<n;i++)(t=e[i]).removeEventListenersByNamespace("pgv_fe"),t.image&&t.image.removeEventListenersByNamespace("pgv_fe")}},{key:"initIntroFunnel",value:function(){this.triggerFunnelStep()}},{key:"triggerFunnelStep",value:function(e){var t=this,n=function(){var i=!0;switch(t.introFunnel.getNextLinearStep()){case Gn.UPLOAD_FILES:0===t.files.count()?t.introStepUpload():t.introAcknowledgeUpload();break;case Gn.VIEW_GALLERY_SETTINGS:setTimeout((function(){return t.introStepGallerySettings()}),500);break;case Gn.VIEW_GALLERY_SHARE:setTimeout((function(){return t.introStepGalleryShare()}),500);break;case Gn.INTRO_COMPLETE:t.introStepComplete();break;default:i=!1}"function"==typeof e&&e(i)};Vn?n():i.e(12).then((function(){var e=[i(202),i(379),i(428)];(function(e,t,i){Gn=e.default,Hn=t.default,zn=i.default,Vn=!0,n()}).apply(null,e)})).catch(i.oe)}},{key:"introStepUpload",value:function(){var e=this,t=new zn(this.introFunnel,void 0,v.a.p__("beacon","upload_intro_funnel"));this.uploadBeacon=new Hn(m()("#dnd-hint")[0],t.getDomElement(),{beacon_orientation:Hn.ORIENTATION_EAST,content_orientation:Hn.ORIENTATION_EAST,content_trigger:Hn.CONTENT_TRIGGER_INIT}),t.setUIBeacon(this.uploadBeacon),this.uploader.addEventListenerOnce(di.a.FILE_UPLOAD_START,(function(){e.introAcknowledgeUpload()}))}},{key:"introAcknowledgeUpload",value:function(){var e=this;this.introFunnel.acknowledgeStep(Gn.UPLOAD_FILES,(function(){e.uploadBeacon?(e.uploadBeacon.finalize(!0),window.setTimeout((function(){return e.triggerFunnelStep()}),1e3)):e.triggerFunnelStep()}))}},{key:"introStepGallerySettings",value:function(){var e=this,t=m()("#btn-gallery-settings-dialog"),n=new zn(this.introFunnel,void 0,v.a.p__("beacon","btn_gallery_settings_intro_funnel"));this.gallerySettingsBeacon=new Hn(t[0],n.getDomElement(),{beacon_orientation:Hn.ORIENTATION_SOUTH,beacon_offset:{x:0,y:20},content_orientation:Hn.ORIENTATION_SOUTH,content_trigger:Hn.CONTENT_TRIGGER_INIT}),n.setUIBeacon(this.gallerySettingsBeacon),Promise.all([i.e(3),i.e(4),i.e(8)]).then((function(){var t=[i(429)];(function(t){var i=t.default;E.a.addEventListener(S.a.NOTIFICATION_OPENED,(function(t){t.notification.getId()===i.DIALOG_ID&&(E.a.removeEventListenersByNamespace("setting_intro_ack"),e.introAcknowledgeGallerySettings())}),"setting_intro_ack")}).apply(null,t)})).catch(i.oe)}},{key:"introAcknowledgeGallerySettings",value:function(){var e=this;this.gallerySettingsBeacon&&this.gallerySettingsBeacon.finalize(),this.introFunnel.acknowledgeStep(Gn.VIEW_GALLERY_SETTINGS,(function(){Promise.all([i.e(3),i.e(4),i.e(8)]).then((function(){var t=[i(429)];(function(t){var i=t.default;E.a.addEventListenerOnce(S.a.NOTIFICATION_CLOSED,(function(t){t.notification.getId()===i.DIALOG_ID&&e.triggerFunnelStep()}))}).apply(null,t)})).catch(i.oe)}))}},{key:"introStepGalleryShare",value:function(){var e=this,t=m()("#btn-gallery-share-dialog"),n=new zn(this.introFunnel,void 0,v.a.p__("beacon","btn_gallery_share_intro_funnel"));this.galleryShareBeacon=new Hn(t[0],n.getDomElement(),{beacon_orientation:Hn.ORIENTATION_SOUTH,beacon_offset:{x:0,y:20},content_orientation:Hn.ORIENTATION_SOUTH,content_trigger:Hn.CONTENT_TRIGGER_INIT}),n.setUIBeacon(this.galleryShareBeacon),Promise.all([i.e(10),i.e(13)]).then((function(){var t=[i(459)];(function(t){var i=t.default;E.a.addEventListener(S.a.NOTIFICATION_OPENED,(function(t){t.notification.getId()===i.DIALOG_ID&&(E.a.removeEventListenersByNamespace("share_intro_ack"),e.introAcknowledgeGalleryShare())}),"share_intro_ack")}).apply(null,t)})).catch(i.oe)}},{key:"introAcknowledgeGalleryShare",value:function(){var e=this;this.galleryShareBeacon&&this.galleryShareBeacon.finalize(),this.introFunnel.acknowledgeStep(Gn.VIEW_GALLERY_SHARE,(function(){e.triggerFunnelStep()}))}},{key:"introStepComplete",value:function(){var e=this;i.e(94).then((function(){var t=[i(117),i(430)];(function(t,i){var n=t.default,o=new(0,i.default)(e.user);o.addEventListenerOnce(n.DID_CLOSE,(function(){var t=Date.now();e.introFunnel.acknowledgeStep(Gn.INTRO_COMPLETE,(function(){window.setTimeout(e.triggerFunnelStep.bind(e),1e3-(Date.now()-t))}))})),o.open()}).apply(null,t)})).catch(i.oe)}},{key:"initUI",value:function(){var e=this;this.viewGalleryActionMenu=new ti;var t=this.$ui.sidebarGalleryInfo.find(".action-menu");t.find(".btn-toggle-fav").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e.galleryToggleFav()})),this.gallery.isFavorite&&this.applyFavState(!0),t.find(".btn-truncate").on("click",(function(t){t.preventDefault(),e.galleryTruncate()})),t.find(".btn-remove").on("click",(function(t){t.preventDefault(),e.galleryRemove()})),t.find(".btn-rename").on("click",(function(t){t.preventDefault(),e.galleryRename()})),t.find(".btn-move").on("click",(function(t){t.preventDefault(),e.galleryMove()})),t.find(".btn-sort-sub-galleries").on("click",(function(t){t.preventDefault(),e.sortSubGalleries()})),t.find(".btn-create-sub-gallery").on("click",(function(t){t.preventDefault(),e.createSubGallery()})),this.gallery.settings.get(j.a.ENABLE_DOWNLOAD)&&(this.gallery.status===Z.a.LIMIT_LOCKED?this.$ui.sidebarDownload.hide():this.$ui.btnDownloadAll.on("click",(function(t){t.preventDefault(),m()(t.currentTarget).hasClass("pending")||e.downloadAllVisibleFiles()}))),this.$ui.btnCreateSubGallery.on("click",(function(t){t.preventDefault(),e.createSubGallery()})),this.calculateGalleryBoxWidth(),this.$ui.btnCreateSubGallery.css({width:this.galleryBoxWidth,opacity:1}),this.$ui.feedbackButton.on("click",(function(t){t.preventDefault(),e.openFeedbackDialog()})),k.a.preventDoubleClick(".no-dblclick"),this.$ui.sidebarGalleryInfo.on("contextmenu",(function(t){t.preventDefault(),e.showGalleryActionMenu()}))}},{key:"showGalleryActionMenu",value:function(){this.viewGalleryActionMenu.showEntries()}},{key:"initPresentationEnterButton",value:function(){this.isPresentationModeExited&&this.presentationEnabledGallery&&(!this.userIsOwnerOrAdmin||this.clientMode)&&(this.viewPMEnterButton=new Di,this.$dom.append(this.viewPMEnterButton.$dom),m()(this.viewPMEnterButton).on(Di.CLICKED,this.reenterPresentation.bind(this)))}},{key:"reenterPresentation",value:function(){this.isPresentationModeExited&&this.presentationEnabledGallery&&M.a.reenterPresentationMode(this.presentationEnabledGallery,(function(){window.location.reload()}),(function(e){E.a.open((new li.a).setContent(e.message).setLevel(li.a.LEVEL_ERROR))}))}},{key:"enableMouseWheelHijack",value:function(){var e=this;this.mouseWheelHijackEnabled||(this.$ui.document.on("wheel.pdgv_mwh",(function(t){t.preventDefault(),e.scrollDelta+=t.originalEvent.deltaY,e.handleScroll()})),this.mouseWheelHijackEnabled=!0)}},{key:"disableMouseWheelHijack",value:function(){this.mouseWheelHijackEnabled&&(this.$ui.document.off("wheel.pdgv_mwh"),this.mouseWheelHijackEnabled=!1)}},{key:"initWelcomeMessage",value:function(e){var t=this;if(this.gallery.settings.get(j.a.ENABLE_WELCOME_MESSAGE)&&this.gallery.settings.has(j.a.WELCOME_MESSAGE)){var n,o;try{n=this.gallery.settings.get(j.a.WELCOME_MESSAGE),o=JSON.parse(n)}catch(e){}if(o&&1===o.ops.length&&/^\s+$/.test(o.ops[0].insert))"function"==typeof e&&e.call();else try{Promise.all([i.e(3),i.e(4)]).then((function(){var a=[i(161)];(function(i){t.quillWelcome=new i(t.$dom.find("#welcome-message").find(".text .content")[0],{readOnly:!0}),o?t.quillWelcome.setContents(o):n&&(/<.*>/.test(n)?t.quillWelcome.clipboard.dangerouslyPasteHTML(n):t.quillWelcome.setText(n)),t.$ui.welcome.find(".text").show(),"function"==typeof e&&e.call()}).apply(null,a)})).catch(i.oe)}catch(t){"function"==typeof e&&e.call()}}else"function"==typeof e&&e()}},{key:"initWelcomeCrop",value:function(){var e=this;if(this.domain.settings.get(U.a.ENABLE_CROP_GALLERY_WELCOME_MESSAGES)){var t=this.$ui.welcome.find(".text");0!==t.length&&(t.height()<200||(t.addClass("cropped"),this.$ui.welcome.find(".btn--uncrop").one("click",(function(t){t.preventDefault(),e.uncropWelcome()}))))}}},{key:"uncropWelcome",value:function(){this.$ui.welcome.find(".text").removeClass("cropped")}},{key:"openDialogGallerySettings",value:function(e,t){var n=this,o=function(){"string"==typeof e&&n.dialogGallerySettings.activateSection(e),"string"==typeof t&&window.setTimeout((function(){n.dialogGallerySettings.highlightSetting(t)}),700),fn.a.parseDefinitions()};null===this.dialogGallerySettings?Promise.all([i.e(3),i.e(4),i.e(8)]).then((function(){var e=[i(429)];(function(e){var t=e.default;n.dialogGallerySettings=new t(n.gallery,n.domain),m()(n.dialogGallerySettings).on(t.SETTINGS_UPDATED,(function(){n.uploader.status!==hi.a.STATUS_IDLE?(n.settingsSavePending=!0,E.a.hasNotification("settingsSaveDelayMessage")||E.a.open((new li.a).setId("settingsSaveDelayMessage").setTitle(v.a.p__("dialog.gallerysettings.reloaddelay","title")).setContent(v.a.p__("dialog.gallerysettings.reloaddelay","message")).setTimeout(null).setOpenImmediately(!0))):window.setTimeout((function(){window.location=n.gallery.urlRel}),500)})),n.dialogGallerySettings.open(),o()}).apply(null,e)})).catch(i.oe):(this.dialogGallerySettings.open(),o())}},{key:"openDialogShare",value:function(){var e=this;null===this.dialogGalleryShare?Promise.all([i.e(10),i.e(13)]).then((function(){var t=[i(459)];(function(t){var i=t.default;e.dialogGalleryShare=new i(e.gallery,e.domain,u.a.get("currentDomainURL")),e.dialogGalleryShare.open()}).apply(null,t)})).catch(i.oe):this.dialogGalleryShare.open()}},{key:"openDialogEvents",value:function(){var e=this;null===this.dialogEvents?i.e(91).then((function(){var t=[i(386)];(function(t){var i=t.default;e.dialogEvents=new i(e.gallery),e.dialogEvents.open()}).apply(null,t)})).catch(i.oe):this.dialogEvents.open()}},{key:"galleryToggleFav",value:function(){var e=this;this.user&&(this.gallery.isFavorite?(this.applyFavState(!1),this.user.unfavorizeGallery(this.gallery,(function(t){t||e.applyFavState(!0)}))):(this.applyFavState(!0),this.user.favorizeGallery(this.gallery,(function(t){t||e.applyFavState(!1)}))))}},{key:"applyFavState",value:function(e){var t=this.$ui.sidebarGalleryInfo.find(".action-menu .btn-toggle-fav"),i=t.find("span");e?t.addClass("active"):t.removeClass("active"),i.html(v.a.p__("gallery.actions",e?"unfavorize":"favorize"))}},{key:"galleryTruncate",value:function(){var e=this;i.e(107).then((function(){var t=[i(431)];(function(t){var i=t.default,n=new i(e.gallery);m()(n).on(i.TRUNCATED,(function(){window.location.reload()})),n.open()}).apply(null,t)})).catch(i.oe)}},{key:"galleryRemove",value:function(){var e=this;i.e(105).then((function(){var t=[i(211)];(function(t){var i=t.default,n=new i(e.gallery);m()(n).on(i.REMOVED,(function(){var t;t=e.parentGallery?e.parentGallery.urlRel:e.domain.urlRel,window.location.href=t})),n.open()}).apply(null,t)})).catch(i.oe)}},{key:"galleryRename",value:function(){var e=this;i.e(106).then((function(){var t=[i(210)];(function(t){var i=t.default,n=new i(e.gallery);m()(n).on(i.RENAMED,(function(){window.location.href=e.gallery.url})),n.open()}).apply(null,t)})).catch(i.oe)}},{key:"galleryMove",value:function(){var e=this;i.e(9).then((function(){var t=[i(214)];(function(t){var i=t.default,n=new i(e.gallery);m()(n).on(i.MOVED,(function(){window.location.href=e.gallery.url})),n.open()}).apply(null,t)})).catch(i.oe)}},{key:"initSelection",value:function(){var e=this.gallery.settings;(this.userIsOwnerOrAdmin&&!this.clientMode||e.get(j.a.ENABLE_SELECTION)||e.get(j.a.ENABLE_FLAGS)||e.get(j.a.ENABLE_DOWNLOAD))&&(this.selectionEnabled=!0,this.initSelectionMenu(),this.initRectangleSelection())}},{key:"initRectangleSelection",value:function(){var e=this,t=this.$ui.document,i={},n=!1,o=function(){var t={};i.left<i.right?(t.left=i.left,t.width=i.right-i.left):(t.left=i.right,t.width=i.left-i.right),i.top<i.bottom?(t.top=i.top,t.height=i.bottom-i.top):(t.top=i.bottom,t.height=i.top-i.bottom),e.$ui.selectionRectangle.css(t)};t.on("keydown",(function(t){-1!==[16,18].indexOf(t.keyCode)&&(n=!0,e.$ui.selectionRectangle.addClass("reverse"))})),t.on("keyup",(function(t){-1!==[16,18].indexOf(t.keyCode)&&(n=!1,e.$ui.selectionRectangle.removeClass("reverse"))})),t.on("mousedown",(function(a){1===a.which&&m()(a.target).hasClass("rst")&&(a.preventDefault(),a.stopPropagation(),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),t.trigger("mousedown"),i.left=i.right=a.pageX,i.top=i.bottom=a.pageY,o(),e.$ui.selectionRectangle.stop().fadeIn(100),t.on("mousemove.sel",(function(e){i.right=e.pageX,i.bottom=e.pageY,o()})),t.on("mouseup.sel",(function(){t.off(".sel"),e.$ui.selectionRectangle.stop().fadeOut(100),e.selectionExecute(i,n)})))}))}},{key:"selectionExecute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={};e.left<e.right?(i.left=e.left,i.right=e.right):(i.left=e.right,i.right=e.left),e.top<e.bottom?(i.top=e.top,i.bottom=e.bottom):(i.top=e.bottom,i.bottom=e.top);var n=[];this.viewsFiles.each((function(e){var t=e.$dom,o=t.offset();i.left<o.left+t.width()&&i.right>o.left&&i.top<o.top+t.height()&&i.bottom>o.top&&n.push(e.file)})),0!==n.length&&(t?this.deselectFiles(n):this.selectFiles(n))}},{key:"addOrUpdateFileViews",value:function(e){for(var t,i,n=!this.userIsOwnerOrAdmin||this.clientMode,o=[],a=0,r=e.length;a<r;a++)t=e[a],n&&t.status===Z.a.LIMIT_LOCKED||(null!==(i=this.viewFileGetByFile(t))&&(this.viewFileRemove(i),i.finalize()),o.push(t));for(var s,l=this.viewsFilesCreate(o),u={},c=this.fileSorter.currentSortOrder,h=0,d=l.length;h<d;h++){s=l[h];var f=this.fileSorter.getGroupForFile(s.file,c),p=void 0;(p=this.viewsSections.has(f.id)?this.viewsSections.get(f.id):this.provideSection(f.id,M.a.parseGroupName(f.id,this.fileSorter.currentSortOrder),this.userIsOwnerOrAdmin&&!this.clientMode)).id in u||(u[p.id]=[]),u[p.id].push(s)}for(var v in u)this.viewsSections.get(v).addFileViews(u[v])}},{key:"initDragAndDrop",value:function(){var e=this;if(window.FileReader&&(this.userIsOwnerOrAdmin&&!this.clientMode||this.gallery.settings.get(j.a.ENABLE_GUEST_UPLOAD))){var t=function(){null!==e.viewDnDHint&&e.viewDnDHint.unhighlight(),e.dropHintTimeout=window.setTimeout((function(){E.a.close("dropIndication"),e.dropHintTimeout=null}),1e3)};Dt.a.setBackgroundTarget({onValidateLoad:function(e,t){if(e)return 0;if(t){if(0!==t.types.length){var i=!1;for(var n in t.types)if("Files"===t.types[n]){i=!0;break}if(!i)return 0}return 1}return 0},onDragEnter:function(){null!==e.viewDnDHint&&e.viewDnDHint.highlight(),null!==e.dropHintTimeout?(window.clearTimeout(e.dropHintTimeout),e.dropHintTimeout=null):E.a.open((new li.a).setId("dropIndication").setContent("Datei hier ablegen, um sie hochzuladen."))},onDragLeave:t,onDrop:function(i,n){t(),n&&n.files&&n.files.length>0&&e.uploader.upload(n.files),E.a.close("dropIndication"),E.a.close("uploadCompleteMessage")}})}this.userIsOwnerOrAdmin&&this.parentGallery&&0!==this.$ui.sidebarNavBack.length&&Dt.a.registerTarget(this.$ui.sidebarNavBack[0],{onValidateLoad:function(e){if(e&&e.load){if("gallery"===e.load.type)return 1;if("files"===e.load.type)return 1}return 0},onDrop:function(t){if(t.load)if("gallery"===t.load.type){var n=t.load.content,o=e.parentGallery;if(n.parentGalleryUuid===o.uuid||0===o.path.indexOf(n.path))return;i.e(104).then((function(){var e=[i(209)];(function(e){var t=e.default,i=new t(n,o);m()(i).on(t.MOVED,(function(){E.a.open((new li.a).setContent(v.a.p__("gallery.move","message_success",n.name,o.name)).setLevel(li.a.LEVEL_SUCCESS))})),i.open()}).apply(null,e)})).catch(i.oe)}else if("files"===t.load.type){var a=t.load.content,r=[];for(var s in a)r.push(a[s].uuid);i.e(5).then((function(){var t=[i(216)];(function(t){var i=t.default;new i(e.domain,e.gallery,r,i.MODE_MOVE,e.parentGallery.uuid)}).apply(null,t)})).catch(i.oe)}}})}},{key:"initBreadcrumb",value:function(){var e=this;if(this.userIsOwnerOrAdmin&&!this.clientMode){var t=u.a.get("upperHierarchy");if(t){for(var i=[],n=0;n<t.length;n++)i.push(d.a.instantiateFromExport(this.domain,t[n]));this.viewBreadcrumb=new Se(this.domain,i),m()(this.viewBreadcrumb).on(Se.REQUEST_CREATE_SUBGALLERY,(function(){return e.createSubGallery()})),this.headerBar.addPlainContent(this.viewBreadcrumb.$dom,le.a.LOCATION_LEFT),this.viewBreadcrumb.$dom.hide().fadeIn(200),this.headerBar.updateBarMinification(!0)}}}},{key:"addToFileInsertStack",value:function(e){this.fileInsertStack=this.fileInsertStack.concat(e),I()&&(null===this.fileInsertFCT&&(this.fileInsertFCT=new fi.a(1e3,this.computeFileInsertStack.bind(this))),this.fileInsertFCT.trigger())}},{key:"computeFileInsertStack",value:function(){if(0!==this.fileInsertStack.length){var e=this.fileInsertStack;this.fileInsertStack=[];for(var t,i={},n=[],o=0;o<e.length;o++)t=e[o],"uuid"in i||(i[t]=null,n.push(t));this.getAndInsertFiles(n),this.fileInsertFCT&&this.fileInsertFCT.setDelay(Math.floor(2e3*C.a.constrain(this.files.count()/100,0,1)+1e3))}}},{key:"getAndInsertFiles",value:function(e){var t=this;F.a.filesByUuid(this.gallery,e,["file-number","file-image","image-thumbnails","image-num-comments"]).then((function(e){return t.insertFiles(e)}))}},{key:"insertFiles",value:function(e){this.files.add(e),this.addOrUpdateFileViews(e),this.resortSectionsAndFileViews(),this.checkUploads(),this.checkNumFiles(),xe.a.getInstance().check()}},{key:"rebuildSections",value:function(){var e=this.$ui.viewport.scrollTop();if(this.clearSections(),0!==this.fileSorter.fileGroups.length)for(var t,i,n,o,a=0,r=this.fileSorter.fileGroups.length;a<r;a++){t=this.fileSorter.fileGroups[a],i=this.provideSection(t.id,M.a.parseGroupName(t.id,this.fileSorter.currentSortOrder),this.userIsOwnerOrAdmin&&!this.clientMode),n=[];for(var s=0,l=t.files.length;s<l;s++)o=t.files[s],(this.userIsOwnerOrAdmin&&!this.clientMode||o.status!==Z.a.LIMIT_LOCKED)&&this.viewsFiles.has(o.uuid)&&n.push(this.viewsFiles.get(o.uuid));i.addFileViews(n)}this.appendDNDHintToLastSection(),this.layout===q.a.MASONRY&&this.viewsSections.each((function(e){return e.masonryUpdate()})),this.$ui.viewport.scrollTop(e),xe.a.getInstance().check()}},{key:"appendDNDHintToLastSection",value:function(){if(this.viewDnDHint){var e;if(0!==this.fileSorter.fileGroups.length)try{e=this.viewsSections.get(this.fileSorter.fileGroups[this.fileSorter.fileGroups.length-1].id)}catch(e){}e||(e=this.provideSection("dnd_holder",void 0,!1)),"dnd_holder"!==e.id&&this.removeSection("dnd_holder"),e.setDndHint(this.viewDnDHint)}}},{key:"updateSectionWidth",value:function(){var e=this.$ui.filesContainer.width();this.viewsSections.each((function(t){return t.setWidth(e)}))}},{key:"calculateGalleryBoxWidth",value:function(){var e=this.$ui.subGalleriesContainer.width()-20;this.galleryBoxWidth=L.a.calculateDynamicColWidth(e,250,20)}},{key:"updateSubGalleriesWidth",value:function(){this.calculateGalleryBoxWidth();for(var e=0;e<this.viewsSubGalleries.length;e++)this.viewsSubGalleries[e].setWidth(this.galleryBoxWidth);this.$ui.btnCreateSubGallery.css("width",this.galleryBoxWidth)}},{key:"clearSections",value:function(){this.viewsSections.each((function(e){return e.finalize()})),this.viewsSections.clear()}},{key:"provideSection",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.viewsSections.has(e))return this.viewsSections.get(e);var n=(new Bn.a).setAdminModeEnabled(i).setSelectionEnabled(this.selectionEnabled).setFlagsEnabled(this.gallery.settings.get(j.a.ENABLE_FLAGS)).setDownloadEnabled(this.gallery.settings.get(j.a.ENABLE_DOWNLOAD)).setCommentsEnabled(this.gallery.settings.get(j.a.ENABLE_COMMENTS)),o=new xt.a(e,this.layout,t,n);this.layout===q.a.MASONRY?o.addLayoutBreakpoints([new X.a(0,10,250)]):this.layout===q.a.GRID&&o.addLayoutBreakpoints([new X.a(0,20,180)]),o.setWidth(this.$ui.filesContainer.width()),this.viewsSections.set(e,o);var a=m()(o);return a.on(xt.a.REQUEST_DOWNLOAD,this.handleFileSectionRequestDownload.bind(this)),a.on(xt.a.REQUEST_SELECTION,this.handleFileSectionRequestSelection.bind(this)),this.$ui.filesContainer.append(o.$dom),o}},{key:"removeSection",value:function(e){this.viewsSections.has(e)&&(this.viewsSections.get(e).finalize(),this.viewsSections.remove(e))}},{key:"resortSectionsAndFileViews",value:function(){for(var e,t,i=0,n=this.fileSorter.fileGroups.length;i<n;i++)e=this.fileSorter.fileGroups[i],t=this.viewsSections.get(e.id),this.$ui.filesContainer.append(t.$dom),t.arrangeFileViews(e.files);this.appendDNDHintToLastSection()}},{key:"initPresets",value:function(){var e=this;this.gallery.settings.get(j.a.ENABLE_SELECTION)&&(this.presets.each((function(t){t.initialize(),e.registerPreset(t)})),this.presets.addEventListener(oe.a.PRESET_ADDED,(function(t){return e.registerPreset(t.getPreset())})),this.presets.addEventListener(oe.a.PRESET_REMOVED,(function(t){return e.unregisterPreset(t.getPreset())})),this.$ui.btnInitNewPreset.on("click",(function(t){t.preventDefault(),null!==e.currentPreset&&e.currentPreset.status!==p.a.STATUS_READY||e.initNewPreset()})),this.$ui.btnSelectAll.on("click",(function(t){t.preventDefault();var i=[];e.files.each((function(e){!0===e.visible&&i.push(e)})),e.selectFiles(i)})))}},{key:"registerPreset",value:function(e){var t=this,i=new Tt(e,this.userIsOwnerOrAdmin&&!this.clientMode,!0,this.userIsOwnerOrAdmin&&!this.clientMode);this.viewPresetAdd(i),e.addEventListener(p.a.CLONED,(function(e){e.get("clone").addEventListenerOnce(p.a.SAVED,t.handlePresetSaved.bind(t))})),e.addEventListener(p.a.REMOVED,this.handlePresetRemoved.bind(this)),e===this.currentPreset&&i.activate(),this.$ui.sidebarSelection.find(".presets").append(i.$dom)}},{key:"unregisterPreset",value:function(e){var t=this;this.currentPreset===e&&this.deactivatePresets();var i=this.viewPresetGetByPreset(e);return null!==i&&i.$dom.fadeOut(300,(function(){i.$dom.remove(),t.viewPresetRemove(i)})),!0}},{key:"applyFilter",value:function(){this.viewGalleryFilter&&this.viewGalleryFilter.update()}},{key:"selectFiles",value:function(e){null===this.currentPreset?this.initNewPreset(e):this.currentPreset.addFiles(e);for(var t=0;t<e.length;t++)e[t].select();this.checkSidebarButtonsActiveState()}},{key:"deselectFiles",value:function(e){null!==this.currentPreset&&(this.currentPreset.removeFiles(e),this.currentPreset.status===p.a.STATUS_RAW&&0===this.currentPreset.getNumFiles()&&this.deactivatePresets());for(var t=0,i=e.length;t<i;t++)e[t].deselect();this.checkSidebarButtonsActiveState()}},{key:"initNewPreset",value:function(e){var t=new p.a(this.gallery);t.initialize(),t.addEventListenerOnce(p.a.SAVED,this.handlePresetSaved.bind(this)),t.addEventListener([p.a.FILES_ADDED,p.a.FILES_REMOVED],this.handleRawPresetFilesUpdated.bind(this)),e instanceof Array&&t.addFiles(e),this.activatePreset(t)}},{key:"activatePreset",value:function(e){if(this.currentPreset!==e){this.deactivatePresets(!1,!1);var t=this.viewPresetGetByPreset(e);null!==t&&t.activate(),this.files.each((function(t){return e.hasFile(t)?t.select():t.deselect()})),this.currentPreset=e,this.viewSelectionMenu.setPreset(e),this.viewSelectionMenu.show(),this.checkSidebarButtonsActiveState()}}},{key:"deactivatePresets",value:function(e,t){if(null!==this.currentPreset){var i=this.currentPreset,n=this.viewPresetGetByPreset(i);null!==n&&n.deactivate(),!1!==e&&this.files.each((function(e){return e.deselect()})),this.currentPreset=null,!1!==t&&this.viewSelectionMenu.hide(),this.checkSidebarButtonsActiveState(),i.status===p.a.STATUS_RAW&&this.fileSelectionCache.clear()}}},{key:"bumpFooter",value:function(){if(0!==this.$ui.footerSpacer.length){this.$ui.footerSpacer.css("height",this.$ui.footer.outerHeight()),O.a.update();var e=this.$dom.height()-O.a.getHeight();this.pmExitButtonOffsetBottom=e-this.$ui.footerSpacer.outerHeight(),this.handleScroll()}}},{key:"viewFileGetByFile",value:function(e){var t=null;try{t=this.viewsFiles.get(e.uuid)}catch(e){}return t}},{key:"viewsFilesCreate",value:function(e){var t,i=this.gallery.settings,n=(new Bn.a).setGallery(this.gallery).setFileInformationEnabled(i.get(j.a.ENABLE_FILE_INFORMATION)).setSelectionEnabled(this.selectionEnabled).setDownloadEnabled(i.get(j.a.ENABLE_DOWNLOAD)&&this.gallery.status!==J.a.LIMIT_LOCKED).setFlagsEnabled(i.get(j.a.ENABLE_FLAGS)).setCommentsEnabled(i.get(j.a.ENABLE_COMMENTS)).setAdminModeEnabled(this.userIsOwnerOrAdmin&&!this.clientMode);switch(this.layout){case q.a.GRID:t=tt;break;case q.a.MASONRY:t=ct;break;case q.a.LIST:t=wt;break;default:throw"invalid display type"}for(var o,a,r=[],s=this.handleFileViewRequestDetailView.bind(this),l=this.handleFileViewRequestMetaInformationView.bind(this),u=this.handleFileViewRequestHeaderImage.bind(this),c=this.handleFileViewRequestTeaserImage.bind(this),h=this.handleFileViewRequestColorFlag.bind(this),d=0;d<e.length;d++)(a=new t(o=e[d],n)).addEventListener(Mn.a.REQUEST_DETAIL_VIEW,s,"pgv"),a.addEventListener(Mn.a.REQUEST_META_INFORMATION_VIEW,l,"pgv"),a.addEventListener(Mn.a.REQUEST_HEADER_IMAGE,u,"pgv"),a.addEventListener(Mn.a.REQUEST_TEASER_IMAGE,c,"pgv"),a.addEventListener(Mn.a.REQUEST_COLOR_FLAG,h,"pgv"),r.push(a),this.viewsFiles.set(o.uuid,a);return r}},{key:"viewFileRemove",value:function(e){e.removeEventListenersByNamespace("pgv"),this.viewsFiles.remove(e.file.uuid)}},{key:"viewPresetGetByPreset",value:function(e){for(var t=0;t<this.viewsPresets.length;t++)if(this.viewsPresets[t].preset===e)return this.viewsPresets[t];return null}},{key:"viewPresetAdd",value:function(e){var t=this;this.viewsPresets.push(e);var i=m()(e);i.on(Tt.REQUEST_ACTIVATION_TOGGLE,(function(e){e.target.active?t.deactivatePresets():t.activatePreset(e.target.preset)})),i.on(Tt.REQUEST_SOLO_ENABLE,(function(e,i){t.viewGalleryFilter.addPreset(i)})),i.on(Tt.REQUEST_SOLO_DISABLE,(function(e,i){t.viewGalleryFilter.removePreset(i)}))}},{key:"viewPresetRemove",value:function(e){for(var t=0,i=this.viewsPresets.length;t<i;t++)if(this.viewsPresets[t]===e){this.viewsPresets.splice(t,1);break}}},{key:"initSubGalleries",value:function(){var e=this;if(this.gallery.settings.get(j.a.ENABLE_VIEW_SUBGALLERIES)||this.userIsOwnerOrAdmin&&!this.clientMode){var t=new he.a(this.domain,"/".concat(this.gallery.urlRelDom)).setDepth(1).setIncludeTeaserImage(!0);!0===this.clientMode&&t.setRoleOverride(he.a.ROLE_OVERRIDE_GUEST),ce.a.getNavigation(t).then((function(t){e._initSubGalleriesInSidebar(t),e._initSubGalleriesInFooter(t)}))}}},{key:"_initSubGalleriesInSidebar",value:function(e){0!==e.getNavigationElements().length&&(this.viewGalleryListing=new Ct.a({dragAndDrop:this.userIsOwnerOrAdmin&&!this.clientMode,sortOrder:this.gallery.settings.get(j.a.SUB_GALLERY_SORT_ORDER),menu:this.userIsOwnerOrAdmin&&!this.clientMode,lazyLoadSubEntries:!0}),this.viewGalleryListing.initWithNavigationRequestOrResult(e),this.$ui.sidebarNavigation.find(".lower-hierarchy").append(this.viewGalleryListing.$dom),this.$ui.sidebarNavigation.removeClass("hidden"),this.updateSidebarScrolling())}},{key:"_initSubGalleriesInFooter",value:function(e){for(var t=e.getNavigationElements(),i=[],n=0,o=t.length;n<o;n++)i.push(t[n].getGallery());this.subGalleries=i;for(var a,r,s=this.$ui.subGalleriesContainer.find(".clearfix"),l=0,u=this.subGalleries.length;l<u;l++)((a=this.subGalleries[l]).status!==J.a.LIMIT_LOCKED||this.userIsOwnerOrAdmin&&!this.clientMode)&&(r=new ke.a(a,this.userIsOwnerOrAdmin&&!this.clientMode,!1),this.viewsSubGalleries.push(r),s.before(r.$dom),a.addEventListener(K.a.MOVED,(function(e){var t=e.target;t.parentGalleryUuid!==t.uuid&&t.removeApply()})));this.updateSubGalleriesWidth(),xe.a.getInstance().check(),this.bumpFooter(),this.$ui.subGalleriesContainer.find(".setting-info").css("display","block")}},{key:"showFileMetaDialog",value:function(e){var t=this;null!==this.dialogFileMeta?this.dialogFileMeta.open(e):i.e(90).then((function(){var n=[i(432)];(function(i){var n=i.default;t.dialogFileMeta=new n(t.fileSorter.filesOrdered,t.gallery),t.dialogFileMeta.open(e)}).apply(null,n)})).catch(i.oe)}},{key:"showLimitLockMessage",value:function(e){if(this.userIsOwnerOrAdmin&&!this.clientMode&&!E.a.hasNotification("dialoglimitlocked")){var t=m()('<div id="dialog-limit-locked-container"></div>');this.$ui.paddedContent.prepend(t);var n=function(e){E.a.open((new Un.a).setId("dialoglimitlocked").setTitle(v.a.p__("gallery.limitationmessage","title")).setContent(e).setContainer(t).setLevel(Un.a.LEVEL_WARNING))};"file"===e?i.e(120).then((function(){var e=[i(433)];(function(e){n(m()(e()))}).apply(null,e)})).catch(i.oe):i.e(121).then((function(){var e=[i(434)];(function(e){n(m()(e()))}).apply(null,e)})).catch(i.oe)}}},{key:"initSocketIO",value:function(){var e=this;this.socket=w.a.connect("/",{transports:["websocket","polling"]});var t=this.verbose;this.socket.on("connect",(function(){e.socket.emit("subscribe","".concat(u.a.get("env"),"/gallery/").concat(e.gallery.uuid)),t&&k.a.log("Socket.IO connected")})),this.socket.on("disconnect",(function(){t&&k.a.log("Socket.IO disconnected")})),this.socket.on("error",(function(e){t&&k.a.log("Socket.IO error ".concat(e))})),this.socket.on("event",this.handleSocketEvent.bind(this)),this.verbose&&k.a.log("Socket.IO initialized")}},{key:"checkNumFiles",value:function(){var e=this.files.count(),t=this.viewGalleryFilter&&this.viewGalleryFilter.filterActive;this.$ui.sidebarFilter.toggleClass("hidden",0===e),this.$ui.sidebarSort.toggleClass("hidden",e<=1),this.$ui.sidebarDownload.toggleClass("hidden",0===e),this.$ui.sidebarSelection.toggleClass("hidden",0===e),e>0&&(0!==this.$ui.btnDownloadAll.length&&(t?this.$ui.btnDownloadAll.text(v.a.np__("gallery.view.desktop.js","sidebar_btn_downloadsubset_label","sidebar_btn_downloadsubset_label",this.viewGalleryFilter.matchCount,this.viewGalleryFilter.matchCount)):this.$ui.btnDownloadAll.text(v.a.np__("gallery.view.desktop.js","sidebar_btn_downloadall_label","sidebar_btn_downloadall_label",e,e))),0!==this.$ui.btnSelectAll.length&&(t?this.$ui.btnSelectAll.text(v.a.np__("gallery.view.desktop.js","sidebar_btn_selectsubset_label","sidebar_btn_selectsubset_label",this.viewGalleryFilter.matchCount,this.viewGalleryFilter.matchCount)):this.$ui.btnSelectAll.text(v.a.np__("gallery.view.desktop.js","sidebar_btn_selectall_label","sidebar_btn_selectall_label",e,e)))),this.checkSidebarButtonsActiveState(),this.updateSidebarScrolling()}},{key:"checkSidebarButtonsActiveState",value:function(){var e=this.viewGalleryFilter,t=!1;e&&e.filterActive&&0===e.matchCount&&(t=!0),t?this.$ui.btnDownloadAll.addClass("disabled"):this.$ui.btnDownloadAll.removeClass("disabled"),this.$ui.btnInitNewPreset.toggleClass("disabled",Boolean(this.currentPreset));var i=!1;this.files.countSelectedFiles()===this.files.count()&&(i=!0),!i&&e&&e.filterActive&&0===e.matchCount&&(i=!0),i?this.$ui.btnSelectAll.addClass("disabled"):this.$ui.btnSelectAll.removeClass("disabled")}},{key:"checkUploads",value:function(){if(!this.userIsOwnerOrAdmin||this.clientMode){var e=!1;this.files.each((function(t){return"uploading"!==t.status||(e=!0,!1)})),this._setUploadMessage(e)}}},{key:"_setUploadMessage",value:function(e){if(void 0===e&&(e=!0),e){if(!1!==this.setUploadMessageTimeout&&(window.clearTimeout(this.setUploadMessageTimeout),this.setUploadMessageTimeout=!1),E.a.hasNotification("externalUploadMessage"))return;var t=m()('<div id="upload-message"><span>'.concat(v.a.p__("dialog.gallery.uploading.js","message"),'</span><div class="pd-progress-bar pending" style="width: 100%; height: 8px; margin-top: 5px;"></div></div>'));E.a.open((new li.a).setId("externalUploadMessage").setTitle(v.a.p__("dialog.gallery.uploading.js","title")).setContent(t).setTimeout(null))}else!1===this.setUploadMessageTimeout&&(this.setUploadMessageTimeout=window.setTimeout((function(){E.a.close("externalUploadMessage")}),5e3))}},{key:"showUploadCompleteMessage",value:function(e){var t=this;null!==this.dialogUploadComplete?this.dialogUploadComplete.open(e):i.e(112).then((function(){var n=[i(435)];(function(i){var n=i.default;t.dialogUploadComplete=new n,m()(t.dialogUploadComplete).on(n.REQUEST_GALLERY_SETTINGS,(function(){t.openDialogGallerySettings()})),m()(t.dialogUploadComplete).on(n.REQUEST_SHARE_GALLERY,(function(){t.openDialogShare()})),m()(t.dialogUploadComplete).on(n.REQUEST_SELECT_UPLOADED_FILES,(function(e,i){var n=[];t.files.each((function(e){-1!==i.indexOf(e.uuid)&&n.push(e)})),t.initNewPreset(n)})),t.dialogUploadComplete.open(e)}).apply(null,n)})).catch(i.oe)}},{key:"updateFilterIfActive",value:function(){this.viewGalleryFilter&&this.viewGalleryFilter.filterActive&&this.viewGalleryFilter.update()}},{key:"hintFile",value:function(e){var t=this.viewFileGetByFile(e);if(null!==t){var i=this.$ui.viewport.scrollTop(),n=this.$ui.viewport.height(),o=(Ai.a.iOSFix.active?i:0)+t.$dom.offset().top+.5*t.$dom.outerHeight(),a=(o-i)/n;a<.2||a>.8?(y.default.to(this.$ui.viewport,{scrollTo:{y:Math.max(o-.5*n,0)},duration:.8,ease:"power2.out"}),window.setTimeout((function(){return t.hint()}),800)):t.hint()}}},{key:"downloadAllVisibleFiles",value:function(){var e=this;this.$ui.btnDownloadAll.addClass("pending");var t=[];this.files.each((function(e){e.visible&&t.push(e.uuid)})),Promise.all([i.e(2),i.e(7)]).then((function(){var n=[i(460),i(436)];(function(i,n){var o=i.default,a=n.default;o.downloadGalleryFiles(e.gallery,t).then((function(t){var i=new a(t);i.open(),t.awaitDownloadReady().then((function(t){$.default.triggerDownload(t),e.$ui.btnDownloadAll.removeClass("pending")})),t.awaitDownloadError().then((function(){i.close(),e.$ui.btnDownloadAll.removeClass("pending"),E.a.open(v.a.p__("files.zipdownload","error_download"),{level:"error"})}))})).catch((function(){E.a.open((new li.a).setContent(v.a.p__("files.zipdownload","error_general")).setLevel(li.a.LEVEL_ERROR)),e.$ui.btnDownloadAll.removeClass("pending")}))}).apply(null,n)})).catch(i.oe)}},{key:"createSubGallery",value:function(){var e=this;i.e(93).then((function(){var t=[i(393)];(function(t){var i=t.default,n=new i(e.gallery.domain,e.gallery);m()(n).on(i.CREATED,(function(e,t){window.location.href=t.url})),n.open()}).apply(null,t)})).catch(i.oe)}},{key:"sortSubGalleries",value:function(){var e=this;i.e(87).then((function(){var t=[i(437)];(function(t){new(0,t.default)(e.gallery,e.subGalleries).open()}).apply(null,t)})).catch(i.oe)}},{key:"openFeedbackDialog",value:function(){var e=this;null===this.dialogFeedback?i.e(102).then((function(){var t=[i(438)];(function(t){var i=t.default;e.dialogFeedback=new i(e.visitor.user,e.gallery),e.dialogFeedback.open()}).apply(null,t)})).catch(i.oe):this.dialogFeedback.open()}},{key:"getFileUnderCursor",value:function(){for(var e=x.a.getClientPosition(),t=m()(document.elementFromPoint(e.x,e.y));0!==t.length;){if(t.hasClass("entry")){var i=t.attr("data-uuid");if(i)return this.files.getFileByUuid(i);break}t=t.parent()}return null}},{key:"activateHelp",value:function(){null===this.helpBeacons&&(this.helpBeacons=[],this.helpBeacons.push(new Hn(m()("#header-bar")[0],"header bar",{beacon_orientation:Hn.ORIENTATION_SOUTH,content_orientation:Hn.ORIENTATION_SOUTH,content_trigger:Hn.CONTENT_TRIGGER_HOVER})),this.helpBeacons.push(new Hn(m()("#sidebar")[0],"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est.",{beacon_orientation:Hn.ORIENTATION_NORTH_EAST,content_orientation:Hn.ORIENTATION_SOUTH_EAST,content_trigger:Hn.CONTENT_TRIGGER_INIT})),this.helpBeacons.push(new Hn(m()("#dnd-hint")[0],"upload",{beacon_orientation:Hn.ORIENTATION_NORTH_EAST,content_orientation:Hn.ORIENTATION_SOUTH_EAST,content_trigger:Hn.CONTENT_TRIGGER_HOVER})),this.helpBeacons.push(new Hn(m()("#sub-galleries-container").find(".create-gallery-button")[0],"create sub gallery",{beacon_orientation:Hn.ORIENTATION_EAST,content_orientation:Hn.ORIENTATION_EAST,content_trigger:Hn.CONTENT_TRIGGER_HOVER})),this.helpBeacons.push(new Hn(m()("#feedback-button")[0],"feedback form",{beacon_orientation:Hn.ORIENTATION_NORTH_EAST,content_orientation:Hn.ORIENTATION_NORTH_EAST,content_trigger:Hn.CONTENT_TRIGGER_HOVER})),console.log("help beacons activated"))}},{key:"deactivateHelp",value:function(){if(null!==this.helpBeacons){for(var e=0;e<this.helpBeacons.length;e++)this.helpBeacons[e].finalize(!0);this.helpBeacons=null,console.log("help beacons deactivated")}}},{key:"addSugarAndSpice",value:function(){var e=this,t=0,n=0;this.$ui.sidebar.find("#sidebar-gallery-info .name").on("click",(function(){var o=Date.now();o-n<500?5==++t&&0!==e.files.count()&&i.e(86).then((function(){var t=[i(456)];(function(t){var i=new(0,t.default)(e.files.export());m()("body").append(i.getDomElement()),i.show()}).apply(null,t)})).catch(i.oe):t=1,n=o}))}},{key:"handleDocumentVisibilityChange",value:function(e){e&&this.computeFileInsertStack()}},{key:"handleDropTraverseFileTree",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e.isFile)e.file((function(e){return t.uploader.upload(e)}));else if(e.isDirectory){var n=e.createReader();n.readEntries((function(n){for(var o in n)t.handleDropTraverseFileTree(n[o],i+e.fullPath)}))}}},{key:"handleSocketEvent",value:function(e){this.executeEvent(Ln.createFromExport(e))}},{key:"executeEvent",value:function(e){var t,n=this;switch(this.verbose&&k.a.log("Event: ".concat(e.type),e),e.type){case Ln.FILE_UPLOAD_STARTED:this.addToFileInsertStack([e.fileUuid]);break;case Ln.FILE_UPLOAD_ERROR:null!==(t=this.files.getFileByFilename(e.filename))&&t.removeApply();break;case Ln.FILE_CREATED:case Ln.FILE_UPDATED:this.addToFileInsertStack([e.fileUuid]);break;case Ln.FILE_THUMBNAILS_UPDATED:null!==(t=this.files.getFileByUuid(e.fileUuid))&&t.image&&te.a.loadImageThumbnails(t);break;case Ln.FILE_STORED:null!==(t=this.files.getFileByUuid(e.fileUuid))&&t.removeApply();break;case Ln.FILES_MOVED_TO:for(var o=0;o<e.fileUuids.length;o++)null!==(t=this.files.getFileByUuid(e.fileUuids[o]))&&t.removeApply();break;case Ln.FILES_MOVED_FROM:this.addToFileInsertStack(e.fileUuids);break;case Ln.IMAGE_FLAG_CHANGED:null!==(t=this.files.getFileByUuid(e.fileUuid))&&t.setFlag(e.flag);break;case Ln.IMAGE_COMMENT_CREATED:if(null===(t=this.files.getFileByUuid(e.imageUuid))||!t.image)break;var a=t.image;T.a.get("/ajax/comments/id:".concat(e.commentId),{responseType:T.a.RESPONSETYPE_JSON,onComplete:function(e){if(e.success){var t=new re.a(e.comment);a.addCommentApply(t)}}});break;case Ln.IMAGE_COMMENT_REMOVED:if(null!==(t=this.files.getFileByUuid(e.imageUuid))&&t.image){var r=t.image.getCommentById(e.commentId);r&&r.removeApply()}break;case Ln.GALLERY_TRUNCATED:e.galleryUuid===this.gallery.uuid&&(this.gallery.truncateApply(),E.a.open((new li.a).setTitle(v.a.p__("notification.gallery_truncated","title")).setContent(v.a.p__("notification.gallery_truncated","message"))));break;case Ln.GALLERY_STORED:e.galleryUuid===this.gallery.uuid&&E.a.open((new Pt.a).setTitle(v.a.p__("notification.gallery_removed","title")).setContent(v.a.p__("notification.gallery_removed","message")).setLevel(Pt.a.LEVEL_ERROR).setIsCloseable(!1));break;case Ln.GALLERY_MOVED:if(e.galleryUuid===this.gallery.uuid){var s="/".concat(this.gallery.domain.name,"/").concat(e.galleryPathNew);E.a.open((new Pt.a).setTitle(v.a.p__("notification.gallery_moved","title")).setContent(v.a.p__("notification.gallery_moved","message",s)).setLevel(Pt.a.LEVEL_WARNING).setIsCloseable(!1))}break;case Ln.HEADER_IMAGE_UPDATED:null!==this.viewHeaderImage&&Promise.resolve().then((function(){var t=[i(59)];(function(t){var i=t.default;if(null===e.data.headerImage)n.viewHeaderImage.unsetHeaderImage();else{var o=new i(e.data.headerImage,n.gallery);n.viewHeaderImage.setHeaderImage(o)}}).apply(null,t)})).catch(i.oe)}}},{key:"handleFileViewRequestDetailView",value:function(e){var t=e.target.file;this.pdbox.open(this.fileSorter.filesOrdered,t.uuid)}},{key:"handleFileViewRequestMetaInformationView",value:function(e){this.showFileMetaDialog(e.target.file)}},{key:"handleFileViewRequestHeaderImage",value:function(e){var t=e.target.file;"image"===t.filetype&&this.viewHeaderImage&&(this.viewHeaderImage.openEditDialog(),this.viewHeaderImage.dialogEdit.actionSetGalleryFile(t),y.default.to(window,{scrollTo:{y:0},duration:.8,ease:"power2.out"}))}},{key:"handleFileViewRequestTeaserImage",value:function(e){var t=this,n=e.target.file;"image"===n.filetype&&T.a.post("/ajax/galleries/uuid:".concat(this.gallery.uuid,"/setgalleryimage"),{dataType:T.a.DATATYPE_JSON,data:{fileUuid:n.uuid},responseType:T.a.RESPONSETYPE_JSON,onComplete:function(e){e.success?i.e(103).then((function(){var n=[i(439)];(function(i){new(0,i.default)(d.a.instantiateFromExport(t.domain,e.gallery)).open()}).apply(null,n)})).catch(i.oe):E.a.open((new li.a).setContent(v.a.p__("dialog.galleryimage.set","error_general")).setLevel(li.a.LEVEL_ERROR))},lock:!0})}},{key:"handleFileViewRequestColorFlag",value:function(e){te.a.setFileFlag(e.target.file,this.domain.uuid,e.getFlag())}},{key:"handleHeaderImageUpdated",value:function(e,t){null===t?this.disableMouseWheelHijack():this.enableMouseWheelHijack(),this.sidebarFlowingOffsetTop=this.$ui.sidebarWrapper.offset().top,this.handleScroll()}},{key:"handleFileSelectionChanged",value:function(e){if("userinput"===(e.has("origin")?e.get("origin"):void 0)){var t=e.target;t.selected?this.selectFiles([t]):this.deselectFiles([t]),this.updateFilterIfActive()}}},{key:"handleFileFlagChanged",value:function(){var e=this;this.fileSorter.currentSortOrder===G.a.FLAG&&(this.flagResortTimeout&&window.clearTimeout(this.flagResortTimeout),this.flagResortTimeout=window.setTimeout((function(){e.fileSorter.resort(),e.flagResortTimeout=null}),1e3)),this.updateFilterIfActive()}},{key:"handleImageCommentsChanged",value:function(){this.updateFilterIfActive()}},{key:"handlePresetSaved",value:function(e){this.presets.add(e.target),this.activatePreset(e.target),this.fileSelectionCache.clear()}},{key:"handlePresetRemoved",value:function(e){this.presets.remove(e.target)}},{key:"handleFileBagFilesAdded",value:function(e){var t=e.getFiles();this.fileSorter.addFiles(t),this.registerFileEventListeners(t),this.updateFilenameShortification()}},{key:"handleFileBagFilesRemoved",value:function(e){var t=e.getFiles();this.fileSorter.removeFiles(t),this.unregisterFileEventListeners(t);for(var i,n=0,o=t.length;n<o;n++){i=t[n];var a=this.viewFileGetByFile(i);null!==a&&this.viewFileRemove(a)}this.updateFilenameShortification(),this.checkNumFiles()}},{key:"handleFileRemoved",value:function(e){this.files.remove([e.target]),this.deselectFiles([e.target])}},{key:"handleFileSectionRequestDownload",value:function(e){for(var t=this,n=e.target,o=[],a=0;a<n.views.length;a++)n.views[a].file.visible&&o.push(n.views[a].file.uuid);Promise.all([i.e(2),i.e(7)]).then((function(){var e=[i(460),i(436)];(function(e,i){var n=e.default,a=i.default;n.downloadGalleryFiles(t.gallery,o).then((function(e){var t=new a(e);t.open(),e.awaitDownloadReady().then((function(e){$.default.triggerDownload(e)})),e.awaitDownloadError().then((function(){t.close(),E.a.open(v.a.p__("files.zipdownload","error_download"),{level:"error"})}))})).catch((function(){E.a.open((new li.a).setContent(v.a.p__("files.zipdownload","error_general")).setLevel(li.a.LEVEL_ERROR))}))}).apply(null,e)})).catch(i.oe)}},{key:"handleFileSectionRequestSelection",value:function(e){for(var t=e.target,i=[],n=0;n<t.views.length;n++)t.views[n].file.visible&&i.push(t.views[n].file);this.selectFiles(i)}},{key:"handleKeyDown",value:function(e){var t=e.target||e.srcElement,i=e.which;if(!t||!t.type&&!m()(t).is("[contenteditable]")){var n=null;switch(i){case 32:case 73:this.gallery.settings.get(j.a.ENABLE_FILE_INFORMATION)&&(n=this.getFileUnderCursor())&&(e.preventDefault(),this.showFileMetaDialog(n));break;case 83:this.selectionEnabled&&(n=this.getFileUnderCursor())&&(e.preventDefault(),n.toggleSelection("userinput"));break;case 65:if(e.ctrlKey||e.metaKey){e.preventDefault();var o=[];this.files.each((function(e){!0===e.visible&&o.push(e)})),this.selectFiles(o)}break;case 48:case 49:case 50:case 51:case 52:case 96:case 97:case 98:case 99:case 100:if(this.gallery.settings.get(j.a.ENABLE_FLAGS)&&(n=this.getFileUnderCursor()))switch(e.preventDefault(),e.keyCode){case 48:case 96:te.a.setFileFlag(n,this.domain.uuid,se.a.NONE);break;case 49:case 97:te.a.setFileFlag(n,this.domain.uuid,se.a.RED);break;case 50:case 98:te.a.setFileFlag(n,this.domain.uuid,se.a.ORANGE);break;case 51:case 99:te.a.setFileFlag(n,this.domain.uuid,se.a.GREEN);break;case 52:case 100:te.a.setFileFlag(n,this.domain.uuid,se.a.FINAL)}break;case 68:if(e.ctrlKey||e.metaKey)e.preventDefault(),this.deactivatePresets();else if(this.gallery.settings.get(j.a.ENABLE_DOWNLOAD)&&this.gallery.status!==J.a.LIMIT_LOCKED&&(n=this.getFileUnderCursor())&&n.status!==Z.a.LIMIT_LOCKED){var a=te.a.generateDownloadURLSync(n.uuid,this.gallery.urlRel);$.default.triggerDownload(a)}break;case 9:this.userIsAdmin&&(e.preventDefault(),this.toggleSidebar())}}}},{key:"handleUploadSessionEnd",value:function(e){var t=this,i=e.get("session");this.settingsSavePending?this.dialogGallerySettings.isOpened()||(window.setTimeout((function(){window.location=t.gallery.urlRel}),2e3),this.settingsSavePending=!1):this.userIsOwnerOrAdmin&&!this.clientMode&&window.setTimeout((function(){return t.showUploadCompleteMessage(i)}),1500)}},{key:"handleRawPresetFilesUpdated",value:function(e){this.fileSelectionCache.set(e.target.getFiles())}},{key:"handleResize",value:function(){xe.a.getInstance().setThreshold(O.a.getHeight()),null!==this.viewHeaderImage&&this.viewHeaderImage.setImageSize(O.a.getWidth(),450),this.updateSidebarScrolling(),this.updateSectionWidth(),this.updateSubGalleriesWidth(),this.bumpFooter(),this.pdbox.resize(O.a.getWidth(),O.a.getHeight())}},{key:"handleScroll",value:function(){!1===this.animationFrameRequested&&(requestAnimationFrame(this.scrollAnimate.bind(this)),this.animationFrameRequested=!0)}},{key:"scrollAnimate",value:function(){var e=this.$ui.viewport.scrollTop();if(0!==this.scrollDelta&&(this.$ui.viewport.scrollTop(Math.max(e+this.scrollDelta,0)),this.scrollDelta=0,e=this.$ui.viewport.scrollTop()),null!==this.viewHeaderImage&&this.viewHeaderImage.updateParallax(e),e>this.sidebarFlowingOffsetTop-this.sidebarFixedMarginY?this.sidebarFixed||(this.$ui.sidebar.addClass("fixed"),this.$ui.sidebar[0].style.top="".concat(this.sidebarFixedMarginY,"px"),this.sidebarFixed=!0):this.sidebarFixed&&(this.$ui.sidebar.removeClass("fixed"),this.$ui.sidebar[0].style.top="",this.sidebarFixed=!1),this.viewPMEnterButton){var t=25,i=t;null!==this.viewSelectionMenu&&this.viewSelectionMenu.$spacer.is(":visible")&&0===this.$ui.subGalleriesContainer.length&&(i=this.viewSelectionMenu.$spacer.outerHeight()+t),t=e>this.pmExitButtonOffsetBottom?e-this.pmExitButtonOffsetBottom+i:i,this.viewPMEnterButton.$dom[0].style.bottom="".concat(t,"px")}this.animationFrameRequested=!1}},{key:"handleConnectionStateChanged",value:function(e){e?E.a.hasNotification("offline-notification")&&E.a.close("offline-notification"):E.a.hasNotification("offline-notification")||E.a.open((new li.a).setId("offline-notification").setContent(v.a.__("Your internet connection is lost.")).setDelay(2).setTimeout(null).setLevel(li.a.LEVEL_ERROR).setIsCloseable(!1))}},{key:"handlePageLeave",value:function(e){var t=null;if(this.uploader.status!==hi.a.STATUS_IDLE)t=v.a.p__("pageleave","message_upload_running");else if(this.gallery.settings.get(j.a.ENABLE_SELECTION)&&(null!==this.currentPreset&&this.currentPreset.status===p.a.STATUS_RAW&&this.currentPreset.numFiles>0&&(t=v.a.p__("pageleave","message_current_selection_unsaved")),null===t)){var i=[];if(this.presets.each((function(e){!0===e.modified&&e.numFiles>0&&i.push(e.name)})),0!==i.length){for(var n in i)""===i[n]&&(i[n]=v.a.p__("selection","name_unsaved_selection"));t=v.a.np__("pageleave","message_selections_unsaved",i.length,i.join(", "))}}if(null!==t)return e.preventDefault(),e.originalEvent.returnValue=t,t}}])&&jn(t.prototype,n),o&&jn(t,o),e}();i(49);r.a.initialize((function(){l()((function(){var e,t=u.a.get("gallery"),i=h.a.instantiate(u.a.get("domain")),n=d.a.instantiateFromExport(i,t),o=u.a.get("parentGallery")?d.a.instantiateFromExport(i,u.a.get("parentGallery")):null,a=u.a.get("presentationEnabledGallery")?d.a.instantiateFromExport(i,u.a.get("presentationEnabledGallery")):null,r=u.a.get("visitor"),s=r.user?new f.a(r.user):null;if(t.presets&&0!==t.presets.length){e=[];for(var l=0,v=t.presets.length;l<v;l++)e.push(new p.a(n,t.presets[l]))}var g=new Wn(i,n,o,a,s,e);c.a.define("gallery",n),c.a.define("page",g)}))}))}]);